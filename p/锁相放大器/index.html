<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head>
        
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="继 粉红噪声 后篇，这篇学习锁相放大器 (Lock-in Amplifier)，或者更具体一点，叫相敏检波器 (PSD, Phase Sensitive Detector)\n为了明白这个概念，举一个推秋千的例子。想象你是一个“相敏检波器 (PSD)”，你的任务是让秋千荡得越高越好（提取出信号）\n">
<title>锁相放大器</title>

<link rel='canonical' href='https://teaize.github.io/p/%E9%94%81%E7%9B%B8%E6%94%BE%E5%A4%A7%E5%99%A8/'>

<link rel="stylesheet" href="/scss/style.min.40de2c9146c99dd64cc79a5931e76b8a780c81a4bc700b87fdd9684436ee3dd3.css"><meta property='og:title' content="锁相放大器">
<meta property='og:description' content="继 粉红噪声 后篇，这篇学习锁相放大器 (Lock-in Amplifier)，或者更具体一点，叫相敏检波器 (PSD, Phase Sensitive Detector)\n为了明白这个概念，举一个推秋千的例子。想象你是一个“相敏检波器 (PSD)”，你的任务是让秋千荡得越高越好（提取出信号）\n">
<meta property='og:url' content='https://teaize.github.io/p/%E9%94%81%E7%9B%B8%E6%94%BE%E5%A4%A7%E5%99%A8/'>
<meta property='og:site_name' content='Coffity&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-12-09T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-12-09T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="锁相放大器">
<meta name="twitter:description" content="继 粉红噪声 后篇，这篇学习锁相放大器 (Lock-in Amplifier)，或者更具体一点，叫相敏检波器 (PSD, Phase Sensitive Detector)\n为了明白这个概念，举一个推秋千的例子。想象你是一个“相敏检波器 (PSD)”，你的任务是让秋千荡得越高越好（提取出信号）\n">
    <link rel="shortcut icon" href="/coffeelize.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_f1908d46b5afaca1.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🍥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Coffity&#39;s Blog</a></h1>
            <h2 class="site-description">吹灭读书灯，一身都是月</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/teaize'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/notes/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>Notes</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://teaize.github.io/" selected>中文</option>
                                
                                    <option value="https://teaize.github.io/en/" >English</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#场景设定">场景设定</a></li>
        <li><a href="#核心机制同步乘法">核心机制：同步乘法</a>
          <ol>
            <li><a href="#情况一完美的信号提取同步乘法生效">情况一：完美的信号提取（同步乘法生效）</a></li>
            <li><a href="#情况二噪声的过滤随机信号被抵消">情况二：噪声的过滤（随机信号被抵消）</a></li>
            <li><a href="#情况三相位的诅咒不同步会怎样">情况三：相位的诅咒（不同步会怎样？）</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#实际案例红外气体分析仪">实际案例：红外气体分析仪</a>
      <ol>
        <li><a href="#一-为什么要切物理约束">一、 为什么要“切”？（物理约束）</a></li>
        <li><a href="#二切光轮结构拆解">二、切光轮结构拆解</a>
          <ol>
            <li><a href="#1-切光轮本体">1. 切光轮本体</a></li>
            <li><a href="#2-光路截断">2. 光路截断</a></li>
            <li><a href="#3-同步信号发生器">3. 同步信号发生器</a></li>
          </ol>
        </li>
        <li><a href="#三-信号处理流程把直流变成交流">三、 信号处理流程（把“直流”变成“交流”）</a></li>
        <li><a href="#进阶玩法gfc-气体相关滤波">“进阶玩法”：GFC (气体相关滤波)</a></li>
      </ol>
    </li>
    <li><a href="#疑问解答">疑问解答</a>
      <ol>
        <li><a href="#第一步理解前提--光不是铁板一块">第一步：理解前提 —— 光不是“铁板一块”</a></li>
        <li><a href="#第二步解密吸无可吸">第二步：解密“吸无可吸”</a>
          <ol>
            <li><a href="#场景-1轮子转到测量室纯氮气-n_2">场景 1：轮子转到“测量室”（纯氮气 $N_2$）</a></li>
            <li><a href="#场景-2轮子转到参比室高浓度-co">场景 2：轮子转到“参比室”（高浓度 CO）</a></li>
          </ol>
        </li>
        <li><a href="#第三步那-i_ref-到底是测什么的">第三步：那 $I_{ref}$ 到底是测什么的？</a></li>
        <li><a href="#第四步最终的算术魔法">第四步：最终的算术魔法</a></li>
        <li><a href="#总结">总结</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/%E9%94%81%E7%9B%B8%E6%94%BE%E5%A4%A7%E5%99%A8/">锁相放大器</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-12-09</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>继 <a class="link" href="https://teaize.github.io/p/%E7%B2%89%E7%BA%A2%E5%99%AA%E5%A3%B0/"  target="_blank" rel="noopener"
    >粉红噪声</a> 后篇，这篇学习<strong>锁相放大器</strong> (Lock-in Amplifier)，或者更具体一点，叫相敏检波器 (PSD, Phase Sensitive Detector)</p>
<p>为了明白这个概念，举一个推秋千的例子。想象你是一个“相敏检波器 (PSD)”，你的任务是让秋千荡得越高越好（提取出信号）</p>
<h3 id="场景设定">场景设定
</h3><ol>
<li>信号 (Input Signal)： 坐在秋千上的孩子。
<ul>
<li>他有规律地<strong>荡来荡去</strong>。</li>
<li><strong>向前荡</strong>代表正电压 (+V)。</li>
<li><strong>向后荡</strong>代表负电压 (-V)。</li>
<li>这就是我们一直在说的交流信号 (AC)。</li>
</ul>
</li>
<li>噪声 (Noise)： 一群捣乱的风。
<ul>
<li>风一会儿从前吹，一会儿从后吹，完全没规律。</li>
</ul>
</li>
<li>参考信号 (Reference Signal)： 你的大脑指令（推还是拉）。
<ul>
<li>你的大脑里有一个节拍器，频率和秋千完全同步。</li>
<li>指令 +1（正指令）： 用力推。</li>
<li>指令 -1（负指令）： 用力拉。</li>
</ul>
</li>
</ol>
<h3 id="核心机制同步乘法">核心机制：同步乘法
</h3><p>所谓的“乘法”，在这里就是你的动作（<strong>参考信号</strong>）与秋千运动（<strong>输入信号</strong>）的相互作用。我们来看三种情况：</p>
<h4 id="情况一完美的信号提取同步乘法生效">情况一：完美的信号提取（同步乘法生效）
</h4><p>你想让信号变大（提取信号），你必须配合秋千的节奏。</p>
<ul>
<li>第一半周期（秋千向前荡 +）：
<ul>
<li>输入信号： 正 (+)（孩子向前冲）。</li>
<li>你的动作： 你的节拍器告诉你，现在是前半拍，指令是 推 (+)。</li>
<li>乘法运算： $(+) \times (+) = \mathbf{+}$ (获得正向的能量，秋千变高)。</li>
</ul>
</li>
<li>第二半周期（秋千向后荡 -）：
<ul>
<li>输入信号： 负 (-)（孩子荡回来了）。</li>
<li>你的动作： 你的节拍器告诉你，现在是后半拍，指令是 拉 (-)。
<ul>
<li>注意：这里是关键！你不是推，你是顺势往回拉。</li>
</ul>
</li>
<li>乘法运算： $(-) \times (-) = \mathbf{+}$ (负负得正！你顺着他回来的劲用力拉，秋千依然获得正向能量，变得更高)。</li>
</ul>
</li>
</ul>
<p>结果： 无论秋千是向前还是向后，因为你的动作（参考信号）总是和它<strong>同步反转</strong>，你做的每一次功都是<strong>正功</strong>。经过一段时间（积分），秋千荡得非常高（输出一个稳定的直流高电压）。</p>
<h4 id="情况二噪声的过滤随机信号被抵消">情况二：噪声的过滤（随机信号被抵消）
</h4><p>现在看看那阵乱吹的风（噪声）。</p>
<ul>
<li>第一回合：
<ul>
<li>风向前吹 (+)。</li>
<li>你的动作是 推 (+)。</li>
<li>结果：$(+) \times (+) = +$ (风帮你省力了，产生正能量)。</li>
</ul>
</li>
<li>第二回合：
<ul>
<li>风依然向前吹 (+)（因为风是随机的，没必要跟着你换方向）。</li>
<li>你的动作变成了 拉 (-)。</li>
<li>结果：$(+) \times (-) = \mathbf{-}$ (你和风对着干，抵消了能量)。</li>
</ul>
</li>
</ul>
<p>结果： 因为风（噪声）没有你的节拍器，它一会儿帮你，一会儿阻碍你。当你做 1000 次动作后，这些帮助和阻碍互相抵消，平均下来等于 <strong>0</strong>。</p>
<p>这就是“只选想要的频率，过滤掉所有其他频率”的物理本质。</p>
<h4 id="情况三相位的诅咒不同步会怎样">情况三：相位的诅咒（不同步会怎样？）
</h4><p>这也解释了为什么要有 “相位设置”。假设你的节拍器虽然频率对了（也是 1 秒一次），但是慢了半拍（相位差 90 度）。</p>
<ul>
<li>秋千已经荡到最高点准备往回落了（速度为 0），你才刚开始用力推。</li>
<li>秋千已经荡到最低点速度最快了，你却停手了。</li>
</ul>
<p>这时候，你做功的效率就会大打折扣，甚至有时候会起反作用（阻碍秋千）。 在仪表上，这就表现为：<strong>虽然有信号，但读数很小，甚至接近于 0。</strong></p>
<p>所以，工程师调校仪器，就是为了让你的“推拉节奏”和“秋千的摆动”<strong>严丝合缝（同频同相）</strong>，从而获得最大的推力（最大的输出信号）。</p>
<h2 id="实际案例红外气体分析仪">实际案例：红外气体分析仪
</h2><p>CEMS 机柜中的 CO 和 CO2 分析仪，它们通常用的是 <strong>非分散红外法 (NDIR)</strong>。</p>
<p>在老式或者经典的 NDIR 分析仪里，有一个核心的机械部件叫 <strong>切光轮</strong>（实际上，在电子调制技术（像脉冲氙灯那样直接开关灯）还不成熟，或者光源无法快速开关的年代，工程师们用纯机械的方式解决信号处理问题的杰作）。</p>
<h3 id="一-为什么要切物理约束">一、 为什么要“切”？（物理约束）
</h3><p>在讲结构之前，我们要先解决一个核心矛盾。</p>
<ul>
<li>红外光源的惰性： CEMS 用的红外光源通常是<strong>黑体辐射源</strong>（比如陶瓷加热棒、MEMS 热源）。 想象一个烧红的电炉丝，你能让它每秒钟开关 10 次吗？ 不能。 你断电了，它还要几秒钟才冷却。它的<strong>热惯性</strong>（Thermal Inertia）太大了，没法像氙灯那样做“电子脉冲”。它只能常亮。</li>
<li>探测器的“怪癖”： NDIR 最常用的探测器是热释电探测器 或 气动探测器 。 它们有一个致命的特性：**只对“变化”敏感。
<ul>
<li><strong>如果光强恒定（哪怕很强），探测器输出电荷会逐渐中和，输出信号归零</strong>。</li>
<li>只有光强发生跳变时，它才会输出一个尖峰电压。</li>
</ul>
</li>
</ul>
<p>矛盾出现了： 光源只能常亮（DC），但探测器只吃跳变信号（AC） —&gt; “既然灯关不掉，那我就用手挡住它！快点挡，快点松开！” —— <strong>这就是切光轮。</strong></p>
<h3 id="二切光轮结构拆解">二、切光轮结构拆解
</h3><p>一个典型的 NDIR 切光组件包含三个核心部分：</p>
<h4 id="1-切光轮本体">1. 切光轮本体
</h4><ul>
<li>材质： 通常是轻质铝合金或不锈钢，表面发黑处理（防止反光）。</li>
<li>形状： 像电风扇叶片。最简单的是半圆盘（50% 透光，50% 遮光）。</li>
<li>转速： 通常由一个无刷直流电机带动，转速极其稳定。频率通常设定在 10 Hz ~ 60 Hz 之间。
<ul>
<li>太慢了：避不开粉红噪声。</li>
<li>太快了：红外探测器反应慢，来不及响应。</li>
</ul>
</li>
</ul>
<h4 id="2-光路截断">2. 光路截断
</h4><ul>
<li>切光轮安装在 光源 和 气室/探测器 之间。</li>
<li><strong>状态 A（透光）：</strong> 叶片转走，红外光穿过样气，打在探测器上。
<ul>
<li>信号 = 气体吸收后的光强 + 背景杂散光 + 探测器热漂移。</li>
</ul>
</li>
<li><strong>状态 B（遮光）：</strong> 叶片挡住光路。探测器处于“黑暗”中。
<ul>
<li>信号 = <strong>切光轮自身的辐射</strong> + 背景杂散光 + 探测器热漂移。</li>
</ul>
</li>
</ul>
<h4 id="3-同步信号发生器">3. 同步信号发生器
</h4><ul>
<li>在切光轮的边缘，通常会开一个小孔，或者切光轮本身就是齿轮状的。</li>
<li>旁边装有一个 U 型光电开关。</li>
<li>轮子每转一圈，光电开关就输出一个方波脉冲。</li>
<li>作用： 这个方波直接发给 CPU，告诉 CPU：“现在是亮的时候！”或者“现在是暗的时候！”。这就是<strong>参考信号 (Reference Signal)</strong>。</li>
</ul>
<h3 id="三-信号处理流程把直流变成交流">三、 信号处理流程（把“直流”变成“交流”）
</h3><p>让我们看看探测器实际输出了什么波形，以及 PSD 是怎么处理的。</p>
<ol>
<li>原始光强 (Optical Input)：是一个方波。有光 -&gt; 无光 -&gt; 有光 -&gt; 无光。</li>
<li>探测器输出 (Detector Output)：由于探测器有热容（反应慢），它输出的不是完美的方波，而是像鲨鱼鳍一样的三角波/锯齿波。
<ul>
<li>光来了，电压慢慢爬升。</li>
<li>光断了，电压慢慢下降。</li>
</ul>
</li>
<li>锁相放大 (PSD Processing)：CPU 拿着光电开关给的“参考信号”，对探测器的“锯齿波”进行同步解调。$$\text{最终值} = (\text{爬升的峰值}) - (\text{下降的谷值})$$</li>
</ol>
<p>核心优势：假设探测器因为环境温度升高，产生了一个巨大的直流漂移（比如电压整体抬升了 5V）。</p>
<ul>
<li>爬升峰值变成了 5.1V。</li>
<li>下降谷值变成了 5.0V。</li>
<li>相减： $5.1 - 5.0 = \mathbf{0.1V}$。</li>
<li>结果： 那个 5V 的温漂被机械切光轮完美干掉了！</li>
</ul>
<h3 id="进阶玩法gfc-气体相关滤波">“进阶玩法”：GFC (气体相关滤波)
</h3><p>既然轮子都要转，“为什么只做挡光和透光？能不能干点更高级的？”于是诞生了 <strong>气体相关滤波轮 (Gas Filter Correlation, GFC)</strong>。这是 NDIR 抗干扰的终极武器。</p>
<p>切光轮上不再是空的，而是装了两个充满气体的透明小盒子：</p>
<ol>
<li><strong>测量室 (Measure Cell)：</strong> 里面充的是<strong>纯氮气 ($N_2$)</strong>。
<ul>
<li>作用：透光。红外光穿过去，被烟道里的样气吸收。这是“有信号”的状态。</li>
</ul>
</li>
<li><strong>参比室 (Reference Cell)：</strong> 里面充的是<strong>极高浓度的待测气体</strong>（比如 100% 的 CO）。
<ul>
<li>作用：“光学饱和”。</li>
<li>因为浓度太高，CO 对应的吸收波长的光被这个小盒子全部吃光了。</li>
<li>此时打到探测器上的光，已经不包含任何 CO 的信息了（因为那个频段已经黑了）。这相当于一个“特异性极强的物理挡板”**。</li>
</ul>
</li>
</ol>
<p>工作逻辑：</p>
<ul>
<li>轮子转到氮气格： 测得 $I_{meas}$（包含样气吸收信息）。</li>
<li>轮子转到 CO 格： 测得 $I_{ref}$（样气里的 CO 吸无可吸，因为光已经被小盒子吸干了，所以这个信号不受样气浓度影响，只受粉尘、光源衰减影响）。</li>
<li>计算： 通过对比这两个信号，不仅扣除了背景，还<strong>完美扣除了粉尘干扰</strong>和<strong>窗口污染</strong>。</li>
</ul>
<h2 id="疑问解答">疑问解答
</h2><blockquote>
<p>如何理解这句话：通过对比这两个信号，不仅扣除了背景，还完美扣除了粉尘干扰和窗口污染</p>
</blockquote>
<p>为了解开这个结，我们需要引入一个核心物理概念：“光谱指纹”与“饱和”。</p>
<h3 id="第一步理解前提--光不是铁板一块">第一步：理解前提 —— 光不是“铁板一块”
</h3><p>红外光不是单纯的一束白光，它像一条包含各种颜色糖果的传送带（光谱）。</p>
<ul>
<li><strong>糖果 A（特定波长）：</strong> 只有 CO 喜欢吃（比如 4.6 微米波段）。</li>
<li><strong>糖果 B（其他波长）：</strong> CO 根本不碰，只有灰尘（墨镜）会挡住它们。</li>
</ul>
<p>比尔定律的基础： 我们通过数“糖果 A 少了多少”，来算出 CO 有多少。</p>
<h3 id="第二步解密吸无可吸">第二步：解密“吸无可吸”
</h3><p>现在的场景是：光（传送带）先经过烟道（样气），再经过切光轮上的小盒子。</p>
<h4 id="场景-1轮子转到测量室纯氮气-n_2">场景 1：轮子转到“测量室”（纯氮气 $N_2$）
</h4><ul>
<li>设定： $N_2$ 啥都不吃。</li>
<li>过程：
<ol>
<li>传送带上有 100 颗“糖果 A”。</li>
<li>经过烟道（样气），样气里的 CO 比较少，偷吃了 20 颗。</li>
<li>经过 $N_2$ 盒子，没变化。</li>
<li>到达探测器： 收到 80 颗。</li>
<li>结论： 探测器发现少了 20 颗，算出样气里有 CO。</li>
</ol>
</li>
</ul>
<h4 id="场景-2轮子转到参比室高浓度-co">场景 2：轮子转到“参比室”（高浓度 CO）
</h4><ul>
<li>设定： 这个小盒子里塞满了高压 CO，它是超级大胃王，能把所有的“糖果 A”<strong>全部吃光</strong>，一颗不剩。</li>
<li>过程：
<ol>
<li>传送带上有 100 颗“糖果 A”。</li>
<li>阶段一（经过烟道）： 样气里的 CO 还是偷吃了那 20 颗。剩下 80 颗。</li>
<li>阶段二（经过 CO 盒子）： 剩下的 80 颗糖果 A 进入盒子。因为盒子里的 CO 浓度极高（饱和），它会把进来的所有“糖果 A”统统吃掉。</li>
<li>到达探测器： 收到 0 颗 “糖果 A”。</li>
</ol>
</li>
</ul>
<p>现在我们来做一个思想实验：如果样气里的 CO 浓度变高了，它在阶段一偷吃了 50 颗（而不是 20 颗），结果会怎样？</p>
<ul>
<li>阶段一： 100 颗 -&gt; 剩下 50 颗。</li>
<li>阶段二（CO 盒子）： 盒子里的超级大胃王把剩下的 50 颗统统吃掉。</li>
<li>到达探测器： 依然收到 0 颗 “糖果 A”。</li>
</ul>
<p>结论：无论样气里的 CO 偷吃了多少（是 0 颗、20 颗还是 50 颗），只要后面跟着一个“通吃”的参比室，最终到达探测器的“糖果 A”永远是 0。这就是为什么我说：<strong>$I_{ref}$ 信号不受样气中 CO 浓度的影响。</strong> 对于 CO 敏感的那个波段来说，光已经被彻底“拉黑”了，谁也改变不了结局。</p>
<h3 id="第三步那-i_ref-到底是测什么的">第三步：那 $I_{ref}$ 到底是测什么的？
</h3><p>你可能会问：“既然糖果 A 都是 0 了，那探测器读到的信号 $I_{ref}$ 是哪里来的？”别忘了传送带上还有 “糖果 B”（其他波长的光）！</p>
<p>CO 不吃糖果 B，所以糖果 B 会穿过样气，也会穿过 CO 盒子，最终打在探测器上。</p>
<p>这时候，灰尘（粉尘）的作用就显现了：灰尘是不挑食的，它像一块半透明的布，既挡糖果 A，也挡糖果 B。</p>
<ul>
<li>如果有灰尘： 糖果 B 的数量会减少（比如从 1000 减到 900）。</li>
<li>如果有光源老化： 糖果 B 的初始数量就会减少。</li>
</ul>
<p>所以，<strong>$I_{ref}$ 测量的是“除了 CO 吸收波段以外的背景光强”</strong>。</p>
<h3 id="第四步最终的算术魔法">第四步：最终的算术魔法
</h3><p>分析仪 CPU 做的是这样一个对比运算：$$浓度 \propto \frac{I_{meas} - I_{ref}}{I_{ref}}$$</p>
<ul>
<li>$I_{meas}$ (测量信号)：背景光 + 剩余 CO 波段的敏感光</li>
<li>$I_{ref}$ (参比信号)： 仅包含（背景光）。注：因为 CO 波段已经黑了，剩下的全是背景。</li>
<li>$I_{meas} - I_{ref}$ (差值)： 这代表 “样气到底吃掉了多少光”</li>
</ul>
<p>![[Pasted image 20251209232443.png]]</p>
<p>通过这个公式：</p>
<ol>
<li><strong>抵消干扰：</strong> 灰尘是非选择性吸收，无论光是“背景光成分”还是“CO 敏感光成分”，灰尘都一视同仁，统统挡掉一半。通过比值之后，抵消掉这个干扰</li>
<li><strong>提取浓度：</strong> 分子和分母的<strong>差值</strong>，正好就是“样气 CO 吃掉的那部分光”。</li>
</ol>
<h3 id="总结">总结
</h3><ul>
<li><strong>测量室（$N_2$）：</strong> 像一块透明玻璃。样气里的 CO 吃多少，我就能看到光少多少。</li>
<li><strong>参比室（高浓度 CO）：</strong> 像一块<strong>特定颜色的黑布</strong>（针对 CO 波段）。它强制把 CO 的波段“清零”。
<ul>
<li>既然已经强制清零了，样气之前吃没吃过这口光，对结果（0）没有影响。</li>
<li>它剩下的光，反映的是“光路脏不脏、灯泡亮不亮”。</li>
</ul>
</li>
</ul>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    <div id="gitalk-container"></div>
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"
/>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.18.0/js/md5.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: "Ov23liPkB211Cu82mYQR",
        clientSecret: "e6606e92a24b5bd34ea7a348491478ab478f5fad",
        repo: "teaize.github.io",
        owner: "teaize",
        admin: ["teaize"],
        distractionFreeMode: false, 
        id: md5(location.pathname), 
    });
    (function () {
        if (
            ["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1
        ) {
            document.getElementById("gitalk-container").innerHTML =
                "Gitalk comments not available by default when the website is previewed locally.";
            return;
        }
        gitalk.render("gitalk-container");
    })();
</script>



    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 Coffity
    </section>
    
    <section class="powerby">
        


    </section>
	
	
		<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
		<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
	
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
