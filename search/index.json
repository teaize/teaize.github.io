[{"content":" 紫外荧光当中，为了检测荧光灯老化，通常也会设计一个参考检测器，通过这个检测器，消除荧光灯老化的影响。那么这个检测器放在气室末端是否合适？\n变量解耦 分析仪的读数关系如下所示 $$\\text{最终读数} \\propto \\frac{\\text{主 PMT 信号 (Sample)}}{\\text{参考检测器信号 (Reference)}}$$\n将参考检测器放在气室末端看起来没什么问题。但仔细想想：\n参考检测器的作用？监测荧光灯老化，进行补偿，这点没问题 但是如果通入一定浓度气体，尽管荧光灯没老化，进入参考检测器的信号是不是也变弱了（被吸收了），也就是说参考检测器信号又和浓度扯上了关系 这就出现一个问题：我们最终的目的是求解浓度，但是求解方程式的另一端又引入了一个和浓度相关的变量 更具体一点来说，荧光检测的基本物理公式是：\n$$S = I_0 \\times C \\times k$$\n$S$：探测器测到的信号（结果） $I_0$：光的强度（干扰变量，不稳定的） $C$：气体浓度（目标变量，我们要测的） $k$：常数 目标是求出 $C$$$C = \\frac{S}{I_0 \\times k}$$ 核心思想就在这里： 为了解出 $C$，必须获得一个纯净的 $I_0$。\n这个 $I_0$ 必须包含光源所有的不稳定因素（老化、温度漂移、瞬时抖动）。 但这个 $I_0$ 绝对不能包含 $C$（气体浓度）的信息。 如果将参考检测器放在气室后：$I_{ref} = I_0 - \\text{被气体吸收的光}$。 这里的信号里混进了气体浓度 $C$。光强和浓度这两个变量纠缠在了一起。 如果在公式里除以这个 $I_{ref}$，你是除不干净的，甚至会引入非线性误差。\n所以要变量解耦，要剔除气体浓度对参考检测器的影响，也就是说，将检测器放在不包含样气通道的位置上，避开“气体”的干扰。\n选择什么位置 我们先来看一看光路中有哪些东西会“老化”。如果位置选错了，补偿就会失效。\n包含“滤光片”的老化 如果不放在滤光片之后： 假设你把参考检测器直接放在灯泡旁边。 灯泡亮度的衰减你监测到了。 但是，紫外线是非常猛烈的，长时间照射下，激发滤光片 也会老化（变浑浊、透过率下降，俗称“由于紫外线导致的途变/Solarization”）。 后果： 参考检测器觉得“光还挺亮”（因为灯没坏），但实际上透过滤光片后打到气体上的光已经很弱了。补偿算法会认为光强没变，导致测量结果偏低。 只有放在滤光片之后，参考检测器看到的才是真正用于激发气体的有效光强。\n避开“气体”的干扰 如上所说，需要变量解耦。推荐位置：激发滤光片之后，气室之前。\n通过安装一片 分束镜 (Beam Splitter) 或者 石英导光片，将经过滤光后的紫外光截取一小部分（例如 5% - 10%）反射给参考检测器，剩下的 90% 继续射入气室。\n$$\\text{紫外灯} \\rightarrow \\text{聚光透镜} \\rightarrow \\textbf{激发滤光片} \\rightarrow \\color{red}{\\textbf{分束镜}} \\rightarrow \\text{气室入口窗}$$\n在此处（红色位置）发生分流：\n主光路 (90%)： 直射入气室 $\\rightarrow$ 激发 $SO_2$ $\\rightarrow$ 产生荧光 $\\rightarrow$ 主光电倍增管 (PMT) 参考光路 (10%)： 反射/折射 $\\rightarrow$ 参考光电二极管（也就是参考检测器） ","date":"2025-12-17T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8F%98%E9%87%8F%E8%A7%A3%E8%80%A6/","title":"变量解耦"},{"content":"这里以二氧化硫紫外荧光分析仪为例。气室中存在两类光：\n激发光 (Excitation Light) —— 从灯泡射出来的紫外光（如 214nm），强度极大 荧光信号 (Fluorescence Signal) —— 气体分子发出的光（如 330nm），强度极弱，是我们真正想看的 光陷阱（Light Trap/Beam Dump） 光陷阱是给“激发光”准备的，它通常位于光源的正对面。\n目的尽可能多的吸收掉激发光，减少激发光的反射。激发光穿过气体后，剩下的光依然非常强。如果直接打在平坦的壁上反射回来，会形成巨大的杂散光背景。所以，必须在一个深深的黑洞（通常设计成牛角状，叫 Rayleigh Horn）里把它“吞噬”掉，不让它弹回来。\n这个吃光的结构，在光学工程里有一个非常经典的名字，叫 伍德号角 (Wood\u0026rsquo;s Horn)，有时也叫 瑞利号角 (Rayleigh Horn)，它是一个是一个弯曲的、渐细的牛角状结构\n![[Pasted image 20251217101922.png]]\n荧光信号 现在面临的问题是，如何处理荧光信号。\n这里需要有一个基本概念：荧光现象是各向同性的（Isotropic），当一个 $SO_2$ 分子被激发后，它发出的荧光（光子）是朝四面八方随机发射的，但通常探测器（PMT）只安装在气室的一侧。\n有两种策略：\n探测器只吸收直接的光，不吸收经过反射的荧光 探测器也吸收反射的荧光 探测器只吸收直接的光 也就是全黑设计\n设计： 气室内部全部做发黑处理（阳极氧化黑或黑色特氟龙），且设计有复杂的光阑（Baffles）和光陷阱。 原理： 任何打到墙壁上的光（无论是激发光还是荧光），统统吸收掉。 探测器只接收气体分子直接飞向探测器的那部分荧光。 优点： 背景噪声（Noise）极低，零点非常稳。 缺点： 信号强度（Signal）很弱，灵敏度低。 应用： 适合量程较大（ppm 级），或者光源功率非常强（如激光/强氙灯）的场合。 探测器也吸收反射的荧光 这里也有两种处理方法：镜面反射 OR 漫反射\n这里是用的漫反射，为什么？为了消除光斑不均匀的影响\n均匀化： 镜面反射会形成特定的光路，如果在某个角度恰好有一束强光反射进探测器，可能会导致局部饱和或对震动敏感。 积分效应： 漫反射材料（PTFE）会让光线在内部经历多次无序散射，相当于把整个气室变成了一个均匀发光的“灯泡”。这样，无论气体分子在气室的哪个角落发光，被探测器收集到的概率都比较接近。 就像在漆黑的楼道里，用手机打开手电筒照着楼梯（局部强亮光），和用手机手电筒照着楼道天花板的白色墙壁（漫反射，整个楼道都变亮了）\n那这里就用到高反设计\n设计： 气室侧壁用 烧结 PTFE（白色），但在光源对面依然保留黑色光陷阱。 原理： 对激发光： 用光陷阱吸收（必须要杀掉，不能乱反射）。 对荧光： 侧壁不仅不吸收，反而把背离探测器飞的荧光“弹”回来，赶进探测器。 优点： 信号强度暴增（通常能提高 5-10 倍），适合做痕量分析（ppb 级）。 缺点： 制造工艺难，如果光陷阱没设计好，反射壁会把杂散光也放大了。 应用： 现代高端环保监测（如 Thermo 43i, Teledyne T100）的主流方案，因为环保要求越来越严，需要测很低浓度的 $SO_2$。 信噪比最大化 激发光和荧光信号这种巨大的能量差异，决定了我们必须采用两套截然不同的策略：\n激发光 (Excitation) = “强干扰” (是噪音源，考虑杂散光抑制)，“斩尽杀绝” 荧光信号 (Fluorescence) = “弱信号” (是有效数据，考虑光收集效率)，“颗粒归仓” 很多初学者设计仪器时，往往只关注“怎么让信号更强”（加大光源功率），却忽略了“怎么让背景更黑”。 高水平设计的特征是： 与其把光源功率加大 10 倍（导致杂散光也大 10 倍，信噪比没变，还增加了热量），不如把光陷阱做得更深一点，或者把滤光片选得更好一点。\n只要把背景噪声压下去，哪怕信号很弱，也能测得非常准。这就是为什么在痕量分析（ppb 级）中，光陷阱的设计比光源的选择更体现水平。\n","date":"2025-12-17T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BF%A1%E5%99%AA%E6%AF%94-%E6%BF%80%E5%8F%91%E5%85%89%E4%B8%8E%E8%8D%A7%E5%85%89/","title":"信噪比-激发光与荧光"},{"content":"","date":"2025-12-16T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%B8%A6%E8%BD%BD%E5%90%AF%E5%8A%A8/","title":"带载启动"},{"content":"在 CEMS 和气体分析仪领域，气室通常形状复杂，且直接接触腐蚀性气体（如 $SO_2$, $NO_x$, $HCl$），因此对镀层的要求远高于普通机械零件\n为了让新手对镀层建立概念，接下来从为什么要镀、镀什么（工艺）、镀多厚（参数）以及如何向供应商提需求 ER}如何向供应商提需求这四个维度来拆解\n核心概念：为什么气室要镀层 普通的铝合金或不锈钢在特定环境下是不够用的。镀层的目的主要有三个：\n防腐蚀： 样气中往往含有水分和酸性气体（$H_2SO_4$, $HNO_3$）。铝合金气室一旦腐蚀，产生的盐类粉末会污染镜片，导致漂移。 惰性化/防吸附： 金属表面在微观上是粗糙多孔的，容易“抓”住气体分子（吸附）。这会导致测量响应变慢（拖尾）。镀层可以填平微孔，使表面更光滑、更惰性。 光学反射率： 对于红外（NDIR）或紫外（UV）分析仪，气室内壁往往充当光路的一部分。镀金或抛光镀镍可以提高光通量，提升信噪比。 除了反射光线，有的镀层的作用是用来吸收散射光（例如紫外荧光 $SO_2$） 关键工艺：电镀 vs. 化学镀 这是初学者最容易混淆的概念。对于分析仪气室，90% 的情况使用的是“化学镀镍”，而不是“电镀镍”。\n特性 电镀镍 (Electro-plating) 化学镀镍 (Electroless Nickel / ENP) 原理 依靠电流沉积金属。 依靠化学还原反应沉积金属（自催化）。 形状适应性 差。 电流有“尖端效应”，导致棱角处镀层厚，深孔/内腔（如气室内部）根本镀不上（法拉第笼效应）。 极好。 只要药水能流到的地方，镀层就一样厚。非常适合形状复杂的气室。 硬度与耐磨 较软。 硬度高，耐磨性好。 分析仪应用 仅用于外壳、接插件。 气室、流路块、阀体的首选工艺。 以后提到气室镀镍，请默认指代 化学镀镍，特别是 高磷化学镍（High-Phosphorus EN）。\n参数概念：镀多厚？（Thickness） 镀层厚度通常以 微米 ($\\mu m$) 为单位。厚度不是越厚越好，太厚会导致尺寸超差（螺纹拧不进）或镀层内应力过大导致开裂。\n在仪器仪表行业，常见的标准如下：\n$3 - 5 \\mu m$ (装饰/防变色)： 用于：仅为了铝材不氧化，或者外观好看。 分析仪应用：很少用于内部流路。 $10 - 15 \\mu m$ (中等防腐 - 行业标准)： 用于：大多数常规气体分析仪气室（如测量 $CO$, $CO_2$）。 特点：能保证镀层无针孔（Pore-free），起到良好的物理隔离作用。 $20 - 30 \\mu m$ (高防腐/耐磨)： 用于：测量腐蚀性气体（如高浓度 $SO_2$, $HCl$）或有机械摩擦的部件。 注意：做到这个厚度需要控制公差，设计时要预留余量。 除了镍，还有什么？ 除了化学镀镍，您在高端分析仪中还会遇到以下两种“镀层”：\n镀金（Gold Plating）： 应用： 红外气体分析仪（NDIR）的反射气室。 作用： 金对红外线的反射率极高，且化学性质极其稳定（不与任何酸反应）。 工艺： 通常先镀一层镍做底，再镀一层极薄的金（Flash Gold）。 钝化涂层（如 SilcoNert / Sulfinert）： 应用： 微量/痕量硫化物分析（如 ppb 级别的 $H_2S$）。 本质： 这不是传统的“镀”，而是化学气相沉积（CVD）的一层非晶硅。 作用： 极度的化学惰性，防止硫化物被吸附。如果您的分析仪响应时间慢，往往就是因为没有做这个处理。 如何向供应商提技术要求 如果您需要发图纸给加工厂，不能只写“表面镀镍”。为了显得专业并保证质量，可这样标注：\n1 2 3 4 5 6 表面处理：化学镀镍 1、材料：高磷镍 (High Phosphorus, P content \u0026gt; 10%) —— 注：高磷耐腐蚀最好，且无磁性。 2、厚度： $10 - 15 \\mu m$ 3、附着力：满足 ASTM B571 热震实验要求（不脱皮、不起泡）。 4、后处理：需进行热处理（烘烤）以去氢脆。 5、外观：气室内部光亮，无肉眼可见的麻点、漏镀。 扩展资料 如上所说，金对红外线的反射率极高（反射率\u0026gt;98%），但在紫外波段（尤其是 \u0026lt;400nm），金的反射率会断崖式下跌（像吸收体一样），不仅浪费光能，还会发热。\n那在紫外波段，推荐如何做呢：\n功能需求：漫反射 例如紫外荧光法（UV Fluorescence）测 $SO_2$ 的气室。推荐工艺： 烧结 PTFE 内衬 或 涂层 (如 Spectralon 类材料)\n注意：这里有两种处理思路：【1】高反设计：白色 PTFE 内衬，让 PMT 收集到尽可能多的荧光信号；【2】全黑设计：打到墙壁上的光都统统吸收掉。这里讲的是高反设计【1】\n原理： 在荧光分析中，我们不是要光“折射”，而是要光在气室里“均匀散射”，让探测器收集到尽可能多的荧光信号。 性能： 高纯度的烧结 PTFE （白色）在紫外波段的漫反射率可以达到 95% - 99%，远高于任何金属镀层。 化学优势： PTFE（特氟龙）本身就是“塑料王”，对 $SO_2, H_2S$ 等腐蚀性气体完全免疫，且不吸附，是 $SO_2$ 痕量分析的终极解决方案。 功能需求：镜面反射 适用场景： 需要光线像打在镜子上一样反射（如 NDUV 的反射镜、长光程池的端镜）。 推荐工艺： 真空蒸发镀铝 + 氟化镁 (MgF2) 保护膜\n为什么是铝？ 铝是全波段的“万金油”，它是唯一在 紫外 ($200 - 400 nm$) 到红外都有极高反射率（\u0026gt;90%）的金属。 为什么要加 MgF2？ 铝极易氧化，氧化铝在紫外区的吸收很大。必须在镀铝后立刻镀一层极薄的氟化镁 ($MgF_2$)。它不仅防氧化，还能在紫外区起到“增透/增反”的光学干涉作用，把紫外反射率拉高到 90% 以上。 缺点： 这种镀层通常是在光学玻璃上做的，耐腐蚀性不如实体金属强。如果是直接接触高腐蚀性样气，通常会把反射镜做在密封窗片（Window）的后面，不让它直接接触气体。 总结建议表 分析仪类型 波段 气室/部件功能 绝对禁止 推荐工艺 红外 (NDIR) IR 反射光线 阳极氧化铝 (吸红外) 镀金 (Gold Plating) 紫外 (NDUV) UV 镜面反射光路 镀金、镀银 镀铝 + $MgF_2$ 紫外荧光 ($SO_2$) UV 收集散射光信号 黑色阳极氧化 PTFE (烧结/涂层) 通用流路 - 仅传输气体，防腐 普通电镀镍 高磷化学镍 / 硅钝化 ","date":"2025-12-16T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E9%87%91%E5%B1%9E%E9%95%80%E5%B1%82/","title":"关于金属镀层"},{"content":"弄懂恒压源 (Constant Voltage, CV) 和 恒流源 (Constant Current, CC)，是从“只会接线”进阶到“能设计系统”的关键一步。\n其实，我们生活中接触的 99% 的电源都是恒压源，而恒流源通常隐藏在设备内部，专门服务于特定的器件。\n一、 恒压源 (CV)：生活中最熟悉的“老朋友” 1. 它的性格 “不管你怎么用水，我的水压永远不变。”\n定义：无论负载电阻 ($R$) 怎么变，输出端的电压 ($U$) 保持不变，电流 ($I$) 随负载需求自动变化。 公式：$U = \\text{Const}$，$I = U / R$。 例子：你家墙上的 220V 插座、手机充电器 5V、干电池 1.5V。 2. 水流比方 想象一个巨大的水库（恒压源）。\n你接一根细管子（大电阻），水流很小。 你接一根粗管子（小电阻），水流很大。 核心：不管你接什么管子，水库的水位高度（电压）是不会变的。 3. 应用场景 几乎所有给芯片供电的场合。\n单片机 (MCU)：必须稳定在 3.3V 或 5V，电压高了烧芯片，低了不工作。 电机：通常用恒压供电（速度通过 PWM 斩波来调，而不是直接调源电压）。 逻辑电路：TTL、CMOS 电平都需要稳定的电压轨。 二、 恒流源 (CC)：专治“坏脾气”的专家 1. 它的性格 “不管路有多难走，我必须保证每秒钟流过去的水量一样多。”\n定义：无论负载电阻 ($R$) 怎么变，输出端的电流 ($I$) 保持不变，为了维持这个电流，电压 ($U$) 会自动调整。 公式：$I = \\text{Const}$，$U = I \\times R$。 反直觉点：如果负载电阻 $R$ 变大，为了维持 $I$ 不变，恒流源必须拼命提高电压。 2. 水流比方 想象一个针筒注射器，有一个机械臂以恒定的速度推活塞。\n如果针头很粗（阻力小），推起来很轻松（电压低）。 如果针头堵住了（阻力大），机械臂会用力推，甚至把针筒压爆（电压飙升），只为了保证药液流出的速度不变。 3. 为什么需要它？（核心应用场景） 恒流源通常用于驱动那些对电流敏感，或者自身电阻会剧烈变化的器件。\n场景 A：驱动 LED (发光二极管) —— 最经典的应用 原因：LED 的亮度直接取决于电流，而不是电压。 风险：LED 是非线性器件。电压只要升高一点点（比如从 3.0V 到 3.2V），电流可能会翻倍！如果用恒压源驱动，随着 LED 发热，它的导通电压会下降，电流会进一步暴增，导致 “热失控” 烧毁。 解决：必须用恒流源。不管 LED 热了还是冷了，我都只给它 20mA，它就永远安全且亮度恒定。 例如二氧化硫紫外荧光分析仪当中，荧光灯锌（Zn）灯就是使用的恒流源。这类气体放电灯和 LED 一样，具有“负阻特性”或极陡峭的伏安特性。如果电压稍微升高一点点，电流就会暴增。\n场景 B：锂电池充电 (CC-CV 模式) 原因：当电池电量耗尽（比如 3.0V）时，如果你直接用 4.2V 的恒压源去充，压差太大 ($4.2 - 3.0 = 1.2V$)，电池内阻又极小，瞬间电流会巨大无比，电池会爆炸。 解决： 第一阶段 (CC)：先用恒流（比如 1A）慢慢充，此时电池电压会慢慢上升。 第二阶段 (CV)：等电池电压快到了（比如 4.15V），再切换成恒压充，直到电流慢慢降为 0。 场景 C：工业 4-20mA 传感器 (CEMS 系统里全是这个) 原因：工厂里的线缆可能长达几百米，导线本身有电阻。如果传输电压信号，到了终点电压就衰减了（$U_{end} = U_{source} - I \\times R_{wire}$）。 解决：传输电流信号。因为串联回路里，电流处处相等！不管导线是 10 米 还是 1000 米，恒流源发出的 4mA，到了接收端依然是 4mA。 三、总结 恒压源 (CV)：你是芯片、电机，你需要稳定的环境，我给你稳压。 恒流源 (CC)：你是LED、电池、远程传感器，你对电流敏感，或者由于电阻不稳定，我给你稳流。 在实际的实验室直流电源上，通常都有 CV 和 CC 两个灯。当你设置好电压（比如 5V）和限流（比如 1A）后：\n负载小，它是 5V 恒压源（CV 灯亮）。 负载短路或太大，它自动变成 1A 恒流源（CC 灯亮），保护电路不烧毁。 ","date":"2025-12-15T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%81%92%E6%B5%81%E6%BA%90%E4%B8%8E%E6%81%92%E5%8E%8B%E6%BA%90/","title":"恒流源与恒压源"},{"content":"普通的二极管防反接虽然简单，但有一个致命弱点：压降（约 0.7V）。 如果你是电池供电，这 0.7V 的损耗太心疼了；如果是大电流（比如 5A），发热就是 $0.7V \\times 5A = 3.5W$，甚至需要加散热片。\nPMOS 防反接电路 就是为了解决这个问题而生的，它能做到近乎零压降的保护。\n1. 核心原理图（注意这里反直觉！） 这是 PMOS 防反接最容易搞错的地方：它的接法和普通开关电路是“反”的（开关电源接法时，S 级接在电源端，这里是 D 级接在电源端）。在防反接电路中，我们利用了 PMOS 内部自带的 体二极管（Body Diode） 来辅助启动。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 [输入正极 Vin+] [输出 Vout+] | | +------------------+ +------------------+ | | | | | D (漏极) S (源极) | | +---------+ | | | PMOS | | | | (Q1) | | | +---------+ | | | G (栅极) | | | | | +--------+ | | | | | [R] (电阻 10k-100k) | | | | | [GND] | | | [输入地 GND] ---------------------------------- [输出地 GND] 关键连接点：\n输入电源 接 漏极 (Drain, D)。 负载/输出 接 源极 (Source, S)。 栅极 (Gate, G) 通过电阻接 地 (GND)。 体二极管方向：从 D 指向 S（正向）。 2. 工作原理详解 让我们把时间拆解成微秒级，看看上电瞬间发生了什么：\nA. 正确连接时（正常工作） 第一阶段：体二极管导通 刚插上电池时，PMOS 还没醒。电流顺着 PMOS 内部的 体二极管（从 D 到 S）流向负载。 此时输出电压 $V_{out} \\approx V_{in} - 0.7V$。 关键点：因为 $S$ 极有了电压（比如 11.3V），而 $G$ 极被电阻拉到了 GND（0V）。 第二阶段：MOS 管开启 此时，$V_{GS} = V_G - V_S = 0V - 11.3V = -11.3V$。 因为 $V_{GS}$ 变成了负值，且绝对值远大于开启阈值（$V_{th}$，通常是 -2V 左右），PMOS 完全导通。 第三阶段：低损耗运行 一旦 PMOS 导通，电流就会选择走 “低阻抗通道”（$R_{DS(on)}$，比如 $0.01\\Omega$）（也就相当于将直接 PMOS 直接短路了），而不走那条拥挤的体二极管通道。 结果：压降变得极小。$V_{drop} = I \\times R_{DS(on)} = 5A \\times 0.01\\Omega = 0.05V$。 对比二极管的 0.7V，这简直是完美的。 B. 反接时（保护生效） 输入变成了负压（或者地接正，正接地）。 体二极管处于反向截止状态，电流过不去。 $V_{GS}$ 状态：由于 $D$ 极电位低，$S$ 极没电，$G$ 极通过电阻接地。栅极和源极之间没有建立起足够的负压差（甚至 $P$），PMOS 保持 关断 (OFF)。 结果：电路完全切断，保护了后级电路。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 [输入端 Vin] [输出端 Vout] (接了电池负极 -12V) (期望是 0V) | | | D (漏极) = -12V | S (源极) = 0V +---------------------------------------+ | | 体二极管 (Body Diode) | | __|__ (截止!) | | / \\ \u0026lt;-- 也就是 D指向S | | /_____\\ 但此时 D是负压 | | | S是0V | | | 所以二极管不通! | | | | | MOS沟道 (Channel) | | __|__ (关闭!) | | \\ / \u0026lt;-- Vgs = 0V | | \\ / 不够开启电压 | | | | +----------+----------------------------+ | | G (栅极) | | | +-------+ | | | [R] (电阻) | | | | [输入端 GND] ------------+---------------- [输出端 GND] (接了电池正极 0V) 为什么它能“防反接”？（两道关卡）\n第一关：体二极管被“反向截止” 结构：PMOS 的体二极管方向是 D $\\rightarrow$ S。 现状： D 极（漏极）：接了 -12V。 S 极（源极）：接了负载（0V）。 判定：二极管的阳极（D）电压 小于 阴极（S）电压。 结果：二极管处于反向偏置状态，路不通！电流没法通过二极管流过去。 第二关：MOS 管沟道“打不开” 开启条件：PMOS 需要 $V_{GS} \u0026lt; V_{th}$ (比如 -2V) 才能导通。即 G 极电压要比 S 极电压低很多。 现状： G 极（栅极）：通过电阻 R 接到了输入 GND（也就是电池正极，0V）。所以 $V_G = 0V$。 S 极（源极）：因为二极管不通，负载没电，所以 $V_S \\approx 0V$。 判定：$$V_{GS} = V_G - V_S \\approx 0V - 0V = 0V$$ 结果：$V_{GS}$ 是 0，完全没达到开启阈值。MOS 管处于关断 (Cut-off) 状态，沟道也是断的。 注意事项 栅极耐压保护（必加 Zener 齐纳二极管） 如果你的输入电压是 24V。\n正常导通时，$V_{GS} \\approx -24V$。 危险：绝大多数 PMOS 的栅极只能承受 $\\pm 20V$。这一上电，MOS 管的栅极就击穿了。 对策：必须在 G 和 S 之间并联一个 10V~15V 的稳压二极管，并在 G 极回路串联一个限流电阻。 核心要点总结：\n【反常规接法】：输入电源接 D，负载接 S。（利用体二极管辅助启动，导通后走低阻沟道）。 【R1 (100k) 关门弹簧】：跨在 G-S 间。没电时把 G 和 S 拉平，保证 MOS 管死死关住，不误导通。 【R2 (10k) 保镖电阻】：串在 G-GND 间。当输入电压过高（如 24V），稳压管动作时，R2 负责承担多余电压，限制电流，防止稳压管烧毁。 【Z1 稳压管】：防止 Vgs 超过 20V 把 MOS 栅极击穿。 ","date":"2025-12-14T00:00:00Z","permalink":"https://teaize.github.io/p/pmos%E9%98%B2%E5%8F%8D%E6%8E%A5%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1/","title":"PMOS防反接电路设计"},{"content":"在 P-MOS 作为一个高边开关（High-Side Switch）（即放在电源和负载之间）时，栅极（G）和源极（S）之间并联的那个电阻 $R_{GS}$，通常被称为“上拉电阻”或“泄放电阻”**。\n一、 G-S 之间电阻 ($R_{GS}$) 的作用 1. 确保默认“关断”状态（防误触） 这是最根本的原因。\n原理：P-MOS 是 $V_{GS} \u0026lt; 0$（即栅极电压低于源极电压）时导通。要让它关断，必须使 $V_G = V_S$（即 $V_{GS} = 0$）。 危险场景：当驱动 P-MOS 的控制信号（比如单片机引脚或前级三极管）处于 高阻态（High-Z）（例如单片机刚上电复位、还没初始化时），栅极是悬空的。 后果：MOS 管的栅极极其灵敏，悬空的栅极会感应周围的静电或干扰，导致 $V_G$ 飘忽不定。如果 $V_G$ 碰巧飘得比 $V_S$ 低，P-MOS 就会意外导通。 想象一下，你一上电，还没控制呢，电机就狂转，或者设备就误动作了，这是非常危险的。 电阻的作用：$R_{GS}$ 像一根强力的弹簧，把栅极电位强行“拉”到和源极（电源电压）一样高。只要你没给控制信号，它就死死地锁在“关断”状态。 2. 积存电荷的“泄放通道” MOS 管的栅极寄生电容（$C_{GS}$）很大。当你撤销驱动信号想关断它时，栅极里存的电荷需要流走，电压才能升上去。\n$R_{GS}$ 提供了一条物理通道，帮助电荷泄放，加快关断速度（虽然在大电流驱动电路中，主要靠驱动器吸走电荷，但这个电阻提供了最后的保障）。\n二、驱动电平匹配问题（最常见！） 新手最容易犯的错：用 3.3V/5V 单片机直接驱动 12V/24V 电源上的 P-MOS。\n错误做法：P-MOS 源极接 12V，栅极直接接单片机 IO 口。 后果： 单片机输出低电平（0V）：$V_{GS} = 0 - 12 = -12V$，P-MOS 导通。（正常） 单片机输出高电平（3.3V）：$V_{GS} = 3.3 - 12 = -8.7V$，P-MOS 还是导通的！（因为 $V_{GS}$ 依然小于阈值电压）。 无法关断：你根本关不掉这个开关。 正确做法：必须加一个 NPN 三极管 或 N-MOS 作为“前级驱动”来进行电平转换。利用小管子拉低 P-MOS 的栅极，关断时靠 $R_{GS}$ 拉高。 三、栅极耐压保护（$V_{GS(max)}$ 限制） MOS 管的栅极非常脆弱，绝缘层很薄。\n数据手册：大多数 P-MOS 的 $V_{GS}$ 最大承受电压是 $\\pm 20V$。 危险：如果你的电源电压是 24V 或 48V。 当你把栅极拉到地（0V）导通时，$V_{GS} = 0 - 24 = -24V$。 结果：栅极氧化层瞬间击穿，P-MOS 永久损坏（短路）。 对策： 电阻分压：不要直接拉到地，利用两个电阻分压，让栅极电压只下降一半（比如 12V）。 稳压二极管：在 G 和 S 之间并联一个 10V~15V 的稳压二极管（Zener），强行限制 $V_{GS}$ 的幅度。 小结 一个标准的 P-MOS 开关电路通常长这样：\n电源 $\\rightarrow$ S 极。 $R_{GS}$ (10k-100k) $\\rightarrow$ 跨接在 G 和 S 之间（负责默认关断）。 $R_{limit}$ (限流电阻) $\\rightarrow$ 串联在 G 极回路中。 稳压二极管 $\\rightarrow$ 并联在 G-S 之间（如果电源 \u0026gt; 20V）。 控制端 $\\rightarrow$ 使用 NPN 三极管拉低栅极，而不是 MCU 直驱。 ","date":"2025-12-14T00:00:00Z","permalink":"https://teaize.github.io/p/pmos%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E8%AE%BE%E8%AE%A1/","title":"PMOS开关电源设计"},{"content":" 问题：质控仪输出固定 NO 浓度的气体，对于仪表 A，流速是一个值；对于仪表 B，流速是另一个值，那 PMT 产生的信号强度是一样的，还是根据流速不同是不一样的\nPMT 产生的原始信号强度（光子数/电流值），本质上是和单位时间内进入反应室的 NO 分子总数（Mass Flow Rate / 质量流量）有关。\n原理剖析 我们要看化学发光反应的微观过程： $$NO + O_3 \\rightarrow NO_2^* + O_2$$ $$NO_2^* \\rightarrow NO_2 + h\\nu \\text{ (光子)}$$\n在这个反应室里，有一个关键的前提条件：臭氧 ($O_3$) 是过量的。这意味着，每一个进入反应室的 $NO$ 分子，都会被“抓住”并发生反应，产生一个光子（理想情况下）。\nPMT 是一个计数器，它统计的是“每秒钟有多少个光子打在我的脸上”。\n浓度 (Concentration, C)： 比如 200 ppb，意思是每 10 亿个气体分子里有 200 个 NO。这只是一个“比例”。 流速 (Flow Rate, Q)： 比如 1 L/min，意思是每分钟有多少气体跑进来。 PMT 信号 (Signal, I)： $$I \\propto \\text{每秒反应掉的 NO 分子数}$$ $$I \\propto \\text{浓度 (C)} \\times \\text{流速 (Q)}$$ 为什么流速对 CEMS 如此重要？ 这也解释了为什么化学发光法分析仪对流量控制和压力控制要求极高。\n限流孔 (Critical Orifice) 的作用： 你会发现每一台 NO 分析仪的反应室入口前，都有一个极小的孔（宝石喷嘴或玻璃毛细管）。 它的作用就是锁死流速。 如果这个孔脏了、堵了，流速变小了。 后果： 即使标气浓度没变，进入反应室的 NO 分子数少了，PMT 信号就会变弱，导致读数偏低。 反应室压力 (Chamber Pressure) 的影响： 通常反应室是负压的。如果真空泵衰减，负压变小（压力升高）。 一方面：气体密度变大，单位体积分子数变多（信号变大）。 另一方面：猝灭效应 (Quenching) 增强（光子被撞没了，信号变小）。 这之间有个复杂的平衡，但总之，流速和压力的波动都会直接改变 PMT 的原始信号。 引入泵的因素 在现场中，经常会发现有的泵接了两台分析仪（用于给分析仪提供动力）。在这种情况下校准了仪器；然后过了一段时间，泵只接一台分析仪，只给一台分析仪提供动力，此时再通同样浓度的标气，分析仪显示的示数却不同了\n核心原因：泵的“特性曲线” 所有的泵（无论是隔膜泵、旋片泵还是活塞泵），其输出能力都不是恒定的。它们都遵循一条P-Q 曲线（压力 - 流量曲线）。\n双机模式（接两台）： 泵同时拖两个负载。此时管路总阻力较小（因为是并联），但需要的总流量大。 泵工作在 “低真空度（或低压力）、大流量” 的状态。 假设此时供给每台仪器的有效压力差是 $\\Delta P_1$，对应的流速是 $Q_1$。 你在这个状态下进行了校准，告诉分析仪：“当流速是 $Q_1$ 时，这个电流对应 200 ppm。” 单机模式（接一台）： 你拔掉了一台，堵死了那个接口。 泵的负载突然变轻了（或者说气路阻力特性变了）。 根据泵的曲线，当流量需求减半时，泵能够提供的真空度（或压力）会显著升高。 此时，剩余那台仪器面临的压力差变成了 $\\Delta P_2$（且 $|\\Delta P_2| \u0026gt; |\\Delta P_1|$）。 后果： 压力差变大，导致流过这台仪器的实际气体流速 $Q_2$ 变大了。 深度细节：临界流 (Critical Flow) 的失效 你可能会问：“分析仪内部不是有限流孔吗？它不是应该能锁住流速吗？”\n理论上，只要真空度达到一定阈值（比如 -40 kPa 以下），气体通过小孔的速度就会达到声速，此时流速应该恒定，不再随真空度的加深而增加。这就是“临界流”原理。但现实中为什么还会变？\n“伪”临界流： 在接两台仪器时，泵可能比较吃力，真空度可能只有 -35 kPa。此时并未完全达到临界流条件。流速依然受压力波动影响很大。 当变成一台时，真空度瞬间抽到 -60 kPa，进入了真临界流，或者流速进一步提升。从“非饱和”到“饱和”，流速肯定变了。 压力侧的影响（如果泵在前端）： 如果你的泵是用来推气（正压输送）的，那就更明显了。 少了一路泄压，所有的压力都灌进剩下那一路，流速必然暴涨，读数必然飙升。 反应室压力的变化： 抽力变大，不仅影响流速，还会让反应室内部的绝对压力降低。 压力低 $\\to$ 分子密度低 $\\to$ 读数偏低。 流速快 $\\to$ 分子总数多 $\\to$ 读数偏高。 这两个效应会“打架”，但通常流速的影响占主导。 解决方案与建议 下策（凑合用）： 保持现在的“单机模式”。 立刻重新校准。 让仪器重新记住现在这个新流速下的电流对应关系。 隐患：如果哪天你又把另一台接回来了，读数又会不准。 中策（欺骗泵）： 如果不接第二台仪器，可以在那个空出来的接口上接一个一个针阀，调节它的开度，人为制造一个“假负载”漏气。【或者接一个同样大小的限流孔更省事】 调整针阀，直到真空表读数恢复到接两台仪器时的水平。 这样可以维持原有的流速平衡。 上策（系统设计）： 一机一泵。 这种并联共用动力源的设计，本身就是 CEMS 里的大忌。 因为一旦一台仪器管路堵塞或断开，会直接通过压力耦合影响另一台仪器的读数。为了省一个泵的钱，牺牲了整个系统的可靠性，得不偿失。 ","date":"2025-12-14T00:00:00Z","permalink":"https://teaize.github.io/p/pmt%E4%BF%A1%E5%8F%B7/","title":"PMT信号"},{"content":" 在使用比较器时，可能会遇到颤振的问题，通常的做法是在比较器的输出端接一个电阻到他的同相输入端，给他的输入端一个正反馈，这样就可以避免颤振问题。 —\u0026gt; 简单来说，这就一个人拿不定主意时，请求另一个人帮忙做决定，然后通过这个人的反馈后，就更加坚信了自己该如何做选择了\n在工程上有一个响亮的名字，施密特触发器 (Schmitt Trigger)，或者叫 带迟滞功能的比较器 (Comparator with Hysteresis)\n1. 为什么要加？（没有电阻时的“纠结”） 想象一下，你设定了一个 2.5V 的基准电压（门槛），去检测一个传感器的电压。\n问题：现实中的信号总是有噪声的（毛刺）。当输入信号刚好慢慢爬升到 2.5V 附近时，可能上一微秒是 2.501V（高），下一微秒因为干扰变成了 2.499V（低），再下一微秒又变成 2.501V。 后果：比较器非常灵敏，它会忠实地跟着跳变。结果输出端就会在“高”和“低”之间疯狂切换（颤振）。如果后面接的是继电器，继电器会“哒哒哒”乱响直到烧坏；如果是单片机，可能会计数错误。 2. 加了电阻后发生了什么？（迟滞效应） 当你把 输出端 通过一个电阻接回 同相输入端 (+) 时，奇迹发生了：门槛（阈值）变了，而且是会动的！\n这就是 正反馈 的核心机制：\n当输出是高电平时：输出的高电压通过电阻“拉高”了同相输入端的基准电压。 潜台词：“想让我变低？你得把电压降得更低才行。”（比如门槛从 2.5V 变成了 2.6V）。 当输出是低电平时：输出的低电压通过电阻“拉低”了同相输入端的基准电压。 潜台词：“想让我变高？你得把电压升得更高才行。”（比如门槛从 2.5V 变成了 2.4V）。 3. 一个生活的例子：空调（最经典的迟滞） 没有迟滞（傻瓜模式）： 设定 25 度。气温 25.01 度 -\u0026gt; 开机；气温 24.99 度 -\u0026gt; 关机。 结果：空调压缩机一秒钟开关十次，立马报废。 有迟滞（正反馈模式）： 设定 25 度。 制冷时：一口气降到 23 度（下门槛）才停机。 升温时：一直等到热到 27 度（上门槛）才重新启动。 结果：中间的 23~27 度 是“安全区”，在这个区域里怎么波动，空调都不动作，这就消除了“颤振”。 4. 硬件设计细节 在电路图中，通常涉及两个电阻：\n输入电阻 ($R_1$)：连接基准电压（Vref 也就是参考电压）和同相输入端。 反馈电阻 ($R_f$)：连接输出端和同相输入端（就是你说的那个电阻）。 这两个电阻组成了分压器，决定了“迟滞电压”（Hysteresis Band）有多宽。\n$R_f$ 越小，反馈越强，迟滞窗口越宽（抗干扰越强，但灵敏度下降）。 $R_f$ 越大，反馈越弱，迟滞窗口越窄。 小结 手段：引入正反馈（输出接电阻回同相输入端）。 目的：制造迟滞（Hysteresis）。 效果：消除因噪声引起的输出颤振。 ","date":"2025-12-14T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%AF%94%E8%BE%83%E5%99%A8%E9%A2%A4%E6%8C%AF%E9%97%AE%E9%A2%98/","title":"比较器颤振问题"},{"content":"在电流低端检测电路中，如果检测很小的电流，输入失调电压 ($V_{os}$) 往往是决定测量精度的“头号杀手”\n关于 $V_{os}$ 什么是 $V_{os}$ (Input Offset Voltage) 定义（书本版） 当运放的两个输入端（+ 和 -）完全接地（电位相同）时，理论上输出应该是 0V。但实际上，输出端总会有一个非零电压。为了让输出强行变成 0V，你必须在输入端反向加上的那个微小补偿电压，就是 $V_{os}$。\n工程师的直观理解（模型版） 你可以把 $V_{os}$ 想象成运放内部自带了一个捣乱的干电池，它串联在运放的输入端。\n即使外部没有信号，这个“内部电池”也会一直产生电压。 运放分不清哪个是你要测的信号，哪个是这个电池的电压，它会把它们加在一起放大。 为什么在“电流检测”中它很致命？ 在低端检测中，我们通过测量采样电阻（$R_{sense}$）上的压降来算电流。\n$$V_{sense} = I \\times R_{sense}$$\n悲剧的场景推演：假设你要测 10mA 的小电流，为了减小功耗，你选了 0.1Ω 的电阻。\n有效信号：$V_{signal} = 0.01A \\times 0.1\\Omega = 1mV$。 运放误差：假设你用了一个普通的运放（比如 LM358），它的 $V_{os}$ 大约是 2mV。 结果： 运放看到的总输入 = $1mV \\text{ (信号)} + 2mV \\text{ (误差)} = 3mV$。 误差高达 200%！ 你根本分不清这是电流产生的，还是运放自己产生的。 这就是为什么对于小电流检测，$V_{os}$ 必须被严肃对待。\n如何处理这个问题？ 1. \u0026quot; 钞能力 \u0026quot; 法 —— 选用低失调运放（最推荐） 既然普通运放不行，那就换好的。\n普通运放 (General Purpose)：如 LM358。$V_{os} \\approx 3mV$。（此时不能用） 精密运放 (Precision)：如 OP07。$V_{os} \\approx 75\\mu V$。 零漂移/斩波运放 (Zero-Drift / Chopper)：这是终极武器。 如 ADA4528, OPA333, SGM8953（国产）。 它们的 $V_{os}$ 可以低至 1\\mu V 甚至更低。 原理：这种运放内部有一个自动校准电路，每秒钟自动校准几千次，把 $V_{os}$ \u0026quot; 切碎 \u0026quot; 并扔掉。 建议：在电流检测电路中，直接选用 Zero-Drift (斩波) 运放是性价比最高的解决方案，省去了复杂的校准工作。\n2. \u0026quot; 大力出奇迹 \u0026quot; 法 —— 增大采样电阻 ($R_{sense}$) 如果不想换贵的运放，那就想办法把信号变大。\n做法：把 0.1Ω 的电阻换成 1Ω。 效果：10mA 电流产生的压降变成了 10mV。 对比：此时 2mV 的 $V_{os}$ 带来的误差从 200% 降到了 20%。 代价：功耗增加，发热增加。满量程大电流流过时，电阻可能会烧烫，且压降过大可能影响负载供电。 3. \u0026quot; 软件补丁 \u0026quot; 法 —— 软件校准 (Calibration) 如果你必须用便宜的运放，也没法增大电阻，那就靠单片机来补。\n做法： 出厂归零（去皮）：在电流为 0 时，读取 ADC 的数值（这个值就是 $V_{os}$ 放大后的结果）。 存储：把这个偏差值存在 EEPROM 里。 运算：每次测量时，实际结果 = 读取结果 - 偏差值。 缺点：$V_{os}$ 是会随温度漂移的（温漂）。你在 25°C 校准了，到了 60°C，偏差值变了，测量又不准了。 非理想特性 实际上，理想元件不存在，真实元件总带点“毛病”。这也是为什么精密仪器即使什么都不测，开机也得先“归零（Zeroing）”或“校准（Calibration）”的原因\n第一类：明明没给输入，它却有输出 —— “零点偏置” (Zero Offset) 这和运放的 $V_{os}$ 是一模一样的亲兄弟。\n传感器（重灾区） 现象：你买一个电子秤（压力传感器），上面什么都没放，它却显示 0.05g。你买一个陀螺仪，放在桌上纹丝不动，读数却显示它在以 0.1度/秒 的速度旋转。 术语：零点漂移 (Zero Offset / Zero Drift)。 原因：传感器内部的微机械结构（MEMS）或惠斯通电桥不可能做得完全对称。 ADC（模数转换器） 现象：你把 ADC 的输入端短路接到地（0V），你期望读出来的数字是 0000，但实际读出来可能是 0003。 术语：失调误差 (Offset Error)。 原因：ADC 内部比较器的不匹配。 第二类：明明关断了，它却在偷偷导电 —— “漏电流” (Leakage) 理想情况下，断开就是断开，电阻无穷大。但现实中，没有绝对的绝缘。\n二极管 / 三极管 / MOS 管 现象：你把二极管反接截止了，理应没有电流。但实际上，总会有微安（uA）甚至纳安（nA）级的电流偷偷流过去。高温下这个电流还会翻倍。 术语：反向漏电流 ($I_R$) 或 关断漏电流 ($I_{DSS}$)。 影响：这就是为什么电池供电的设备，关机放一年电池也会没电。 电容 现象：你给电容充饱了电，拔掉电源放在那儿。理论上电荷应该永远存着，但过几天它就没电了。 术语：自放电 或 绝缘电阻 (Insulation Resistance)。 本质：电容内部相当于并联了一个很大的电阻（几百兆欧），一直在偷偷放电。 第三类：明明没通电，它却在“吵闹” —— “热噪声” (Thermal Noise) 这个最神奇，属于物理定律层面的“偏置”。\n电阻 现象：拿一个电阻放在桌子上，两头接上示波器（假设示波器精度无限高），你会发现电阻两端竟然有微小的电压波形在乱跳！哪怕你根本没给它通电。 术语：约翰逊噪声 (Johnson Noise)。 原因：只要温度高于绝对零度，电阻内部的电子就会做热运动，这种无规则运动就产生了电压噪声。 影响：这是精密信号测量的物理极限，你永远无法消除，只能通过降温（比如液氮冷却）来减小。 工程师的应对哲学 既然这种“自带偏置”无法避免（因为是制造工艺和物理定律决定的），工程师们是怎么解决的呢？通常有三板斧：\n硬件上“差分” (Differential)： 既然大家都有偏置，那我就用两路一样的电路。假设都有 +0.1V 的误差，那我用 $A - B$，误差就相减抵消了。这是差分放大电路的核心思想。 软件上“校准” (Calibration)： 出厂校准：生产时先测出这个误差（比如 +2mV），写进芯片里。以后每次读数都自动减去 2mV。 上电自校准：现在的万用表、电子秤，开机时都会自检一下零点，把你说的那个“自带偏置”当成当前的“0”。 工艺上“配对” (Matching)： 在芯片制造时，如果需要两个电阻一样，就把它们画得挨得很近，形状一模一样。虽然它们都不准，但它们“不准的程度”是一样的，这样在电路里也能用。 ","date":"2025-12-14T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%BF%90%E6%94%BE%E8%BE%93%E5%85%A5%E5%A4%B1%E8%B0%83%E7%94%B5%E5%8E%8B/","title":"运放输入失调电压"},{"content":"这两个概念并不是物理上真的发生了短路或断路，而是基于运放的理想特性推导出来的“等效状态”。\n前置条件：必须是“负反馈” 在讲之前，必须强调一个绝对前提： “虚短”原则只存在于运放工作在线性区（即接了负反馈）的时候。\n如果运放是开环工作（做比较器），或者接了正反馈（做触发器），那么“虚短”是不成立的！\n虚短 (Virtual Short) 一句话解释： 两个输入端的电压相等，就像它们被短路了一样，但其实没连在一起。\n1. 现象 即：同相输入端电压 = 反相输入端电压。$$V_+ = V_-$$\n2. 为什么会有这个现象？ 这得益于运放的开环增益 ($A_{vo}$) 无穷大。\n公式：$V_{out} = A_{vo} \\times (V_+ - V_-)$ 推导：$(V_+ - V_-) = V_{out} / A_{vo}$ 现实：运放的开环增益通常在 10 万 到 100 万倍以上。 结论：即使输出 $V_{out}$ 是 10V，输入端的压差 $(V_+ - V_-)$ 也只有 $10V / 100,000 = 0.0001V$。 工程视角：0.0001V 对于我们来说就是 0。所以我们认为 $V_+$ 和 $V_-$ 的电位是死死咬合在一起的。 比喻：想象运放是一个超级灵敏的平衡大师（负反馈机制）。只要 $V_-$ 比 $V_+$ 低那么一丁点，输出端就会疯狂输出高电压，通过反馈电阻把 $V_-$ 拉高，直到 $V_-$ 和 $V_+$ 持平。\n从物理本质看为什么 $V_-$ 会自动等于 $V_+$？ 从物理本质和控制过程来看，“虚短”其实是一个动态的、暴力的、实时的自我调节过程，是“负反馈”机制强行制造出来的结果\n以最经典的反相放大器为例，假设 $V_+$ 接地（0V），$V_-$ 还没接地时：\n扰动开始： 假设你给输入端来了一个微小的电压，让 $V_-$ 稍微升高了 0.1V（此时 $V_- \u0026gt; V_+$）。 运放察觉： 运放内部的差分放大器瞬间察觉到了这个偏差：$V_+ - V_- = -0.1V$。 暴力反应（核心物理过程）： 因为运放增益极大（比如 100 万倍），它会想：“该死，反相端竟然高了！我要把输出端狠狠地往下拉！” 于是输出端 $V_{out}$ 瞬间输出一个巨大的负电压趋势（试图达到 $-0.1V \\times 100万 = -100kV$）。 负反馈生效： 但是！输出端通过 反馈电阻 $R_f$ 连回了 $V_-$。 当输出端 $V_{out}$ 猛烈下降时，它通过电阻 $R_f$ 把 $V_-$ 的电位也死命往下拉。 达到平衡： $V_-$ 被拉低了，直到它被拉回到和 $V_+$ 几乎一样的 0V 为止。 一旦 $V_-$ 降到 0V，运放觉得“没有偏差了”，就不再继续往下拉输出电压了，系统稳定下来。 物理结论：\n“虚短”的本质，是运放利用巨大的输出能量，通过反馈电阻这条“绳子”，强行把 $V_-$ 拽到了和 $V_+$ 一样的水平线上。只要这根绳子（负反馈）还在，运放就会一直实时调整输出，维持这个平衡。\n条件 存在负反馈回路【减少 V+ 和 V- 差距的就是负反馈，增大这种差异的就是正反馈】 Vout 的输出不能饱和 例如下面这张图，假设运放的电源为 5V，如果 Vin 进来 1V，运放就算饱和输出了，也只能输出到 5V。但是通过反馈回路，V- 最多也只能分压达到 0.5V。反过来，要想 V+=V-，那么运放的输出端就不可能刚好输出饱和，否则 V+ 和 V- 就不能相等了 虚断 (Virtual Open) 一句话解释： 两个输入端没有电流流进去，就像引脚内部断路了一样。\n1. 现象 即：运放的输入引脚不吃电流。$$I_+ = 0, \\quad I_- = 0$$\n例如在分析 V- 处的电压时，可以忽略运放对 V- 的影响 2. 为什么会有这个现象？ 例如下面这张电路图，10M 电阻对于前端的这两个电阻网络来说，加不加它，对于整个电路来说其实没什么影响。那就可以简单认为 10M 这块是一个断路状态 这得益于运放的输入阻抗 ($R_{in}$) 无穷大。\n公式：$I = U / R$ 现实：运放（尤其是 CMOS 工艺的）输入阻抗通常是 兆欧 ($M\\Omega$) 甚至 吉欧 ($G\\Omega$) 级别的。 结论：流进引脚的电流通常是纳安 (nA) 甚至皮安 (pA) 级别的。 工程视角：这点电流对电路分流影响极小，我们可以直接忽略，认为电流根本进不去。 运放的两个输入端就像是电压表的探针，只负责“感知”电压，绝不“消耗”电流。\n工程师经验 在分析任何线性运放电路时，可按这个三板斧流程走\n先找 $V_+$：看同相端接了什么电压。 用虚短：强行让 $V_- = V_+$，列出第一个方程。 用虚断：针对 $V_-$ 节点列写 KCL（基尔霍夫电流定律） —— “流进来的电流 = 流出去的电流”，因为没有电流流进运放肚子。 ","date":"2025-12-14T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%BF%90%E6%94%BE%E8%99%9A%E7%9F%AD%E5%92%8C%E8%99%9A%E6%96%AD/","title":"运放虚短和虚断"},{"content":" 曾经翻网站翻博客找半天的答案，在 Gemini 的加持下，五分钟搞定\n第一步：创建 Mermaid 的渲染钩子 这个步骤是为了告诉 Hugo：当遇到语言标记为 mermaid 的代码块时，不要高亮代码，而是将其包装在一个 div 中，以便 JavaScript 库进行渲染。\n在你的 Hugo 站点根目录下（注意不是在 themes 目录里），找到或创建 layouts 文件夹。 建立如下目录结构和文件： layouts/_default/_markup/render-codeblock-mermaid.html 在该文件中粘贴以下代码： 1 2 3 4 \u0026lt;div class=\u0026#34;mermaid\u0026#34;\u0026gt; {{ .Inner | safeHTML }} \u0026lt;/div\u0026gt; {{ .Page.Store.Set \u0026#34;hasMermaid\u0026#34; true }} 第二步：引入 Mermaid JavaScript 库 我们需要将 Mermaid 的核心 JS 脚本注入到页面底部。hugo-theme-stack 主题预留了自定义页脚文件的位置。\n在站点根目录下，创建文件： layouts/partials/footer/custom.html (如果该文件已存在，直接在里面追加代码即可) 在该文件中粘贴以下代码： 1 2 3 4 5 6 7 8 9 10 {{ if .Page.Store.Get \u0026#34;hasMermaid\u0026#34; }} \u0026lt;script type=\u0026#34;module\u0026#34;\u0026gt; import mermaid from \u0026#39;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs\u0026#39;; mermaid.initialize({ startOnLoad: true, theme: \u0026#39;base\u0026#39;, // 或者 \u0026#39;default\u0026#39;, \u0026#39;forest\u0026#39;, \u0026#39;neutral\u0026#39; securityLevel: \u0026#39;loose\u0026#39;, }); \u0026lt;/script\u0026gt; {{ end }} 大功告成！\n","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/hugo%E6%B8%B2%E6%9F%93mermaid/","title":"Hugo渲染Mermaid"},{"content":"Python 代码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 import pandas as pd import numpy as np import matplotlib.pyplot as plt from scipy.fft import fft, fftfreq from scipy.signal import find_peaks # ========================================== # 【配置区域】请修改这里的信息 # ========================================== # 1. 文件路径 (注意：Windows路径请用反斜杠 / 或 双斜杠 \\\\) FILE_PATH = \u0026#39;sensor_data.csv\u0026#39; # 举例: \u0026#39;D:/data/test_01.xlsx\u0026#39; # 2. 你要分析的那一列的表头名称 (Excel第一行的名字) COLUMN_NAME = \u0026#39;Voltage\u0026#39; # 举例: \u0026#39;NOx_ppm\u0026#39; 或 \u0026#39;AI_01\u0026#39; # 3. 采样率 (Hz): 每秒采集多少个点？ # 警告：这个数字错了，分析出来的频率全都是错的！ FS = 1000.0 # 举例: 100Hz, 1000Hz # ========================================== # 代码逻辑开始 # ========================================== # 设置绘图风格和字体 plt.rcParams[\u0026#39;font.sans-serif\u0026#39;] = [\u0026#39;SimHei\u0026#39;] plt.rcParams[\u0026#39;axes.unicode_minus\u0026#39;] = False plt.style.use(\u0026#39;bmh\u0026#39;) # 使用一种比较专业的科研绘图风格 def load_and_analyze(): # --- 1. 读取数据 --- try: print(f\u0026#34;正在读取文件: {FILE_PATH} ...\u0026#34;) if FILE_PATH.endswith(\u0026#39;.csv\u0026#39;): df = pd.read_csv(FILE_PATH) elif FILE_PATH.endswith((\u0026#39;.xls\u0026#39;, \u0026#39;.xlsx\u0026#39;)): df = pd.read_excel(FILE_PATH) else: print(\u0026#34;错误：只支持 .csv 或 .xlsx 格式文件\u0026#34;) return # 检查列名是否存在 if COLUMN_NAME not in df.columns: print(f\u0026#34;错误：在文件中找不到列名 \u0026#39;{COLUMN_NAME}\u0026#39;\u0026#34;) print(f\u0026#34;文件包含的列名有: {list(df.columns)}\u0026#34;) return # 提取数据并转为 numpy 数组 # dropna() 是为了防止空值报错 data_raw = df[COLUMN_NAME].dropna().values print(f\u0026#34;成功读取 {len(data_raw)} 个数据点\u0026#34;) except FileNotFoundError: print(\u0026#34;------------------------------------------------------\u0026#34;) print(f\u0026#34;【没找到文件】: {FILE_PATH}\u0026#34;) print(\u0026#34;为了演示效果，我将自动生成一段带 50Hz 干扰的模拟数据...\u0026#34;) print(\u0026#34;------------------------------------------------------\u0026#34;) # 生成模拟数据 (如果没找到文件) N_sim = 2000 t_sim = np.linspace(0, N_sim/FS, N_sim) # 真实信号(2Hz) + 工频干扰(50Hz) + 随机噪声 data_raw = 2.0 + 0.5*np.sin(2*np.pi*2*t_sim) + 0.2*np.sin(2*np.pi*50*t_sim) + np.random.normal(0, 0.1, N_sim) # --- 2. 预处理 (去直流/去偏移) --- # FFT 对直流分量(0Hz)非常敏感，如果不减去平均值，0Hz的柱子会通天高， # 导致你看不清后面的干扰。 data_detrend = data_raw - np.mean(data_raw) # --- 3. 执行 FFT --- N = len(data_detrend) yf = fft(data_detrend) xf = fftfreq(N, 1 / FS) # 取前半部分 (正频率) x_plot = xf[:N//2] y_plot = np.abs(yf[:N//2]) * 2 / N # --- 4. 自动抓鬼 (寻找峰值) --- # 寻找频谱中显著的尖峰 (高度超过最大值的 10%) peaks, _ = find_peaks(y_plot, height=np.max(y_plot)*0.1) print(\u0026#34;\\n【诊断报告】\u0026#34;) print(\u0026#34;-\u0026#34; * 30) print(\u0026#34;发现潜在干扰源 (能量Top 5):\u0026#34;) # 对峰值按高度排序 peak_indices = peaks[np.argsort(y_plot[peaks])[::-1]][:5] for i in peak_indices: freq_val = x_plot[i] amp_val = y_plot[i] # 忽略接近 0Hz 的低频 (那是信号本身) if freq_val \u0026gt; 1.0: print(f\u0026#34;-\u0026gt; 频率: {freq_val:.1f} Hz (强度: {amp_val:.4f})\u0026#34;) if 48 \u0026lt; freq_val \u0026lt; 52: print(\u0026#34; [警报] 疑似工频干扰 (电源/接地问题)\u0026#34;) elif 98 \u0026lt; freq_val \u0026lt; 102: print(\u0026#34; [警报] 疑似整流纹波 (电源板滤波电容问题)\u0026#34;) # --- 5. 绘图 --- fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(12, 10)) # 图1: 时域 (原始波形) # 为了防止数据量太大卡死，只画前 1000 个点预览 preview_N = min(1000, N) time_axis = np.arange(preview_N) / FS ax1.plot(time_axis, data_raw[:preview_N], \u0026#39;k-\u0026#39;, linewidth=1) ax1.set_title(f\u0026#34;原始信号波形 (仅显示前 {preview_N} 点)\u0026#34;, fontsize=14) ax1.set_xlabel(\u0026#34;时间 (s)\u0026#34;) ax1.set_ylabel(\u0026#34;幅值\u0026#34;) # 图2: 频域 (FFT 结果) ax2.plot(x_plot, y_plot, \u0026#39;r-\u0026#39;, linewidth=1) # 标记出找到的干扰峰 ax2.plot(x_plot[peaks], y_plot[peaks], \u0026#39;bx\u0026#39;, label=\u0026#39;检测到的峰值\u0026#39;) ax2.set_title(\u0026#34;频谱分析 (FFT Spectrum) - 干扰侦查\u0026#34;, fontsize=14) ax2.set_xlabel(\u0026#34;频率 (Hz)\u0026#34;) ax2.set_ylabel(\u0026#34;干扰强度\u0026#34;) ax2.set_xlim(0, FS/2) # 只显示到奈奎斯特频率 ax2.legend() plt.tight_layout() plt.show() if __name__ == \u0026#34;__main__\u0026#34;: load_and_analyze() 这段代码做了三件贴心的事：\n自动识别格式： 支持 .csv 和 .xlsx (Excel)。 自动去直流 (Detrend)： 很多传感器数据有一个固定的电压底数（比如 2.5V），如果不去掉，0Hz 的能量会特别大，把干扰信号淹没。代码会自动把数据“拉平”到 0 基准线。 自动抓鬼 (Peak Detection)： 不仅画图，还会自动打印出能量最大的前 3 个频率点（告诉你干扰到底是多少 Hz）。 你的准备工作 你需要知道三个信息：\n文件路径： 你的数据文件放在哪？(例如 D:/data/sensor_log.csv) 列名： 哪一列是你要分析的数据？(例如 voltage 或 concentration) 采样率 (Fs)： 当时是以什么速度采的？(例如 1 秒 1 个点就是 1Hz，1 秒 100 个点就是 100Hz)。这个必须准，否则算出来的频率是错的。 程序输出 1 2 3 4 5 6 7 8 9 正在读取文件: cems_fault_data.csv ... 成功读取 5000 个数据点 【诊断报告】 ------------------------------ 发现潜在干扰源 (能量Top 5): -\u0026gt; 频率: 2.0 Hz (强度: 0.4991) -\u0026gt; 频率: 50.0 Hz (强度: 0.1984) [警报] 疑似工频干扰 (电源/接地问题) ","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/python%E8%84%9A%E6%9C%AC-%E6%9C%AC%E5%9C%B0csv%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/","title":"Python脚本-本地CSV快速傅里叶变换"},{"content":"美国 Teledyne API 的 T100U 型二氧化硫分析仪性能优化介绍如下：\n光学快门与参考探测器：使用光学快门和参考探测器来补偿光电倍增管的漂移和紫外灯强度的变化，确保长期稳定性。 氢碳干扰抑制器（Kicker）：内置氢碳干扰抑制器，减少氢碳类气体对测量的干扰，提高选择性。 电子噪声校正：利用紫外光源的亮暗阶段，持续检测和校正电子噪声，增强仪器的稳定性和灵敏度。 这里涉及到仪器设计的核心权衡（Trade-off）：在“完美精度”与“成本/复杂度”之间寻找平衡点。仪器里几乎所有东西都在老化：电阻会漂、电容会漏液、滤光片会霉变、泵膜会变硬等等，如果给每个部件都设计一套“补偿回路”，这台仪器将造价上百万，且极其复杂以至于无法维修。\n那么，如何决定谁值得被补偿，而谁可以被忽略的呢，这主要遵循以下四大判据：\n判据一：处于“信号链的最前端”吗？（权重最高） 这是最重要的原则。误差在源头会被放大，在末端会被缩小。\n必须要补偿的：光源 (Source) 和 探测器 (Detector) 理由： 它们处于信号链的最上游。 光源（如紫外灯）： 根据比尔定律 $I = I_0 \\cdot e^{-kc}$，光源强度 $I_0$ 是公式的基准。如果灯亮暗波动 1%，最终浓度的误差可能就是 10% 甚至更多（取决于吸光度）。 探测器（如 PMT）： 它是把光变成电的第一步。它的增益（Gain）对温度和高压极其敏感。 设计： 所以我们看到了参考探测器（补偿灯）、光学快门（补偿 PMT 暗电流）、温控模块（补偿光路变形）。 可以忽略的：后级放大电路的电阻电容 理由： 主板上的 ADC 前面的运放电阻，虽然也会老化（温漂），但现在的精密电阻温漂只有 10ppm/°C。相对于 PMT 动不动 10% 的漂移，电阻这 0.001% 的误差完全是“大巫见小巫”，可以忽略不计。 判据二：老化是“快变量”还是“慢变量”？ 我们要看这个老化的时间尺度，是“秒级/分钟级”，还是“月级/年级”。\n必须要补偿的：快变量 (Fast Drift) 例子： 温度对半导体激光器 (TDLAS) 波长的影响。 特征： 只要环境温度变 0.1°C（几秒钟的事），激光波长就跑偏了，测不到气体了。 设计： 必须上 TEC (半导体制冷器) 进行毫秒级的实时闭环控制补偿。 可以忽略（交给标定）：慢变量 (Slow Drift) 例子： 滤光片 (Optical Filter) 的透光率下降、气路管壁的轻微吸附增加。 特征： 这种变化是按“月”发生的。 设计： 不需要做硬件补偿。 解决方案： 定期校准 (Calibration)。 为什么让你每周通一次“标气”？其实通标气就是在软件上一次性把这些“慢速老化”的部件误差全补回来（重新计算斜率 $K$ 和截距 $B$）。 判据三：是否具有“可预测的物理模型”？ 如果这个老化是有规律的（遵循物理公式），我们就能用软件（数学）补偿；如果是随机的，就必须加硬件。\n用软件补偿：气体密度受温度/压力的影响 原理： 理想气体状态方程 $PV=nRT$。 设计： 我们不需要把气室做成恒压的（硬件成本高），我们只需要装一个便宜的压力传感器。 算法： 测到压力变了，直接套公式 $C_{new} = C_{old} \\times (P_0/P)$ 算回去就行。这叫 P/T 补偿。 必须用硬件补偿：PMT 的灵敏度衰减 原理： PMT 的衰减是量子层面的，非常玄学，没法写出一个通用的数学公式说“使用了 100 小时衰减 1%”。 设计： 既然算不出来，就必须加参考光路去实时“盯着”它测。 判据四：成本与寿命的博弈 (Cost-Benefit) 有些部件老化了，补偿它的成本比换一个新的还贵，那就选择“耗材化”**。\n不补偿，直接换：蠕动泵管、过滤器滤芯 泵管老化会导致流量下降。理论上，你可以加一个昂贵的“质量流量计 (MFC)”来实时调节泵的转速以补偿流量。 决策： 但一个 MFC 要 5000 块，一根泵管才 50 块。 结果： 还可以用的时候就凑合用（流量波动通常不影响浓度测量原理），用坏了就报警让你换。 不补偿，直接用：转子流量计 玻璃管上的刻度其实会因为脏污而看不清，或者浮子磨损导致读数不准。 决策： CEMS 对流速要求不高（只要有气就行），所以不需要补偿，只要看到浮子在飘就行。 总结：设计师的“补偿决策矩阵” 当审视一台分析仪时，可以按这个逻辑去看：\n部件老化特性 影响程度 变化速度 决策方案 典型例子 源头、非线性 致命 (Fatal) 快 (分/秒) 硬件实时补偿 光源参考探测器、PMT 快门、激光器温控 物理规律明确 显著 (Significant) 中 (小时/天) 软件算法补偿 压力补偿、温度补偿 (P/T Comp) 线性、缓慢 一般 (Moderate) 慢 (周/月) 定期标定 (校准) 滤光片老化、光路积灰、传感器灵敏度漂移 机械磨损 轻微 (Minor) 慢 (月/年) 定期更换 (维护) 泵管、密封圈、滤芯 电路元件 极微 (Negligible) 极慢 (年) 忽略 电阻电容、PCB 板材 所以，“忽略”并不是真的不管，而是因为它的变化太慢，已经被“每周校准”这个操作给覆盖掉了；或者它的变化太快且无规律，被“硬件参考路”给抵消掉了。\n","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%A1%A5%E5%81%BF%E5%8E%9F%E5%88%99/","title":"补偿原则"},{"content":"通常我们认为：如果你的尺子最小刻度是 1mm，你就绝对读不出 0.1mm 的长度。 但在信号处理里，我们能！ 只要你的手“抖”得够均匀。\n这是一个非常反直觉，但却让电子工程师为之着迷的魔法，叫做 “过采样技术” (Oversampling)。\n一、 核心原理：为什么平均能增加精度？ 假设你有一个 10 位的 ADC，它的电压测量范围是 0~5V。\n最小刻度 (LSB)： $\\approx 5\\text{mV}$。 现状： 只要电压在 3.000V 到 3.004V 之间，ADC 读出来的数永远是 3.000V。你丢失了小数点后的精度。 1. 静态测量（失败） 如果你测一个 3.002V 的真实信号。\n第 1 次测：3.000V 第 100 次测：3.000V 平均值： 3.000V。 结论： 无论你平均多少次，精度没变，还是丢失了 0.002V。 2. 动态测量（过采样成功！） 现在，我们在信号上叠加一点白噪声（或者信号本身自带噪声），让信号在 3.002V 上下抖动，抖动幅度大约 5mV。这就意味着，信号有时候会瞬间跳过 3.0025V 这个门槛（ADC 四舍五入的边界）。\n真实情况： 信号在抖动，有 40% 的概率跳到了 3.005V 以上（被 ADC 读作 3.005V），有 60% 的概率在下面（被 ADC 读作 3.000V）。 测量 10 次的结果： 3.000, 3.000, 3.005, 3.000, 3.005, 3.000, 3.005, 3.000, 3.000, 3.005 (6 个 3.000，4 个 3.005) 算平均值：$$\\frac{(6 \\times 3.000) + (4 \\times 3.005)}{10} = \\mathbf{3.002V}$$ 见证奇迹：虽然你的 ADC 每次只能读 3.000 或 3.005，但通过平均，你竟然算出了 3.002V 这个本来读不出来的数值！\n这就是过采样的本质：利用噪声（抖动），把“看不见的小数位”转化为了“出现的概率”，再通过统计平均把它还原出来。\n二、 那个“4 倍 = 1 位”的公式是怎么来的？ 这里有一个非常漂亮的数学推导（信噪比公式）。\n信号 (Signal) 的累加特性： 如果你把 4 个样本相加。信号是同相位的（直流或慢变信号）。 总信号强度 = $4 \\times S$。 噪声 (Noise) 的累加特性： 白噪声是随机的（不相关）。统计学告诉我们，随机噪声相加，不是线性增加，而是按平方根增加。 总噪声强度 = $\\sqrt{4} \\times N = 2 \\times N$。 信噪比 (SNR) 的变化：$$\\text{新的SNR} = \\frac{\\text{总信号}}{\\text{总噪声}} = \\frac{4S}{2N} = 2 \\times \\frac{S}{N}$$ 结论： 采样次数翻 4 倍，信噪比翻 2 倍。 位数的含义： 在二进制里，翻 2 倍 = 增加 1 位 (1 bit)。 比如：二进制 11 (3) $\\to$ 左移一位/乘 2 $\\to$ 110 (6)。 最终公式： 想要增加 $w$ 位分辨率，需要的过采样倍数 $f_{os}$ 是：$$f_{os} = 4^w$$ 增加 1 位 (分辨率翻倍)： 需要 $4^1 = 4$ 倍采样。 增加 2 位 (分辨率 x4)： 需要 $4^2 = 16$ 倍采样。 增加 3 位 (分辨率 x8)： 需要 $4^3 = 64$ 倍采样。 增加 4 位 (分辨率 x16)： 需要 $4^4 = 256$ 倍采样。 三、 一个必须满足的“坑”：抖动 (Dithering) 你可能注意到了，我刚才强调了一个前提：必须有噪声。如果你的信号非常非常干净，就像一潭死水，完全不抖动（或者噪声小于 0.5 LSB）。\n那么无论你采多少次，读数永远是固定的。平均值也变不了。 这时候，过采样失效。 工程师的骚操作： 在高端仪器设计中，如果信号太干净，我们甚至会故意人为注入一点白噪声（这一步叫 Dithering / 抖动），然后再进行过采样。\n第一步： 加噪声（把信号弄脏）。 第二步： 快速采样（捕捉概率）。 第三步： 求平均（把噪声滤掉，同时提取出高精度信号）。 这就像为了把地扫干净，先把灰尘扬起来再吸走一样，听起来疯狂，但非常有效。\n四、案例代码 我们可以用几行 Python 代码来验证这个“4 倍定律”。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 import numpy as np # 1. 设定真实电压 (这是上帝视角，ADC不知道) true_voltage = 3.14159 # 我们想测出小数点后5位 adc_resolution = 1.0 # ADC只能分辨整数 (0, 1, 2, 3, 4...) # 2. 模拟单次测量 (1000次) # 如果没有噪声，np.round(3.14159) 永远是 3.0 measurements_raw = np.round(np.full(1000, true_voltage)) print(f\u0026#34;单次测量平均值 (无噪声): {np.mean(measurements_raw)}\u0026#34;) # 结果: 3.0 (误差巨大) # 3. 模拟过采样 (加入噪声 + 平均) # 增加 4 位分辨率 -\u0026gt; 需要 4^4 = 256 倍过采样 n_samples = 256 noise_level = 0.5 # 噪声必须足够跨越量化台阶 # 进行 100 组实验 results = [] for _ in range(100): # 模拟采集 256 个点，每个点都带有随机噪声 samples = true_voltage + np.random.normal(0, noise_level, n_samples) # 模拟 ADC 的量化过程 (强制变成整数) digitized_samples = np.round(samples) # 过采样核心：求平均 avg_result = np.mean(digitized_samples) results.append(avg_result) print(f\u0026#34;过采样({n_samples}倍)测量平均值: {np.mean(results):.4f}\u0026#34;) # 结果通常是: 3.14xx (非常接近真实值！) 程序输出\n1 2 单次测量平均值 (无噪声): 3.0 过采样(256倍)测量平均值: 3.1372 小结 过采样 (Oversampling) 是用“时间换精度”的策略。 代价： 你的 ADC 速度要非常快。 为了得到 1 个高精度的 10Hz 数据，你可能需要让 ADC 以 2560Hz 的速度狂奔。 公式： $4^n$。每多采 4 倍，分辨率加 1 位。 灵魂： 噪声 (Noise)。在这里，噪声不是敌人，而是帮我们“撬开”精度大门的助攻手。 思考🤔 这和前面讲的调制与解调非常的相似\n","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E8%BF%87%E9%87%87%E6%A0%B7/","title":"传感器过采样"},{"content":"本篇继 [[信号处理之输出控制]] 后，从理论到实战\n应用过程可以分为三步走：硬件闭环搭建 $\\rightarrow$ 软件核心代码 $\\rightarrow$ 定时调度。\n第一步：硬件闭环搭建 PID 是一个闭环控制，你的硬件必须形成一个圆。\n感知层 (Input)：PT100 $\\to$ STM32 难点： PT100 是电阻变化，STM32 的 ADC 只能测电压。而且 PT100 变化很微弱（0.385$\\Omega$/°C）。 方案 A (推荐)： 使用专用芯片 MAX31865。它能直接读 PT100 电阻并通过 SPI 接口告诉 STM32 温度值，精度极高，省去模拟电路设计的麻烦。 方案 B (省钱)： 电桥电路 + 运算放大器 $\\to$ STM32 ADC 引脚。 执行层 (Output)：STM32 $\\to$ 加热棒 难点： STM32 的 GPIO 只有 3.3V/20mA，带不动 220V 或 24V 的加热棒。 方案： 使用 PWM (脉冲宽度调制) 控制。 直流加热棒： GPIO $\\to$ MOSFET (场效应管) $\\to$ 加热棒。 交流加热棒 (220V)： GPIO $\\to$ SSR (固态继电器) $\\to$ 加热棒。 控制原理：比如 PID 算出输出 50%，你就让 PWM 占空比为 50%（通电 0.5 秒，断电 0.5 秒）。 第二步：软件核心代码 这是你最关心的部分。我们需要把 Python 里的类变成 C 语言的结构体和函数。\n这里有一份可以直接用在 STM32 上的标准 PID 代码模板（带抗饱和功能）：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 #include \u0026#34;main.h\u0026#34; // 1. 定义 PID 对象结构体 typedef struct { // --- 参数 (调参用) --- float Kp; // 比例系数 float Ki; // 积分系数 float Kd; // 微分系数 // --- 限制 (保护用) --- float Output_Max; // 最大输出 (比如 PWM 1000) float Output_Min; // 最小输出 (比如 0) float Integral_Max; // 积分限幅 (抗饱和用) // --- 过程变量 (记忆用) --- float Target_Temp; // 目标温度 float Last_Error; // 上一次的误差 (算D项用) float Integral_Sum; // 积分累计值 (算I项用) } PID_Controller; // 2. 初始化函数 void PID_Init(PID_Controller *pid, float kp, float ki, float kd) { pid-\u0026gt;Kp = kp; pid-\u0026gt;Ki = ki; pid-\u0026gt;Kd = kd; pid-\u0026gt;Output_Max = 1000.0f; // 假设 PWM 周期是 1000 pid-\u0026gt;Output_Min = 0.0f; pid-\u0026gt;Integral_Max = 500.0f; // 积分限制在一般量程的一半左右 pid-\u0026gt;Target_Temp = 0.0f; pid-\u0026gt;Last_Error = 0.0f; pid-\u0026gt;Integral_Sum = 0.0f; } // 3. 核心计算函数 (放在定时器中断里调用) // Input: 当前实测温度 // Return: 应该输出的 PWM 占空比 float PID_Compute(PID_Controller *pid, float current_temp) { float error; float p_term, i_term, d_term; float output; // A. 计算误差 error = pid-\u0026gt;Target_Temp - current_temp; // B. 计算 P 项 (弹簧) p_term = pid-\u0026gt;Kp * error; // C. 计算 I 项 (记忆) - 关键：带抗饱和逻辑 pid-\u0026gt;Integral_Sum += error; // --\u0026gt; 积分限幅 (Clamping) \u0026lt;-- if (pid-\u0026gt;Integral_Sum \u0026gt; pid-\u0026gt;Integral_Max) { pid-\u0026gt;Integral_Sum = pid-\u0026gt;Integral_Max; } else if (pid-\u0026gt;Integral_Sum \u0026lt; -pid-\u0026gt;Integral_Max) { pid-\u0026gt;Integral_Sum = -pid-\u0026gt;Integral_Max; } i_term = pid-\u0026gt;Ki * pid-\u0026gt;Integral_Sum; // D. 计算 D 项 (预判) d_term = pid-\u0026gt;Kd * (error - pid-\u0026gt;Last_Error); pid-\u0026gt;Last_Error = error; // 记住这次误差，下次用 // E. 汇总输出 output = p_term + i_term + d_term; // F. 输出限幅 (防止 PWM 溢出) if (output \u0026gt; pid-\u0026gt;Output_Max) output = pid-\u0026gt;Output_Max; if (output \u0026lt; pid-\u0026gt;Output_Min) output = pid-\u0026gt;Output_Min; return output; } 第三步：定时调度 (The Timing) 这是新手最容易忽略的。PID 算法不仅涉及数学，还涉及时间。公式里的积分和微分，都隐含了一个前提：采样周期 ($dt$) 必须是固定的！\n错误做法： 在 main 函数的 while(1) 里狂跑 PID。 后果： 如果你的程序有时候忙别的（比如处理屏幕显示），循环变慢了，积分项的时间基准就乱了，PID 参数会完全失效。 正确做法： 使用 STM32 的定时器中断 (Timer Interrupt)。 实战架构 假设我们控制频率为 10Hz (每 100ms 算一次)。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 // 定义一个全局 PID 对象 PID_Controller HeaterPID; // 主函数初始化 int main(void) { HAL_Init(); // 初始化硬件：SPI(读温度), TIM(产PWM), TIM(调度中断) MX_SPI1_Init(); MX_TIM2_Init(); // 用于 PWM 输出 MX_TIM3_Init(); // 用于 100ms 中断 // 初始化 PID 参数 (需要调试出来) PID_Init(\u0026amp;HeaterPID, 50.0f, 0.5f, 10.0f); HeaterPID.Target_Temp = 315.0f; // 设定目标 // 开启 PWM HAL_TIM_PWM_Start(\u0026amp;htim2, TIM_CHANNEL_1); // 开启调度中断 HAL_TIM_Base_Start_IT(\u0026amp;htim3); while (1) { // 主循环处理低优先级任务：屏幕显示、按键、Modbus通讯 // 不要在这里算 PID！ } } // 定时器中断回调函数 (每 100ms 触发一次) void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) { if (htim-\u0026gt;Instance == TIM3) { // 1. 读取传感器 (通过 SPI 读取 MAX31865) float now_temp = MAX31865_Read_Temp(); // 2. 运算 PID float pwm_duty = PID_Compute(\u0026amp;HeaterPID, now_temp); // 3. 执行输出 (修改 PWM 寄存器 CCR) __HAL_TIM_SET_COMPARE(\u0026amp;htim2, TIM_CHANNEL_1, (uint32_t)pwm_duty); } } 第四步：如何调参 (Tuning) —— 那个“玄学”部分 代码写进去了，但 Kp, Ki, Kd 填多少？这里有一套“傻瓜口诀”，按照顺序来：\n先置零： 把 $K_i$ 和 $K_d$ 设为 0，只留 $K_p$。 调 P (弹簧)： 慢慢加大 $K_p$，直到温度开始在目标值（315°C）附近等幅震荡（像波浪一样不停）。 此时把 $K_p$ 乘以 0.6，作为最终的 $K_p$。 现象：温度能快速上去，但还有静差（比如卡在 310°C）。 调 I (推手)： 慢慢加大 $K_i$（从小数值开始，如 0.01）。 观察那 5°C 的静差是不是慢慢消失了。 注意：如果 $K_i$ 太大，温度会冲过头（超调）然后荡很久。 调 D (阻尼)： 如果你发现温度冲过头比较严重，或者震荡收敛太慢，加一点点 $K_d$。 一般加热控制中，D 可以很小或者为 0（PI 控制通常就够用了）。 总结 要在 STM32 上应用 PID：\n硬件： 买个 MAX31865 读 PT100，用 MOSFET/SSR 驱动加热棒。 软件： 复制上面的 C 结构体和函数。 架构： 把 PID_Compute 扔进 100ms 的定时器中断里，千万别放在 while(1) 里跑。 心态： PID 参数不是算出来的，是试出来的。准备好耐心，对着串口打印的波形慢慢调。 ","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E6%8E%A7%E6%B8%A9%E7%94%B5%E8%B7%AF/","title":"动手实现控温电路"},{"content":"继上篇 Fetching Title#qeku 说到的多项式拟合，这里具体讲讲多项式拟合方法的应用\n案例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 import numpy as np import matplotlib.pyplot as plt # ========================================== # 步骤 1: 模拟物理世界 (生成非线性数据) # ========================================== # 假设我们用 7 瓶标气做校准：0, 10, 20... 100 ppm true_concentration = np.array([0, 10, 20, 40, 60, 80, 100]) # 模拟传感器的物理响应： # V = 5 * (1 - e^(-0.015 * C)) # 这是一种典型的饱和响应，浓度越高，电压涨得越慢 A = 5.0 # 最大电压 (V) k = 0.015 raw_voltage = A * (1 - np.exp(-k * true_concentration)) # 加一点点噪声，模拟真实电路的波动 np.random.seed(42) raw_voltage += np.random.normal(0, 0.005, size=len(raw_voltage)) print(\u0026#34;原始电压测量值 (V):\u0026#34;, np.round(raw_voltage, 3)) # ========================================== # 步骤 2: 算法核心 (计算线性化系数) # ========================================== # 目标：找到一个多项式 C = f(V)，把电压 V 变回浓度 C # 这里我们选用 3次多项式 (Cubic Fitting) degree = 3 # polyfit(x, y, deg) -\u0026gt; 注意这里 x 是电压(输入), y 是浓度(目标) coeffs = np.polyfit(raw_voltage, true_concentration, degree) # 生成多项式函数对象 linearization_func = np.poly1d(coeffs) print(\u0026#34;\\n--- 计算出的线性化系数 (存入单片机) ---\u0026#34;) print(f\u0026#34;a (3次项): {coeffs[0]:.4f}\u0026#34;) print(f\u0026#34;b (2次项): {coeffs[1]:.4f}\u0026#34;) print(f\u0026#34;c (1次项): {coeffs[2]:.4f}\u0026#34;) print(f\u0026#34;d (截距): {coeffs[3]:.4f}\u0026#34;) # ========================================== # 步骤 3: 验证效果 (应用系数) # ========================================== # 把原始的弯曲电压带入公式，看看算出来的浓度是不是直的 calculated_concentration = linearization_func(raw_voltage) print(\u0026#34;\\n校准后计算浓度 (ppm):\u0026#34;, np.round(calculated_concentration, 1)) print(\u0026#34;真实标准气浓度 (ppm):\u0026#34;, true_concentration) # ========================================== # 步骤 4: 画图展示 # ========================================== plt.figure(figsize=(12, 5)) # 图1：拉直前（原始物理响应） plt.subplot(1, 2, 1) plt.scatter(true_concentration, raw_voltage, color=\u0026#39;red\u0026#39;, s=80, label=\u0026#39;实测点\u0026#39;) plt.plot(true_concentration, raw_voltage, \u0026#39;r--\u0026#39;, alpha=0.5) plt.title(\u0026#34;线性化前：传感器原始响应 (弯曲)\u0026#34;, fontsize=14) plt.xlabel(\u0026#34;真实浓度 (ppm)\u0026#34;, fontsize=12) plt.ylabel(\u0026#34;传感器电压 (V)\u0026#34;, fontsize=12) plt.grid(True, linestyle=\u0026#39;:\u0026#39;, alpha=0.6) plt.legend() # 图2：拉直后（经过算法处理） plt.subplot(1, 2, 2) # 画出理想直线 plt.plot([0, 100], [0, 100], \u0026#39;k-\u0026#39;, alpha=0.3, linewidth=3, label=\u0026#39;理想直线 (y=x)\u0026#39;) # 画出校准后的点 plt.scatter(true_concentration, calculated_concentration, color=\u0026#39;green\u0026#39;, marker=\u0026#39;s\u0026#39;, s=80, label=\u0026#39;算法输出\u0026#39;) plt.title(\u0026#34;线性化后：最终显示数值 (笔直)\u0026#34;, fontsize=14) plt.xlabel(\u0026#34;真实浓度 (ppm)\u0026#34;, fontsize=12) plt.ylabel(\u0026#34;屏幕显示浓度 (ppm)\u0026#34;, fontsize=12) plt.grid(True, linestyle=\u0026#39;:\u0026#39;, alpha=0.6) plt.legend() plt.tight_layout() plt.show() 输出结果 1 2 3 4 5 6 7 8 9 10 原始电压测量值 (V): [2.000e-03 6.960e-01 1.299e+00 2.264e+00 2.966e+00 3.493e+00 3.892e+00] --- 计算出的线性化系数 (存入单片机) --- a (3次项): 1.0962 b (2次项): -1.7772 c (1次项): 15.9618 d (截距): -0.2106 校准后计算浓度 (ppm): [-0.2 10.4 19.9 39.5 60.1 80.6 99.6] 真实标准气浓度 (ppm): [ 0 10 20 40 60 80 100] 在这段代码中，模拟了一个真实的物理场景：\n物理世界（不完美）： 你的传感器（比如 NDIR 探测器）是非线性的。随着浓度升高，电压增加得越来越慢（出现了饱和效应），这是一条弯曲的线。 算法世界（修正）： 我们通过多项式拟合，强行算出一组系数。利用这组系数，把那个弯曲的电压信号，反算成了笔直的浓度信号。 从代码输出中，我们得到了 4 个核心系数（3 次多项式）： [ 1.096, -1.777, 15.962, -0.210 ]，这意味着，单片机里的公式是这样的： $$浓度 = 1.096 \\times V^3 - 1.777 \\times V^2 + 15.962 \\times V - 0.210$$\n","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%A4%9A%E9%A1%B9%E5%BC%8F%E6%8B%9F%E5%90%88/","title":"多项式拟合"},{"content":"一、 核心心法：“流体不停车” (Flow Continuity) 新手设计的最大误区是：不用它的时候，就堵住它。 高手设计的核心原则是：不用它的时候，让它走旁路（Bypass）。\n1. 为什么要旁路？（反面教材） 假设你有一根 50 米长的采样管，接在分析仪入口。\n错误设计： 校准时，三通阀切到标气，把采样管堵死（切断）。 后果： 憋压： 采样泵还在工作，管路压力飙升。 滞后： 采样气在管子里停滞了。等你校准完（比如 10 分钟）切回采样时，你测到的是 10 分钟前 抽上来的“旧气”。你需要花很久把它排空，响应时间极其漫长。 2. 正确设计：快速回路 动作： 校准时，三通阀把标气切进分析仪，同时把采样气切到“旁路排空口”。 效果： 采样气一直在流动，一直保持新鲜。切回来的瞬间，你测到的就是当下的实时数据。 二、 两位三通阀的“拓扑防乱指南” 当系统里有“零气、标气、反吹、采样”四个功能时，至少需要 3-4 个三通阀。新手很容易把 NO（常开）、NC（常闭）、COM（公共）接乱。这里可以用“倒推法”，不要从气源顺着画，要从分析仪入口倒着画。\n可以尝试下面两种设计方式\n级联式/主从式设计逻辑 V1（主裁判）： 决定大方向，是看“样气”还是看“校准气”。 V2（副裁判）： 负责给 V1 输送弹药，决定那个“校准气”到底是“零气”还是“标气”。 这种设计的优点是逻辑层次分明，缺点是如果不加旁路，管路会有死体积。为了符合我们之前讲的“流体不停车”原则，我在图中特意为您加上了采样气的旁路设计。\ngraph TD %% --- 样式定义 --- classDef sample stroke:#006400,stroke-width:2px; classDef zero stroke:#1E90FF,stroke-width:2px; classDef span stroke:#FF8C00,stroke-width:2px; classDef common stroke:#333,stroke-width:3px; classDef bypass stroke:#999,stroke-dasharray: 5 5; %% --- 气源定义 --- SAMPLE_GAS[\"取样探头样气\"] ZERO_GAS[\"零气 (Zero)\"] SPAN_GAS[\"标气 (Span)\"] %% --- 旁路排空设计 (关键细节) --- %% 为了防止V1切到校准时，样气泵被憋死，必须在V1前加三通排空 T_SAMPLE((\"三通\")) SAMPLE_GAS --\u003e T_SAMPLE T_SAMPLE --\"旁路排空(保持流动)\"--\u003e NV_S[\"针阀 (阻力模拟)\"] NV_S --\u003e VENT_S[\"排空\"]:::bypass %% --- V2：校准气选择级 (副阀) --- %% 逻辑：断电=零气，通电=标气 V2[\"V2 - 校准选择阀(两位三通)\"] ZERO_GAS --\"NO (断电常开)\"--\u003e V2 SPAN_GAS --\"NC (通电常闭)\"--\u003e V2 %% --- V1：主功能切换级 (主阀) --- %% 逻辑：断电=采样，通电=校准 V1[\"V1 - 测量/校准切换阀(两位三通)\"] %% 采样气进 V1 的 NO T_SAMPLE --\"NO (断电常开)采样模式\"--\u003e V1 %% V2 的出口进 V1 的 NC (级联点) V2 --\"COM (出口)输送校准气\"--\u003e V1_NC_PORT(((\"级联点V1-NC\"))) V1_NC_PORT --\u003e V1 %% --- 分析仪 --- V1 --\"COM (公共出口)\"--\u003e ANALYZER[\"分析仪\"]:::common %% --- 样式应用 --- class SAMPLE_GAS,T_SAMPLE,NV_S,VENT_S sample class ZERO_GAS zero class SPAN_GAS span class V1,V2,ANALYZER common class NV_S,VENT_S bypass 优点： 节省阀门接口： 只需要 2 个阀门就能搞定 3 路气。 故障导向安全： 如果断电（V1 OFF），系统自动回到测量状态。这是环保监测非常喜欢的逻辑（断电不断数）。 缺点（需要注意）： 标气置换慢： 当你从“校零”切到“校标”时，V2 到 V1 之间那一段管子里的“旧零气”必须先被吹走，需要一点置换时间（死体积）。 逻辑耦合： 必须先开 V1，V2 的动作才有效。如果 V1 坏了（卡在 NO），V2 怎么动都没用。 独立旁路设计 所谓的“双两位三通阀组”（独立旁路设计）接法，其实是工业气路设计中用来彻底解决“死体积”和“流体滞后”的标准架构。\n它的核心逻辑不再是“一个阀门切两个气”，而是“每个气配一个专属的看门阀”\ngraph TD %% 定义样式 classDef sample stroke:#2E8B57,stroke-width:2px; classDef cal stroke:#1E90FF,stroke-width:2px; classDef bypass stroke:#A9A9A9,stroke-dasharray: 5 5; classDef analyzer fill:#f9f,stroke:#333,stroke-width:2px; %% --- 气源部分 --- S_GAS[\"取样探头样气\"] --\u003e PUMP[\"取样泵\"] CAL_GAS[\"标准气体钢瓶\"] --\u003e REG[\"减压阀\"] %% --- 阀门组 (核心逻辑) --- %% 阀门1：控制采样 PUMP --\"COM (进气)\"--\u003e V1[\"V1-采样切换阀两位三通\"] %% 阀门2：控制标气 REG --\"COM (进气)\"--\u003e V2[\"V2-标气切换阀两位三通\"] %% --- 旁路设计 (Bypass) --- %% 没通电时走这里 (NO口) V1 --\"NO (断电常开)保持流动/不停车\"--\u003e NV1[\"针阀/毛细管(模拟阻力)\"] V2 --\"NO (断电常开)放空/预吹扫\"--\u003e NV2[\"针阀/毛细管(模拟阻力)\"] NV1 --\u003e VENT1[\"排空/回流总管\"]:::bypass NV2 --\u003e VENT2[\"排空\"]:::bypass %% --- 测量主路 (Main Line) --- %% 通电时走这里 (NC口) V1 --\"NC (通电常闭)采样模式\"--\u003e T1((\"汇流三通/歧管\")) V2 --\"NC (通电常闭)校准模式\"--\u003e T1 %% --- 分析仪部分 --- T1 --\u003e FL1[\"流量计\"] FL1 --\u003e ANALYZER[\"分析仪/传感器\"]:::analyzer ANALYZER --\u003e EXHAUST[\"废气排出\"] %% 应用样式 class S_GAS,PUMP,V1 sample class CAL_GAS,REG,V2 cal class NV1,NV2,VENT1,VENT2 bypass 为什么要这么接？（对比传统接法） 1、传统接法（单个三通阀切换）\n接口 A 接采样，接口 B 接标气，公共口接分析仪。 致命缺陷： 当你测采样时，标气那条管子是死胡同。 当你测标气时，采样那条管子是死胡同（泵会被憋死，或者你得在前面再加三通，很麻烦）。 2、双阀组接法（推荐接法）\n优势 1：无死体积。 每一路气体在进入分析仪之前，都在自己的旁路里流动，没有“死水”。 优势 2：无交叉污染。 两个阀门的 NC 口平时都是关死的，物理隔离非常好。 优势 3：压力平衡。 你可以通过调节各自旁路上的针阀，让排空的阻力和进分析仪的阻力接近，切换时没有压力跳变。 三、 避坑经验：防止“压力台阶” 阀门一多，最怕的就是压力不平衡。\n现象： 采样时压力是 -20 kPa，一切换到标气，压力变成了 +50 kPa。 后果： 这种瞬间的压力跳变会让分析仪读数剧烈震荡，甚至冲坏传感器。 解决办法： 所有进入同一个“选通阀”的气路，压力必须预先调节到一致。\n采样路： 如果是负压，无法改变。 校准路： 必须加装旁路溢流口。 让标气在进入阀门前，先对大气敞开排空一部分。 目的： 强行把标气压力拉低到常压，尽量接近采样压力，减小切换时的冲击。 四、 终极方案：使用“歧管/汇流板” 如果你的阀门超过 3 个，别再用管子把一个个阀门拧在一起了。那是一团乱麻，而且漏点极多。\n工程经验： 直接上 集成汇流板 (Manifold Block)。\n结构： 一块金属铝块，内部钻好了孔道。你只需要把阀门像插积木一样插上去。 优点： 无死体积： 内部流道极短，换气极快。 逻辑清晰： 通常是“公共出气口”和“独立进气口”。 排查简单： 不用去撸管子，看阀门上的灯就行。 总结 气路走到底的“单线思维”是电路思维（导线没电流也没事），但不是流体思维。流体设计三定律：\n死水必臭： 不要让气体在管子里停滞，不用它时就把它放空。 压力要平： 切换阀两端的压力差越小越好。 倒着思考： 从分析仪入口往回推，先决定“进谁”，再决定“谁备选”。 ","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%B0%94%E8%B7%AF%E8%AE%BE%E8%AE%A1/","title":"气路设计"},{"content":"本篇继 [[信号处理之频域分析]] ，重点讲讲如何建立起这套“先诊断、后手术”的能力\n第一步：高频抓取 (Capture Fast) —— “要想看见鬼，快门得够快” 这是新手最容易死的地方。你想诊断 50Hz 的干扰，却用 10Hz 的速度去采样，那你一辈子也找不到原因。\n指导思想： 奈奎斯特采样定理 (Nyquist Theorem)。 原则： 你的采样频率 ($fs$) 必须至少是你怀疑的干扰频率的 2 倍以上。 实战建议：如果你怀疑有工频干扰 (50Hz)，你的采样率至少要设到 200Hz 或 500Hz。 为什么：只有采样够快，原本模糊的“幽灵”才能在数据里显形。 动作： 在单片机或采集卡上，暂时关掉所有的平均算法，把采样率拉满，抓取一段**“裸数据” (Raw Data)** 存下来。 第二步：频谱侦查 (FFT Diagnosis) —— “把果汁还原成配方” 拿到裸数据后，不要盯着时域波形发呆。立刻做 FFT。\n指导思想： 能量集中原则。 逻辑： 噪声和信号的区别在于，信号通常是缓慢变化的（低频），而能够被“手术切除”的干扰，通常在频域上表现为“尖峰”**。 判读字典（经验之谈）： 50Hz / 60Hz 尖峰： 电源干扰、接地不良。 100Hz / 120Hz 尖峰： 全波整流后的纹波（电源板滤波电容坏了）。 几十 kHz 尖峰： 开关电源 (Switching Power Supply) 的频率。 特定低频 (如 0.5Hz)： 泵的脉动、机械震动。 平坦的底噪 (Carpet)： 白噪声（热噪声），这个没法切，只能用平均法压下去。 第三步：手术方案 (Filter Design) —— “对症下药” 根据 FFT 看到的“病灶”，选择刀具。\n指导思想： 保留信号，切除干扰，代价最小。 决策树： 如果你看到了“孤立的尖峰” (如 50Hz)： 方案： 陷波器 (Notch Filter)。 理由： 精准打击，不伤及无辜（不影响反应速度）。 如果你看到“高频全是乱草”： 方案： 低通滤波器 (Low Pass, LPF)。 理由： 只要低频的信号，高频的一刀切。 如果你看到“0Hz 附近有个巨大的直流偏置” (基线漂移)： 方案： 高通滤波器 (High Pass) 或 去直流 (Detrend)。 理由： 只看变化量，不看绝对值。 第四步：仿真验证 (Simulation) —— “在虚拟病人身上试刀” 千万不要直接把滤波代码写进 CEMS 仪器里去运行。\n指导思想： 所见即所得 (WYSIWYG)。 动作： 把第一步抓到的“裸数据”导入电脑（Python/Matlab）。 用代码设计滤波器（就像我们刚才做的）。 把滤波器作用在裸数据上，观察效果。 关键检查点： 干扰去掉了吗？ 信号变慢了吗？ (所有滤波器都会带来相位延迟，你要确认这个延迟是否会导致 T90 超标)。 信号过冲了吗？ (有些滤波器会产生振铃效应)。 第五步：移植落地 (Deployment) —— “把 Python 变成 C” 最后一步才是写单片机代码。\n指导思想： 资源换算。 逻辑： Python 里的 scipy.signal.filtfilt 是双向滤波，单片机做不到（因为单片机不能预知未来数据）。 动作： 将设计好的滤波器系数 ($b, a$ 数组) 复制到 C 代码中。 使用标准的 IIR 滤波公式：$$y[n] = b0 x[n] + b1 x[n-1] … - a1 y[n-1] - a2 y[n-2]…$$ 总结：你的实战路线图 如果你想从零开始练习，我建议你按照这个低成本路线去玩：\nLevel 1: 纯软件练习（现在就可以做） 数据来源： 自己用 Python 生成（像我们刚才那样），或者去网上下载公开的 CSV 传感器数据集（Kaggle 上有很多）。 任务： 故意往里加各种频率的噪声，然后练习用 FFT 把它们找出来，再设计滤波器滤掉。 目标： 熟悉 numpy 和 scipy.signal 库，建立“频域直觉”**。 Level 2: 手机实战（零成本硬件） 数据来源： 你的手机里有加速度传感器。下载一个能导出 CSV 数据的 APP (如 \u0026ldquo;Sensor Logger\u0026rdquo;)。 任务： 把手机放在桌上（静止）。 把手机放在嗡嗡响的电脑机箱上（震动）。 手拿着手机走路（周期性摆动）。 分析： 把数据导出来做 FFT。你会清晰地看到“步频”、“机箱震动频率”。尝试把走路的晃动滤掉，只保留重力方向。 Level 3: 单片机实战（进阶） 硬件： STM32 + 一个光敏电阻（接 ADC）。 任务： 对着家里的 LED 灯采样（采样率设高点，比如 200Hz）。 分析： 哪怕你肉眼看着灯是常亮的，FFT 会告诉你，它其实在以 100Hz 闪烁（市电整流后的频率）。然后你在 STM32 里写一个陷波器，把这个 100Hz 滤平。 记住这八个字： “高频抓取，频域诊断”。这就是处理看不见的信号问题的核心心法。\n","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%AE%9E%E6%88%98%E4%B9%8B%E9%A2%91%E5%9F%9F%E5%88%86%E6%9E%90/","title":"实战之频域分析"},{"content":"就像 P\u0026amp;ID 是气路的宪法一样，在信号处理领域，也有一个铁打的“五层金字塔”框架。我们将这个框架称为 “信号净化提纯流水线” 。\n第一层：物理获取层 —— “原矿开采” 这一层负责把物理世界变成数字世界。核心原则是“保真”**。\n输入： 光子、离子、电子（模拟量）。 动作： IV 转换 (TIA)： 把微弱电流变成电压（前放板的任务）。 量程匹配 (Auto-Ranging)： 如果信号太小，放大 100 倍；太大，放大 1 倍。确保 ADC 能吃饱，但不撑死。 过采样 (Oversampling)： 比如 ADC 是 1000Hz 采样的，我采 100 个点只取 1 个平均值。这能物理提升 ADC 的信噪比（每 4 倍过采样，增加 1 位分辨率）。 输出： Raw Counts (原始码值)。 特征： 这通常是一个 0~65535 的整数，甚至可能是负数，没有任何物理单位，充满噪声。 第二层：清洗滤波层 —— “洗去泥沙” 这一层负责把噪声（Noise）去掉，留下信号（Signal）。核心原则是“时域与频域的结合”。\n输入： 充满毛刺的 Raw Counts。 核心算法： 锁相放大 (PSD)： （针对 NDIR/GFC）剔除所有非 30Hz 的光干扰。 剔除脉冲噪声 (Spike Rejection)： 如果突然有一个点飞到了天上去（可能是静电干扰），直接删掉，不算。 滑动平均 / 卡尔曼滤波： 根据当前的工况（稳态还是突变），平滑数据。 输出： Filtered Voltage (纯净电压)。 特征：这是一个很稳的电压值（如 2.500V），但它还不是浓度。 第三层：物理修正层 —— “化学反应” 这是最体现仪器技术含量的部分。我们要用数学公式去修补物理传感器的缺陷。顺序绝对不能乱！\n输入： Filtered Voltage。 步骤顺序（黄金法则）： 零点扣除 (Zero Subtraction)： 先减去“暗电流”或“零点背景”。$$V_{net} = V_{meas} - V_{zero}$$ 线性化 (Linearization)： 把弯曲的电压拉直。$$C_{raw} = f(V_{net})$$ 温压补偿 (P/T Comp)： 理想气体状态方程修正。$$C_{std} = C_{raw} \\times \\frac{101.3}{P_{cur}} \\times \\frac{T_{cur}}{273}$$ 交叉干扰补偿 (Cross-Interference)： 扣除水和 CO2 的影响。$$C_{final} = C_{std} - (K \\times C_{H2O})$$ 输出： Physics Concentration (物理浓度)。 特征：此时已经是 ppm 或 mg/m³ 了，是真实的物理值。 第四层：逻辑裁决层 —— “盖章认证” 这一层不处理数值大小，只处理“数据身份”。结合我们讲的状态机。\n输入： 物理浓度 + 系统状态（测量/校准/故障）。 动作： 有效性判断： 现在的状态机是在 MEASURE 吗？ 如果是 CAL (校准) $\\rightarrow$ 标记为 Calibration，数值照发（供调试看），但环保局不统计。 如果是 FAULT (故障) $\\rightarrow$ 标记为 Invalid，数值可能强制归零或保持。 如果是 PURGE (反吹) $\\rightarrow$ 标记为 Hold，数值锁定在反吹前一刻。 上下限报警： 是否超过量程？是否低于 -5%（仪表漂移异常）？ 输出： Display Value (显示值) + Status Flag (状态旗)。 五层：输出格式层 —— “打包发货” 这一层负责把数据翻译成别人（PLC、DCS）能听懂的语言。\n输入： 显示值 + 状态旗。 动作： D/A 转换： 把 0100 ppm 映射到 4.0020.00 mA。 注意：如果状态是 Invalid，可能输出 2 mA (故障电流) 告诉 DCS。 协议打包： 放入 Modbus 寄存器（40001 = 浓度，40002 = 状态）。 统计存储： 存入硬盘，生成“分钟均值”、“小时均值”。 框架中的三个“反直觉”经验 先线性化，再做补偿： 一定要先用多项式把电压变成浓度（线性化），然后再去减干扰气体的浓度。 错误做法：在电压阶段就减去干扰信号。这是错的，因为电压是非线性的，不能直接加减。 滤波放在线性化之前： 一定要在电压阶段（L2）把噪声滤干净，再进公式（L3）。 原因：线性化公式通常是高次方程（$V^3, V^4$）。如果电压里有噪声，经过 3 次方放大，噪声会变成巨大的误差。 显示值 $\\neq$ 4-20mA 值：** 在 L5 层，屏幕显示通常为了好看，会保留 2 位小数。 但给 DAC（4-20mA）的数据，必须经过量程缩放。 坑点：很多时候屏幕显示 50.00，但后台 DAC 芯片只有 12 位精度，输出可能是 49.8。调试时要区分“显示层”和“硬件输出层”。 Mermaid 信号流转框架图 graph TD %% 样式定义 classDef physical fill:#e1f5fe,stroke:#01579b,stroke-width:2px; classDef clean fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px; classDef math fill:#fff9c4,stroke:#fbc02d,stroke-width:2px; classDef logic fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px; classDef output fill:#ffebee,stroke:#c62828,stroke-width:2px; %% 1. 物理层 subgraph L1 [\"第一层：物理获取 (Acquisition)\"] Sens((\"传感器\")) --\u003e TIA[\"前置放大 TIA\"] TIA --\u003e ADC[\"ADC 模数转换\"] ADC --\u003e |\"Raw Counts (原始码)\"| OS[\"过采样/均值\"] end class Sens,TIA,ADC,OS physical %% 2. 清洗层 subgraph L2 [\"第二层：清洗滤波 (Cleaning)\"] OS --\u003e PSD[\"锁相放大/解调\"] PSD --\u003e SPIKE[\"剔除脉冲噪声\"] SPIKE --\u003e FILTER[\"自适应滤波/卡尔曼\"] FILTER --\u003e |\"Filtered Voltage (净电压)\"| NEXT2 end class PSD,SPIKE,FILTER clean %% 3. 修正层 subgraph L3 [\"第三层：物理修正 (Correction)\"] NEXT2((\"V\")) --\u003e ZERO_SUB[\"减零点背景\"] ZERO_SUB --\u003e LIN[\"多项式线性化\"] LIN --\u003e PT_COMP[\"温度/压力补偿\"] PT_COMP --\u003e INTER_COMP[\"交叉干扰补偿\"] INTER_COMP --\u003e |\"Physics Conc. (真浓度)\"| NEXT3 end class ZERO_SUB,LIN,PT_COMP,INTER_COMP math %% 4. 逻辑层 subgraph L4 [\"第四层：逻辑裁决 (Logic)\"] NEXT3((\"C\")) --\u003e STATE_CHECK{\"状态机检查\"} STATE_Check_Logic --\u003e STATE_CHECK STATE_CHECK --\"正常测量\"--\u003e VALID[\"标记: Valid\"] STATE_CHECK --\"反吹/校准\"--\u003e HOLD[\"标记: Hold/Cal\"] STATE_CHECK --\"硬件报错\"--\u003e FAULT[\"标记: Invalid\"] end class STATE_CHECK,VALID,HOLD,FAULT logic %% 5. 输出层 subgraph L5 [\"第五层：输出格式 (Output)\"] VALID --\u003e DAC[\"4-20mA 输出\"] HOLD --\u003e DAC FAULT --\u003e DAC VALID --\u003e MODBUS[\"Modbus/RS485\"] VALID --\u003e LOG[\"历史数据存储\"] end class DAC,MODBUS,LOG output %% 外部输入 STATE_Check_Logic[\"系统状态机\"] -.-\u003e STATE_CHECK ","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/","title":"信号处理的设计原则"},{"content":"之前我们聊的“滑动平均”和“自适应滤波”，本质上都是“事后诸葛亮”（基于过去的数据来推测现在）。今天认识一位“预言家” —— 卡尔曼滤波 (Kalman Filter)。\n它是阿波罗登月飞船导航的核心算法，也是现在自动驾驶汽车、大疆无人机悬停不动的秘密。在高端仪器（如 TDLAS 分析仪）中，它是解决“响应速度 (T90)”与“读数稳定性”这对死敌的唯一解药。\n一、 核心哲学：你相信“理论”还是相信“眼睛”？ 卡尔曼滤波最牛的地方在于，它不单纯依赖传感器，而是结合了两个信息源。\n想象你在开车进隧道，GPS 信号突然变弱了（噪声变大）。\n传感器（眼睛）： GPS 告诉你：“你现在在坐标 (100, 50)……不对，下一秒在 (100, 500)……不对，在 (100, -20)。” —— 数据不可靠，乱跳。 物理模型（理论）： 你的车速表显示 100km/h，方向盘没动。根据牛顿定律，你下一秒应该只前进了 27 米。 卡尔曼的灵魂追问： 此刻，你信谁？\n如果是普通滤波：它会傻傻地把 GPS 的乱跳值取平均，结果你的车在地图上乱飞。 卡尔曼滤波：它会算出一个“信任权重” (Kalman Gain, $K$)**。 它发现 GPS 噪声（方差）太大了，于是屏蔽掉 90% 的 GPS 数据。 它选择相信 90% 的物理模型（根据上一秒位置 + 车速算出来的位置）。 结果： 哪怕 GPS 信号烂成渣，你的车在地图上依然画出了一条平滑的直线。 二、 CEMS 里的实战：如何消灭滞后？ 在 CEMS 分析仪中，我们面临一个痛点：\n为了让读数稳，我们加了很重的滤波（电容大，积分时间长）。 后果： 气体浓度真的突变时（比如喷氨了），读数慢吞吞地爬坡，T90 响应时间超标。 卡尔曼怎么解决？\n建立模型（Predict）： 仪器内部知道气体流速和管路体积。 它预测：如果进气口浓度变了，传感器腔室里的浓度应该按什么曲线变化（指数上升）。 测量修正（Update）： 传感器实测到了一个电压值。 融合： 当实测值突然跳变，且跳变趋势符合流体力学模型时 $\\to$ 卡尔曼说：“这是真信号，不是噪声！信任实测值，立刻跟进！” 当实测值跳变，但完全违背物理模型（比如 1ms 内变了 50%） $\\to$ 卡尔曼说：“这不科学，肯定是干扰（Spike）。无视它，相信模型！” 最终效果： 平时稳如老狗（滤除噪声），变时动如脱兔（T90 极快）。 三、 Python 实战：手搓一个 1D 卡尔曼滤波器 卡尔曼滤波的矩阵公式（$P = FPF^T + Q$）看着很吓人，但对于单变量（只测一个浓度）的情况，它可以简化成5 行代码。\n我们要模拟：一个真实的温度信号（平稳），中间突然被一个巨大的噪声干扰，看看卡尔曼能不能把它识别出来。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 import numpy as np import matplotlib.pyplot as plt # 配置中文 plt.rcParams[\u0026#39;font.sans-serif\u0026#39;] = [\u0026#39;SimHei\u0026#39;] plt.rcParams[\u0026#39;axes.unicode_minus\u0026#39;] = False # ========================================== # 1. 模拟数据生成 # ========================================== n_iter = 100 sz = (n_iter,) # 数组大小 x = 25.0 # 真实温度 (Constant) # 真实值：一直是 25度 truth = np.full(sz, x) # 观测值：真实值 + 严重的白噪声 (模拟传感器) # 噪声标准差 sigma = 2.0 (抖动很大) z = truth + np.random.normal(0, 2.0, sz) # 在第 50 个点，加一个巨大的脉冲干扰 (Spike) z[50] = 100.0 # ========================================== # 2. 卡尔曼滤波初始化 # ========================================== # 这里的参数是\u0026#34;玄学\u0026#34;，需要根据物理系统去调 # Q: 过程噪声协方差 (Process Noise) # 代表：你觉得物理世界本身有多不稳定？ # 设得极小 (1e-5)，代表我相信物理世界是连续的，温度不会瞬变。 Q = 1e-5 # R: 测量噪声协方差 (Measurement Noise) # 代表：你觉得你的传感器有多烂？ # 设得大 (0.1)，代表传感器噪声很大，我不信它。 R = 0.1 ** 2 # 初始化状态 x_est = 0.0 # 初始估计值 P = 1.0 # 初始估计误差 (不确定性) K = 0.0 # 卡尔曼增益 (信任度) result_kalman = [] # ========================================== # 3. 卡尔曼滤波主循环 (5步心法) # ========================================== for i in range(n_iter): # --- 阶段 A: 预测 (Predict) --- # 1. 预测状态: 既然是测恒温，我预测下一刻温度和这一刻一样 x_pred = x_est # 2. 预测误差: 加上物理世界的不确定性 P_pred = P + Q # --- 阶段 B: 更新 (Update) --- # 3. 计算卡尔曼增益 (K): 权衡 预测误差 vs 传感器误差 # 如果传感器误差 R 很大，K 就会很小 (不信传感器) K = P_pred / (P_pred + R) # 4. 更新估计值: 核心公式！ # 新估计 = 预测值 + K * (实测值 - 预测值) # K 决定了我们要接受多少\u0026#34;实测偏差\u0026#34; x_est = x_pred + K * (z[i] - x_pred) # 5. 更新误差: 这一轮做完了，我会变得更自信 (P变小) P = (1 - K) * P_pred result_kalman.append(x_est) # ========================================== # 4. 绘图对比 # ========================================== plt.figure(figsize=(12, 6)) plt.plot(z, \u0026#39;k.\u0026#39;, label=\u0026#39;传感器测量值 (带噪声+尖峰)\u0026#39;, alpha=0.3) plt.plot(truth, \u0026#39;g-\u0026#39;, label=\u0026#39;真实值 (25℃)\u0026#39;, linewidth=2) plt.plot(result_kalman, \u0026#39;r-\u0026#39;, label=\u0026#39;卡尔曼滤波结果\u0026#39;, linewidth=2) plt.title(\u0026#34;卡尔曼滤波实战：从噪声中还原真相\u0026#34;, fontsize=16) plt.xlabel(\u0026#34;时间点\u0026#34;) plt.ylabel(\u0026#34;温度\u0026#34;) plt.legend() plt.grid(True) plt.show() 运行后的观察点 看整体： 尽管黑色的点（测量值）上下乱跳幅度很大，红色的线（卡尔曼）却非常平滑，紧贴着绿线（真实值）。这说明它滤除白噪声的能力极强。 看第 50 点（尖峰）： 测量值瞬间跳到了 100。 卡尔曼滤波的红线仅仅微微向上动了一点点，甚至几乎没受影响。 原因： 因为我们设置了 $Q$ 很小。卡尔曼认为：“根据物理定律，温度不可能在 0.1 秒内从 25 度 变到 100 度。这肯定是传感器疯了。” 于是它通过极小的 $K$ 值，拒绝了这次“诈骗”。 四、 进阶：它比滑动平均强在哪？ 你可能会问：“滑动平均也能滤除那个尖峰啊，为什么要搞这么复杂的公式？”主要区别在于“动态适应性”：\n不确定性的动态追踪 ($P$ 值)：** 刚开机时，卡尔曼知道自己“没底”（$P$ 很大），它会非常听传感器的话（$K$ 大），读数收敛极快。 运行一段时间后，它摸清了规律（$P$ 变小），就开始变得“自信”，不再受噪声干扰。 滑动平均是死的，卡尔曼是活的。 多传感器融合 (Sensor Fusion)： 这是卡尔曼的杀手锏。 如果你不仅有光电传感器，还有一个流速传感器。 你可以告诉卡尔曼：“流速变快了，所以浓度应该会变快。” 卡尔曼会利用流速信息，在光电传感器还没反应过来之前，就提前把浓度推上去。 这就是 Model-Based (基于模型) 的力量。 总结 FFT 是用来找病因的（看成分）。 PID 是用来做控制的（给动作）。 卡尔曼滤波 是用来做估计的（猜真相）。 ","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/","title":"信号处理之卡尔曼滤波"},{"content":"既然我们已经聊了 [[信号处理之清洗滤波]]（时域上的平均），今天我们要升级维度。我要带你进入信号处理的**“上帝视角”——频域分析 (Frequency Domain Analysis)。\n我们要聊聊两个核心概念：FFT (快速傅里叶变换) 和 数字陷波器 (Notch Filter)。这能解决一个让无数工程师抓狂的问题：“我知道信号里有干扰，但我怎么知道干扰是从哪来的？我又该怎么精准地干掉它？”\n第一章：从“看波形”到“看成分” —— FFT 的魔法 我们之前的示波器或绘图，都是“时域” (Time Domain) 的。\nX 轴： 时间 (Time) Y 轴： 电压 (Amplitude) 看到的是： 一条乱糟糟的曲线。 但傅里叶（Fourier）告诉我们：任何复杂的波形，都可以拆解成无数个正弦波的叠加。\nFFT (Fast Fourier Transform) 就是那个拆解波形的“棱镜”。\nX 轴： 频率 (Frequency) Y 轴： 强度 (Magnitude) 看到的是： 信号的“配方表”**。 ![[Pasted image 20251213131958.png]]\n1. 生活中的类比：果汁与配方 时域信号： 一杯混合果汁（你只能喝出它酸酸甜甜，看到它是红色的）。 FFT 变换： 一张配方表。 草莓：50% 香蕉：30% 苦瓜：5%（这就是干扰！） 2. CEMS 里的侦探故事 假设你的 $\\text{SO}_2$ 读数一直在抖动，幅度 $\\pm 1$ ppm。你用滤波怎么也滤不掉。\n你对数据做了一个 FFT 分析，发现频谱图上有一根尖刺：\n案例 A：尖刺在 50Hz。 破案： 50Hz 是市电频率。说明你的信号线没有屏蔽好，或者是电源地线没接好，工频干扰串进来了。 案例 B：尖刺在 30Hz。 破案： 你的切光轮电机转速正好是 1800rpm ($1800/60 = 30Hz$)。说明切光轮震动太大，引起了光路抖动。 案例 C：尖刺在 0.5Hz。 破案： 你的采样泵是不是每 2 秒钟“喘”一次气？这是蠕动泵或隔膜泵的脉动干扰。 结论： 在时域上，它们都是“乱跳”；但在频域上，它们都有“指纹”。FFT 是诊断仪器故障的神器。\n第二章：手术刀式的切割 —— 数字陷波器 (Notch Filter) 当你用 FFT 找到了那个讨厌的 50Hz 工频干扰，下一步怎么办？\n用普通的低通滤波（求平均）？\n缺点： 为了滤掉 50Hz，你会把 1Hz、2Hz 的有用信号也压制住，导致响应变慢。 这时候，你需要一把“激光手术刀”，只切除 50Hz 这一块肉，保留其他所有部分。 这就是 带阻滤波器 (Band-stop Filter)，如果阻带极窄，我们叫它 陷波器 (Notch Filter)。\n原理： 在数学上设计一个公式，让信号通过时，唯独 50Hz 的正弦波会被完全抵消（增益为 0），而 10Hz 或 100Hz 的信号无损通过。 第三章：Python 视觉盛宴 —— 抓出干扰并消灭它 我们来模拟一个真实的 CEMS 事故现场：\n真实信号： 一个缓慢变化的 $\\text{SO}_2$ 浓度。 干扰源： 50Hz 的强烈工频干扰（电源没接好）。 任务： 用 FFT 揪出它，然后用陷波器干掉它。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 import numpy as np import matplotlib.pyplot as plt from scipy.fft import fft, fftfreq from scipy import signal # 配置中文 plt.rcParams[\u0026#39;font.sans-serif\u0026#39;] = [\u0026#39;SimHei\u0026#39;] plt.rcParams[\u0026#39;axes.unicode_minus\u0026#39;] = False # ========================================== # 1. 制造案发现场 (生成信号) # ========================================== fs = 1000 # 采样率 1000Hz (每秒采1000个点) T = 2.0 # 总时长 2秒 N = int(fs * T) # 总点数 t = np.linspace(0, T, N, endpoint=False) # 真实信号：一个 2Hz 的缓慢波动 (模拟气体浓度变化) sig_clean = 1.0 * np.sin(2 * np.pi * 2 * t) # 干扰信号：50Hz 的强噪音 (模拟工频干扰) noise_50hz = 0.5 * np.sin(2 * np.pi * 50 * t) # 白噪声：随机背景噪音 noise_white = np.random.normal(0, 0.2, N) # 混合在一起：这就是 ADC 读到的烂数据 sig_corrupted = sig_clean + noise_50hz + noise_white # ========================================== # 2. 侦探环节 (FFT 频谱分析) # ========================================== yf = fft(sig_corrupted) # 做傅里叶变换 xf = fftfreq(N, 1 / fs) # 计算频率轴 # 我们只看前半部分 (正频率) yf_abs = np.abs(yf[:N//2]) * 2 / N xf_axis = xf[:N//2] # ========================================== # 3. 手术环节 (IIR 陷波器设计) # ========================================== # 设计一个针对 50Hz 的陷波器 # 质因数 Q 决定了切口有多窄。Q=30 表示切得很窄，不伤及无辜。 b, a = signal.iirnotch(w0=50.0, Q=30.0, fs=fs) # 应用滤波器 sig_filtered = signal.filtfilt(b, a, sig_corrupted) # ========================================== # 4. 绘图展示 # ========================================== plt.figure(figsize=(12, 10)) # 图1：时域波形对比 (乱糟糟 vs 干净) plt.subplot(3, 1, 1) plt.plot(t[:500], sig_corrupted[:500], \u0026#39;r-\u0026#39;, alpha=0.5, label=\u0026#39;受污染的信号 (ADC原始)\u0026#39;) plt.plot(t[:500], sig_clean[:500], \u0026#39;k--\u0026#39;, linewidth=2, label=\u0026#39;真实信号 (理想)\u0026#39;) plt.title(\u0026#34;【时域】 案发现场：根本看不清真实信号\u0026#34;, fontsize=14) plt.legend(loc=\u0026#39;upper right\u0026#39;) plt.grid(True) # 图2：频域频谱 (破案证据) plt.subplot(3, 1, 2) plt.plot(xf_axis, yf_abs, \u0026#39;b-\u0026#39;) plt.xlim(0, 100) # 只看 0-100Hz plt.title(\u0026#34;【频域】 侦探视角：FFT 抓到了！50Hz 处有巨大尖峰\u0026#34;, fontsize=14) plt.xlabel(\u0026#34;频率 (Hz)\u0026#34;) plt.ylabel(\u0026#34;强度 (Amplitude)\u0026#34;) plt.axvline(50, color=\u0026#39;r\u0026#39;, linestyle=\u0026#39;--\u0026#39;, label=\u0026#39;发现 50Hz 干扰\u0026#39;) plt.axvline(2, color=\u0026#39;g\u0026#39;, linestyle=\u0026#39;--\u0026#39;, label=\u0026#39;发现 2Hz 有用信号\u0026#39;) plt.legend() plt.grid(True) # 图3：滤波后效果 (手术成功) plt.subplot(3, 1, 3) plt.plot(t[:500], sig_filtered[:500], \u0026#39;g-\u0026#39;, linewidth=2, label=\u0026#39;陷波器处理后\u0026#39;) plt.plot(t[:500], sig_clean[:500], \u0026#39;k--\u0026#39;, alpha=0.5, label=\u0026#39;真实信号\u0026#39;) plt.title(\u0026#34;【结果】 手术后：精准切除 50Hz，保留有用信号\u0026#34;, fontsize=14) plt.legend(loc=\u0026#39;upper right\u0026#39;) plt.grid(True) plt.tight_layout() plt.show() 运行结果解读 当你运行这段代码，你会看到三张图，讲了一个完整的故事：\n第一张图（时域）： 你会看到红色的线毛毛糙糙的，上面叠加了密密麻麻的锯齿。你很难看清那条原本平滑的正弦波。这就是我们在现场看到的原始数据。 第二张图（频域 - 上帝视角）： 这是最震撼的一张。 在 2Hz 的地方有一根柱子（这是我们要的信号）。 在 50Hz 的地方有一根巨大的红柱子。 真相大白： 原来让信号变脏的罪魁祸首就是 50Hz！ 第三张图（滤波后）： 绿色的线（处理后）和黑色的虚线（真实值）几乎完美重合。 注意：我们并没有用强力的平均滤波（那样会让波形滞后），我们只是“挖掉”了 50Hz。所以信号的反应速度丝毫没有变慢，但毛刺全没了。 总结 FFT (傅里叶变换)： 是诊断工具。它不改变信号，但能告诉你信号里有什么鬼（干扰源频率）。 陷波器 (Notch Filter)： 是手术工具。当你用 FFT 确诊后，用陷波器可以精准切除特定频率的干扰，而不影响信号的灵敏度。 ","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E9%A2%91%E5%9F%9F%E5%88%86%E6%9E%90/","title":"信号处理之频域分析"},{"content":"本篇继 [[信号处理的设计原则]]，具体学习清洗滤波层，怎么把输入的信号看清楚！\n如果说物理获取层是“把矿石挖出来”，那么清洗滤波层就是“洗矿”——把泥巴（噪声）冲走，留下金子（信号）。在 CEMS 和精密仪器中，这一层通常由三道工序组成，针对三种不同类型的“脏东西”。\n第一道工序：中值滤波 (Median Filter) —— 对付“捣乱分子” 敌人： 脉冲噪声。 比如：隔壁大电机启动了一下、继电器吸合打了个火花、或者是静电放电。 特征： 信号本来是 2.5V，突然变成 5.0V，下一毫秒又回到了 2.5V。\n常规错误： 用平均值。\n数据：2.5, 2.5, 2.5, 50.0 (异常), 2.5 平均值：12.0。 后果： 一个老鼠屎坏了一锅汤，平均值被瞬间拉高，DCS 显示瞬间超标。 正确解法：中值滤波（去头去尾）\n算法： 就像跳水比赛打分，去掉最高分，去掉最低分，剩下的取平均；或者直接取中间那个数。 中值： 2.5。 效果： 那个 50.0 的异常值直接被扔进垃圾桶，对结果 0 影响。 第二道工序：IIR / FIR 低通滤波 —— 对付“背景嘈杂” 敌人： 白噪声 (White Noise)。比如：电子热噪声、ADC 的量化误差。特征： 像蚂蚁一样密密麻麻地附着在信号线上，让读数在小数点后几位乱跳。\n主力武器： 滑动平均 (Moving Average) 或 指数加权平均 (EMA)。这两种算法在单片机里极其常见，我们重点看 EMA (指数移动平均)，因为它最省内存。 公式：$$Y_{now} = \\alpha \\times X_{input} + (1 - \\alpha) \\times Y_{last}$$\n$Y_{now}$：现在的输出。 $Y_{last}$：上一次的输出。 $X_{input}$：现在的 ADC 输入。 **$\\alpha$ (滤波系数)： 0~1 之间的一个数。 $\\alpha$ 越小（如 0.01）：极度相信历史经验，不相信当前输入。效果： 读数稳如泰山，但反应迟钝。 $\\alpha$ 越大（如 0.90）：** 极度相信当前输入，不看历史。效果： 反应极快，但读数乱跳。 第三道工序：自适应滤波 (Adaptive Filter) —— 解决“快与稳”的矛盾 这是这一层的大 BOSS。\n痛点：\n为了环保验收，T90 响应时间必须 \u0026lt; 200 秒 $\\to$ 需要 $\\alpha$ 大（弱滤波）。 为了数据好看，读数不能乱跳 $\\to$ 需要 $\\alpha$ 小（强滤波）。 矛盾： 鱼和熊掌不可兼得。 解法：自适应（变档位）\n算法会实时计算“当前的变化率”，然后自动调整 $\\alpha$ 值。\n静止状态： 算法发现：|当前值 - 上次值| \u0026lt; 阈值。 判断：现在工况很稳，波动都是噪声。 动作：切换到“重滤波模式”（$\\alpha = 0.05$）。 结果：屏幕上的线条平滑得像直线。 突变状态： 算法发现：|当前值 - 上次值| \u0026gt; 阈值（比如突然喷氨了）。 判断：这不是噪声，是真变了！ 动作：切换到“轻滤波模式”（$\\alpha = 0.8$）甚至**“直通模式”**。 结果：读数“蹭”地一下就上去了，毫无滞后。 代码案例 写了一段代码，模拟一个从 0 跳变到 100 的信号，并加入噪声。 我们将对比：普通平均 vs 自适应滤波。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 import numpy as np import matplotlib.pyplot as plt # 配置中文显示 plt.rcParams[\u0026#39;font.sans-serif\u0026#39;] = [\u0026#39;SimHei\u0026#39;] plt.rcParams[\u0026#39;axes.unicode_minus\u0026#39;] = False # 1. 生成模拟信号：0~50点是0，50点之后突变到100 t = np.arange(0, 100) true_signal = np.zeros(100) true_signal[50:] = 100 # 2. 加入严重的白噪声 np.random.seed(42) noise = np.random.normal(0, 5, 100) raw_signal = true_signal + noise # 3. 定义两种滤波器 # --- 普通 EMA 滤波器 (固定系数) --- def fixed_filter(data, alpha=0.1): output = np.zeros(len(data)) output[0] = data[0] for i in range(1, len(data)): output[i] = alpha * data[i] + (1 - alpha) * output[i-1] return output # --- 自适应滤波器 (智能系数) --- def adaptive_filter(data): output = np.zeros(len(data)) output[0] = data[0] # 核心逻辑 for i in range(1, len(data)): # 计算变化量 (Delta) delta = abs(data[i] - output[i-1]) # 自适应逻辑：如果变化量大，alpha就大；变化量小，alpha就小 # 这里用一个简单的 sigmoid 或者是线性映射 if delta \u0026gt; 10: # 突变阈值 alpha = 0.8 # 快反应 else: alpha = 0.05 # 稳读数 (重滤波) output[i] = alpha * data[i] + (1 - alpha) * output[i-1] return output # 4. 运行滤波 out_fixed = fixed_filter(raw_signal, alpha=0.1) # 固定系数 out_smart = adaptive_filter(raw_signal) # 自适应 # 5. 画图对比 plt.figure(figsize=(12, 6)) plt.plot(raw_signal, \u0026#39;k.\u0026#39;, alpha=0.3, label=\u0026#39;原始带噪信号\u0026#39;) plt.plot(true_signal, \u0026#39;k--\u0026#39;, alpha=0.5, label=\u0026#39;真实值\u0026#39;) plt.plot(out_fixed, \u0026#39;b-\u0026#39;, linewidth=2, label=\u0026#39;普通滤波 (反应慢)\u0026#39;) plt.plot(out_smart, \u0026#39;r-\u0026#39;, linewidth=2, label=\u0026#39;自适应滤波 (又快又稳)\u0026#39;) plt.title(\u0026#34;自适应滤波 vs 普通滤波\u0026#34;, fontsize=16) plt.legend(fontsize=12) plt.grid(True) plt.show() 如果你运行这段代码，你会看到：\n黑色点（原始数据）： 上蹿下跳，根本没法看。 蓝线（普通滤波）： 优点： 确实把噪声滤平了。 缺点： 它是拖泥带水的。信号在第 50 秒已经跳到 100 了，蓝线在第 70 秒才慢悠悠地爬上来。这会导致 T90 不合格。 红线（自适应滤波）： 前半段（0）： 非常平滑（因为它识别出没变化，用了重滤波）。 突变点（50）： 瞬间跟上了信号的跳变（因为它识别出突变，扔掉了滤波器）。 后半段（100）： 再次变平滑。 这就是“清洗滤波层”的最高境界：该稳的时候稳如老狗，该快的时候动如脱兔。\n","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E6%B8%85%E6%B4%97%E6%BB%A4%E6%B3%A2/","title":"信号处理之清洗滤波"},{"content":"继上篇 [[信号处理之清洗滤波]]，现在我们要讲的是：“怎么把输出控制得准”！\n在 CEMS 里，最典型的场景就是：如何把 NOx 转换炉的温度死死锁在 315°C？ 或者 如何把激光器的温度控制在 0.001°C 的波动范围内？\n普通的开关控制（低于 315 开火，高于 315 停火）绝对做不到，温度会像过山车一样震荡。这时候，就需要请出统治了工业界 100 年的“万能神算法”：PID 控制算法\n一、 为什么 PID 是“神”？ PID 的伟大之处在于，它把人类控制事物的三种直觉，抽象成了三个数学公式。\n想象你正以此去控制一辆车的油门，试图让它停在前方 100 米处的红绿灯线（目标点）上\nPID 环节 你的动作 对应的心理活动 物理结果 P (比例) 看距离踩油门 “还有好远，冲啊！” vs “快到了，松油门。” 越近越没劲，最后可能会因为没劲而停在半路（静差）。 I (积分) 盯着停下的车 “怎么停这儿不动了？还没到呢！给我动！” 慢慢积攒怒气，补一脚油门，克服上坡阻力，推过终点。 D (微分) 看速度表踩刹车 “哇！冲得太快了，肯定要过头，赶紧点一下刹车！” 产生反向阻尼，防止一头撞出去（抑制超调）。 二、 工程师的噩梦：积分饱和 (Integral Windup) PID 原理书上都有，但在工程现场，新手最容易翻车的坑叫做 “积分饱和” (Integral Windup)。\n场景还原： CEMS 刚开机，炉温是 20°C，目标是 315°C。误差巨大！\nP 猛推： 全功率加热！ I 疯狂积累： “哇，误差这么大，还持续了这么久！”积分项迅速累加，变成了一个天文数字。 到达目标： 终于到了 315°C。 灾难发生： 此时误差为 0，P 停止输出了。但是！I 里面还存着刚才积累的那个天文数字！ 后果： I 继续输出 100% 功率，炉温直接冲到 400°C（严重超调），甚至烧坏加热棒。然后 I 开始反向积累，温度又跌到 200°C。系统进入剧烈震荡。 解决方案：抗饱和算法 (Anti-Windup)\n这是写 PID 代码必须加的“补丁”：\n逻辑： 当输出已经达到最大值（比如 PWM 100%）时，禁止积分项继续累加。 潜台词： “我已经尽力了（满油门了），你再催（积分）也没用，别记账了。” 三、 Python 实战：PID 控制加热炉 我们来写一段代码，模拟一个加热炉。 我们将对比：普通 PID vs 带抗饱和的 PID，看看那个“灾难”是怎么发生的，又是怎么被解决的。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 import numpy as np import matplotlib.pyplot as plt # 配置中文 plt.rcParams[\u0026#39;font.sans-serif\u0026#39;] = [\u0026#39;SimHei\u0026#39;] plt.rcParams[\u0026#39;axes.unicode_minus\u0026#39;] = False # ========================================== # 1. 定义物理对象：加热炉模型 # ========================================== class Heater: def __init__(self): self.temp = 20.0 # 初始室温 self.inertia = 0.98 # 热惯性 (越大越难热，也越难冷) def update(self, power): # 物理限制：功率不能超过 100%，也不能小于 0% real_power = np.clip(power, 0, 100) # 简单的热力学模型： # 新温度 = 旧温度 * 惯性 + 加热升温 - 环境散热 heat_gain = real_power * 0.5 heat_loss = (self.temp - 20.0) * 0.02 self.temp = self.temp * self.inertia + heat_gain - heat_loss return self.temp # ========================================== # 2. 定义 PID 控制器 # ========================================== class PID: def __init__(self, kp, ki, kd, anti_windup=False): self.kp = kp self.ki = ki self.kd = kd self.anti_windup = anti_windup self.target = 315.0 self.integral = 0.0 self.last_error = 0.0 def compute(self, current_temp): error = self.target - current_temp # --- P项 --- p_term = self.kp * error # --- I项 (核心差异) --- # 如果开启抗饱和，且输出已经到极限，就不积分了 # (这里简化处理，直接限制积分累计值) if self.anti_windup: # 限制积分域，防止变成天文数字 if abs(error) \u0026lt; 50: # 只有接近目标时才启用积分（分离积分法的一种） self.integral += error self.integral = np.clip(self.integral, -1000, 1000) # 钳位 else: # 普通PID：无脑积分 self.integral += error i_term = self.ki * self.integral # --- D项 --- d_term = self.kd * (error - self.last_error) self.last_error = error # 总输出 output = p_term + i_term + d_term return output # ========================================== # 3. 运行仿真 # ========================================== # 设置 PID 参数 kp, ki, kd = 5.0, 0.2, 2.0 # 实例化两个系统 heater_bad = Heater() pid_bad = PID(kp, ki, kd, anti_windup=False) # 没加补丁 heater_good = Heater() pid_good = PID(kp, ki, kd, anti_windup=True) # 加了抗饱和补丁 time_steps = 300 history_bad = [] history_good = [] for _ in range(time_steps): # --- 坏的系统 --- power_bad = pid_bad.compute(heater_bad.temp) temp_bad = heater_bad.update(power_bad) history_bad.append(temp_bad) # --- 好的系统 --- power_good = pid_good.compute(heater_good.temp) temp_good = heater_good.update(power_good) history_good.append(temp_good) # ========================================== # 4. 绘图对比 # ========================================== plt.figure(figsize=(12, 6)) plt.axhline(315, color=\u0026#39;k\u0026#39;, linestyle=\u0026#39;--\u0026#39;, label=\u0026#39;目标温度 315°C\u0026#39;) plt.plot(history_bad, \u0026#39;r--\u0026#39;, linewidth=2, label=\u0026#39;普通PID (积分饱和导致严重超调)\u0026#39;) plt.plot(history_good, \u0026#39;g-\u0026#39;, linewidth=2, label=\u0026#39;抗饱和PID (完美控制)\u0026#39;) plt.title(\u0026#34;PID 积分饱和现象演示\u0026#34;, fontsize=16) plt.xlabel(\u0026#34;时间 (s)\u0026#34;, fontsize=12) plt.ylabel(\u0026#34;炉温 (°C)\u0026#34;, fontsize=12) plt.grid(True, alpha=0.3) plt.legend(fontsize=12) plt.show() 观察仿真结果 运行代码后，你会看到极其鲜明的对比：\n红色虚线 (普通 PID)： 温度在到达 315°C 后，根本停不下来，直接冲到了 350°C 甚至更高（这就是积分饱和的恶果）。 然后因为温度太高，开始降温，但又降过头，产生了几次大的震荡才慢慢稳住。 后果： 在 CEMS 里，这会导致氧化锆传感器热冲击损坏，或者氨盐结晶区温度失控。 绿色实线 (抗饱和 PID)： 温度快速上升。 在接近 315°C 时，因为积分项被限制住了，没有“刹车失灵”。 它平滑地、优雅地停在了 315°C，几乎没有超调。 四、 延伸：CEMS 里的“前馈控制” (Feed-Forward) PID 是一种“反馈控制”（出错了再改）。 在 CEMS 中，还有一种更高级的“前馈控制”，用于处理样气流速突变。\n场景： 你突然把采样流量从 1L/min 调到了 2L/min。 物理后果： 带进来的冷气多了，加热炉温度必降。 PID 的反应： 等温度真的降下去了，它才发现，然后开始加功率。（这就慢了） 前馈的反应： 系统监测到流量计读数变大。 算法直接根据物理公式：需要增加的功率 = 流量差 × 比热容 × 温差。 在温度还没来得及下降之前，预先把加热棒功率加上去。 总结：\nPID 是控制算法的基石。 积分饱和 是新手必踩的坑，必须用抗饱和逻辑填平。 前馈 是高手用来抵消干扰的预判。 ","date":"2025-12-13T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E8%BE%93%E5%87%BA%E6%8E%A7%E5%88%B6/","title":"信号处理之输出控制"},{"content":"P\u0026amp;ID (Piping and Instrumentation Diagram，管道及仪表流程图) 是 CEMS 系统设计的“宪法”。一旦这张图定稿，采购清单（BOM）、电气接线图、PLC 程序逻辑也就基本定死了。\n接下来从“水、尘、压、标”四个维度解析 P\u0026amp;ID 设计的实战经验\n一、 “水”的处理逻辑：防守反击 CEMS 的头号敌人就是液态水。只要进水，分析仪必挂。在 P\u0026amp;ID 上，你必须构建三道防线。\n1. 第一道防线：伴热管线 (Heated Line) P\u0026amp;ID 画法： 在从探头到机柜的管线上，必须画上伴热符号（通常是虚线包裹或者标注 H）。 经验： 必须在图纸上标注温度设定点（如 120°C 或 180°C）。 陷阱： 很多图纸画进机柜就断了。错！ 伴热管线必须一直画到制冷器（冷凝器）的入口接头处。中间不能裸露任何一段 PTFE 管，否则就是“冷点”，必结露。 2. 第二道防线：制冷器与排水 (Cooler \u0026amp; Drain) P\u0026amp;ID 画法： 制冷器下方必须画出蠕动泵 (Peristaltic Pump)。 经验： 位置： 采样泵（抽气泵）必须画在制冷器之后。 原理： 泵前是负压，泵后是正压。如果在泵后冷凝，水会被压出，但泵本身会吸入湿热气体，皮膜容易坏。让泵抽干气，寿命长。 排水回路： 蠕动泵出口绝不能直接通大气！图纸上必须画一个“水封” (Water Seal) 或者接废液桶。否则空气会倒吸进去，导致测量氧气偏高（假数据）。 3. 第三道防线：湿度报警 (Moisture Alarm) P\u0026amp;ID 画法： 在制冷器出口和过滤器之间，必须画一个湿度传感器或 阻水过滤器。 逻辑： 这是一个联锁点 (Interlock)。 图纸上要注明：If MT = High, Then Stop Pump（如果湿度高，立即停泵）。这是保护分析仪的最后一道闸门。 二、 “尘”的处理逻辑：级联过滤 不要指望探头上的那个陶瓷滤芯能挡住所有灰尘。P\u0026amp;ID 上必须体现“由粗到细”的过滤思想。\n一级过滤（探头端）： 图上标注精度（如 $20\\mu m$）。 二级过滤（泵前保护）： 在制冷器和采样泵之间，画一个通用过滤器（如 $5\\mu m$）。 目的：保护采样泵的阀片不被颗粒物卡住。 三级过滤（表前精滤）： 在分析仪入口前，画一个精密过滤器（如 $0.5\\mu m$ 或 $0.1\\mu m$）。 经验：这里的过滤器材质必须注明 PVDF 或 玻璃纤维，不能用普通纸滤芯（吸附 $\\text{SO}2$）。 三、 “压”的处理逻辑：测点布局 很多新手画 P\u0026amp;ID 忘了画压力表，导致现场故障根本没法查。你必须在图上埋下“诊断点”**。\n探头反吹压力表： 画在反吹储气罐上。 作用： 没气了能不能报警？反吹压力够不够？ 采样真空表： 黄金位置： 画在采样泵的入口处。 诊断逻辑： 平时读数 -20 kPa。 突然变成 -60 kPa $\\rightarrow$ 说明前端（探头/管线）堵了。 突然变成 -5 kPa $\\rightarrow$ 说明前端漏气或者泵皮膜破了。 经验： 最好上带远传功能的压力变送器，这样中控室能看到趋势。 分析仪背压表： 如果后面接了复杂的排气管，最好在分析仪出口画个微压表。 四、 “标”的处理逻辑：合法性注入 标气从哪里注进去，决定了你这套系统合不合规。P\u0026amp;ID 上必须明确画出“系统校准”的路径。\n错误画法（直接校准）： 标气直接接在分析仪屁股后面。 后果：只能证明分析仪是好的，不能证明采样管线没漏气/没吸附。环保局不认。 正确画法（全程校准）： 标气管路必须一路画到探头 (Probe) 处。 通过探头内部的切换阀，让标气走一遍全流程（伴热管 $\\to$ 冷凝器 $\\to$ 泵 $\\to$ 分析仪）。 图纸细节： 注明标气管路也是 $\\Phi 6$ PTFE 材质，防止吸附。 五、 Mermaid 实战：一张标准的完全抽取法 P\u0026amp;ID graph TD %% 定义样式 classDef liquid stroke:#1E90FF,stroke-width:2px; classDef gas stroke:#2E8B57,stroke-width:2px; classDef electrical stroke:#FFA500,stroke-dasharray: 5 5; classDef key_component fill:#fff,stroke:#d00,stroke-width:3px; %% --- 1. 探头与伴热区 --- STACK(烟囱) --\u003e PROBE[采样探头] PROBE --\u003e |\"伴热管线 (180°C)\"| COOLER_IN((制冷器入口)) %% 校准气路 (全程校准) CAL_GAS[标气瓶] --\u003e |\"校准管 (去探头)\"| PROBE %% --- 2. 除水区 --- COOLER_IN --\u003e COOLER[双级电子冷凝器]:::key_component %% 排水回路 (关键) COOLER -.-\u003e |冷凝水| PERI_PUMP(蠕动泵) PERI_PUMP -.-\u003e |废液| DRAIN[废液桶/水封]:::liquid %% --- 3. 预处理与保护区 --- COOLER --\u003e MT[湿度报警器/阻水器]:::key_component MT --\u003e FILTER2[二级过滤器 5μm] %% 湿度联锁逻辑 (虚线) MT -.- |\"Interlock: 停泵\"| PUMP_CTRL((控制逻辑)):::electrical %% --- 4. 动力区 --- FILTER2 --\u003e PUMP[采样泵]:::key_component PUMP_CTRL -.- PUMP %% 泵后加旁路 (调节流量/压力) PUMP --\u003e T_BYPASS((三通)) T_BYPASS --\u003e |\"旁路泄压 (针阀)\"| VENT1[排空] %% --- 5. 分析区 --- T_BYPASS --\u003e FILTER3[三级精滤 0.5μm] FILTER3 --\u003e FLOW_METER[转子流量计] FLOW_METER --\u003e ANALYZER[气体分析仪 SO2/NOx/O2]:::key_component %% --- 6. 排放区 --- ANALYZER --\u003e EXHAUST[大气平衡排气口] %% 样式应用 class STACK,PROBE,CAL_GAS,COOLER,MT,FILTER2,PUMP,FILTER3,FLOW_METER,ANALYZER,EXHAUST gas 设计中的“潜规则” 管径标注 (Line Sizing)： P\u0026amp;ID 上的每一条线旁边都要标代码。例如 G-01-6mm-PTFE。 潜规则： 采样主路一般用 $\\Phi 6$ 或 $\\Phi 8$。但冷凝器的排水管建议用粗一点的软管（如 $\\Phi 3$ ID 的 Viton 管），防止水垢堵塞。 失效安全位置 (Fail-Safe Position)： 所有的气动阀/电磁阀旁边要画上 FC (Fail Closed) 或 FO (Fail Open)。 反吹阀必须是 FC（断电关闭）。防止断电时压缩空气把探头吹爆。 采样阀通常也是 FC。 材料代码 (Material Code)： 在图纸右下角的 Note 里必须写明：All wetted parts must be SS316L or PTFE/PFA.(所有接触气体的部件必须是 316L 不锈钢或特氟龙)。这是防止腐蚀的底线。 ","date":"2025-12-12T00:00:00Z","permalink":"https://teaize.github.io/p/pid-%E8%AE%BE%E8%AE%A1/","title":"P\u0026ID 设计"},{"content":"这篇继续将信号处理相关的内容。\n曲线是如何“变直”的？—— 线性化处理 物理世界通常是不完美的。 比尔 - 朗伯定律 告诉我们，光吸收和浓度是指数关系，不是线性关系。$$I = I_0 \\cdot e^{-kc}$$ 但是，DCS 和环保局只要线性的 4-20mA（对应 0-1000 ppm）。 如果在屏幕上画出来，信号是一条弯曲的弧线。我们需要把它“掰直”**。\n1. 多项式拟合 (Polynomial Fitting) 这是最常用的手段。我们在做标定（Calibration）时，通入 0%, 20%, 40%, 60%, 80%, 100% 的标气。CPU 采集到 6 个电压值，然后用数学方法算出一个公式：$$C = aV^4 + bV^3 + cV^2 + dV + e$$\na, b, c, d, e 就是存在存储器里的线性化系数。 只要系数算得准，再弯的线也能拟合成直线。 2. 查表法 —— 针对“奇葩”传感器 对于氧化锆（ZrO2）这种对数关系的传感器，或者极度非线性的传感器，公式太复杂了。我们就用最笨的办法：查字典。\n内存里存一张表： 10mV -\u0026gt; 0.1 ppm 12mV -\u0026gt; 0.15 ppm … 如果测到了 11mV 怎么办？线性插值 算中间值。 气体打架怎么办？—— 交叉干扰补偿 这是 CEMS 最头疼的问题。\n场景： 你要测 $\\text{SO}_2$。 现实： 烟气里有大量的水 ($\\text{H}_2\\text{O}$) 和 $\\text{CO}_2$。 麻烦： 虽然我们选了滤光片，但水和 $\\text{CO}_2$ 在 $\\text{SO}_2$ 的波段上可能还有 0.1% 的微弱吸收。 后果： 哪怕没 $\\text{SO}_2$，水气也能骗过仪器，产生一个几十 ppm 的假读数。 解决方案：矩阵解耦 (Matrix Decoupling)\n既然躲不掉，我们就不仅测 $\\text{SO}_2$，顺便把干扰气体也测了。\n硬件准备： 在切光轮上多加一个滤光片，专门测水的浓度（虽然我们不报告水，但我们要用它）。 数学模型： $$C_{\\text{real}} = C_{\\text{meas}} - (K_{\\text{H2O}} \\times C_{\\text{H2O}}) - (K_{\\text{CO2}} \\times C_{\\text{CO2}})$$\n$C_{\\text{real}}$：真实的 $\\text{SO}_2$ 浓度**（我们最终想要的）。 $C_{\\text{meas}}$：仪器测量到的总读数（这是个混合值，包含了 $\\text{SO}_2$ 的信号 + 干扰气体的伪信号）。 $C_{\\text{H2O}}$：当前测量到的水含量（比如 10%）。 $K_{\\text{H2O}}$：水对 $\\text{SO}_2$ 的干扰系数**（Interference Coefficient）。 物理意义：每 1% 的水，会让仪器误以为有 $K$ ppm 的 $\\text{SO}_2$。这个系数是厂家出厂时测定并写在内存里的。 $C_{\\text{CO2}}$ / $K_{\\text{CO2}}$：同理，这是二氧化碳的浓度和它的干扰系数。 这就是为什么高端分析仪一定要测 $\\text{H}_2\\text{O}$ 和 $\\text{CO}_2$。不是为了看，而是为了扣除背景干扰。如果你的仪器没有这个补偿功能，一下雨（湿度大），你的 $\\text{SO}_2$ 数据就会莫名其妙飘高。\n卡尔曼滤波 (Kalman Filter) —— 预测未来 这是现在最前沿的信号处理技术，主要用于 TDLAS 激光分析仪或高端质谱仪。普通的滤波是“事后诸葛亮”（求平均值）。卡尔曼滤波是“预言家”**。\n原理： 它包含两个模型： 物理模型： 根据上一秒的浓度和流速，预测下一秒应该是多少。 测量模型： 此时此刻传感器实测到了多少。 融合： 如果实测值和预测值差不多 $\\to$ 相信实测值。 如果实测值突然跳变（噪声），但物理模型说“不可能变这么快” $\\to$ 更多地相信预测值，忽略实测值。 效果： 它能把响应时间（T90）缩短到极致，同时还能把噪声压得极低。这在需要毫秒级响应的工业过程控制中非常重要。\n","date":"2025-12-12T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/","title":"传感器信号处理"},{"content":" 蠕动泵与密封 烟气冷凝后，通过蠕动泵排水。按常理说，既然要排水，肯定要有个“口子”。既然有口子，那样气（比如 SO2、NO）不就顺着水一起跑 (泄露) 了吗？或者如果管路是负压，外面的空气不就倒吸进来了吗？\n答案在于蠕动泵独特的“机械闭合”原理。简单来说：蠕动泵不仅是一个“泵”，它天然还是一个“截止阀”。\n核心原理：时刻被“掐死”的管子 蠕动泵的工作方式，并不是像离心泵那样“敞开”甩水的，而是像你用手指捏住一根吸管往下滑。\n1. 结构解剖 蠕动泵头里通常有 2 个或 3 个滚轮，以及一根弹性极好的软管（泵管）。\n2. 运动过程 状态 A： 滚轮滚过泵管，将管壁完全压扁（压死），直到两层管壁紧紧贴合。 状态 B： 只要设计合格，在任何时刻，至少有一个滚轮是将管子彻底压死的。 结果： 这个被“压死”的点，就是一个物理密封点。 这就是秘密所在： 管子虽然是通的，但因为时刻都被滚轮“掐住”了，气体根本没有“直通”的路径跑出去，外面的空气也进不来。\n在防止气体泄露的同时，还能排除系统中的水，简直是优雅 (Elegant)。本质上来说，是通过移动的闭合点，实现物质的定向输送与隔离\n蠕动泵与波动 ","date":"2025-12-12T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%A0%95%E5%8A%A8%E6%B3%B5/","title":"蠕动泵"},{"content":"对于一台复杂的精密仪器（特别是 CEMS 这种涉及光、机、电、算、化系统的设备），在动工前，必须集齐以下四大设计文档。\n第一张图：P\u0026amp;ID 图—— 仪器的“血脉” 在动手买任何一个阀门之前，必须先有这张图。这是机械/流体设计的宪法。\n它是什么：它不是简单的管路连接图，它包含了所有流体部件的逻辑符号。它定义了气体怎么走、哪里测压、哪里调节、哪里放空。 它决定了什么： 控制逻辑：看到图上的球阀符号，软工就知道这需要一个 DO（开关量输出）信号。看到压力变送器，就知道需要一个 AI（模拟量输入）接口。 安全逻辑：哪里必须加单向阀防止倒灌？哪里必须加安全阀防止憋压？ 你的盲区可能在于：很多新手只画“管子怎么连”，却不画“测点在哪里”和“控制点在哪里”。 比如： 你想做闭环控制稀释比，那你的 P\u0026amp;ID 上必须在临界孔前画一个压力传感器符号。如果不画，电路板设计时就不会留这个接口，最后软件就没法写闭环算法。 第二张图：硬件互连图 —— 仪器的“骨骼” 你之前问了电源板、驱动板、主板……这张图就是用来规划这些板子之间怎么连线的。\n它是什么：它不关心电路板内部怎么画（那是原理图 Schematic 的事），它只关心板子与板子、板子与部件之间的线束定义。 它决定了什么： 供电拓扑：24V 是从电源板直接给风扇，还是先经过主板再给风扇？（决定了电流负载和走线粗细）。 信号流向：PMT 的信号是先去前放板，再去主板？还是直接去 IO 板？ 接口定义：主板上需要留几个插座？是 10 Pin 的还是 20 Pin 的？ 你的盲区可能在于：“地线规划”。在这张图上，必须明确画出：哪根是信号地（AGND），哪根是电源地（PGND），它们在哪里汇合（单点接地）。如果这张图没画好，后期干扰问题会让你崩溃。 第三张图：I/O 列表 —— 软硬件的“字典” 这是连接“硬件工程师”和“软件工程师”的唯一桥梁。也是你画状态机图的前提。\n它是什么：一个巨大的 Excel 表格。每一行代表仪器的一个“手”或“眼”。 内容包含： 位号 (Tag Name)：如 V1_Sample_Valve。 物理接口：如 IO_Board_J3_Pin5。 信号类型：DO (继电器输出), DI (光耦输入), AI (4-20mA), AO。 逻辑定义：高电平是开还是关？（常开还是常闭）。 供电要求：这个阀门是 24V 还是 12V？ 为什么必须最先做：如果不先列出这张表，硬件工程师不知道选多大的 CPU（管脚够不够用），软件工程师不知道变量怎么定义。它是软硬件分工的契约。 第四张图：时序图 —— 仪器的“剧本” 状态机图是宏观逻辑，时序图是微观动作。这是解决你之前担心的“两位三通阀乱套”问题的关键。\n它是什么：横轴是时间，纵轴是各个部件（泵、阀、灯、加热器）的状态。 它解决了什么细节： 比如切校准时：是先关采样阀，还是先开标气阀？ 如果先关采样阀，中间有 0.1 秒 两个阀都关了，泵会不会憋死？ 如果先开标气阀，中间有 0.1 秒 两个阀都开了，标气会不会倒灌进采样管？ 你的盲区可能在于：“死区时间 (Dead Time)”的设计。所有的动作都不可能瞬间完成，必须在时序图上预留出 500ms 或 1s 的缓冲期。 小结 如果你现在要重新设计一台 CEMS 分析仪，正确的顺序应该是：\n先画 P\u0026amp;ID (气路逻辑)： 搞定物理原理。确定要几个阀、几个泵、几个传感器。（这是根本） 列 I/O List (资源统计)： 数一数上一共有多少个控制点和采集点。（这是量化） 画 硬件互连图 (电气架构)： 决定用几块板子，怎么给这些 I/O 供电和通讯。（这是骨架） 画 状态机 \u0026amp; 时序图 (软件逻辑)： 决定这些 I/O 按照什么顺序动。（这是灵魂） 你之前的提问顺序（先问电路板、再问气路、最后问状态机），其实是“自下而上”的学习过程，这完全正常。但现在你要开始“设计”了，就必须“自上而下”，先有这四份顶层设计文档，再去画具体的电路图或写代码。\n","date":"2025-12-12T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/","title":"设计文档"},{"content":"一、 稀释法系统的核心痛点与通用问题 稀释法的核心在于“稀释比”（Dilution Ratio）的稳定性。如果稀释比变了，所有的测量数据都是错误的。\n1. 临界孔的堵塞与腐蚀 问题描述： 临界孔通常是宝石或玻璃材质，孔径极小。虽然有烧结滤芯保护，但在高粉尘或由于探头加热失效导致结晶（如铵盐）时，临界孔容易发生微堵塞。 后果： 样气流量减小，导致稀释比变大，测量读数偏低。这是最隐蔽的故障，因为校准时通入标气也会被稀释，可能掩盖部分问题。 场景假设：正常状态 假设你的系统设定如下：\n稀释比 (DR): 100:1 (即 1 份样气 : 99 份稀释风) 标气浓度: 100 ppm 的 $\\text{SO}_2$ 分析仪量程: 0-2 ppm (稀释后浓度) 正常时：\n你通入 100 ppm 标气。 经过正常的临界孔，稀释 100 倍。 进入分析仪的气体浓度是 1 ppm。 分析仪读数显示 1 ppm $\\to$ 反算排放浓度 100 ppm。 结论： 校验合格，系统正常 场景假设：临界孔微堵 假设由于烟气脏或者加热不够，临界孔发生微堵塞（孔径变小了，或者结晶了）\n物理变化： 进样流量 ($Q_{sample}$) 减半。但稀释风流量 ($Q_{air}$) 是由文丘里管或压力控制的，基本不变。 结果： 稀释比从 100:1 变成了 200:1（大致估算）。 此时测量烟气： 烟气被稀释了 200 倍，读数直接减半。数据明显偏低，不准了。 运维人员校准（隐蔽的故障） 此时，运维人员通标气进行校准。通入 100ppm 标气进入探头，但此时由于临界孔堵塞稀释比变成了 200，也就是说标气被稀释了 200 倍，进入分析仪的浓度自然只有 0.5ppm。分析仪上还是按旧系数折算的，显示 50ppm。 运维人员的操作：\n运维人员看到：“咦？通 100 ppm，怎么只显示 50 ppm？看来是分析仪漂移了，或者灵敏度下降了。” 修正动作： 他在分析仪或工控机上执行 \u0026ldquo;Calibration / Span Adjust\u0026rdquo;（量程校准） 操作。 系统内部逻辑： 强行把这个 0.5 ppm 的电信号定义为 100 ppm。也就是把斜率（Gain）放大了一倍。 结果：屏幕显示 100ppm。运维人员心理： “校准通过，设备修好了。” 为什么说这是“隐蔽的故障” 表面上看，你把数校准回来了，测量似乎又“准”了。但实际上，硬件故障（堵塞）依然存在，且被软件系数掩盖了。这带来了以下严重的后续隐患：\n极不稳定的平衡： 你现在的校准是建立在“临界孔堵了一半”这个特定状态下的。堵塞物（如灰尘或铵盐）是不稳定的。 情况 A： 如果反吹系统突然起作用，把堵塞物吹掉了，稀释比瞬间变回 100:1。你的读数会突然翻倍（显示 200 ppm），导致数据超标异常。 情况 B： 堵塞进一步加重，稀释比变成 300:1，数据又开始缓慢下降。 响应时间（$T_{90}$）变差： 临界孔堵塞意味着吸入样气的流速变慢。虽然浓度数被你调准了，但气体置换速度变慢了。 原本烟气变化只需 30 秒就能反应在数据上，现在可能需要 2 分钟。这在工况剧烈波动时，会导致 CEMS 数据严重滞后，甚至无法通过环保验收的响应时间测试。 真空度报警失效的边缘： 虽然还能抽气，但采样泵的负载变了，或者探头内部的真空度已经处于临界边缘。一旦工况负压波动，很容易触发低流量报警。 工程师如何识别这个“骗局” 在做校准时，不能只看“能不能校准到标气值”，还要关注“校准系数（Slope/Gain）”的变化\n查看分析仪的 Gain/Slope 值： 如果平时这个系数是 1.0 左右，突然你需要把它调到 1.5 甚至 2.0 才能标定成功，绝对不是分析仪漂移了，而是稀释比变了（探头堵了）。 测量探头真空度： 大部分稀释法探头都有一个真空表。如果临界孔堵塞，真空度通常会变得更高（更接近真空），因为进气阻力大了。 检查响应时间： 通标气时，观察读数上升的速度。如果发现读数爬升得很慢，即使最后能稳在 100 ppm，也说明临界孔大概率堵了。 2. 稀释比随工况漂移 物理原理： 稀释比 $DR$ 受到烟道压力和温度的影响。公式大概如下：$$Q \\propto \\frac{P}{\\sqrt{T}}$$ 问题： 虽然现代系统有压力和温度补偿，但如果烟道负压剧烈波动，或者探头加热温度控制不稳（例如伴热管线故障），稀释比就会波动，导致数据震荡。 3. 稀释空气（Zero Air）的质量 关键点： 稀释法的稀释比通常在 20:1 到 100:1 之间。这意味着你测量的 95%~99% 的气体其实是你自己提供的稀释风。 隐患： 如果空气压缩机或零气发生器（Zero Air Generator）出现问题（例如油雾、水分穿透），这些杂质会被放大几十倍计入背景噪声，直接摧毁微量分析仪的检出限。 4. 湿基转干基的误差 法规要求： 环保上传数据通常要求干基（Dry Basis）。 痛点： 稀释法天然测出来是湿基。必须依靠氧化锆氧量计或其他方式测算湿度来折算。湿度的测量误差会直接叠加到 $\\text{SO}_2$ 和 $\\text{NO}_x$ 的最终排放数据上。 ","date":"2025-12-12T00:00:00Z","permalink":"https://teaize.github.io/p/%E7%A8%80%E9%87%8A%E6%B3%95cems/","title":"稀释法CEMS"},{"content":"如果没有 状态机 的逻辑，分析仪就是一堆乱飞的继电器和乱跳的数字。状态机逻辑不仅决定了仪器怎么动，更决定了环保局收到的数据上打什么“标记”。例如：反吹时数据不能算超标，必须打上“保持 (Hold)”标记。\n一、 CEMS 系统状态流转图 下面这张图展示了一个典型的完全抽取式 CEMS 系统（含反吹、自动校准功能）的软件逻辑\nstateDiagram-v2 %% 定义全局样式 classDef measure fill:#90EE90,color:black,stroke:#006400,stroke-width:2px; classDef maintain fill:#FFD700,color:black,stroke:#DAA520,stroke-width:2px; classDef fault fill:#FF6347,color:white,stroke:#8B0000,stroke-width:2px; classDef init fill:#D3D3D3,color:black,stroke:#696969; %% --- 初始状态 --- [*] --\u003e WARMUP : 上电启动 %% 1. 预热状态 state \"预热/自检 (Warm-up)\" as WARMUP WARMUP : 动作：加热炉/探头升温 WARMUP : 数据：无效 (Invalid) WARMUP : 泵：关闭 WARMUP --\u003e MEASURE : 温度达标 \u0026\u0026 无故障 WARMUP --\u003e FAULT : 自检失败 (如传感器断路) %% 2. 测量主循环 state \"正常测量 (Measurement)\" as MEASURE class MEASURE measure MEASURE : 动作：采样阀开，泵开 MEASURE : 数据：正常输出 (Valid) MEASURE : 逻辑：实时计算浓度 %% --- 周期性任务 (中断测量) --- %% 3. 反吹流程 state \"系统反吹 (Blowback)\" as PURGE_CYCLE { state \"高压反吹 (Purging)\" as BLOW state \"样气置换/恢复 (Recovery)\" as RECOV BLOW --\u003e RECOV : 反吹时间到 (如30s) BLOW : 动作：反吹阀开，采样泵停/隔离 RECOV : 动作：切回采样，等待气体稳定 } class PURGE_CYCLE maintain MEASURE --\u003e PURGE_CYCLE : 定时器触发 (如每4小时) PURGE_CYCLE --\u003e MEASURE : 恢复时间到 (如120s) %% 4. 校准流程 state \"校准 (Calibration)\" as CALIBRATION { state \"校零 (Zero Cal)\" as ZERO state \"校标 (Span Cal)\" as SPAN ZERO --\u003e SPAN : 零点成功 -\u003e 切标气 ZERO : 动作：切零气阀 SPAN : 动作：切标气阀 } class CALIBRATION maintain MEASURE --\u003e CALIBRATION : 用户指令 或 定时触发 CALIBRATION --\u003e MEASURE : 校准完成/退出 %% 5. 故障状态 state \"系统故障 (System Fault)\" as FAULT class FAULT fault FAULT : 触发条件：温度低、流量低、通讯断 FAULT : 动作：切断加热、停泵 (保护) FAULT : 数据：故障标记 (Fault Flag) %% 全局故障中断 MEASURE --\u003e FAULT : 发生故障 PURGE_CYCLE --\u003e FAULT : 发生故障 CALIBRATION --\u003e FAULT : 发生故障 FAULT --\u003e WARMUP : 故障复位/重启 FAULT --\u003e MEASURE : 故障清除 (非致命) %% 数据标记说明 note right of PURGE_CYCLE 关键逻辑： 进入非测量状态时， 数据必须 \"保持 (Hold)\" 不能输出 0 或 20.9% end note 二、 深度解剖：状态背后的“潜规则” 看懂了图，我们还要看懂图背后的工程逻辑。这是写 PLC 程序或嵌入式代码的核心。\n1. 预热状态 (Warm-up) —— 严厉的门卫 为什么不能一上电就测量？\n物理原因： 钼炉没到 315°C，$\\text{NO}_2$ 转换效率极低；氧化锆没到 700°C，内阻无穷大；光具座没恒温，漂移巨大。 软件逻辑： 这是一个 While Loop。只要温度（Temp）不在设定范围内（比如 $Set \\pm 5^{\\circ}C$），系统死锁，禁止开启采样泵。 防止冷凝水吸入冷光路，这是保护仪器的第一道防线 2. 反吹与恢复 (Blowback \u0026amp; Recovery) —— 容易被遗忘的“死时间” 新手写程序，往往只写“反吹动作”。\n错误逻辑： 反吹阀关 $\\rightarrow$ 马上输出数据。 后果： 反吹时管路里全是压缩空气（$\\text{O}_2 \\approx 21%, \\text{SO}_2 = 0$）。反吹刚结束那几十秒，样气还没抽上来。如果这时候输出数据，DCS 会记录到一个“排放跌零”的异常数据。 正确逻辑： 必须加一个 Recovery Time (恢复时间)。 反吹 10 秒。 等待 120 秒（让样气置换掉管路里的空气）。 这 130 秒内，数据全部打上“保持 (Hold)”标记，DCS 维持显示反吹前一刻的数值。 3. 故障状态 (Fault) —— 优先级最高的中断 注意看图中的红线，故障是可以从任何状态切入的。\n安全逻辑： 如果在“校准”时，突然检测到伴热管线温度低（可能断了），必须立即强行中断校准，跳到 Fault 状态，并关闭采样泵。 为什么？因为低温会导致结露，含水的酸性气体吸进来会腐蚀分析仪。保命优先于干活。 4. 测量状态 (Measure) —— 唯一的“有效数据”时刻 只有在这个状态下，软件输出的状态位（Status Bit）才是 \u0026ldquo;Valid\u0026rdquo; (有效)。\n环保局的数采仪（DAS）只统计标记为 Valid 的数据来计算日均值。 如果你的仪器老是跳到故障或反吹，有效数据率不足 75%，企业就会面临环保处罚。 从“图”到“码”的映射法则 在工业控制领域，只要你的状态机（State Machine）设计得足够完善，将它“翻译”成代码，确实就是一个非常机械、甚至可以自动化的过程。\n如果我们以前面的 CEMS 状态图为例，写成 C 语言（单片机）或者 ST 语言（PLC），几乎是一一对应的：\n状态图要素 (Mermaid) 代码要素 (C/C++) 例子 圆角矩形 (State) Case 分支 case MEASURE: 箭头 (Transition) If 判断 if (Temp \u0026gt; 300) … 文本描述 (Action) 函数调用 OpenValve(); 状态变量 枚举 (Enum) enum {WARMUP, MEASURE…} 为什么说“其实就比较简单”？ 因为状态机图帮你解决了编程中最让人头秃的三个问题：\n互斥问题： 没图时：你可能会担心“反吹的时候会不会同时在测量？” 有图后：不可能。因为 case BLOWBACK 和 case MEASURE 是互斥的，程序永远只能跑在一个分支里。 死锁问题： 没图时：容易出现“卡在校准里出不来”。 有图后：你会盯着图看，发现“校准”状态必须有一条箭头指出去（比如超时退出），否则图就是断的。图没断，代码就不会死锁。 优先级问题： 没图时：故障发生了，但程序还在跑校准。 有图后：你在图上画了 FAULT 可以从任何地方切入，写代码时就会把 if (Error) 放在最外层，优先级自然就清楚了。 既然这么简单，难点剩下什么？ 虽然**“逻辑流”（骨架）简单了，但作为 CEMS 专家，我要提醒你，在转换成代码时，真正的难点转移到了“血肉”（底层驱动）上。\n1. 动作函数的实现 (The Drivers) 状态机里写一句 OpenValve(V1) 很简单。但在代码里，你得去写这个函数：\nGPIO 是哪个引脚？ 是高电平开还是低电平开？ 有没有防抖动处理？ 这部分是“脏活累活”，状态图帮不了你，得查硬件原理图。 2. 非阻塞计时 (Non-blocking Timing) 这是一个大坑。\n状态图上写：“等待 120 秒”。 新手写代码： delay(120000); (死等)。 后果：这 120 秒内，CPU 睡着了，按键没反应，串口不通讯，看门狗可能会叫，程序会崩溃。 高手写代码：必须使用“时间戳轮询”。你需要构建一个软件定时器架构，这比画图要难一些。 3. 故障检测的灵敏度 状态图上写： “温度低 $\\rightarrow$ 故障”。 实际代码： 是一瞬间低于 315°C 就报警吗？（那风一吹就误报了）。 还是连续 10 秒低于 315°C 才报警？ 这需要**“滤波算法”，这也是图上体现不出来的细节。 终极境界：代码是“生成”出来的 正如我之前提到的，在现代高端工程中（如汽车电子、航空、高端医疗仪器），工程师甚至不写这部分 C 代码。\n他们使用 Model-Based Design (MBD) 工具（如 MATLAB/Simulink 或 现在的 AI 辅助编程）：\n在软件里画好你刚才看到的那个 Mermaid 状态图。 点击 \u0026ldquo;Generate Code\u0026rdquo; 按钮。 软件自动生成几千行完美无缺、符合工业标准（MISRA-C）的 C 代码。 工程师只需要负责画图和写底层驱动。 ","date":"2025-12-12T00:00:00Z","permalink":"https://teaize.github.io/p/%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81%E6%B5%81%E8%BD%AC%E5%9B%BE/","title":"系统状态流转图"},{"content":"基本上所有的 ADC（模数转换器）只能直接“听懂”电压信号，而非电流信号\n为什么 ADC 偏爱电压 ADC 的内部核心部件——比较器 (Comparator) 和 采样保持电路 (Sample and Hold) 。\n比较器的工作原理（电压的战争）： ADC 内部其实是在做无数次“天平称重”。 一端： 你的输入信号。 另一端： 内部的参考电压（$V_{ref}$）。 动作： 比较器问：“现在的输入比参考电压高还是低？” 在晶体管级别，电压（电势能）是驱动门电路开关的最直接力量（场效应管 FET 就是电压控制型器件）。 采样保持（电容存电）： ADC 在抓取数据的那一瞬间，需要把信号“冻结”住。 做法： 它是用一个小电容（Capacitor）来存电荷的。 物理公式： $V = Q / C$。 电容存下来的电荷量，直接体现为两端的电压差。 那 4-20mA 信号呢？ 你可能会问：“不对啊，现场很多变送器输出的是 4-20mA 电流信号，PLC 的 AI 模块不是直接读进去了吗？”\n这其实是个“假象”。如果你拆开 PLC 的模拟量输入模块，或者拆开采集卡，你会发现在那个接线端子的背后，悄悄藏着一个精密电阻（通常是 $250\\Omega$ 或 $500\\Omega$）。\n外部： 你送进来的是 4-20 mA 电流。 内部采样： 电流流过 $250\\Omega$ 电阻。 ADC： 它实际上测的是这个电阻两端的 1-5V 电压。$$V = 0.02\\text{A} \\times 250\\Omega = \\mathbf{5V}$$ 所以，所谓的“电流型输入模块”，本质上就是“电压型 ADC + 一个采样电阻”**。 ","date":"2025-12-11T00:00:00Z","permalink":"https://teaize.github.io/p/adc%E7%94%B5%E5%8E%8B%E4%BF%A1%E5%8F%B7/","title":"ADC电压信号"},{"content":" 为什么有的痕量分析仪，量程范围可以非常广，既可以测量小量程，又可以测量大量程。这台机器是如何做到：既能看清一只蚂蚁的腿毛（ppb 级痕量），又能看清一头大象（ppm 级常量），而且用的是同一双眼睛（PMT）\n这个魔法的核心在于：可变增益链 (Variable Gain Chain)。在电路实现上，主要依靠 TIA（跨阻放大器）的量程切换和 PGA（可编程增益放大器）。我把这个过程比作显微镜的换镜头（或者说电子变速箱）\n一、 核心矛盾：ADC 的分辨率瓶颈 首先，我们要明白为什么要调整增益。现在的仪器最终都要把模拟信号变成数字信号（ADC，模数转换）。\n假设你的 ADC 是 0~5V 输入范围。\n如果不调增益（固定量程）： 为了测 100 ppm (大信号)，你设定 5V = 100 ppm。 那么 1 ppb (0.001 ppm) 对应的电压就是 $0.00005\\text{V}$ (50 微伏)。 后果： 50 微伏的有用信号早就被电路板上的白噪声和底噪淹没了，根本测不出来。 解决思路： 测大信号时：把倍数调低（5V = 100 ppm）。 测小信号时：把倍数放大 1000 倍（5V = 100 ppb）。这样 1 ppb 的信号就变成了 0.05V (50 毫伏)，这就能测准了！ 二、 硬件实现：三级放大策略 在紫外荧光法 $\\text{SO}_2$ 分析仪中，电路通常分为三级来处理 PMT 输出的微弱电流。\n第一级：I/V 转换（跨阻放大器 TIA）—— 最关键的“电阻切换” PMT 输出的是电流 ($I_{pmt}$)，通常在 皮安 (pA, $10^{-12}$) 到 微安 ($\\mu\\text{A}, 10^{-6}$) 级别。我们需要把它变成电压 ($V$) 给 ADC 读。\n公式：$V_{out} = I_{pmt} \\times R_f$ (反馈电阻)\n这是物理层面的量程切换，也是最常用的一招。\n低量程模式 (Trace Mode)： 我们需要极大的放大倍数。 电路会自动接通一个 1G$\\Omega$ ($10^9$ 欧姆) 的超大电阻。 哪怕只有 1pA 的电流，也能产生 $1\\text{pA} \\times 1\\text{G}\\Omega = 1\\text{mV}$ 的电压。 高量程模式 (High Range)： 电流太大了，用大电阻会瞬间让电压“爆表”（超过 5V）。 电路通过继电器或模拟开关，切换成一个 1M$\\Omega$ ($10^6$ 欧姆) 的电阻。 倍数瞬间缩小了 1000 倍。 第二级：PGA (可编程增益放大器) —— 精细微调 TIA 负责粗调（比如 x1, x100, x1000），PGA 负责细调（x1, x2, x4, x8…）。这是一个集成芯片，CPU 可以通过发指令，瞬间改变它的放大倍数。它的作用是把第一级出来的电压，尽可能拉伸到 ADC 的最佳工作区（比如 2V~4V）。\n第三级：PMT 高压调整 (HV Adjustment) —— 终极武器 如果光强实在太强了，把电阻换到最小、PGA 设为 1 还是爆表怎么办？\n降低 PMT 的供电电压（负高压）。\nPMT 的增益对高压极其敏感。高压从 -800V 降到 -600V，PMT 输出的电流可能直接衰减 10 倍。 注：这种方法响应慢，通常不用于快速量程切换，只用于基准设定。 三、 算法逻辑：自动量程 (Auto-Ranging) 的“傻瓜”逻辑 硬件准备好了，软件（算法）是怎么指挥的呢？这就涉及到了阈值判定 和 滞回。CPU 会在一个循环里不断监视 ADC 的读数（假设 ADC 满量程是 65535）：\n1. 向上切换 (Upscale)：防止爆表 逻辑： 如果 ADC 读数连续 N 次超过 90% (比如 \u0026gt; 59000)。 判断： “危险！信号快到顶了，要被削顶了！” 动作： 命令 PGA 增益 除以 10（或者切换 TIA 电阻）。 软件内部记录：现在的 硬件放大倍数 (Gain Factor) 变了。 丢弃切换瞬间不稳定的那几个数据。 2. 向下切换 (Downscale)：防止丢失精度 逻辑： 如果 ADC 读数连续 N 次低于 10% (比如 \u0026lt; 6500)。 判断： “信号太小了，分辨率不够用了，我要放大看细节！” 动作： 命令 PGA 增益 乘以 10。 等待电路稳定。 3. 核心算法：滞回区间 (Hysteresis) —— 避免“抽风” 这是一个非常重要的工程经验。\n如果你设定： \u0026gt;90% 升档，\u0026lt;90% 降档。 后果： 如果读数刚好在 90% 附近跳动，继电器就会“咔哒咔哒”疯狂切换，系统就崩溃了。 做法： 升档阈值设为 95%。 降档阈值设为 15%。 中间这巨大的空白区，保持当前量程不动。 四、 数据还原：这一步最容易被忽视 硬件切换了，电压变了，那屏幕上显示的浓度数值会不会突然跳变？当然不能跳！ 软件必须把电压归一化。 $$\\text{最终显示浓度} = \\frac{\\text{ADC读数电压}}{\\text{当前的硬件总增益}} \\times \\text{校准系数}$$\n场景 A（低量程）： ADC 读到 4.0V。 当前增益是 x1000。 反算原始信号：$4.0 / 1000 = 0.004$。 场景 B（高量程）： 切换后，硬件增益变成了 x1。 同样的浓度，ADC 读数变成了 0.004V。 反算原始信号：$0.004 / 1 = 0.004$。 结果： 虽然 ADC 读到的电压天差地别，但经过软件除以增益后，最终算出来的浓度是平滑连接的。\n痕量仪与常量仪 那按照上面的思路，分析仪就可以通过电路的调整来实现量程的扩大了，不是吗？那为什么现实中很多分析仪并没有这么做。为什么大量程小量程不能用一台机器“通吃”？\n这么做，电路的瓶颈确实被打破了，但物理和化学的瓶颈还在。\n死敌一：光学饱和效应 —— 堵车了 这是紫外荧光法（$\\text{SO}_2$）和化学发光法（$\\text{NO}_x$）无法测量高浓度的最主要原因。\n场景类比：\n低浓度（正常）： 广场上站着 10 个人（$\\text{SO}_2$）。我用一束光照过去，每个人都能被照到，每个人都发光。光强 $\\propto$ 人数。线性很好。 超高浓度（扩大量程后）： 广场上密密麻麻挤了 10,000 个人。 问题来了： 我手电筒的光，只能照亮最前面那几排人。 后面的人： 被前面的人挡住了（阴影区），根本没受到激发，不发光。 发出的光： 甚至发出来的荧光，在飞向 PMT 的过程中，又被旁边没发光的人给“吸收”了（自吸收）。 结果（非线性）：即使电路能读数，但你会发现：浓度 1000 ppm 时读数是 1V；浓度 5000 ppm 时读数可能只有 1.2V。曲线趴下了。 这时候算法再怎么拟合也救不回来。 死敌二：探测器的生理极限 —— “亮瞎眼” 即使我们假设气体没有自吸收，发出了巨大的光，PMT（光电倍增管）也受不了。\nPMT 的原理： 一个光子进来，变成 100 万个电子出去。 高浓度下： 进来的光子太多了。 电流限制： PMT 内部的倍增极（Dynode）电流是有上限的。电子云太密集，空间电荷效应会排斥后续的电子。 不可逆损伤： 如果你强行用痕量仪去测高浓度（比如锅炉爆表），巨大的阳极电流会把 PMT 的最后一级“烧坏”，导致灵敏度永久下降。 电路能调增益，但救不了探测器的命。 就像你能把照片亮度调低，但不能让你的视网膜盯着太阳看。\n死敌三：系统的“记忆效应” —— “洗不干净” 这是机械和气路设计的痛。\n痕量分析仪（比如测 ppb 级的）为了追求灵敏度，其管路、反应室材料虽然也是特氟龙或不锈钢，但只要接触过一次高浓度气体（比如 1% 的 $\\text{SO}_2$）：\n吸附： 高浓度的气体会深深“钻”进管路表面的微孔里。 清洗： 当你切回测量低浓度（ppb）时，那些钻进去的气体开始慢慢释放。 后果： 你的背景噪声（本底）会变得极高。原本能测 1 ppb，现在因为管路脏了，起步就是 50 ppb。 结论：测过一次高浓度，这台“痕量仪”就废了，可能需要吹扫几天几夜才能恢复“视力”。\n工程师的“作弊”手段：如果非要测，怎么办？ 1. 物理衰减器 (Physical Attenuator) / 光圈 原理： 既然光太强会“亮瞎眼”，那我就戴墨镜。 做法： 在 PMT 前面加一个带小孔的金属片（光阑）或者中性密度滤光片。 代价： 牺牲了低浓度的检出限（看不清微量了），但把量程上限扩大了 100 倍。 2. 双光路 / 双气室 (Dual Bench) 原理： 既然不能通吃，那我就装两套系统。 结构： 长气室： 光程长，灵敏度高，用来测低浓度。 短气室： 光程极短（比如只有 1mm），专门测高浓度（避免光学饱和）。 切换： 很多 NDIR 分析仪里，你会看到一个切光轮上同时有长短两个气室，CPU 自动判断：浓度高了就读短的，浓度低了就读长的。 3. 稀释采样 (Dilution) 这就回到了我们最开始聊的。既然仪器测不了高浓度，那我就在进气口把它稀释 100 倍再送进去。这是最彻底的解决办法。\n总结 在纯信号处理领域，通过可变增益链确实可以非常“简单”的扩大量程 (比如数字万用表，靠切电阻就能从 mV 测到 kV），但在分析仪器领域，我们要处理的是物质和光：\n光会饱和（非线性）。 物质会吸附（污染）。 器件会损坏（PMT 过载）。 所以，分析仪厂家才会把产品严格分为 “环境级（Ambient / Trace, ppb）” 和 “污染源级（Source / Emission, ppm）。这不仅仅是软件设置的不同，而是光路长度、气室体积、管路材质、甚至探测器选型的全方位物理差异。\n","date":"2025-12-11T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4/","title":"动态范围"},{"content":"现在，我们要解决两个更让现场工程师抓狂的问题：\n“快与稳的悖论”： 想要读数稳，反应就慢；想要反应快，读数就乱跳。怎么兼得？ “幽灵漂移”： 明明采用了切光轮/脉冲灯，为什么过了一周零点还是歪了？ 这里涉及到两个非常经典的信号处理策略：自适应数字滤波 和 自动调零。\n第一关：自适应滤波 —— “智能减震器” 工程师的困境：T90 vs. 噪声 T90 (响应时间)： 环保局要求，当烟气浓度突变时，你的仪表要在几十秒内反应过来。 噪声 (Noise)： 信号里总是有白噪声在跳动。 常规解法（滑动平均 Moving Average）：CPU 像一个收银员，手里拿着一个计算器：“我不看现在的瞬时值，我看过去 10 秒的平均值。”$$\\text{显示值} = \\frac{V_1 + V_2 + … + V_{10}}{10}$$\n问题来了： 如果你平均 100 个 数据（重滤波）：读数稳如老狗，但是反应迟钝。烟气都超标一分钟了，你还在慢慢爬坡。 如果你只平均 5 个 数据（轻滤波）：反应极快，但读数像心电图一样乱跳。 2. 高端解法：自适应滤波器 (Smart Filter) 聪明的算法不会死板地用固定的平均时间，它会“看人下菜碟”。它会实时计算“当前的变化率” (Delta)。\n场景 A：平稳工况 监测： 现在的测量值 $V_{now}$ 和上一秒的值 $V_{last}$ 差值很小（比如变化 \u0026lt; 1%）。 判断： “现在锅炉运行很稳，这点波动肯定是噪声。” 动作： 加大滤波力度！ 把过去 60 秒的数据拿来平均。 效果： 屏幕上的线条平滑得像直线。 场景 B：突发工况（如喷氨、起炉） 监测： 突然， $V_{now}$ 比 $V_{last}$ 激增了 20%！ 判断： “这不是噪声！这是真的浓度突变！出大事了！” 动作： 瞬间扔掉滤波器！ 甚至直接显示瞬时值，或者把平均时间缩短到 1 秒。 效果： 读数直线飙升，瞬间跟上工况变化。 这就是为什么你在看仪表时，平时它很稳，但一旦给标气，它“噌”地一下就上去了。不是它反应本来就那么快，是算法帮你“换挡”了。\n第二关：自动调零 (Auto-Zero) —— 给仪表“清零” 为什么还需要调零？ 你可能会问：“我们不是用了切光轮/脉冲灯了吗？不是已经把温漂减掉了吗？”很遗憾，减得不彻底。切光轮只能扣除探测器和电路的漂移。但它扣除不了光路本身的物理变化。\n例子： 如果测量室的窗片（Window）慢慢蒙上了一层极其均匀的薄雾（油气），或者镜片慢慢变黄了。 后果： $I_{meas}$ 会慢慢变小。仪表会以为是有气体在吸收光，导致读数正漂。 这种几小时甚至几天的极慢速漂移，切光轮（几十 Hz）是无能为力的。\n解决方案：电磁阀的“偷梁换柱” 在痕量分析仪（特别是测 CO 或 UVF SO2）里，你会听到每隔几小时，机柜里就“咔哒”一声响。这是 Auto-Zero Solenoid Valve (自动调零电磁阀) 在动作。\n算法逻辑：\n测量模式 ： 阀门让样气进入气室。 读数 = 样气信号 + 脏背景。 调零模式 （比如每 4 小时一次）： CPU 启动电磁阀，切断样气。 让样气通过一个内部的 Scrubber (吸附剂/洗涤器)，把 $\\text{SO}_2$ 或是 CO 过滤干净，变成零气。 此时气室里只有“脏背景”。 CPU 记录： “哦，原来现在就算没有气，也有 0.5V 的电压啊。记下来，这是新的零点偏置 (Zero Offset)。” 恢复测量： 切回样气。 $$\\text{最终读数} = \\text{当前测量值} - \\text{刚才记下的 0.5V}$$ 这就是为什么高端仪表可以无人值守运行好几个月，零点依然不飘。因为它自己会“每天洗几次澡”。 第三关：温度系数 —— 电阻的“热胀冷缩” 这是硬件电路设计中最隐蔽的“精度杀手”。\n那个 1G$\\Omega$ 的大电阻 还记得我们用来做 I/V 转换的那个 1G$\\Omega$ (10 亿欧姆) 反馈电阻吗？$$V = I \\times R$$\n理想情况： 电阻永远是 1,000,000,000 $\\Omega$。 现实情况： 所有电阻都有 温度系数 (TCR, Temperature Coefficient of Resistance)。 普通电阻的 TCR 可能是 100 ppm/°C。 这意味着：温度每变 1°C，电阻值就变万分之一。 灾难推演 早晚温差 20°C。 电阻值变化：$20 \\times 100\\text{ppm} = 2000\\text{ppm} = 0.2%$。 后果： 你的测量结果会凭空产生 0.2% 的误差。对于痕量分析来说，0.2% 的满量程误差可能就是几十 ppb，直接导致数据超标。 解决方案：恒温舱 (The Oven) 这也是为什么 CEMS 分析仪的核心光具座通常都要包裹厚厚的保温棉，并且要加热到 45°C 或 50°C。\n目的： 不是为了让气体舒服，而是为了“烤电阻”和“烤探测器”**。 逻辑： 既然电阻随温度变，那我就死死地把温度锁在 45°C。 硬件细节： 你会发现前置放大板通常直接贴在发热的光学底板上，或者有一个专门的铝盒罩着它。 总结 信号处理不仅仅是公式，它是对物理世界缺陷的补救\n问题 物理缺陷 信号处理补救 (补丁) 读数乱跳 瞬时噪声大 滑动平均 (Moving Average) 反应太慢 滤波导致滞后 自适应滤波 (Adaptive Filter) 长期漂移 镜片脏/光路变 自动调零 (Auto-Zero Valve) 量程不够 ADC 位数有限 自动增益 (Auto-Ranging) 昼夜温差 电阻阻值变化 恒温控制 (Oven Control) 现在的分析仪，其实就是 20% 的物理/化学原理 + 80% 的信号处理“补丁”。你看懂了这些补丁，你就看懂了这台仪器的灵魂。\n","date":"2025-12-11T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%BF%AB%E4%B8%8E%E7%A8%B3%E7%9A%84%E6%82%96%E8%AE%BA/","title":"快与稳的悖论"},{"content":"本篇继 紫外荧光法化学发光法 之后。\n今天，我们学习 CEMS 系统中地位最高、却最容易被轻视的“修正之王” —— 氧气的测量。 为什么说它地位最高？因为环保局看的数据是“折算浓度”。公式是这样的：$$\\text{折算浓度} = \\text{实测浓度} \\times \\frac{21 - \\text{基准氧}}{21 - \\text{实测氧}}$$ 也就是说，如果 $\\text{O}_2$ 测不准（比如把 6% 测成了 5%），你的 $\\text{SO}_2$ 和 $\\text{NO}_x$ 数据会瞬间产生巨大的误差。\n第一部分：顺磁法 —— 氧气是“磁铁”吗？ 我们通常认为气体是没有磁性的，但氧气是个异类。 氧气分子 ($\\text{O}_2$) 具有很强的顺磁性 。简单说，如果有一块强力磁铁，氧气会被吸过去！而氮气、二氧化碳这些大多数气体是抗磁性的（会被磁铁排斥）。\n利用这个物理特性，工程师设计了两种极为精巧的机械结构来测量氧气\n1. 哑铃式—— “气体天平” 哑铃式氧分析仪基于磁力机械式顺磁原理工作。 顺磁性：氧气是少数具有强顺磁性的气体之一，会被磁场吸引；而大多数其他气体（如氮气、二氧化碳）是抗磁性的。 测量装置：仪器的核心是一个由细金属丝（通常是铂金丝）水平悬挂的玻璃哑铃，哑铃内部充有氮气，并被放置在一个不均匀的磁场中。 偏转与平衡：当含有氧气的待测气体流入测量室时，氧分子被吸引到磁场较强的区域，从而对玻璃哑铃产生一个扭转力，使其偏转。偏转角度与氧气浓度成正比。 信号检测与反馈：一个光源、反射镜和光接收元件系统会检测哑铃的偏转。一个反馈回路会施加电流产生一个反向力矩，使哑铃回到初始平衡位置。保持平衡所需的电流大小与氧气浓度成正比，从而实现氧气含量的精确测量。 主要优势: 由于是基于纯物理效应（顺磁性）的直接测量，传感器本身没有消耗，理论上寿命无限长，维护成本低。\n2. 磁风式—— “没有运动部件的风扇” 如果你嫌哑铃太娇气，还有一种更硬核的设计。\n原理： 居里定律告诉我们，氧气的磁化率与温度成反比（越热，磁性越弱）。 结构： 设计一个环形气室，一边加磁场，同时加热电阻丝。 过程： 冷的氧气被磁铁强力吸过来。 氧气接触到电阻丝，变热了。 变热后的氧气磁性减弱，被后面源源不断吸过来的冷氧气推走。 结果： 形成了一股持续的“磁风” 。 测量： 这股风吹过热敏电阻，带走热量。通过测量热敏电阻的冷却程度，算出氧气浓度。 第二部分：氧化锆法 —— 浓差电池 如果说顺磁法是物理机械的艺术，氧化锆法就是电化学的魔法。它主要用于原位测量（直接插在烟道里）或高温采样。\n核心元件： 氧化锆 ($ZrO_2$) 陶瓷管。 这种陶瓷在高温（\u0026gt;600°C）下，变成了一种固体电解质。它允许氧离子 ($O^{2-}$) 在里面自由穿梭，但电子过不去。 结构： 陶瓷管像一个试管。 内侧： 通参比空气（氧浓度 20.95%）。 外侧： 接触烟气（氧浓度低，比如 3%）。 两侧都涂上多孔铂电极。 原理（能斯特方程 Nernst Equation）： 因为内外氧浓度不同，高浓度一侧的氧分子抢着穿过陶瓷壁跑到低浓度一侧去。 这就形成了一个“氧气浓差电池”。 $$E = \\frac{RT}{4F} \\ln\\left(\\frac{P_{ref}}{P_{meas}}\\right)$$ E： 产生的电压（毫伏级）。 $P_{ref}$： 21%（空气）。 $P_{meas}$： 待测氧浓度。 特点： 反直觉： 氧气越少（贫氧），电压反而越高！ 对数关系： 在低浓度（比如 1ppm）时灵敏度极高。 第三部分：专家经验 —— 著名的“湿干之争” 这是现场最容易掉进去的坑，尤其是当你混合使用不同原理的仪表时。\n问题场景：\nA 表（氧化锆）： 测出来氧量 4.0%。 B 表（顺磁）： 测出来氧量 4.5%。 谁是准的？可能都准！ 逻辑陷阱：\n氧化锆法： 通常需要在高温下工作。如果它是原位式（In-situ）探头，它直接插在烟道里测。 烟道里有大量的水蒸气（比如 10%）。氧化锆测的是包含水蒸气的湿基氧 (Wet Basis)。 $$\\text{湿基氧} = \\frac{V_{O2}}{V_{dry} + V_{water}}$$ 顺磁法： 通常安装在 CEMS 机柜里。样气在进入机柜前，必须经过冷凝器除水（为了保护精密机械哑铃）。所以水蒸气被去掉了，体积变小了，氧气的占比自然就“浓缩”了。 它测的是干基氧 。$$\\text{干基氧} = \\frac{V_{O2}}{V_{dry}}$$ 换算公式：$$\\text{干基氧} = \\frac{\\text{湿基氧}}{1 - \\text{湿度%}}$$ 假设湿度是 10%：$$4.5% (\\text{干}) \\approx \\frac{4.0% (\\text{湿})}{1 - 0.1}$$ $4.0 / 0.9 = 4.44%$。 结论：如果不搞清楚你的表是测干的还是湿的，你的折算浓度可能会差出 10%~15% 的误差，这在环保验收时是致命的。\n关于发现和发明的辩证关系 如果氧气恰好没有顺磁性，或者氧化锆恰好不能传导氧离子，那么今天这两种主流的分析仪是不是就不会存在？\n所谓的“巧合”，其实是物质的“指纹” 我们在工程上测量任何一种东西，本质上都不是在测量它本身，而是在测量它的“特异性指纹”。\n氧气 (O2)： 它的指纹刚好是“顺磁性”。 二氧化硫 (SO2)： 它的指纹刚好是“被紫外光激发发荧光”。 一氧化碳 (CO)： 它的指纹刚好是“吸收 4.6 微米的红外光”。 这并不是因为运气好才发现了这些指纹，而是因为科学家把物质的所有属性（光、电、磁、热、力）都测了一遍，然后“按图索骥”。\n历史上是先有了法拉第早在 1845 年就发现了氧气的顺磁性（当时只觉得是个有趣的物理现象），过了几十年，当工业界需要测量氧气时，工程师们翻开物理书：“嘿，大家都不导磁，就这货导磁，咱们就用这个特性来抓它！”\n所以，不是为了做传感器才发现了特性，而是特性一直都在，等着我们去把它们变成工具。\n实际上，如果没有这些“巧合”，我们也一样还有其他方法可以测氧气，这里暂时就不展开了。\n为什么是顺磁和氧化锆胜出了？ 这两种特性之所以统治了 CEMS 领域，是因为它们满足了工业现场最挑剔的三个要求：\n特异性强： 顺磁法：几乎只有氧气顺磁，别的气体不干扰。（抗干扰） 耐操（Robustness）： 氧化锆：哪怕在 800°C 的肮脏烟道里，它是一块陶瓷，烧不坏、腐蚀不动。（耐高温、耐腐蚀） 简单： 哑铃就是个力学结构，氧化锆就是个管子。结构越简单，故障率越低。 并不是因为巧合才有了氧传感器。而是因为氧气恰好有这两个“又独特、又好用”的物理特性，导致利用这两个特性的传感器成本最低、寿命最长，从而淘汰了其他竞争对手，让你产生了“只有它们”的错觉。\n所有的工程技术，本质上都是在把大自然微观层面的“BUG”（特异性），通过放大器，变成了宏观层面的“FEATURE”（功能）。\n这也是为什么我们要学习物理——为了在上帝留下的代码里，找到那些可以被利用的“后门”。\n","date":"2025-12-11T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%B0%A7%E6%B0%94%E7%9A%84%E6%B5%8B%E9%87%8F/","title":"氧气的测量"},{"content":"NOx 化学发光法 (Chemiluminescence) 这是测量 $\\text{NO}_x$ 的标准方法，利用 $\\text{NO}$ 与臭氧反应发光。原理： $$ \\text{NO} + \\text{O}_3 \\rightarrow \\text{NO}_2^* + \\text{O}_2 $$ $$ \\text{NO}_2^* \\rightarrow \\text{NO}_2 + h\\nu (600-3000nm) $$ 在稀释法中存在的问题：\n1、NO2 转化效率 问题： 化学发光法只能测 $\\text{NO}$。烟气中的 $\\text{NO}_2$ 必须先通过转换炉（通常是钼炉或不锈钢炉）还原成 $\\text{NO}$。$$\\text{NO}_2 \\xrightarrow{\\text{Converter}} \\text{NO}$$ 稀释法的挑战： 虽然稀释降低了中毒风险，但转换炉有寿命。如果转化率低于 95%，$\\text{NO}_x$ 总量测量就会偏低。特别是在氨逃逸较高的情况下，可能会生成铵盐堵塞转换器。 场景假设：化学发光法 $\\text{NO}_x$ 的“偷梁换柱” 背景知识： 化学发光法其实是个“独眼龙”，它只能直接看见 $\\text{NO}$。 对于烟气里的 $\\text{NO}_2$，它必须先通过一个高温炉（转换器），把 $\\text{NO}_2$ 变成 $\\text{NO}$ 才能测。$$\\text{NO}_x = \\text{NO} (\\text{直接测}) + \\text{NO}_2 (\\text{转化后测})$$\n校准时刻（偷懒的代价）： 绝大多数现场，运维只会买一瓶 **$\\text{NO}$ 标气。 通入 100 ppm 的 $\\text{NO}$。 气体流过旁路（不经过转换炉） -\u0026gt; 测得 100。 气体流过转换炉（经过转换炉） -\u0026gt; $\\text{NO}$ 还是 $\\text{NO}$，测得 100。 结果： 校准通过。 故障时刻： 转换炉用久了，或者因为前面说的稀释探头加热不好，导致一点点冷凝水或铵盐进去了，转换炉中毒失效了。效率降到了 0%。 此时你再用 $\\text{NO}$ 标气校准。因为 $\\text{NO}$ 不需要转换，所以校准依然是合格的！ 测量时刻（致命漏测）： 工况烟气来了。假设里面有 80 ppm $\\text{NO}$ 和 20 ppm $\\text{NO}_2$（总 $\\text{NO}_x$ = 100）。 分析仪读数： 只能测到那 80 ppm 的 $\\text{NO}$。那 20 ppm 的 $\\text{NO}_2$ 因为转换炉坏了，没变成 $\\text{NO}$，直接被分析仪无视了。 显示结果： 80 ppm。 欺骗结果： 你少测了 20% 的排放量。 而且，因为你也只用 $\\text{NO}$ 标气校验，你根本发现不了转换炉已经挂了。 如何破解这种骗局呢：\n必须使用 $\\text{NO}_2$ 标气：只有通入 $\\text{NO}_2$ 标气，看能不能读出数来，才能验证转换炉的好坏。 观察 $\\text{NO}_x$ 与 $\\text{NO}$ 的差值：在正常燃烧工况下，$\\text{NO}_2$ 通常占 $\\text{NO}_x$ 的 5% 左右。如果你发现你的表上，$\\text{NO}$ 的数值永远等于 $\\text{NO}_x$ 的数值（即 $\\text{NO}_2$ 读数长期为 0），那很可能是转换炉出问题了。 2、H2O 和 CO2 的猝灭效应 痛点： 与紫外荧光法类似，$\\text{H}_2\\text{O}$ 和 $\\text{CO}_2$ 也是化学发光法的强猝灭剂。 现象： 如果稀释空气干燥度不够（露点高），水分进入反应室，会显著降低发光强度，导致 $\\text{NO}_x$ 读数偏低。这就是为什么稀释风的露点通常要求在 -40°C 以下。 3、臭氧发生器的稳定性 系统隐患： 分析仪内部自带高压臭氧发生器。如果供电电压不稳或发生器老化，臭氧浓度下降，反应就不完全（不再是富氧反应），导致测量线性变差。 案例 1：NOx 转换炉的“好心办坏事” 背景知识： 前面我们说过，化学发光法为了测 $\\text{NO}_2$，需要用转换炉（钼炉或不锈钢炉）把 $\\text{NO}_2$ 还原成 $\\text{NO}$。我们希望这个炉子只干这一件事。$$\\text{NO}_2 \\xrightarrow{\\text{高温 + 催化剂}} \\text{NO}$$\n逻辑陷阱（场景重现）： 工况背景：为了降低 $\\text{NO}_x$ 排放，电厂都会喷氨水（SCR/SNCR 脱硝）。如果不小心喷多了，烟气里就会有逃逸的氨气 ($\\text{NH}_3$)。 分析仪的“过度热情”：常用的钼炉（Moly Converter）工作温度在 315°C~350°C 左右。在这个温度下，钼炉不仅能把 $\\text{NO}_2$ 还原成 $\\text{NO}$，它也能把 $\\text{NH}_3$ 氧化成 $\\text{NO}$。$$\\text{NH}_3 + \\text{O}_2 \\xrightarrow{\\text{Mo, 350°C}} \\text{NO} + \\text{H}_2\\text{O}$$ 现场的“死亡螺旋”： 状态： 此时 $\\text{NO}_x$ 实际上有点高。 操作： 运行人员加大喷氨量。 物理结果： 实际 $\\text{NO}_x$ 降下来了，但逃逸的 $\\text{NH}_3$ 变多了。 CEMS 读数： 逃逸的 $\\text{NH}_3$ 进入转换炉，变成了 $\\text{NO}$。分析仪把这部分 $\\text{NH}_3$ 当作 $\\text{NO}_x$ 计入了读数。读数不仅没降，反而可能升高了！ 误判： 运行人员一看屏幕：“卧槽，喷了氨怎么 $\\text{NO}_x$ 还没降？肯定是喷得不够！再加大喷氨！” 结局： 氨水耗尽，设备腐蚀，CEMS 数据依然超标。 那么如何排查这个问题 准备工作： 找一个氨逃逸比较大的工况（或者让运行稍微多喷点氨）。 正常测量： 记录此时的 $\\text{NO}_x$ 读数（例如 50 ppm）。 切断转换炉： 如果是高温炉，把温度设定降到室温（或者直接拔掉加热棒电源，让它自然冷却）。 或者切换气路，让样气绕过转换炉。 观察读数变化： 理论上： 绕过转换炉后，$\\text{NO}_2$ 不被转化了，读数应该下降（只剩 $\\text{NO}$）。 如果读数下降得非常剧烈（例如从 50 降到 10）： 说明之前那 40 ppm 的差值里，包含着大量的 $\\text{NO}_2$ 或者 被转化了的 $\\text{NH}_3$。 氨气过滤器： 在取样管路中临时加装一个磷酸浸渍的过滤器（专门吸附氨气，不吸附 $\\text{NO}_x$）。 如果加了过滤器后，$\\text{NO}_x$ 读数瞬间下降了，那就实锤了：你的转换炉在把氨气当成 $\\text{NO}_x$ 测！ ","date":"2025-12-09T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8C%96%E5%AD%A6%E5%8F%91%E5%85%89%E6%B3%95/","title":"化学发光法"},{"content":"继 粉红噪声 后篇，这篇学习锁相放大器 (Lock-in Amplifier)，或者更具体一点，叫相敏检波器 (PSD, Phase Sensitive Detector)\n为了明白这个概念，举一个推秋千的例子。想象你是一个“相敏检波器 (PSD)”，你的任务是让秋千荡得越高越好（提取出信号）\n场景设定 信号 (Input Signal)： 坐在秋千上的孩子。 他有规律地荡来荡去。 向前荡代表正电压 (+V)。 向后荡代表负电压 (-V)。 这就是我们一直在说的交流信号 (AC)。 噪声 (Noise)： 一群捣乱的风。 风一会儿从前吹，一会儿从后吹，完全没规律。 参考信号 (Reference Signal)： 你的大脑指令（推还是拉）。 你的大脑里有一个节拍器，频率和秋千完全同步。 指令 +1（正指令）： 用力推。 指令 -1（负指令）： 用力拉。 核心机制：同步乘法 所谓的“乘法”，在这里就是你的动作（参考信号）与秋千运动（输入信号）的相互作用。我们来看三种情况：\n情况一：完美的信号提取（同步乘法生效） 你想让信号变大（提取信号），你必须配合秋千的节奏。\n第一半周期（秋千向前荡 +）： 输入信号： 正 (+)（孩子向前冲）。 你的动作： 你的节拍器告诉你，现在是前半拍，指令是 推 (+)。 乘法运算： $(+) \\times (+) = \\mathbf{+}$ (获得正向的能量，秋千变高)。 第二半周期（秋千向后荡 -）： 输入信号： 负 (-)（孩子荡回来了）。 你的动作： 你的节拍器告诉你，现在是后半拍，指令是 拉 (-)。 注意：这里是关键！你不是推，你是顺势往回拉。 乘法运算： $(-) \\times (-) = \\mathbf{+}$ (负负得正！你顺着他回来的劲用力拉，秋千依然获得正向能量，变得更高)。 结果： 无论秋千是向前还是向后，因为你的动作（参考信号）总是和它同步反转，你做的每一次功都是正功。经过一段时间（积分），秋千荡得非常高（输出一个稳定的直流高电压）。\n情况二：噪声的过滤（随机信号被抵消） 现在看看那阵乱吹的风（噪声）。\n第一回合： 风向前吹 (+)。 你的动作是 推 (+)。 结果：$(+) \\times (+) = +$ (风帮你省力了，产生正能量)。 第二回合： 风依然向前吹 (+)（因为风是随机的，没必要跟着你换方向）。 你的动作变成了 拉 (-)。 结果：$(+) \\times (-) = \\mathbf{-}$ (你和风对着干，抵消了能量)。 结果： 因为风（噪声）没有你的节拍器，它一会儿帮你，一会儿阻碍你。当你做 1000 次动作后，这些帮助和阻碍互相抵消，平均下来等于 0。\n这就是“只选想要的频率，过滤掉所有其他频率”的物理本质。\n情况三：相位的诅咒（不同步会怎样？） 这也解释了为什么要有 “相位设置”。假设你的节拍器虽然频率对了（也是 1 秒一次），但是慢了半拍（相位差 90 度）。\n秋千已经荡到最高点准备往回落了（速度为 0），你才刚开始用力推。 秋千已经荡到最低点速度最快了，你却停手了。 这时候，你做功的效率就会大打折扣，甚至有时候会起反作用（阻碍秋千）。 在仪表上，这就表现为：虽然有信号，但读数很小，甚至接近于 0。\n所以，工程师调校仪器，就是为了让你的“推拉节奏”和“秋千的摆动”严丝合缝（同频同相），从而获得最大的推力（最大的输出信号）。\n实际案例：红外气体分析仪 CEMS 机柜中的 CO 和 CO2 分析仪，它们通常用的是 非分散红外法 (NDIR)。\n在老式或者经典的 NDIR 分析仪里，有一个核心的机械部件叫 切光轮（实际上，在电子调制技术（像脉冲氙灯那样直接开关灯）还不成熟，或者光源无法快速开关的年代，工程师们用纯机械的方式解决信号处理问题的杰作）。\n一、 为什么要“切”？（物理约束） 在讲结构之前，我们要先解决一个核心矛盾。\n红外光源的惰性： CEMS 用的红外光源通常是黑体辐射源（比如陶瓷加热棒、MEMS 热源）。 想象一个烧红的电炉丝，你能让它每秒钟开关 10 次吗？ 不能。 你断电了，它还要几秒钟才冷却。它的热惯性（Thermal Inertia）太大了，没法像氙灯那样做“电子脉冲”。它只能常亮。 探测器的“怪癖”： NDIR 最常用的探测器是热释电探测器 或 气动探测器 。 它们有一个致命的特性：**只对“变化”敏感。 如果光强恒定（哪怕很强），探测器输出电荷会逐渐中和，输出信号归零。 只有光强发生跳变时，它才会输出一个尖峰电压。 矛盾出现了： 光源只能常亮（DC），但探测器只吃跳变信号（AC） —\u0026gt; “既然灯关不掉，那我就用手挡住它！快点挡，快点松开！” —— 这就是切光轮。\n二、切光轮结构拆解 一个典型的 NDIR 切光组件包含三个核心部分：\n1. 切光轮本体 材质： 通常是轻质铝合金或不锈钢，表面发黑处理（防止反光）。 形状： 像电风扇叶片。最简单的是半圆盘（50% 透光，50% 遮光）。 转速： 通常由一个无刷直流电机带动，转速极其稳定。频率通常设定在 10 Hz ~ 60 Hz 之间。 太慢了：避不开粉红噪声。 太快了：红外探测器反应慢，来不及响应。 2. 光路截断 切光轮安装在 光源 和 气室/探测器 之间。 状态 A（透光）： 叶片转走，红外光穿过样气，打在探测器上。 信号 = 气体吸收后的光强 + 背景杂散光 + 探测器热漂移。 状态 B（遮光）： 叶片挡住光路。探测器处于“黑暗”中。 信号 = 切光轮自身的辐射 + 背景杂散光 + 探测器热漂移。 3. 同步信号发生器 在切光轮的边缘，通常会开一个小孔，或者切光轮本身就是齿轮状的。 旁边装有一个 U 型光电开关。 轮子每转一圈，光电开关就输出一个方波脉冲。 作用： 这个方波直接发给 CPU，告诉 CPU：“现在是亮的时候！”或者“现在是暗的时候！”。这就是参考信号 (Reference Signal)。 三、 信号处理流程（把“直流”变成“交流”） 让我们看看探测器实际输出了什么波形，以及 PSD 是怎么处理的。\n原始光强 (Optical Input)：是一个方波。有光 -\u0026gt; 无光 -\u0026gt; 有光 -\u0026gt; 无光。 探测器输出 (Detector Output)：由于探测器有热容（反应慢），它输出的不是完美的方波，而是像鲨鱼鳍一样的三角波/锯齿波。 光来了，电压慢慢爬升。 光断了，电压慢慢下降。 锁相放大 (PSD Processing)：CPU 拿着光电开关给的“参考信号”，对探测器的“锯齿波”进行同步解调。$$\\text{最终值} = (\\text{爬升的峰值}) - (\\text{下降的谷值})$$ 核心优势：假设探测器因为环境温度升高，产生了一个巨大的直流漂移（比如电压整体抬升了 5V）。\n爬升峰值变成了 5.1V。 下降谷值变成了 5.0V。 相减： $5.1 - 5.0 = \\mathbf{0.1V}$。 结果： 那个 5V 的温漂被机械切光轮完美干掉了！ “进阶玩法”：GFC (气体相关滤波) 既然轮子都要转，“为什么只做挡光和透光？能不能干点更高级的？”于是诞生了 气体相关滤波轮 (Gas Filter Correlation, GFC)。这是 NDIR 抗干扰的终极武器。\n切光轮上不再是空的，而是装了两个充满气体的透明小盒子：\n测量室 (Measure Cell)： 里面充的是纯氮气 ($N_2$)。 作用：透光。红外光穿过去，被烟道里的样气吸收。这是“有信号”的状态。 参比室 (Reference Cell)： 里面充的是极高浓度的待测气体（比如 100% 的 CO）。 作用：“光学饱和”。 因为浓度太高，CO 对应的吸收波长的光被这个小盒子全部吃光了。 此时打到探测器上的光，已经不包含任何 CO 的信息了（因为那个频段已经黑了）。这相当于一个“特异性极强的物理挡板”**。 工作逻辑：\n轮子转到氮气格： 测得 $I_{meas}$（包含样气吸收信息）。 轮子转到 CO 格： 测得 $I_{ref}$（样气里的 CO 吸无可吸，因为光已经被小盒子吸干了，所以这个信号不受样气浓度影响，只受粉尘、光源衰减影响）。 计算： 通过对比这两个信号，不仅扣除了背景，还完美扣除了粉尘干扰和窗口污染。 疑问解答 如何理解这句话：通过对比这两个信号，不仅扣除了背景，还完美扣除了粉尘干扰和窗口污染\n为了解开这个结，我们需要引入一个核心物理概念：“光谱指纹”与“饱和”。\n第一步：理解前提 —— 光不是“铁板一块” 红外光不是单纯的一束白光，它像一条包含各种颜色糖果的传送带（光谱）。\n糖果 A（特定波长）： 只有 CO 喜欢吃（比如 4.6 微米波段）。 糖果 B（其他波长）： CO 根本不碰，只有灰尘（墨镜）会挡住它们。 比尔定律的基础： 我们通过数“糖果 A 少了多少”，来算出 CO 有多少。\n第二步：解密“吸无可吸” 现在的场景是：光（传送带）先经过烟道（样气），再经过切光轮上的小盒子。\n场景 1：轮子转到“测量室”（纯氮气 $N_2$） 设定： $N_2$ 啥都不吃。 过程： 传送带上有 100 颗“糖果 A”。 经过烟道（样气），样气里的 CO 比较少，偷吃了 20 颗。 经过 $N_2$ 盒子，没变化。 到达探测器： 收到 80 颗。 结论： 探测器发现少了 20 颗，算出样气里有 CO。 场景 2：轮子转到“参比室”（高浓度 CO） 设定： 这个小盒子里塞满了高压 CO，它是超级大胃王，能把所有的“糖果 A”全部吃光，一颗不剩。 过程： 传送带上有 100 颗“糖果 A”。 阶段一（经过烟道）： 样气里的 CO 还是偷吃了那 20 颗。剩下 80 颗。 阶段二（经过 CO 盒子）： 剩下的 80 颗糖果 A 进入盒子。因为盒子里的 CO 浓度极高（饱和），它会把进来的所有“糖果 A”统统吃掉。 到达探测器： 收到 0 颗 “糖果 A”。 现在我们来做一个思想实验：如果样气里的 CO 浓度变高了，它在阶段一偷吃了 50 颗（而不是 20 颗），结果会怎样？\n阶段一： 100 颗 -\u0026gt; 剩下 50 颗。 阶段二（CO 盒子）： 盒子里的超级大胃王把剩下的 50 颗统统吃掉。 到达探测器： 依然收到 0 颗 “糖果 A”。 结论：无论样气里的 CO 偷吃了多少（是 0 颗、20 颗还是 50 颗），只要后面跟着一个“通吃”的参比室，最终到达探测器的“糖果 A”永远是 0。这就是为什么我说：$I_{ref}$ 信号不受样气中 CO 浓度的影响。 对于 CO 敏感的那个波段来说，光已经被彻底“拉黑”了，谁也改变不了结局。\n第三步：那 $I_{ref}$ 到底是测什么的？ 你可能会问：“既然糖果 A 都是 0 了，那探测器读到的信号 $I_{ref}$ 是哪里来的？”别忘了传送带上还有 “糖果 B”（其他波长的光）！\nCO 不吃糖果 B，所以糖果 B 会穿过样气，也会穿过 CO 盒子，最终打在探测器上。\n这时候，灰尘（粉尘）的作用就显现了：灰尘是不挑食的，它像一块半透明的布，既挡糖果 A，也挡糖果 B。\n如果有灰尘： 糖果 B 的数量会减少（比如从 1000 减到 900）。 如果有光源老化： 糖果 B 的初始数量就会减少。 所以，$I_{ref}$ 测量的是“除了 CO 吸收波段以外的背景光强”。\n第四步：最终的算术魔法 分析仪 CPU 做的是这样一个对比运算：$$浓度 \\propto \\frac{I_{meas} - I_{ref}}{I_{ref}}$$\n$I_{meas}$ (测量信号)：背景光 + 剩余 CO 波段的敏感光 $I_{ref}$ (参比信号)： 仅包含（背景光）。注：因为 CO 波段已经黑了，剩下的全是背景。 $I_{meas} - I_{ref}$ (差值)： 这代表 “样气到底吃掉了多少光” ![[Pasted image 20251209232443.png]]\n通过这个公式：\n抵消干扰： 灰尘是非选择性吸收，无论光是“背景光成分”还是“CO 敏感光成分”，灰尘都一视同仁，统统挡掉一半。通过比值之后，抵消掉这个干扰 提取浓度： 分子和分母的差值，正好就是“样气 CO 吃掉的那部分光”。 总结 测量室（$N_2$）： 像一块透明玻璃。样气里的 CO 吃多少，我就能看到光少多少。 参比室（高浓度 CO）： 像一块特定颜色的黑布（针对 CO 波段）。它强制把 CO 的波段“清零”。 既然已经强制清零了，样气之前吃没吃过这口光，对结果（0）没有影响。 它剩下的光，反映的是“光路脏不脏、灯泡亮不亮”。 ","date":"2025-12-09T00:00:00Z","permalink":"https://teaize.github.io/p/%E9%94%81%E7%9B%B8%E6%94%BE%E5%A4%A7%E5%99%A8/","title":"锁相放大器"},{"content":"这个金属层通常不只是为了“遮光”，它最核心、最容易被忽视的作用是抗磁干扰，其次才是静电屏蔽。\n核心防御：抗磁干扰 这是 PMT 屏蔽层最独特的功能。这层金属通常不是普通的铁或铝，而是坡莫合金（Permalloy / Mu-metal），一种具有超高导磁率的材料。\n物理原理： PMT 的工作原理是光电子在真空中飞行，撞击一系列倍增极（Dynodes）。 电子带电且在运动，根据洛伦兹力公式：$$\\vec{F} = q(\\vec{v} \\times \\vec{B})$$ 只要周围存在磁场（$\\vec{B}$），电子的飞行轨迹就会发生偏转。 后果： 如果电子因为磁场偏转，没有打中下一级倍增极，而是打到了管壁上，增益（Gain）就会大幅下降。 外部干扰源： 变压器、散热风扇的电机、电磁阀线圈，甚至是地磁场。 屏蔽层的作用： 坡莫合金就像磁场的“高速公路”。外部磁力线会优先沿着屏蔽层（磁阻最小路径）绕过 PMT 内部空间，从而在 PMT 内部营造一个“无磁环境”，确保电子走直线。 常规防御：静电屏蔽 PMT 通常工作在负高压状态（例如 -800V 到 -1000V），其输出信号却是极其微弱的电流（纳安 nA 级别），需要被放大电路（前置放大器）读取。\n干扰源： 分析仪内部到处都是噪声源：开关电源的高频噪声、紫外灯点火时的脉冲干扰、加热继电器的吸合噪声。 屏蔽层的作用： 这就如同法拉第笼（Faraday Cage）。将金属屏蔽层接地（通常是模拟地 AGND），可以将外部的电场耦合屏蔽在外面，防止杂散电容将高频噪声引入信号链路。 屏蔽层的作用： 这就如同法拉第笼（Faraday Cage）。将金属屏蔽层接地（通常是模拟地 AGND），可以将外部的电场耦合屏蔽在外面，防止杂散电容将高频噪声引入信号链路。\n关于这一点的疑问：\n1、法拉第笼 —— “电场的结界” 1、如何理解法拉第笼 想象一个由金属网或金属板做成的全封闭盒子。 物理原理： 金属是导电的，意味着里面有大量的自由电子。 当外部有一个电场（比如旁边有个带高压电的变压器，或者空中的无线电波）打到这个盒子上时，金属盒子表面的自由电子会瞬间移动。\n电子移动的结果是：在盒子表面产生一个反向电场，刚好和外部电场抵消。 最终效果： 盒子内部的合电场为 0。 2、通俗类比 避雷针/汽车： 下雷雨时，躲在汽车里是最安全的。即便闪电击中汽车，电流只会沿着金属外壳流到地下，车里的人毫发无损。汽车就是一个法拉第笼。 3、为什么 PMT 需要它 PMT 内部处理的是纳安（nA）甚至更小级别的电流信号。 如果没有这个金属壳（法拉第笼）：\n旁边 220V 的电源线 就像一个“发射塔”，不断向周围辐射 50Hz 的电场。 PMT 内部的信号线就像“天线”，会接收到这个 50Hz 干扰。 结果：你的测量数据里会叠加一个讨厌的正弦波噪声。 加上屏蔽层后： 干扰被金属壳挡在外面，内部“风平浪静”。 2、接地 —— “电荷的下水道”与“海平面” “地”不是真正的泥土，它是一个电位参考点。\n为什么要接地？ 金属屏蔽层（法拉第笼）挡住了外部的干扰电场，这意味着屏蔽层表面感应了很多电荷（噪音）。 如果这个屏蔽层悬空（不接任何东西）：\n它上面积累的电荷无处可去。 当电荷积累多了，屏蔽层本身就变成了一个带电体（噪声源），反过来通过电容耦合干扰里面的 PMT。 接地的作用： 就像给浴缸接了一根排水管。 把屏蔽层接到“地”，就是给这些感应到的噪声电荷提供一条低阻抗的路径，让它们迅速流走，保证屏蔽层本身始终保持 0V 电位（干净）。\n3、模拟地 (AGND) vs. 数字地 (DGND) —— “纯净水”与“污水” 为什么要特意强调接“模拟地 (AGND)”\n在一块复杂的 CEMS 电路板上，虽然所有的“地”最终都会连在一起，但在局部，它们是分开管理的。\n1、数字地 (DGND) —— “建筑工地” 谁在用： CPU、单片机、继电器、电机驱动、风扇。 特征： 电流变化剧烈。CPU 的时钟是以 MHz 频率开关的，电机启动会有大电流冲击。 水质： 这里的“地”虽然名义上是 0V，但实际上因为电流波动大，上面充满了各种尖峰毛刺。就像建筑工地的污水管，水流湍急且脏。 2、模拟地 (AGND) —— “精密实验室” 谁在用： 传感器、运放、ADC（模数转换）、PMT 前置放大器。 特征： 处理的是微弱信号，要求极其安静的背景。 水质： 这里的“地”要求非常平稳，是一潭死水。就像实验室的纯净水管。 3、为什么 PMT 屏蔽层不能接 DGND 如果把 PMT 的屏蔽层接到了“数字地”：\n本来你是想让屏蔽层把噪声排走。 结果因为数字地太脏，电机转动产生的噪声反而顺着地线倒灌到了屏蔽层上。 屏蔽层变成了发射天线，把数字噪声辐射给了 PMT。 正确做法： 必须把屏蔽层接到最干净的 AGND。确保它是整个系统中最宁静的参考平面。\n","date":"2025-12-08T00:00:00Z","permalink":"https://teaize.github.io/p/pmt%E9%87%91%E5%B1%9E%E5%B1%8F%E8%94%BD%E5%B1%82/","title":"PMT金属屏蔽层"},{"content":"继 PMT金属屏蔽层 的引申。这篇学习法拉第笼的“死敌”——地环路。\n屏蔽电缆 除了前面所说 PMT 屏蔽层之外，其实很多传输信号的电缆线也是法拉第笼，更像是一条柔软的法拉第笼。例如探头上传感器连接到机柜的信号线，用的是同轴电缆或者屏蔽电缆\n芯线 (Inner Conductor)： 传输信号。 编织屏蔽层 (Outer Conductor)： 就是那个法拉第笼。 外皮 (Jacket)： 绝缘保护。 只要这个编织层接地，外部的电磁干扰就会像水流过雨衣一样，沿着屏蔽层流走，保护里面的芯线信号。听起来很完美，对吧？但是……\n噩梦的开始：地环路 场景假设： 你有一根信号线，连接着 探头 (在烟囱上) 和 分析仪 (在分析小屋里)。\n探头端： 探头装在几十米高的钢制烟囱上。烟囱是巨大的金属导体，也是巨大的天线（接收雷电、静电）。烟囱的“地”通常很“脏”，电压可能比大地高出几伏特。 机柜端： 分析仪小屋有专门的接地桩，这里的“地”很干净（0V）。 错误操作： 如果是毫无经验的接线工，他会非常负责任地：\n在探头端，把屏蔽层接在烟囱的金属壳上（接地）。 在机柜端，把屏蔽层接在机柜的汇流排上（接地）。 结果：\n两点接地！ 物理现象： 烟囱的地电位（比如 5V）和机柜的地电位（0V）之间有电势差。 后果： 你的信号线屏蔽层，现在变成了一根导线，连接了两个巨大的电源。强大的环路电流（可能高达几安培！）开始在你的屏蔽层里疯狂流动。 这就叫“地环路”。你的“法拉第笼”现在不仅不防干扰，反而自己变成了一个发热的、带强电流的电磁铁。这股电流通过互感，直接把巨大的 50Hz 嗡嗡声感应到里面的芯线上。\n体现到数据上： 你的 CEMS 读数会在屏幕上剧烈跳动，或者叠加一个巨大的波浪线。\n解决方案：单点接地 (Single-Point Grounding) 如何在硬件安装上解决这个问题？答案是：物理隔断。\n黄金法则：对于低频信号屏蔽，屏蔽层只能在一端接地！\n通常的做法是：\n机柜端接地： 在分析仪这一侧，把屏蔽层剥开，牢牢接在干净的仪表地上（AGND）。 探头端悬空（浮空）： 在探头那一侧，屏蔽层剪断，做绝缘处理，绝不能碰到烟囱金属壳。 这样，屏蔽层依然是法拉第笼（电位是 0V），但回路被切断了，地电流流不过去。\n为了防止探头壳体通过螺栓意外连接到烟囱的大地，我们在机械安装时，经常会用到绝缘法兰垫片和绝缘螺栓套管。\n这也是为什么在看某些进口探头的安装图纸时，会发现它们要求在安装法兰中间加一层厚厚的四氟垫片，这不仅仅是为了密封，更是为了电气隔离，切断地环路。\n小结 现在回头看 CEMS 系统，是不是感觉不一样了:\nPMT 屏蔽罩： 小法拉第笼，保护心脏。 同轴电缆： 长法拉第笼，保护血管。 单点接地： 防止笼子变成通电线圈。 绝缘法兰： 机械层面的“断路器”。 ","date":"2025-12-08T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%9C%B0%E7%8E%AF%E8%B7%AF/","title":"地环路"},{"content":"继 [[PMT金属屏蔽层]]、[[地环路]] 的引申。这篇学习调制与解调。在硬件上，这通常对应着一个关键部件：脉冲氙灯（或者闪烁氙灯）或者切光轮。\n问题的根源：直流漂移 场景假设：你把 PMT 的屏蔽做好了，地线也接好了。\n但是，PMT 这个器件本身有个物理特性：暗电流。即使在完全没有光的情况下，它也会输出一点点电流（比如 0.1 nA）。更糟糕的是，这个“0.1 nA”不是固定的：\n温度升高 1 度，它可能变成 0.12 nA。 器件老化一点，它可能变成 0.15 nA。 供电电压波动一点，它又变了。 这就是“漂移”。如果你用连续恒定的紫外灯（Continuous Lamp）去照射 $\\text{SO}_2$：\nPMT 读到的总电流 = （$\\text{SO}_2$ 荧光电流）+ （PMT 暗电流）+ （杂散光背景）。 困境： 当总电流变大了，你根本不知道是 $\\text{SO}_2$ 浓度高了，还是 PMT 变热了，或者是灯泡老化亮度变了。 这就好比：你在一个黄昏的房间里读书，你不知道书本变暗是因为天黑了（背景变了），还是你的视力下降了（器件漂移）。\n硬件的破局：让光“闪”起来 为了解决这个问题（漂移），工程师引入了“调制”。在紫外荧光法中，我们通常使用的是脉冲氙灯（比如 Thermo 43i 就用这个技术）。它的逻辑极其简单粗暴，但极其有效：“别一直开灯！闪着开！”\n1. 工作时序 分析仪的 CPU 会控制灯以固定的频率闪烁（例如 10Hz，每秒闪 10 次）。这就把时间切成了两半：\n状态 A（灯亮时刻）： PMT 测到的值 = 信号 ($\\text{SO}_2$) + 噪声 (暗电流 + 背景) 状态 B（灯灭时刻）： PMT 测到的值 = 0 + 噪声 (暗电流 + 背景) 2. 算术魔法 CPU 做一个简单的减法：$$\\text{真实信号} = \\text{状态 A} - \\text{状态 B} = (\\text{信号} + \\text{噪声}) - (\\text{噪声})= \\text{信号}$$ 也就是说，不管你的 PMT 暗电流怎么漂移（今天 0.1，明天 0.2），也不管背景光怎么变化，只要它们在“灯亮”和“灯灭”的那一瞬间保持不变，它们就会被完美减掉！\n这就是锁相放大的雏形。\n硬件工程师的“噩梦”：同步与触发 虽然原理听起来很软件，但在硬件层面，这带来了一系列极具挑战的机械/电子问题。这也是区分“好仪器”和“烂仪器”的分水岭。\n1. 触发抖动 要求： 既然要做减法，PMT 的采集必须和灯的闪烁严丝合缝。 故障： 氙灯的高压触发电路如果有延时，或者不稳定。 现象： CPU 以为灯亮了，开始采集“状态 A”，但其实灯还没完全亮到峰值。 结果： 测到的信号忽高忽低，读数剧烈跳动（噪声大）。 硬件排查： 很多时候是触发板上的电容老化，或者灯泡电极烧蚀导致击穿电压变化，引起了“时间轴错位”。 2. 光强衰减与“参考光路” 脉冲灯解决了 PMT 漂移，但灯泡自己也会老啊！氙灯闪了几亿次后，能量会下降。\n如果不处理： 灯暗了 $\\to$ $\\text{SO}_2$ 激发的荧光弱了 $\\to$ 读数偏低。 硬件解决方案： 分光镜。 在光路设计中，你会看到一块成 45 度角的石英玻璃。它把紫外光分成两路：\n主路 (90%)： 去照样气，产生荧光 $\\to$ 给主 PMT 测。 辅路 (10%)： 照向一个小光电二极管。 最终算法进化：$$\\text{浓度} \\propto \\frac{\\text{主 PMT 信号 (扣除背景后)}}{\\text{参考光强信号}}$$\n从“静”到“动”的思维升华 这里有一个工程思维模型，值得记在心里：\n“如果是静态测不准的东西，就把它动起来测。” (If you can\u0026rsquo;t measure it statically, modulate it.)\n测微弱光： 别常亮，让它闪（脉冲/切光轮）。 测微弱气： 别一直通样气，让它和零气交替通（自动校零/参比法）。 测微弱力： 别用力压，让它振动（原子力显微镜原理）。 这种将直流信号 (DC) 搬移到交流频段 (AC) 的技术，避开了低频的 1/f 噪声（粉红噪声），是精密测量的基石。\n从PMT 的屏蔽（空间防御），到地环路的切断（路径防御），再到脉冲调制（时间防御），这一整套“海陆空”立体防御体系，是不是让你对这台仪器的设计逻辑有了全新的认识？\n","date":"2025-12-08T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%B0%83%E5%88%B6%E4%B8%8E%E8%A7%A3%E8%B0%83/","title":"调制与解调"},{"content":"目的：理解了粉红噪声，可能就能想明白为什么一些高端仪器都要把本来静止的信号“折腾”成动的。\n什么是粉红噪声 (Pink Noise / 1/f Noise) 在电子电路和物理世界中，噪声按“频率分布”有着不同的颜色命名\n1. 白噪声 (White Noise) —— “沙沙声” 特征： 能量在所有频率上是一样的。 物理来源： 热噪声 (Thermal Noise)。只要有温度，电子就会无规则乱动。 听感： 像收音机没台时的“沙沙”声。 图谱： 一条平的直线。 2. 粉红噪声 (Pink Noise) —— “低沉的轰鸣” 特征： 频率越低，能量越大。 公式是：$$\\text{噪声功率} \\propto \\frac{1}{f}$$ 这意味着：0.1 Hz 的噪声能量是 10 Hz 的 100 倍！ 当频率趋近于 0（也就是 DC 直流）时，噪声能量趋近于无穷大。 物理来源： 元件老化、表面缺陷、温度缓慢漂移、半导体晶格缺陷。这些过程都很“慢”，所以集中在低频。 为什么叫“粉红”？ 在可见光里，红光的频率最低。既然这种噪声低频能量强（偏红），高频能量弱（偏蓝），我们就叫它“粉红噪声”。 更加透彻地理解粉红噪声 想象你在高速公路上开车，试图保持车在车道正中间行驶。\n白噪声（White Noise）：路面的细碎颠簸 感觉： 方向盘在你手里会有轻微的、快速的震动。这是因为路面不平、发动机震动造成的。 特点： 这种震动频率很快，但是幅度很小。 影响： 就算你不管它，这震动也不会让你的车翻到沟里去。 粉红噪声（Pink Noise）：车子的“跑偏” 感觉： 假设你的四轮定位没做好，或者侧面一阵一阵地刮大风。你会发现车子慢慢地、不知不觉地往右边偏。 特点： 这种变化动作很慢（频率极低，可能几十秒才偏过去），但是幅度巨大（如果不回正，车就撞护栏了）。 这就是粉红噪声！ 对应到 CEMS 仪表：\n白噪声 = 读数在 100.0, 100.1, 99.9 之间快速跳动。（只要平均一下就没事了） 粉红噪声 = 读数慢慢地从 100 变成了 105，又慢慢变成了 90。（这就是漂移，你平均它也没用，因为它代表了错误的趋势。） 我们最怕的不是读数“突突突”地小跳（白噪声），那个容易滤掉。我们最怕的是读数“不知不觉地跑远了”（粉红噪声/漂移）。\n为什么要避开它？ 想象一下噪音频谱图：\n最左边 (0 Hz / DC)： 是一座高耸入云的“噪声大山”（温漂、零漂、老化）。 右边 (高频 AC)： 是一片平坦的“宁静平原”（只有微弱的热噪声）。 你的测量困境：你要测量的 $\\text{SO}_2$ 浓度，如果一直通气不动，它就是一个 DC 信号 (0 Hz)。如果你直接测量 DC 信号，就等于把房子建在了噪声大山的悬崖边上。\nPMT 稍微热一点，读数就变了。 电压稍微动一下，读数又变了。 这些“慢”的噪声会把你微弱的 $\\text{SO}_2$ 信号完全淹没。 核心技术：把信号“搬”到平原去 既然左边的“低频沼泽”太吵了，我们就把信号搬运到右边的“高频平原”去测。这就是 “调制 ” 的本质。\n让我们回到 CEMS 的 脉冲氙灯 案例，看看这个“搬运”过程是如何发生的：\n第一步：原始状态 (DC) 信号： $\\text{SO}_2$ 浓度恒定，信号频率 $f = 0$。 位置： 处于粉红噪声最强的区域。 结果： 信号被淹没。 第二步：调制 (Modulation) —— 搬运工 动作： 氙灯以 10 Hz 的频率闪烁。 物理变化： 原本静止的 $\\text{SO}_2$ 荧光信号，被迫变成了一个 10 Hz 的闪烁信号。 位置变化： 信号的坐标从 0 Hz 搬移 到了 10 Hz 的位置。 环境变化： 在 10 Hz 这个位置，粉红噪声（1/f）已经衰减了很多，背景比 0 Hz 干净得多！ 第三步：解调 (Demodulation) —— 提纯 动作： 使用 锁相放大 (Lock-in) 技术（也就是前面说的“灯亮减灯灭”）。 逻辑： 分析仪只盯着 10 Hz 看。 0 Hz 的温漂？我不管，过滤掉。 50 Hz 的工频干扰？我不管，过滤掉。 我只提取 10 Hz 那个频段的信号。 结果： 你在最干净的频段，把信号毫发无损地拿了回来。 小结 “仪表漂移”在数学和信号处理的语言里，就是典型的“粉红噪声”。那为什么好端端的仪器，放着不动，它自己就会“漂移”？为什么这些物理现象会产生“粉红噪声”（慢速、大幅度的波动）？\n漂移主要来自这三个“物理元凶”：\n元凶一：热胀冷缩 —— 仪器的“呼吸” 这是最主要的漂移来源，尤其是在光学仪器中。\n物理过程： 分析仪内部有加热盒，外部环境有昼夜温差。 金属的光学底板会随着温度微小变化而膨胀或收缩。 导致的后果（漂移）： 光路微偏： 氙灯发出的光，原本聚焦在中心，因为底板膨胀了 10 微米，光斑稍微偏了一点点。 滤光片波长漂移： 紫外滤光片的中心波长会随温度轻微移动。 为什么是粉红噪声？ 温度的变化是极慢的（以分钟或小时为单位）。这种变化在图谱上就是一条缓慢起伏的曲线，这就是典型的低频噪声。 调制技术的降维打击： 氙灯一秒钟闪 10 次。 在这 0.1 秒 的瞬间里，温度根本来不及变，底板也来不及胀。所以调制技术完美忽略了温度漂移。\n元凶二：器件老化与疲劳—— 仪器的“衰老” 没有任何电子/光学元器件是永恒不变的。\n光源（氙灯/紫外灯）： 电极烧蚀： 每次放电，电极都会损耗一点点原子，弧光的位置会一点点移动（Arc Wander）。 光强衰减： 灯泡玻璃壁会因为金属溅射变黑，透光率慢慢下降。 探测器（PMT）： 倍增极疲劳： PMT 里面的倍增极（Dynode）长期受电子轰击，表面涂层会变化，发射电子的能力（增益 Gain）会缓慢下降。 为什么是粉红噪声？ 这种衰减不是一瞬间发生的，而是随着几百个小时慢慢滑落的。这是一个超低频的变化趋势。 同样，在调制的“快变”短时间内，器件的老化与疲劳来不及反应，所以调制技术\n元凶三：半导体特性的随机游走 —— 电子的“拥堵” 这是最玄学的一个，但真实存在于放大器电路中。\n物理过程： 在半导体（比如运算放大器、电阻）的晶格内部，会有很多缺陷或杂质。 电流流过时，电子会被这些陷阱“卡住”一会，然后再释放出来。 导致的后果： 这种随机的“卡顿”和“释放”效应，会导致电阻值或放大倍数发生微小的、不规则的波动。 为什么是粉红噪声？ 物理学家发现，这种“卡顿”效应在慢速尺度上特别明显。它会让零点电压（Zero Offset）像喝醉了酒的人一样，毫无规律地瞎溜达。 现在不仅知道它叫漂移，还知道了它的物理本质是“热、光、电的慢速不稳定性”。 正是因为这些物理量变太慢了（即频率接近 0），所以我们才不能在 0 Hz 处测量，必须去 10 Hz（高频）处测量。\n","date":"2025-12-08T00:00:00Z","permalink":"https://teaize.github.io/p/%E7%B2%89%E7%BA%A2%E5%99%AA%E5%A3%B0/","title":"粉红噪声"},{"content":"二极管导通之后，压降是恒定的，利用这一点特性，实现钳位功能。本质上是把电压“钉”在某个安全的范围内，不让它乱跑。想象一个疯狂跳跃的弹簧（电压信号），二极管就是一个坚固的“天花板”或者“地板”，强制让这个弹簧不能跳得比天花板高，或者比地板低。\n下面是一些利用二极管钳位功能的实战场景：\n保护芯片引脚（ADC 或 GPIO 输入保护） 这是最常见的应用。芯片（比如单片机或 ADC 芯片）的引脚通常很脆弱，只能承受 -0.3V 到 VCC+0.3V 的电压。如果外部接了长线，可能会感应出高压静电或浪涌，瞬间击穿芯片。\n做法：在输入引脚上，并联两个二极管（通常是肖特基二极管，因为正向压降小）。 上钳位二极管：正极接引脚，负极接 VCC。如果输入电压超过 VCC，二极管导通，把多余的电压泄放到电源上去。 下钳位二极管：负极接引脚，正极接 GND。如果输入电压低于 GND（出现负压），二极管导通，把电压“钉”在 GND 附近（-0.3V 左右），防止芯片内部损坏。 应用：几乎所有暴露在机壳外的接口（USB, HDMI, 传感器接口）内部或外部都有这种结构 【上钳位二极管】例如这个电路中，二极管后端接 3.3V，那么他的前端电压只要高于 3.3+0.7=4V，二极管就会被导通，也就是说二极管前端电压不可能超过 4V（同样也是运放的输入引脚）。这样也就防止电压过高将运放烧坏 【下钳位二极管】下图当中，就可以确保点 2 处的电压不能低于 -0.7V ![[Pasted image 20251207102905.png]]\n继电器/电机线圈的“续流保护” 这也是一种“钳位”。我们在控制电感性负载（线圈、电机、继电器）时，断电瞬间线圈会产生几百伏的反向高压（电感尖峰），如果不处理，驱动三极管或 MOS 管必炸无疑。\n做法：在继电器线圈两端反向并联一个二极管。 原理： 正常通电时，二极管截止，不起作用。 断电瞬间，线圈产生反向电压（下正上负），这时二极管被正向导通。 钳位效果：线圈两端的反向电压被二极管强行钳位在 0.7V（二极管压降），而不是几百伏。能量通过二极管和线圈自己形成的回路慢慢消耗掉（续流）。 应用：所有继电器驱动电路、电机 H 桥电路。 注意点 电流去哪了？ 比如在 ADC 保护场景中，当输入高压被二极管钳位到 VCC 时，多余的能量是灌入电源轨（VCC）的。如果这个浪涌电流太大，会把你的 VCC 电压抬高，甚至把整个板子的其他芯片烧掉！ 对策：通常会在输入端串联一个电阻（限流电阻），限制灌入二极管的电流。 二极管的速度 钳位通常是为了对付瞬态高压（ESD、浪涌），这些尖峰来得极快（纳秒级）。 对策：普通整流二极管（如 1N4007）太慢了，来不及反应芯片就挂了。必须用 快恢复二极管 或 肖特基二极管（如 BAT54S, 1N4148, 1N5819）。 ","date":"2025-12-07T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BA%8C%E6%9E%81%E7%AE%A1%E7%9A%84%E9%92%B3%E4%BD%8D%E5%8A%9F%E8%83%BD/","title":"二极管的钳位功能"},{"content":"给 N 型三极管的基极加下拉电阻可以改善噪声的干扰；对于 PNP 三极管，接上拉电阻\n在三极管基极（B）和地（GND）之间的电阻，主要隐藏着 三个核心设计意图：\n“定海神针” —— 防止引脚悬空导致误动作（上电防误动） 这是最主要的原因。\n场景：当你的单片机（MCU）刚通电、正在复位（Reset）、或者正在烧录程序时，它的 GPIO 引脚通常处于 高阻抗输入状态（Floating / 悬空）。 危险：这时候引脚的电平是不确定的，就像风中的树叶。外界的一点点静电、电磁干扰（EMI），甚至你手靠近一下，都可能在基极感应出一点电压。 后果：三极管非常灵敏，这点感应电压可能足以让它微导通。如果这个三极管控制的是继电器或电机，你就会看到设备在上电瞬间莫名其妙地“动了一下”或者“哒”的一声。 电阻的作用：这个电阻把基极强行拉到地（GND）。在单片机“发呆”的时候，它就像一个锚，把基极电位死死钉在 0V，确保三极管保持 绝对的截止（关断） 状态。 “快速泄放通道” —— 加速关断（排水管） 三极管是双极型器件（BJT），它的工作原理是靠基极只要存有电荷，它就导通。\n场景：当你把单片机输出从“高”变“低”，想关掉三极管时。 微观世界：三极管内部的 PN 结（基极 - 发射极之间）其实有一个寄生电容 ($C_{be}$)。刚才导通时，这里面存满了电荷。 麻烦：如果你只是把输入断开，或者前级驱动不够强，这些存储的电荷没有地方去，它们得慢慢消散。只要电荷没散完，三极管就还处于“藕断丝连”的半导通状态。 电阻的作用：这个电阻提供了一条通往 GND 的高速公路。当你发出关断指令时，基极积存的电荷会迅速通过这个电阻流进地里，让三极管干脆利落地关断。这在高频开关应用中尤其重要。 “高温保护伞” —— 吸收漏电流（高温抗漏电） 还记得前面学习的漏电流吗？\n场景：高温环境下，三极管的集电极（C）和基极（B）之间会有漏电流 ($I_{CBO}$)。 危险：如果没有这个下拉电阻，这个漏电流会流向哪里？它只能流进发射极（E）。 注意：流进基极的电流是会被放大的！漏电流 $I_{CBO}$ 进入基极后，会被放大 $\\beta$ 倍流过集电极。 这可能导致三极管在高温下自己就“失控导通”了，根本不受你控制。 电阻的作用：这个电阻为漏电流提供了一条旁路。漏电流会优先走电阻这个“容易的路”流进 GND，而不会流进发射结去触发放大作用，从而提高了电路的高温稳定性。 工程师经验：这个电阻选多大 通常这个电阻 ($R_{BE}$) 的阻值选取是有讲究的，不需要太精确，但有数量级要求：\n常见值：$10k\\Omega$, $47k\\Omega$, $100k\\Omega$。 原则： 不能太小：如果太小（比如 $100\\Omega$），大部分驱动电流都顺着它跑去 GND 了，流进三极管基极的电流就少了，导致三极管推不开。 不能太大：如果太大（比如 $1M\\Omega$），泄放电荷太慢，抗干扰能力也变弱。 黄金比例：通常取基极串联限流电阻 ($R_B$) 的 5 到 10 倍。 例如：基极串联电阻 $R_B = 1k\\Omega$，那下拉电阻 $R_{BE}$ 就可以选 $10k\\Omega$。 ","date":"2025-12-07T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%B8%89%E6%9E%81%E7%AE%A1%E4%B8%8B%E6%8B%89%E7%94%B5%E9%98%BB/","title":"三极管下拉电阻"},{"content":"$\\text{SO}_2$ 紫外荧光法 紫外荧光法通常用于测量微量 $\\text{SO}_2$（ppb 级），非常适合稀释后的低浓度样气。原理： $$ \\begin{aligned} \\text{SO}_2 + h\\nu (190-230,\\text{nm}) \u0026amp;\\rightarrow \\text{SO}_2^* \\end{aligned} $$ $$ \\begin{aligned} \\text{SO}_2^* \u0026amp;\\rightarrow \\text{SO}_2 + h\\nu\u0026rsquo; (240-420,\\text{nm}) \\end{aligned} $$\n在稀释法中可能存在的问题：\n1、芳香烃干扰 (Aromatic Hydrocarbon Interference) 机理： 某些芳香族碳氢化合物（如多环芳烃）在紫外光激发下也会产生荧光，且波长范围与 $\\text{SO}_2$ 重叠。 后果： 导致测量结果假性偏高。虽然稀释法降低了干扰物浓度，但在石化、焦化等行业，这种干扰依然存在。 对策： 分析仪内部通常需要配备“除烃器”（Kicker），如果除烃器失效，数据就会飘高。 2、猝灭效应 (Quenching Effect) —— 最核心问题 机理： 激发的 $\\text{SO}_2^*$ 分子在回到基态发出光子之前，与背景气体分子（如 $\\text{H}_2\\text{O}$, $\\text{CO}_2$, $\\text{O}_2$, $\\text{N}_2$）发生碰撞，将能量以热能形式转移，而不发光。\n$$\\text{SO}_2^* + M \\rightarrow \\text{SO}_2 + M + \\text{Heat}$$\n稀释法的优势与劣势： 稀释法的好处是用大量的空气（主要是 $\\text{N}_2$ 和 $\\text{O}_2$）稀释了 $\\text{CO}_2$ 和 $\\text{H}_2\\text{O}$，从而稳定了猝灭系数。但如果背景气中 $\\text{CO}_2$ 浓度波动极大，或者稀释比过低，猝灭效应仍会导致读数偏低。\n场景假设：猝灭效应带来的背景气欺诈 背景知识： 紫外荧光法是通过测量 $\\text{SO}_2$ 分子受激发后发出的荧光强度来计算浓度的。 但是在物理上，有一个大敌叫“猝灭” 。简单说，就是 $\\text{CO}_2$ 和 $\\text{H}_2\\text{O}$ 这些“胖子”分子，喜欢撞击受激发的 $\\text{SO}_2$，把能量“偷走”变成热量，导致 $\\text{SO}_2$ 发不出光。\n校准时刻（理想世界）： 你拿一瓶标气去校准。标气的背景气是什么？通常是 **$\\text{N}_2$。 $\\text{N}_2$ 很“老实”，不怎么产生猝灭。 结果： 100 个 $\\text{SO}_2$ 分子，发出了 100 份光。分析仪记住了：100 光 = 100ppm。校准完美通过。 测量时刻（残酷现实）： 探头抽入烟气。虽然稀释法混入了很多空气（$\\text{N}_2$ 和 $\\text{O}_2$），但烟道里原本含有 12%~15% 的 $\\text{CO}_2$ 和大量 水汽。 即便稀释了 50 倍，进入分析室的气体里依然混杂着微量的 $\\text{CO}_2$ 和水分子。 结果： 同样的 100 个 $\\text{SO}_2$ 分子，刚想发光，就被旁边的 $\\text{CO}_2$ 撞了一下，能量没了。最终只有 95 份光 被探测器收到。 欺骗结果： 分析仪按校准曲线计算：95 光 = 95ppm。 真相： 实际排放是 100ppm，你测出来只有 95ppm。 最可怕的点： 无论你怎么通标气验证，它都是准的（因为标气里没有 $\\text{CO}_2$）。你永远不知道你在测量实际烟气时，数据一直在负偏差。 如何破解这种骗局呢;\n看稀释比： 稀释比越高，猝灭效应越小（因为背景气越接近空气）。如果你为了提高灵敏度把稀释比调低（比如从 100:1 调到 20:1），这个误差会指数级上升。 不仅看标气，要看比对： 这种问题只能通过参比方法（手工采样）才能发现。如果手工数据总是比 CEMS 高 5%~10%，且标气校准又没问题，那基本就是猝灭系数没修正。 如果确实是 CO2 引起的淬灭反应，如何解决 核心问题在于，我们通常无法在不损失 $\\text{SO}_2$ 的前提下“物理剔除” $\\text{CO}_2$。 原因在于化学性质的相似性：$\\text{CO}_2$ 和 $\\text{SO}_2$ 都是酸性气体。任何能通过化学反应吸收 $\\text{CO}_2$ 的物质（如碱石灰、强碱溶液），都会更贪婪地把你要测的 $\\text{SO}_2$ 也一起吸收掉，导致测量结果归零。 因此，在工业 CEMS 应用中，我们应对猝灭效应的策略不是“剔除”，而是“稀释压制”和“基质匹配（Matrix Matching）”。 方法一：提高稀释比 原理： 猝灭效应与干扰物（$\\text{CO}_2$）的分压（浓度）成正比。 计算推演： 假设烟道内 $\\text{CO}_2$ 浓度为 15%（燃煤电厂典型值）。 低稀释比（20:1）： 进入分析仪的 $\\text{CO}_2$ 浓度为 $15% \\div 20 = \\mathbf{0.75%}$。这个浓度足以引起可察觉的负偏差。 高稀释比（100:1）： 进入分析仪的 $\\text{CO}_2$ 浓度为 $15% \\div 100 = \\mathbf{0.15%}$。在这个浓度下，$\\text{N}_2$ 和 $\\text{O}_2$（来自稀释风）占据了绝对主导，$\\text{CO}_2$ 的猝灭影响几乎可以忽略不计。 操作建议： 如果你现在的探头稀释比只有 20:1 或 50:1，且 $\\text{CO}_2$ 干扰明显，可以尝试更换更小孔径的临界孔，将稀释比提升至 100:1 甚至更高。 代价： 稀释比提高了，进入分析仪的 $\\text{SO}_2$ 浓度会变得更低，这对分析仪的检出限和信噪比提出了更高要求。你需要确认你的分析仪在测量 0.5 ppm 以下浓度时依然稳定。 方法二：基质匹配校准 既然 $\\text{CO}_2$ 会把读数“压低”，那我们在校准的时候，就故意用含有 $\\text{CO}_2$ 的标气来校准，让分析仪“习惯”这种压低的状态。\n常规做法： 使用 $\\text{SO}_2$ / $\\text{N}_2$ 平衡气。 背景气是纯氮气，无猝灭。分析仪灵敏度最高。 一测样气（含 $\\text{CO}_2$），灵敏度下降，读数偏低。 改进做法： 购买定制标气，例如 **$\\text{SO}_2$ (50ppm) + $\\text{CO}_2$ (15%) + $\\text{N}_2$ (平衡)。 注意：这里的 15% 指的是稀释前的模拟浓度，或者直接按比例计算混合标气。 更具操作性的现场做法是：如果你的标气瓶只是 $\\text{SO}_2/\\text{N}_2$，你可以通过动态配气仪，混入一定比例的纯 $\\text{CO}_2$。 结果： 你在校准时，分析仪就已经处于“被猝灭”的状态了。它确立的校准曲线斜率（Slope）已经包含了猝灭因子的修正。当你再去测含有 15% $\\text{CO}_2$ 的烟气时，正好抵消。 总结建议 第一步（查硬件）： 确认你的稀释比是多少？如果是 100:1 甚至 200:1，那么 $\\text{CO}_2$ 的物理浓度已经非常低（\u0026lt;0.2%），理论上不应产生可见误差。如果此时还有很大误差，请排查是否有其他问题（如泄漏）。 第二步（改校准）： 如果无法改变稀释比（比如因为 $\\text{SO}_2$ 浓度本身就太低，再稀释就测不到了），那么请联系标气供应商，定制含有 10%~15% $\\text{CO}_2$ 背景的 $\\text{SO}_2$ 标气。这是成本最低、效果最立竿见影的方法。 加性干扰与乘性干扰 这里还有个常见的误区：\n例如运维人员发现 CO2 确实会对 SO2 的测量有干扰，于是拿一瓶 CO2 标气通入分析仪去测量，结果发现分析仪示数为 0（分析仪如果同时也开启了负值显示的功能），于是便认为 CO2 对 SO2 的测量没有正影响，也没有负影响。于是便得出 CO2 对 SO2 分析仪完全没有影响的结论 这个误区之所以普遍，是因为很多人混淆了“加性干扰”（Additive Interference）和“乘性干扰”（Multiplicative Interference）的概念：\n加性干扰（如芳香烃）：$$测量值 = (\\text{SO}_2 \\text{真实值}) + (\\text{干扰值})$$ 当 $\\text{SO}_2 = 0$，通入干扰物，测量值 = 干扰值。 结论： 这种干扰可以通过通纯气测出来。 乘性干扰（猝灭效应）： 猝灭效应是按比例吃掉光强。它是一个效率因子 (Efficiency Factor)，通常小于 1。$$测量值 = (\\text{SO}_2 \\text{真实值}) \\times (\\text{1 - 猝灭率})$$ 运维人员的测试： 他通入了纯 $\\text{CO}_2$，意味着 $\\text{SO}_2 \\text{真实值} = 0$。 代入公式：$$测量值 = 0 \\times (\\text{1 - 猝灭率}) = \\mathbf{0}$$ 真相： 无论猝灭率有多大（哪怕 $\\text{CO}_2$ 把光全吃没了），只要原本就没有光（$\\text{SO}_2=0$），结果永远是 0。 猝灭效应是“杀手”。如果屋子里本来就没有人（没有 $\\text{SO}_2$），杀手（$\\text{CO}_2$）进去也杀不到人，但这并不代表杀手没有杀伤力。\n正确的测试方法：要验证 $\\text{CO}_2$ 的猝灭效应，必须进行“基质干扰测试”，必须有 $\\text{SO}_2$ 在场，例如：\n步骤 通入气体成分 预期读数 (假设无干扰) 实际读数 (存在猝灭) 结论 1 标气 A: 50ppm $\\text{SO}_2$ + $\\text{N}_2$ (平衡气) 50.0 ppm 50.0 ppm 标定基准点 2 混气 B: 50ppm $\\text{SO}_2$ + 15% $\\text{CO}_2$ + $\\text{N}_2$ 50.0 ppm 45~48 ppm 读数下降 判定： 步骤 2 的读数明显低于步骤 1（通常低 3%~8%），这个差值才是 $\\text{CO}_2$ 的真实干扰（猝灭效应）\n上面所说的分析仪负值显示功能，这其实是针对加性干扰的反向漂移或零点漂移设计的，对于猝灭这种乘性干扰没有任何帮助。\n如果读数是负的（例如 -2 ppm），通常是因为背景气比纯氮气更“干净”（背景噪声更低），或者是电路零点漂移。 $\\text{CO}_2$ 的猝灭永远是**“乘以一个小于 1 的系数”，它不会把正数变成负数，它只会让正数变小**。 海绵效应 - 吸附滞后 逻辑类型： 时间滞后型干扰。打破了“管路不参与反应”的假设\n常规认知：管路只是传输气体的通道，样气从探头到分析仪，只要流速恒定，延迟时间就是固定的（比如 30 秒）。 老鸟经验：对于 $\\text{SO}_2$ 和 $\\text{NH}_3$ 这种极性强、水溶性好的气体，采样管线（特别是老化或污染的特氟龙/PFA 管）不仅仅是通道，更是一块 “海绵”。 场景复盘：\n早晨（气温低）： 采样管线较冷。$\\text{SO}_2$ 经过管线时，被管壁上的水膜或灰尘吸附。 现象：CEMS 读数比实际排放低。运维以为脱硫效率高，很开心。 中午（气温高）： 太阳出来了，伴热管线温度也更稳定了。管壁温度升高。 午后惊魂： 早上吸附在管壁上的 $\\text{SO}_2$ 开始解吸（Desorption），释放出来。 现象：哪怕锅炉停运了，或者排放很稳，CEMS 读数却莫名其妙地飘高，甚至超标。 物理本质：这是吸附/解吸平衡问题。你测到的浓度，是“现在的排放”加上“过去的债务（或存款）”。$$C_{measured}(t) = C_{source}(t) - R_{adsorption} + R_{desorption}(T)$$\n如何识破：\n做“台阶测试”： 通入高浓度标气（如 80% 量程），待稳定后，立刻切回零气。 观察下降曲线： 正常的系统应该像悬崖一样垂直下降（陡峭）。如果读数像“拖尾巴”一样，慢悠悠地往下掉（比如从 100 降到 0 用了 5 分钟），说明管路吸附严重。这就叫“系统记忆效应”**。 放大镜陷阱 - 稀释风的纯度 逻辑类型： 被放大的加性干扰。打破了“校准零气 = 工作零气”的假设\n常规认知：稀释法 CEMS 需要洁净的压缩空气（零气）作为动力源。只要干燥、无油就行。一般的空气压缩机出来的气，含个 0.1 ppm 的杂质不算啥吧？ 老鸟经验：在稀释法中，稀释风的微小脏污，会被“稀释比”成百倍地放大。 数学逻辑：假设你的稀释比是 100:1。$$C_{reading} = C_{detector} \\times 100$$\n注意，分析仪探测器实际测量的是混合气体：\n$$C_{detector} \\approx \\frac{C_{stack} \\times 1 + C_{air} \\times 99}{100}$$\n如果你的稀释风（$C_{air}$）里含有 0.1 ppm 的 $\\text{SO}_2$（比如空压机进气口吸入了烟气尾羽）：\n分析仪测到的底数是 0.1 ppm。 系统反算： $0.1 \\times 100 = \\mathbf{10 \\text{ ppm}}$。 结果： 你的 CEMS 读数平白无故多了 10 ppm 的底数。 场景复盘：\n当你做零点校准时，你用的是瓶装高纯氮。校准完美通过（读数为 0）。 当你切回测量模式时，你用的是现场空压机的气。读数立刻跳升 10 ppm。 运维误判： “这就是现在的排放值。” 其实全是假数。 应对：\n稀释法的零气发生器（Zero Air Generator）必须配备高效的 $\\text{SO}_2/\\text{NO}_x$ 吸附柱（通常是紫色的高锰酸钾氧化铝或活性炭）。一旦这个变色失效，数据立马漂移。 ","date":"2025-12-07T00:00:00Z","permalink":"https://teaize.github.io/p/%E7%B4%AB%E5%A4%96%E8%8D%A7%E5%85%89%E6%B3%95/","title":"紫外荧光法"},{"content":"Midisart 2000 是德国 Sartorius（赛多利斯） 公司生产的一款一次性气体过滤器的商业名称。在 CEMS 领域，它通常被称为阻水过滤器或者疏水过滤器。\n外壳：聚丙烯（PP），耐腐蚀 滤膜（关键）: 内部是一层 PTFE（聚四氟乙烯）膜 精度： CEMS 中常用的规格通常是 0.2 µm 或 0.45 µm 主要作用 核心功能：疏水保护 CEMS 的样气经过冷凝器除水后，虽然大部分水被除去了，但在故障或极端工况下（如冷凝器失效、蠕动泵坏了），液态水可能会直接冲向后端的分析仪\nMidisart 2000 的特性： 它的 PTFE 膜是天然疏水的。 气体（$SO_2, NO, O_2$）可以轻松穿过。 液态水 无法穿过。 保护逻辑： 一旦有液态水过来，这个过滤器会瞬间利用表面张力把水挡住（同时也堵死了气路）。 结果： 流量计归零，分析仪报警“流量低”。 价值： 虽然系统停运了，但它牺牲了自己，救了后面的分析仪气室（如果水进气室，光学部件可能报废）。 辅助功能：精细过滤 冷凝器前端通常有初级过滤器（如 2μm 或 5μm），但微小的粉尘可能会穿透。Midisart 2000 的精度通常是 0.2μm（微米级）。也就是说，它可以滤除极其细微的颗粒物，确保进入红外/紫外分析仪气室的气体是绝对纯净的，防止镜片脏污。\n注意事项 Midisart 2000 是一个疏水性的精密微孔过滤器，它是一次性的。它的存在是为了防止液态水和微尘进入分析仪。如果它堵了，说明它为后端的分析仪挡了一次灾。\n基本参数：注意连接方向、使用截止日期及过过滤尺寸。 变色：如果白色滤膜变黑、变黄，说明粉尘多了，需要更换。 进水： 如果发现前端管路有水珠，且流量突然降低，说明它已经“堵水”了。此时千万不要试图把它甩干再用，水中的杂质可能已经堵死了微孔，直接换新的。 安装位置： 它通常安装在冷凝器之后、分析仪入口之前，或者取样泵的入口处（保护泵） ","date":"2025-12-06T00:00:00Z","permalink":"https://teaize.github.io/p/midisart-2000/","title":"Midisart 2000"},{"content":"电容充电时间常数 ($\\tau$) 就是电路的“**反应速度”，简单来说：\n$\\tau$ 小 $\\rightarrow$ 电容充放电快 $\\rightarrow$ 电路反应灵敏，波形陡峭。 $\\tau$ 大 $\\rightarrow$ 电容充放电慢 $\\rightarrow$ 电路反应迟钝，波形平缓。 它是怎么算的 $$\\tau = R \\times C$$\n$R$ (电阻)：单位是欧姆 ($\\Omega$) $C$ (电容)：单位是法拉 ($F$) $\\tau$ (时间常数)：单位是秒 ($s$) 例子：如果你有一个 $10k\\Omega$ 的电阻和一个 $10\\mu F$ 的电容，时间常数就是： $10,000 \\times 0.00001 = 0.1$ 秒 (即 100 毫秒)。\n它告诉了我们什么 电容不像一个水桶（装满就停），它更像一个有阻力的弹簧。时间常数 $\\tau$ 告诉我们要等多久电容才能“跟上”电压的变化\n$1\\tau$ (63.2%)：给电容充电时，经过 1 个时间常数 的时间，电压会充到总电压的 63.2%。 $5\\tau$ (99.3%)：经过 5 个时间常数 的时间，我们工程上认为电容已经充满了（或者放电放完了）。 拿它做什么 我们通常利用 $\\tau$ 的“延时”和“平滑”这两个特性来设计电路。以下是三个最经典的应用\n“让子弹飞一会儿” —— 上电复位电路 芯片（比如单片机）刚通电时，电源电压可能不稳，如果芯片马上开始工作，容易出错（跑飞）。\n做法：我们在复位引脚（Reset）接一个 RC 电路。 原理：电源上电了，但电容电压需要慢慢爬升（由 $\\tau$ 决定）。只要电容电压还没爬到高电平，芯片就一直处于“被按住复位键”的状态。 目的：给电源一点时间稳定下来，等 $\\tau$ 时间过了，电容充满了，复位结束，芯片再安全启动。 “过滤杂音” —— 按键去抖 当你按下一个机械按键时，金属弹片会发生极其快速的物理抖动（几毫秒内通断几十次）。单片机会以为你按了几十次。\n做法：在按键旁边并联一个电容，串联一个电阻。 原理：利用 $\\tau$ 制造的“迟钝”。抖动太快了（时间极短），电容来不及充电和放电，电压就被“拉平”了，看不出抖动。 目的：让单片机读到一个干净、平滑的按键信号。 “把方波变直流” —— PWM 转 DAC (无源滤波) 如果你想用数字信号（PWM，只有 0V 和 3.3V）控制一个模拟设备（比如调节屏幕亮度或电机速度），你需要一个中间电压（比如 1.65V）。\n做法：让 PWM 信号通过一个 RC 低通滤波器。 原理：如果 $\\tau$ 远大于 PWM 的周期，电容就来不及随着 PWM 的高低电平快速充放电，而是维持在一个平均电压值上。 目的：把“一顿一顿”的数字脉冲平滑成“连续”的模拟电压。 经验法则 在图纸上看到电阻和电容连在一起时，可以这样快速判断：\n看位置 如果是 信号线对地 接 RC：通常是为了滤除噪声（让高频干扰来不及反应）。 如果是 芯片复位脚/电源脚：通常是为了延时启动或软启动（Soft Start）。 估算时间 看到 $R=10k, C=10\\mu F$，心里默念“0.1 秒”。 看到 $R=1k, C=1nF$，心里默念“1 微秒”（非常快，通常用于滤除射频干扰）。 ","date":"2025-12-06T00:00:00Z","permalink":"https://teaize.github.io/p/%E7%94%B5%E5%AE%B9%E5%85%85%E7%94%B5%E6%97%B6%E9%97%B4%E5%B8%B8%E6%95%B0/","title":"电容充电时间常数"},{"content":"接头密封是保证气路不泄漏的关键，那么接头又是如何实现密封的呢：\n双卡套金属硬密封 常用在分析仪内部高温、腐蚀性气路、316L 不锈钢管等，这是 Swagelok（世伟洛克）确立的行业标准\n密封原理：功能解耦模型。早期的单卡套设计经常泄漏，因为一个卡套既要负责“抓紧管子”，又要负责“密封气体”，分身乏术。双卡套通过两个独立的金属环，把任务分开了：\n前卡套 —— 负责密封： 当螺母拧紧时，前卡套被推入接头主体的锥形口。 物理动作： 它的外缘与接头内壁贴合，内缘紧抱管子。 作用： 它产生过盈配合，形成第一道气密防线。它主要受压，不怎么破坏管子表面。 后卡套 —— 负责抓紧： 螺母推着后卡套，后卡套推着前卡套。 物理动作： 后卡套经过特殊的硬化处理。在挤压下，它的前端会像牙齿一样“咬”进不锈钢管的表层金属里（你可以看到管子上有一圈明显的压痕）。 作用： 它的任务是抗震和抗拔。它锁住了管子，防止高压把管子吹出去，并隔离了震动，保护前卡套的密封性。 这种密封是金属对金属的冷作硬化密封，没有橡胶 O 圈。所以它耐高温、耐腐蚀、耐老化。 但它是不可逆的塑性变形。一旦卡紧，卡套就和管子“长”在一起了。虽然可以拆卸重装，但次数有限。\n软密封：倒钩与弹性张力 应用场景： 蠕动泵管、废液管、某些低压内部连接（软管，如氟胶管、特氟龙软管）。\n密封原理：利用环向应力， 这就是我们常说的“宝塔头”或“倒刺接头”。\n物理动作： 接头外径比软管内径大。你把软管强行撑开套进去。 密封力来源： 软管试图回缩恢复原状的弹性回复力，紧紧箍在接头上。 倒钩作用： 防止管子被拉出来。 加强版： 为了保险，通常会在外面加一个喉箍或卡环，施加额外的向心压力。 在 CEMS 里，凡是正压且有腐蚀性的气体（如从样气泵出来到分析仪这段），尽量少用这种接头。因为橡胶管高温下会变软，应力松弛导致箍紧力下降而泄漏。\n快插接头：O 形圈径向密封 应用场景： 仪表空气（反吹气）、气动阀驱动气路（PU 管或尼龙管）\n密封原理：自锁与唇形密封，这就是常见的塑料“一插即连”接头\n抓紧机制： 内部有一圈不锈钢的爪簧 。当你插入管子，爪子张开；当你试图拔出，爪子会反向咬住管壁（类似倒刺）。 密封机制： O 形圈。管子穿过爪簧后，深处有一个橡胶 O 圈，紧贴管子外壁进行密封。 严禁在 CEMS 的样气流路中使用普通的塑料快插接头：\n材料不耐腐： 内部 O 圈通常是丁腈橡胶（NBR），遇到 $SO_2/NO_x$ 会烂掉。 耐温性差： 塑料主体受热会变形泄漏。 螺纹密封 接头本身连管子是用卡套，但接头连到阀门或流量计上，通常靠螺纹。这里分为两派：\n锥管螺纹 (NPT / R / PT)： 原理： 螺纹是锥形的（越拧越紧）。靠螺纹牙之间的金属挤压变形 + 生料带/密封胶 填充缝隙来密封。 模型： 螺旋楔紧模型。 平行螺纹 (G / M / UNF)： 原理： 螺纹只负责“拉紧”，不负责密封。 密封： 靠根部的垫片（紫铜垫、组合垫圈）或 O 形圈 被压扁来密封。 ","date":"2025-12-06T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%8E%A5%E5%A4%B4%E5%AF%86%E5%B0%81/","title":"接头密封"},{"content":"需要明白一个概念：在低通滤波电路当中，截止频率越大，是越能防止“高频噪声进来”还是越不能防止“高频噪声进来”\n假设截止频率是门卫，在低通滤波器里，截止频率就是“门卫放行的速度上限”：\n比这个频率低的信号（比如直流电、慢速信号）：门卫说“请进”。 比这个频率高的信号（比如高频噪声）：门卫说“太快了，拦住”。 截止频率计算公式： $$f_c = \\frac{1}{2\\pi RC}$$ 电容 C 变小，截止频率 $f_c$ 变大，意味着门卫的标准放宽了\n以前（大电容，$f_c$ 低）：门卫说“超过 100Hz 的都算噪音，全部拦住！” $\\rightarrow$ 只有很干净的低频能过，滤波效果极好。 现在（小电容，$f_c$ 高）：门卫说“标准提高了，超过 10,000Hz (10kHz) 的才算噪音，拦住。” $\\rightarrow$ 结果 100Hz 到 10,000Hz 之间的噪音全都大摇大摆进来了。 也就是说，在低通滤波（滤除噪声）的应用中，截止频率越高，意味着能通过的高频成分越多，滤波效果反而越“差”（或者说越不敏感）。\n既然电容越大，截止频率越小，越能去除掉高频噪声。是不是和之前所说的“大鬼和小鬼”冲突了？【在前面“大鬼和小鬼”的介绍中，0.1uF 负责对付高频噪声，而 10uF 负责充当蓄水池】。不应该由大电容来负责对付高频噪声更合适吗？\n因为大电容在高频时“失效”了。现实中的电容，因为制造工艺（还要卷绕、有引脚），内部其实隐藏着一个小电阻和一个微小的电感（大电容相对于小电容，寄生电感更大）。 当频率非常高（超过几 MHz）时，那点微小的寄生电感开始发威了！电感的特性是“频率越高，阻碍越大”。或者更简单的说，这个大电容存在着某一个频率，在这个频率下，电容的作用和所藏着的电感的作用打了个平手。低于这个频率，电容说了算。高于这个频率，反而是所藏着的电感说了算 所以，在处理高频噪声（比如 10MHz 以上）时，$10\\mu F$ 的大电容已经“变节”成电感了，根本不起滤波作用。这时候全靠 $0.1\\mu F$ 这个动作灵敏的小鬼在死扛 所以大小鬼的策略是：用大电容搞定低频，用小电容搞定高频，并且让小电容站前排\n","date":"2025-12-06T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%88%AA%E6%AD%A2%E9%A2%91%E7%8E%87/","title":"截止频率"},{"content":"把电容跨接在芯片的 VCC 和 GND 之间，这个电容在工程上有一个专门的名字，叫 “去耦电容”或者 “旁路电容”。如果没有它，芯片可能会莫名其妙地死机、重启，或者信号乱跳。\n为什么要加电容 你可以把 电源 想象成一个远处的 水库，把 导线 想象成 输水管，而 芯片 是家里必须要频繁开关的 水龙头\n应对“瞬时缺水” —— 储能作用 问题：芯片工作时不是一直在喝水，而是像机关枪一样，一会儿猛喝一口（电流瞬间增大），一会儿不喝。当芯片突然要“喝一大口水”时，远处水库的水流过来需要时间（因为导线有电感和电阻，水流有惯性）。结果就是，水还没流过来，芯片门口的水压（电压）瞬间就掉下去了（也叫作电压跌落）。电压一掉，芯片就复位或死机了。 解决：在芯片门口（VCC 引脚旁）放一个小水桶（电容）。 效果：当芯片突然要喝水时，先喝小水桶里的水。因为水桶离得近，水立马就能供上，维持了水压（电压）的稳定。 滤除“水管杂音” —— 滤波作用 问题：电源送过来的水流往往不干净，里面可能有波浪（高频噪声）。同时，芯片自己工作时也会产生震动，反向传回水管里，干扰别人。 解决：电容对高频信号相当于“短路”。 效果：高频噪声（波浪）过来时，直接通过电容流进地（GND）里消散掉了，不会进入芯片内部干扰核心电路。 通常是如何应用的 在画电路图和 画板时，有一套约定俗成的“组合拳”。\n选什么值？—— “大鬼和小鬼” 通常我们会看到一个引脚旁边并联了两个不一样大的电容，比如 10uF 和 0.1uF。\n0.1uF (100nF, 也就是常说的 104 电容)： 角色：这是“标配”。 作用：专门对付高频噪声（几 MHz 到几十 MHz）。因为小电容的内部卷绕少，寄生电感小，反应极快。 材质：通常用陶瓷电容（MLCC）。 10uF (或者 4.7uF, 100uF)： 角色：这是“蓄水池”。 作用：对付低频波动或大电流需求。它存的电荷多，能撑得久一点。 材质：可能是钽电容、电解电容或大容量陶瓷电容。 工程经验：如果只让加一个，对于大多数普通数字芯片（如逻辑门、低速单片机），加一个 0.1uF 是底线。\n放哪里？—— “寸土寸金” 黄金法则：电容必须尽可能靠近芯片的 VCC 和 GND 引脚 原因：还记得水桶理论吗？如果水桶离水龙头太远，水管还是很长，那这个水桶就没用了。电容离引脚越远，中间的走线产生的寄生电感就越大，去耦效果就越差。 顺序：如果同时有 10uF 和 0.1uF，小的（0.1uF）要紧贴着芯片放，大的（10uF）可以稍微放外面一点点。因为高频噪声最难搞，必须第一时间干掉。 ","date":"2025-12-06T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8E%BB%E8%80%A6%E7%94%B5%E5%AE%B9/","title":"去耦电容"},{"content":"关于 O 形圈内径拉伸率 轴向密封时，建议内径拉伸率最大不超过 3%，为什么\n![[Pasted image 20251205085313.png]]\n焦耳 - 高夫效应 —— 热力学陷阱 这是限制拉伸率最核心、最物理的原因。\n直觉模型： 大多数物体（如钢、水、空气）受热都会膨胀 反直觉模型（橡胶）： 处于拉伸状态的橡胶，受热时会收缩 当你拉伸橡胶时，你强行把那些卷曲的高分子链拉直了（有序度增加，熵减小）。根据热力学定律，系统倾向于回到高熵（混乱）状态。当你加热它，分子热运动加剧，长链更想卷回去。 表现出来的宏观现象就是：越热，拉紧的皮筋缩得越紧\n假设设计了一个轴向密封，O 形圈内径拉伸了 6% 装进去。常温下，一切正常。仪表开始工作，温度开始上升，例如升温到 150℃时，根据焦耳 - 高夫效应，O 形圈不仅不膨胀密封，反而试图剧烈收缩。这种收缩力会产生巨大的内应力，导致 O 形圈在沟槽内崩断，或者产生龟裂\n截面缩减 根据泊松比推算，O 形圈内径每拉伸 1%，其截面直径（线径 $d_2$）大约会减少 0.5%。\n假设你选了线径 3.53mm 的 O 形圈，为了密封，设计压缩量是 20%。如果你将它拉伸了 10%：\n截面直径会减小约 5% $\\rightarrow$ 变成了 3.35mm。 你原本设计的沟槽深度是按 3.53mm 算的。 现在 O 形圈变细了，实际压缩量（Squeeze）大幅下降，可能只剩 10% 甚至更低。 造成的结果是，低压时可能还能封住，但一旦遇到压力波动或震动，因为压缩量不足（回弹力不够），直接泄漏。也就是说，如果大幅调整了 O 形圈拉伸率，那么 O 形圈沟槽深度可能也需要再重新设计。限制 3%，是为了保证 O 形圈的“身材”不走样，维持预期的压缩率\n安装工艺 这是一个很实际的工程问题。例如轴向密封为盖板，如果 O 形圈拉伸了 5%，它时刻都想缩回原形。 当工人试图把盖板合上时，O 形圈会不由自主地从沟槽里“跳”出来，或者向内卷曲。导致 O 形圈被盖板面切边或压扁，密封失效。\n应力老化 模型： 紧绷的绳子 vs. 松弛的绳子。拿刀去割一根松弛的绳子，挺难割断；但如果把绳子崩到极限，轻轻一碰就断了。 化学原理：当橡胶分子链处于拉伸（张紧）状态时，化学键的键能处于高能态，极不稳定。这时候，空气中的臭氧或者 CEMS 样气中的腐蚀性气体（$SO_2, NO_2$），会优先攻击这些“紧绷”的化学键。 后果：拉伸率过大，会成倍加速 O 形圈的老化和龟裂。 轴向密封设计原则 我们设计的核心目标是：压力往哪边推，O 形圈安装时就预先靠在哪边的墙上（减少运动，防止磨损）\n1. 内压工况（正压） 物理流向： 气体从中心向外推。 O 形圈位置： 应该预先紧贴沟槽外壁。 尺寸设计： 外径 (OD)： O 形圈外径 $\\approx$ 沟槽外径（甚至可以让 O 形圈外径比沟槽外径略大 1%~2%，形成外径过盈/干涉，让它稳稳地“撑”在沟槽外圈不动）。 内径 (ID)： O 形圈内径 \u0026gt; 沟槽内径（必须留有余量，绝对不能小，否则就变成箍在内圈了）。 2. 外压/真空工况 物理流向： 大气压从外向中心推（或者由于内部是真空，被吸向中心）。 O 形圈位置： 应该预先紧贴沟槽内壁。 尺寸设计： 内径 (ID)： O 形圈内径 \u0026lt; 沟槽内径（这就是之前提到的内径拉伸，让 O 形圈比沟槽内圈略小 1%~3%，紧紧箍在内圈上）。 外径 (OD)： O 形圈外径 \u0026lt; 沟槽外径（自然会有间隙）。 工况类型 压力方向 O 形圈的“靠山” 尺寸关系 内压/正压 $\\rightarrow$ 向外推 外壁 O 形圈外径 $\\ge$ 沟槽外径 (外径过盈)\nO 形圈内径 \u0026gt; 沟槽内径 (内径有间隙) 外压/真空 $\\leftarrow$ 向内推 内壁 O 形圈内径 \u0026lt; 沟槽内径 (内径拉伸/过盈)\nO 形圈外径 \u0026lt; 沟槽外径 (外径有间隙) ","date":"2025-12-05T00:00:00Z","permalink":"https://teaize.github.io/p/o%E5%BD%A2%E5%9C%88%E5%8F%82%E6%95%B0/","title":"O形圈参数"},{"content":"参考资料：Google Gemini\n在 CEMS 仪器仪表当中，接头用的比较多，你能给我介绍一下接头是靠什么方式密封的吗，卡套？还是什么\n","date":"2025-12-05T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%8E%A5%E5%A4%B4%E4%B8%8E%E5%AF%86%E5%B0%81/","title":"关于接头与密封"},{"content":"氧化锆（ZrO₂）氧传感器的“零点标定”，和红外/紫外分析仪的“零点标定”，在物理逻辑上是不同的。\n不能使用“纯氮”标零 物理模型（能斯特方程） $$E = A \\cdot T \\cdot \\ln(\\frac{\\text{参考气浓度}}{\\text{被测气浓度}})$$ 数学陷阱： 如果被测气浓度为 0%（纯氮），那么分母为 0，$\\ln(\\infty)$ 趋向于无穷大。 后果： 理论上，通入纯氮，传感器应该输出无穷大的电压。实际上，它会输出一个极其不稳定、受微量杂质干扰巨大的高电压信号 正确做法：氧化锆的“零点标定”，实际上是“低点标定”。 通常推荐使用 1% ~ 4% 的标气（氮气背景下的氧气）。例如使用 1% 的标气标定，那么标定时输入 1%，而不是 0 例如：\n情况 A：通入空气 ($20.95%$) $$E = K \\times \\ln(1) = 0 \\text{ mV}$$ 这是氧化锆的物理零点，但通常作为量程点 情况 B：通入 1% 标气 $$E = K \\times \\ln(20.95 / 1) \\approx K \\times 3.04 \\approx 150 \\text{ mV}$$ 这是一个稳定、可测量的电压 情况 C：通入 0% 纯氮 ($0%$) $$E = K \\times \\ln(20.95 / 0) = K \\times \\infty = \\infty \\text{ (无穷大)}$$ 所以，对于氧化锆氧传感器，无法用纯氮气标定，因为数学上那是“奇点”，物理上那是“噪声放大器” 低氧测量 根据能特斯特方程（电势法），氧化锆具备测量微量氧且微量氧下灵敏度高的优势： $$E = A \\cdot T \\cdot \\ln(\\frac{\\text{参考气浓度}}{\\text{被测气浓度}})$$\n为什么？ $E \\propto \\ln(1/C)$。浓度 $C$ 越低，对数曲线越陡峭，电压变化率越大 21% 变到 20%，电压只变几毫伏 10ppm 变到 1ppm，电压能变几十毫伏 结论： 氧化锆天生适合测低氧（这也是为什么空分行业测高纯氮里的微量氧都用氧化锆） 那为什么 CEMS 工业现场，低氧测量往往不推荐氧化锆呢？\n真正的死穴不是灵敏度，而是干扰和燃烧效应。氧化锆工作在 700℃ 高温下。在低氧环境（比如燃烧控制的还原区）中，往往伴随着一氧化碳（CO）、氢气（H₂）等可燃气体：\n现象： 这些可燃气会在高温的氧化锆探头表面，和仅存的那一点点氧气发生二次燃烧 后果： 还没等探头测到氧气，氧气就被烧光了。会测到一个比真实值低得多的数据（甚至显示 0） 电流型氧化锆 为了解决“能斯特方程非线性”问题，工业界其实发明了另一种氧化锆——电流型（极限电流型）。\n原理差异：\n普通氧化锆（电压型）： 也是我们常说的，测电压（对数关系，低氧灵敏，但非线性）。 电流型氧化锆（泵氧型）： 给氧化锆施加一个电压，强制把氧离子从一端“泵”到另一端。当电压加到一定程度，受限于扩散孔，氧离子的迁移速度达到极限。此时的极限电流 ($I_{lim}$) 与氧浓度成线性正比。 应用： 汽车上的 宽域氧传感器 就是这种。它克服了能斯特方程的非线性，实现了从低氧到高氧的全量程线性测量。\n注意：前面所说的燃烧效应依旧存在。不得不面临一个物理事实：无论是电压型还是电流型，氧化锆的核心元件（ZrO₂ 陶瓷体）必须加热到 400℃ ~ 700℃ 才能传导氧离子。并且电极还使用铂（很多反应的催化剂）。如果样气中含有一氧化碳或者氢气，在高温 + 铂催化的环境下，会和氧气发生反应，例如 $$2CO + O_2 \\rightarrow 2CO_2$$\n后果： 传感器测到的氧，是“被消耗后剩余的氧”，而不是样气原本的氧。 也就是说，只要背景气里有可燃组分，电流型氧化锆的读数依然会流偏低。\n传感器线性关系 其实，非线性才是大自然的常态\n在 CEMS 和工业仪表中，有很多测量原理输入和输出之间存在指数、对数或者平方根关系。理解这些非线性，对于理解仪表的“量程比”、“灵敏度区间” 以及 “为什么低量程测不准”至关重要。\n朗伯 - 比尔定律 (NDIR/UV)：指数饱和模型 这是所有光学气体分析仪（测 $SO_2, NO_x, CO$）的物理基石。\n物理公式：光强透射率 $T = \\frac{I}{I_0} = e^{-k \\cdot L \\cdot C}$ $I$: 接收到的光强 $C$: 气体浓度 $L$: 光程长度 非线性特征：指数衰减，偏低。 模型思维： “刷油漆模型” 低浓度时（线性区）： 就像给透明玻璃刷第一层黑漆，挡光效果非常明显。此时灵敏度最高。 高浓度时（饱和区）： 就像已经刷了 10 层漆，玻璃已经黑了。再刷第 11 层（浓度增加），透过的光几乎没有变化。 奇点/难点：当浓度 $C$ 过大时，探测器接收到的光强 $I \\approx 0$。此时信号淹没在噪声中，无论浓度再怎么增加，仪器都“瞎”了。这就是光学饱和。所以 NDIR 分析仪严禁长时间超量程运行，否则读数会“切平头”。 皮托管测流速：平方根模型 这是 CEMS 测量烟气流速最常用的方法\n物理公式（伯努利方程）：$$v = K \\cdot \\sqrt{\\frac{2 \\cdot \\Delta P}{\\rho}}$$ $v$: 流速 $\\Delta P$: 差压（动压） 非线性特征：抛物线关系，差压 $\\Delta P$ 与流速 $v$ 的平方成正比。 模型思维： “动能 - 势能转换” 高速区（好测）： 流速 20m/s 时，差压很大，很容易测准。 低速区（难测）： 这是一个“死区”。 流速从 0 变到 2 m/s，差压的变化微乎其微（接近 0）。 $\\sqrt{0.001}$ 和 $\\sqrt{0.002}$ 的差异极难分辨。 奇点/难点：结论：。因为差压传感器在零点附近的漂移（比如 1Pa）会被开根号放大，导致流速读数在 0 和 3m/s 之间乱跳。这就是为什么低负荷工况下，烟气流速很难测准。 热式质量流量计：King\u0026rsquo;s Law (金氏定律) 这经常用来测 CEMS 采样流量或氨逃逸流量\n物理公式：$$P = A + B \\cdot v^{n}$$ (通常 $n \\approx 0.5$)，即功率 $P$ 与流速的 $n$ 次方成正比。 非线性特征：倒数敏感，它和皮托管正好相反 模型思维： “风冷效应” 低速区： 就像你出汗时吹微风，稍微有一点风，冷却效果就特别明显。（灵敏度极高） 高速区： 当风速已经很大了，再大的风，带走热量的能力增加得也很有限。（灵敏度下降） 应用启示：如果你要测微小泄漏或者微小流量，选热式（它对小流量敏感）；如果你要测台风，选皮托管（它对大流量敏感）。 pH 计 (脱硫废水/湿法脱硫)：对数模型 这和氧化锆比较相似\n物理公式： $$E = E_0 - S \\cdot \\log[H^+]$$ $$pH = -\\log[H^+]$$ 非线性特征：pH 每变化 1 个单位，氢离子浓度 $[H^+]$ 变化 10 倍。 模型思维： “数量级压缩” pH 6 变到 pH 7，我们需要中和掉的酸，是 pH 7 变到 pH 8 的 10 倍。 光并不是随浓度线性减少的，而是按百分比衰减的。这是一个典型的非线性控制难题。 ","date":"2025-12-05T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%B0%A7%E5%8C%96%E9%94%86%E6%B0%A7%E4%BC%A0%E6%84%9F%E5%99%A8/","title":"氧化锆氧传感器"},{"content":"复习到这张卡片时产生的疑问和想法，为什么建议 O 形圈沟槽填充率最大不超过 85%？\n$$\\text{填充率} = \\frac{\\text{O形圈截面面积}}{\\text{沟槽截面面积}} \\times 100%$$\n橡胶不可压缩 这里有一个直觉误区，很多人认为橡胶像海绵，压一压体积就变小了。但橡胶在宏观上是不可压缩的液体[^1]（泊松比 $\\approx 0.5$）。你压扁它，它必须向旁边鼓出来。体积恒定，只是形状改变。\n如果你设计的沟槽填充率达到了 100%（即橡胶体积 = 沟槽体积），当两个金属面合拢时，橡胶无处可去。 这时候，O 形圈就不再是密封件，而变成了一个液压千斤顶。它会产生巨大的反作用力，导致法兰变形，或者 O 形圈自己被挤出缝隙切碎。 留出的 15% 空间，是给橡胶变形流动的“避难所”\n注意：这里指的“液体”，并非指它的物态是流动的，而是指它在力学行为上符合液体的特征。初中学的帕斯卡定律“加在密闭液体上的压强，能够大小不变地向各个方向传递”，O 形圈就是这么工作的：\n当你拧紧法兰，或者流体压力施加在 O 形圈一侧时，O 形圈内部的压力会像水一样传递。 输入压力 = 接触面压力。 它会把自己承受的压力，1:1 地传递给沟槽壁。 如果橡胶是普通固体（像木头），你压它的一侧，它另一侧可能根本没反应，这就没法密封了。正因为它是“液体”，它才能把系统压力转化为密封接触力，形成自紧式密封\n热膨胀 物理现象： 橡胶的热膨胀系数远大于金属（钢或铝）。通常橡胶的 CTE 是钢的 10 倍到 15 倍。 场景推演： 假设你在 20℃ 装配好设备，沟槽填满了 98%。 当设备运行到 100℃ 时，钢槽没怎么变大，但橡胶体积膨胀了。 由于没有空隙（\u0026lt; 2%），膨胀的橡胶会产生极高的内压。这种内压会导致密封失效，或者产生巨大的摩擦力（对于动密封）。 85% 的含义： 这预留的空间是为了容纳高温下橡胶相对于金属多出来的那些体积。 化学溶胀 此外，与 O 形圈热膨胀类型，O 形圈在接触介质（油、酸、气）时，可能也会发生溶胀。 即使是“兼容”的材料（例如 氟橡胶 Viton 在 汽油 中），也允许有 5%~15% 的体积膨胀。这在材料手册里是合格的。85% 的上限，也预留了“化学反应溶胀”的余量。\n","date":"2025-12-04T00:00:00Z","permalink":"https://teaize.github.io/p/o%E5%BD%A2%E5%9C%88%E6%B2%9F%E6%A7%BD/","title":"O形圈沟槽"},{"content":"继上篇 O形圈沟槽 所说的帕斯卡定律，为什么 O 形圈可以实现自紧密封\nO 形圈自紧原理 如果我们把橡胶看作普通固体（比如软木垫片），要密封 10MPa 的气体压力，你的螺栓必须提供大于 10MPa 的压紧力。一旦螺栓松了一点，压力大于压紧力，密封就失效了。\n但在帕斯卡定律的加持下，O 形圈便“活”了起来：\n初始状态（压力为 0）： 你安装好 O 形圈，给它一个初始压缩量（比如 20%）。此时，橡胶依靠自身的弹性（固体属性），产生了一个初始接触压力 $P_{init}$（例如 2MPa）。 此时：密封能力 = 2MPa。 工作状态（系统压力 $P_{sys}$ = 10MPa）：高压气体进入沟槽，推挤 O 形圈。 帕斯卡定律生效： O 形圈作为“液体”，忠实地传递了这个 10MPa 的压力。它把这个压力叠加到了密封面上。 $$P_{final} = P_{init} + P_{sys}$$ $$P_{final} = 2MPa + 10MPa = 12MPa$$ 结论： 接触压力（12MPa） \u0026gt; 系统压力（10MPa）。 无论系统压力怎么升高，密封面的反作用力永远比它高出一个 $P_{init}$。 这就是自紧：压力越大，封得越紧。 你不需要用巨大的螺栓去对抗 10MPa，你只需要提供那微不足道的 2MPa 初始压力，剩下的力气，是流体自己“帮”你封住的。\n与垫片密封的区别 垫片 对象：紫铜垫、石棉垫、聚四氟乙烯（PTFE）。 物理模型：塑性变形。 操作：拼命拧螺栓。 必须要让法兰变形，死死压住垫片。螺栓力就是一切。 缺点：震动导致螺栓松动后，立马泄漏。 O 形圈 对象：橡胶、全氟醚。 物理模型：帕斯卡传压。 操作：金对金接触 。螺栓拧紧是为了让两个金属法兰面贴合，而不是为了压扁 O 形圈。O 形圈的压缩量是由沟槽深度锁死的（设计好的）。 优点：螺栓即便微量松动，只要金属面不分开太多，流体压力依然会让 O 形圈膨胀补偿，维持密封。 “副作用”间隙挤出 当然，既然它是“液体”，在高压下，它就会像水一样，试图从哪怕最细微的缝隙里“射”出去。这就是为什么高压（\u0026gt;10MPa）密封设计中，配合公差 比 表面光洁度 更重要。\n场景： 法兰面没对齐，留了 0.2mm 的缝隙。 低压时： 它是固体，没事。 高压时： 帕斯卡定律让它变成了高压水流。橡胶会被“挤”进这 0.2mm 的缝隙里，像削土豆皮一样被金属边缘切掉。 解决办法： 既然它是液体，堵不住缝隙，那就加一个挡圈。挡圈通常是硬质特氟龙或 PEEK，它更像固体，用来堵住缝隙，让柔软的橡胶安心做它的“液体工作”。\n","date":"2025-12-04T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%87%AA%E7%B4%A7%E5%AF%86%E5%B0%81/","title":"自紧密封"},{"content":"和亲密的人接触久了，非常明显的就能区别正常抱怨与 NPD 式抱怨：\n正常人： 抱怨是为了寻求建议或情感支持，说完后情绪会缓解，也会关心对方的感受。 NPD： 抱怨是单向的、无休止的，不寻求解决方案（如果你给建议他们反而会生气），并且完全无视这对听众造成的心理负担。 之前听到 Ta 给我抱怨 Ta 生活、工作中遇到的琐事，我会尽量安慰、提出一些我觉得可能有用的缓解方式、或者从 Ta 所认为的施暴者角度分析为什么会这么做。结果换来的结局是，Ta 认为我怎么帮着“施暴者”说话。 慢慢地，我意识到 Ta 向我抱怨时，我只能顺着 Ta 的想法给 Ta 回复，Ta 觉得 A 有问题，那我就绝对不能说“A 其实也没有怎么怎么样”。否则，Ta 与 A 之间的矛盾，会立刻马上转到 Ta 和你之间的矛盾。\n接触的越多，越觉得 Ta 将自己当作情绪垃圾桶，身边随便一点小事，都会向你抱怨个没完，要么表现出一种极度厌世和烦躁的行为。\n这种情绪倾倒（Emotional Dumping）的行为，主要目的是什么呢：\n把你当作“情绪垃圾桶”（外部调节机制） NPD 患者通常缺乏自我调节负面情绪的能力。当他们感到羞耻、挫败、焦虑或空虚时，他们无法内部消化这些感受。\n机制： 他们需要一个外部容器来承载这些“坏情绪”。亲密伴侣作为最安全、最近的人，就成了这个容器。 表现： 他们会把在外面受到的气（比如交通堵塞、同事的一句话、天气的变化）夸大，并不停地向你抱怨。一旦他们把这些负能量“倒”给了你，看着你变得焦虑、担忧或心情低落，他们自己反而会觉得轻松了。这是一种“痛苦转移”。 索取“自恋供应”（即使是负面的） NPD 的核心需求是关注（自恋供应）。关注不一定非要是赞美，同情、安抚，甚至是伴侣的惊慌失措，都是一种“供应”。\n受害者叙事： 通过抱怨琐事，他们把自己塑造成一个“被生活亏待的受害者”。潜台词是：“你看我多不容易，全世界都在针对我，你必须关注我、心疼我、哄我。” 测试忠诚度： 他们通过这种令人窒息的负能量来测试你的底线：你是否愿意为了我忍受这些垃圾情绪？如果你忍受了，就证明我在你心中是至高无上的。 投射与逃避责任 NPD 内心深处往往有着深刻的空虚感和自我厌恶。\n投射： 他们无法接受自己内心的“坏”，所以把这种“坏”投射到外部世界。如果你觉得他们烦躁、厌世，那是因为他们内心就是混乱的。 推卸责任： 如果生活不顺，绝对不是他们无能，而是“这个世界太烂了”、“周围的人太蠢了”。抱怨琐事是他们维护全能感、避免面对自身缺陷的一种方式。 如何防御 对于 NPD 制造的这种双重束缚：你不关心，你是冷血；你关心，你就是情绪垃圾桶。核心策略不是“对抗”或“完全冷漠”，而是“温和的情绪抽离”。你的目标不是解决 Ta 的问题（因为那些问题通常解决不完），而是保护你的能量场。下面是一些防御策略，或者称之为“有礼貌的敷衍”。\n核心心法：不要做“海绵”，要做“雨衣” 海绵模式： 把 Ta 的情绪全都吸进来，感同身受，试图帮他分析、解决。结果你湿透了，Ta 干了。 雨衣模式： 水（抱怨）打在你身上，你看见了，听到了，但让水直接滑走，不渗透进你的内心。 战术动作：改良版“灰岩法” 面对抱怨，彻底不理睬会引发暴怒，所以你需要给出反应，但必须是“低质量的反应”\n话术公式： “肯定情绪” + “不仅过脑子” + “不给建议/不提问”\n错误回应（高能量）： “天哪怎么会这样？这也太过分了！那你打算怎么办？要不要我帮你……”（这给了他极大的自恋供应）。 错误回应（冷漠）： “这点小事有什么好说的。”（这会引发争吵）。 正确回应（灰岩/雨衣）： “嗯，确实挺让人心烦的。” “是啊，这事儿哪怕搁谁身上都不好受。” “噢，原来是这样。哎。” “听起来今天确实不顺。” 重点: 你的回应要像是一个没有感情的客服机器人。你有礼貌，有回应，但是没有任何情绪波澜。当 Ta 发现无论怎么抱怨都只能换来这些枯燥的“嗯嗯啊啊”，Ta 从你这里获得的“情绪快感”就会减少，久而久之可能会觉得没劲，从而减少找你抱怨的频率。\n切断供能：不要提供解决方案 NPD 抱怨时，最忌讳的就是你给他提建议。\n如果你说：“那你下次早点出门就不堵车了。” 他会听到：“你在指责我做错了。” 防御策略： 无论他说什么，千万别试图通过逻辑帮他解决问题。只要点头说是即可。他要的不是答案，而是你的情绪起伏。你不给建议，你就不会卷入辩论。 心理建设：把 Ta“幼体化” 当他开始狂躁、抱怨琐事时，如果你把他看作一个成年伴侣，你会觉得失望和愤怒。 试着在心里把他想象成一个“穿着大人衣服的 3 岁小孩”。\n小孩摔倒了哭闹，你会觉得他坏吗？不会，你只会觉得“他又失控了”。 这种临床视角的抽离能帮你保持冷静。你在心里看着他表演，心想：“哦，自恋型人格障碍的症状又发作了，真的很典型。”而不是想：“他为什么要折磨我？” 小结 “即使是关心，也是有限度的资源。” 面对 NPD 的抱怨，最好的防御就是不再把他的情绪当作你的责任。保持礼貌，但要在内心竖起一道玻璃墙：他在墙那边狂风暴雨，你在墙这边看着，仅仅是看着而已。\n","date":"2025-12-03T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8Enpd%E7%9A%84%E6%83%85%E7%BB%AA%E5%80%BE%E5%80%92%E8%A1%8C%E4%B8%BA/","title":"关于NPD的情绪倾倒行为"},{"content":"两种方式：\n在输出端串联节流阀（出口节流） 在吸入和排出间并联节流阀（旁路调节/回流调节） 在输出端串联节流阀（出口节流） 能用，但“伤身体”。\n物理模型： 增加阻抗（Impedance Increase）。 原理： 你通过关小阀门，人为地在泵的出口增加了一个巨大的阻力（背压）。泵必须花费更大的力气去克服这个阻力才能把气推出去。 对 CEMS 取样泵（隔膜泵）的影响： 高压风险： 隔膜泵属于容积式泵。它的特点是“给多少空间挤多少气”，它性格很“轴”，遇到阻力不会自动停，只会拼命挤。 后果： 出口节流会导致泵腔内压力剧增。长期这样运行，隔膜容易疲劳破裂，连杆轴承负荷变大，电机发热。 适用场景： 这种调节方式通常只适用于离心泵/风机（离心式遇到阻力流量会自动下降，负载反而变小），非常不建议用于 CEMS 的隔膜取样泵。 在吸入和排出间并联节流阀（旁路调节/回流调节） 更加专业，这是标准做法。\n物理模型： 分流模型（Shunt / Bypass）。 原理： 这就像给泵开了一个“后门”。泵打出来的气，一部分去了分析仪，另一部分通过这个旁路阀流回了泵的入口。 想要流量小一点？就把旁路阀开大一点（让更多气体“空转”）。 想要流量大一点？就把旁路阀关小一点。 对 CEMS 取样泵的影响： 恒压运行： 泵始终在一个相对舒适、固定的压力下工作，不会因为你调节流量而感受到巨大的背压变化。 寿命保护： 避免了“憋压”，保护了隔膜和电机。 调节线性度： 这种方式调节起来更柔和，流量控制更精准。 CEMS 中采用旁路调节的方法比较多\n核心原因： CEMS 的分析仪通常只需要较小的流量（例如 1L/min），但为了保证响应速度（快点把气抽过来），我们选的泵往往是 3L/min 甚至 5L/min 的大泵。 策略： 必须把多余的 4L/min 排掉。 如果用方法 1（堵住）：泵会发烫，震动剧烈。 如果用方法 2（回流）：多余的气体在泵头内部或者外部管路循环，泵运行很轻松。 ","date":"2025-12-03T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8F%96%E6%A0%B7%E6%B3%B5%E8%B0%83%E8%8A%82%E6%B5%81%E9%87%8F/","title":"取样泵调节流量"},{"content":"核心模型：海浪与船（直观理解） 想象你正在海边测量两艘船的高度差。\n信号（你要测的东西）： A 船比 B 船高出多少（比如 A 船上站了一个人，B 船是空的）。 干扰（噪声）： 大海的潮汐和海浪。 情况一：差模干扰（Differential Mode） 如果一个浪打过来，只把 A 船打翻了，或者把 A 船抬高了，而 B 船没动。 -\u0026gt; 这时候你测出来的高度差就乱了。这种“你变他不变”的干扰，叫差模干扰。 情况二：共模干扰（Common Mode） 如果涨潮了，或者一个巨大的涌浪过来，A 船和 B 船同时被抬高了 1 米。 -\u0026gt; 虽然两艘船的绝对海拔都变了，但它们之间的相对高度差（A - B）其实没变。 这就是共模干扰：作用在两根信号线上，幅度相同、相位相同（方向一致）的干扰信号。 它是“共同”拥有的干扰。\n电路模型：数学视角 在仪表设计中，我们通常用两根线传输信号（信号线 + 地线，或者 信号线 A+ 信号线 B）。\n假设：\n$S$ 是我们想要的真实信号（Signal）。 $N$ 是外界进来的噪声（Noise）。 共模干扰的数学表达：\n线路 1 的电压： $V_1 = S + N$ （信号 + 噪声） 线路 2 的电压： $V_2 = 0 + N$ （参考地/负端 + 同样的噪声） 如果你用单端测量（只看 $V_1$ 对大地的电压）：你读到的结果是 $S + N$。干扰成功入侵了，数据不仅包含信号，还包含噪声。 如果你用差分测量（Differential）（看 $V_1$ 和 $V_2$ 的差值）： $$输出 = V_1 - V_2 = (S + N) - (0 + N) = S$$\n神奇的事情发生了： $N$（噪声）被数学减法消掉了。这就是“差分设计思想”的威力——通过结构设计，让干扰变成“共模”，然后通过相减把它杀掉。\nCEMS 现场的共模干扰来源 1、地电位差（Ground Loop） 场景： CEMS 分析仪在控制室，采样探头在几十米外的烟囱上。 现象： 烟囱的金属架虽然接了地，控制室机柜也接了地。但因为距离远，两点的“地”之间可能存在几伏甚至几十伏的电压差（尤其是在大电机启动瞬间）。 结果： 这个电压差会同时叠加在你的信号线和回路上，形成巨大的共模电压。如果不处理，轻则数据乱跳，重则烧毁端口。 2、空间电磁感应 场景： 你的信号线旁边并行铺设了一根 380V 的大功率动力电缆。 现象： 动力电缆产生的交变磁场，会在你的两根信号线上同时感应出 50Hz 的交流电压。 结果： 这是一个典型的共模噪声，两根线都在“抖”。 如何在设计中对付它 如何对付共模干扰呢：\n“不让它进来” —— 双绞线 原理： 把两根信号线像麻花一样拧在一起。 效果： 这样保证了外界磁场穿过两根线的面积几乎相等，感应出的噪声电压 $N$ 也就几乎相等。只要 $N$ 相等，它就是标准的共模干扰，容易被后级电路滤除。 如果不绞合，一根线离干扰源近，一根远，那就变成难搞的差模干扰了。 “关门打狗” —— 差分放大器/仪表放大器 原理： 使用具有高共模抑制比的运放芯片。 效果：这种芯片天生只放大差值（$A-B$），对共模值（$A$ 和 $B$ 的平均值）视而不见。CEMS 里的微弱信号（如电化学传感器、热电偶）必须进这种放大器。 “物理隔离” —— 隔离变压器/光耦隔离 原理： 直接切断导线连接。用光或磁来传信号。 效果： 这是对付地电位差的终极武器。既然两边的“地”打架，我就把路断开，让信号“飞”过去。CEMS 的模拟量输出（4-20mA）通常都要求带光电隔离，就是为了防止 DCS 系统的地干扰反噬分析仪。 共模干扰不可怕，可怕的是把共模变成了差模。在设计仪表时，我们的核心任务之一，需尽可能保证干扰在两根线上是“对称”的（比如走线长度一样、阻抗匹配一样、双绞紧密），这样它就是纯净的共模干扰，然后交给后端的差分放大器一口吃掉它。\n","date":"2025-12-02T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B1%E6%A8%A1%E5%B9%B2%E6%89%B0/","title":"共模干扰"},{"content":"继 干湿氧差减法 后的想法，这种醉翁之意不在酒的工程思维，这种设计美感，值得进一步学习！\n1、侧面迂回：间接测量思维 当直接测量目标（水分子）很难、很贵或者不准时，我们寻找一个与目标有强数学关联的容易测量的“代理变量”\n思维逻辑： “我不直接抓嫌疑人，我通过监控他身边形影不离的伙伴来锁定他。” 在本例中： 直接测量水： 需要阻容法或激光法，成本高，且高温下容易损坏。 间接测量氧： 氧化锆氧量计极其成熟、耐高温、便宜。 本质： 利用相关性替代直接性 2、稀释/挤占效应思维 (Dilution/Displacement Effect) 这才是干湿氧法最底层的物理逻辑。这是一种“总量守恒下的占比分析”。\n模型解释：想象一个电梯（单位体积的气体），里面只能装 100 个人（分子）。 状态 A（湿）： 里面混进了几个胖子（水分子），导致瘦子（氧分子）被挤得只剩 10 个了（浓度 10%）。 状态 B（干）： 把胖子（水分子）赶出去。因为电梯空间是固定的，瘦子们分散开了，或者更多的瘦子补进来填补空缺，这时候数一数，瘦子变成了 12 个（浓度 12%）。 计算逻辑： 既然瘦子（氧气）的总量没变，仅仅是因为空间被胖子（水）挤占了。那么通过瘦子浓度的变化率，就能反推出胖子占了多大地方。 $$C_{wet} = C_{dry} \\times (1 - H_{2}O%)$$ $$H_{2}O% = 1 - \\frac{O_{2, wet}}{O_{2, dry}}$$ 这种思维的威力： 只要你能制造出“有它”和“没它”两种状态，利用归一化（Normalization）原理，就能算出它。 3、差分状态对比思维 (Differential State Comparison) 如 [[如何训练工程系统思维]] 中所说的，这里也算是利用“两次测量，一次计算”逻辑的变体\n通常的差分是：信号 - 本底 这里的差分是：状态 A（含水） vs 状态 B（脱水）。 这种思维不再依赖传感器的绝对准确度（虽然氧传感器要准），它更依赖于物理过程（脱水）的彻底性。只要前处理系统把水除干净了，这个数学逻辑就没有问题。 4、小结 其实这种思维并不少见，例如阿基米德测皇冠体积，通过测排开水的体积来测量皇冠的总体积，这其实也是一种“挤占效应”；还有个例子和 干湿氧差减法 的思想特别像：\n血液检查中的红细胞压积 现象： 当一个人严重脱水时，医生抽血化验，会发现他的血红蛋白浓度异常升高。 逻辑： 血红蛋白总量没变，是血里的水少了（溶剂减少）。医生通过测量“溶质变浓了多少”，反推出你“缺了多少水”。 另外，虽然干湿氧法这种方法应用的很巧妙，但需要注意他的边界条件：\n分母陷阱： 公式是 $H_{2}O% = 1 - (O_{2, wet} / O_{2, dry})$。 如果氧含量极低（比如接近 0%），那么 $O_{2, wet}$ 和 $O_{2, dry}$ 都很小，传感器的一点点噪声会导致比值剧烈波动，计算出的水分数据会满天飞。 所以，这种方法并不适合低氧工况 假设前提：这种计算方法成立的前提是，除湿前和除湿后，气体中只是去除了水，并没有去除其他气体成分。如果预处理系统中使用了能吸附氧气的除湿剂，或者漏气导致氧气进入，计算公式将不再适用。 ","date":"2025-12-02T00:00:00Z","permalink":"https://teaize.github.io/p/%E9%97%B4%E6%8E%A5%E6%B5%8B%E9%87%8F%E4%B9%8B%E5%B9%B2%E6%B9%BF%E6%B0%A7%E6%B3%95/","title":"间接测量之干湿氧法"},{"content":"第一步：从“What”到“Why” —— 逆向工程思维 很多工程师看到一台高端进口仪表（比如西门子的 CEMS），看到的是“它有一个参比气室”。而设计思维要求你多问一步：“为什么它必须有这个气室？如果去掉它，哪条物理定律会惩罚这台机器？”\n练习方法： 看到任何一个奇怪的设计细节（比如一段弯曲的管路、一个多余的电容、一个看起来很多余的校准步骤），不要认为它是“惯例”。 多问： “设计师在防御什么？” 假设： “如果我把这个去掉，是在高温下会死？还是在零点漂移时会死？” 结论： 一旦你找到了它防御的那个“敌人”（共模干扰、热传导、电磁噪声），你就掌握了一个模型。 第二步：建立“思维模型库” —— 抽象化能力 所谓模型思维，就是把具体的物理问题，抽象成通用的数学或逻辑结构。当你不再把“温度补偿”看作是修温度的，而是看作“输入 - 输出修正模型”时，你就会发现：\n修温度可以用这个公式。 修压力可以用这个公式。 甚至修“传感器老化导致的灵敏度下降”，本质上也是同一个数学模型（$y = kx + b$，其中 $k$ 和 $b$ 是随时间变化的函数）。 你需要建立的核心模型库包括：\n黑盒模型： 任何器件都是 输入 -\u0026gt; [传递函数 + 干扰] -\u0026gt; 输出。设计的目的就是最大化传递函数，最小化干扰。 负反馈模型： 系统必须知道自己“错”了，才能改。所以必须有回路（闭环）。 信噪比（SNR）模型： 世界上没有绝对精准，只有信号比噪声强多少。差分设计的本质就是压低分母（噪声）。 冗余模型： 既然一定会坏，那就准备两套（无论是硬件冗余还是信息冗余）。 第三步：回到“第一性原理” —— 物理直觉 所有的工程技巧，最终都服务于底层的物理定律。\n朗伯 - 比尔定律告诉我们要关注光强 $I$ 和路径 $L$。 理想气体状态方程告诉我们要关注 $P$ 和 $T$。 能斯特方程告诉我们氧化锆的电势与温度 $T$ 成正比。 养成习惯： 在设计任何传感器应用时，把它的基础物理公式写在纸上，盯着公式里的每一个变量问自己：“这个变量在现场会变吗？如果变了，我怎么通过设计把它按住？”\n第四步：极限思维 —— 把工况推向无穷大 这是发现设计漏洞的最好办法。在脑海里进行思想实验：\n“如果环境温度变成了 $1000^\\circ C$，我的设计哪里先挂？” -\u0026gt; 让你意识到热隔离的重要性。 “如果信号线断了（阻抗无穷大），我的读数是几？” -\u0026gt; 让你意识到 Fail-Safe 设计的重要性。 “如果背景气体全是水（100% 湿度），我的读数会偏多少？” -\u0026gt; 让你意识到交叉干扰补偿的重要性。 案例：PT100 工业用的 PT100 通常包含三根引线，网上看到的解释是第三根线上用来补偿的，但具体原理还没有研究过\n1、问题模型：为什么 2 根线不行 PT100 的原理是电阻随温度变化（PT 表示铂、100 表示 $0^\\circ C$ 时 $100\\Omega$）。 CEMS 现场，探头在烟囱上，分析仪在小屋里，中间可能隔着十几米（例如 50m）长的电缆。\n2 线制的困境： 当我们用万用表或变送器测量电阻时，电流必须流个来回 $$R_{测量值} = R_{导线A} + R_{PT100} + R_{导线B}$$\n误差来源： 铜导线是有电阻的。50 米长的截面积 $1.0mm^2$ 铜线，往返电阻约为 $1.7\\Omega$。 后果：PT100 的灵敏度约为 $0.385\\Omega/^\\circ C$。$$误差 = 1.7\\Omega / 0.385 \\approx 4.4^\\circ C$$ 也就是说，CEMS 读数会凭空高出 $4.4^\\circ C$。而且这个误差是不固定的——夏天电缆热，电阻变大；冬天电缆冷，电阻变小。这种不可控的漂移是仪器的大忌 2、解决方案：3 线制的“数学减法” 为了把 $R_{导线}$ 从公式里踢出去，工程师引入了第三根线。\n物理结构：\nPT100 电阻的一端接 1 根线（设为线 A）。 PT100 电阻的另一端接 2 根线（设为线 B 和 线 C）。 关键假设： 我们默认这三根线是同一根电缆里的，长度一样、材质一样、温度环境一样，所以它们的电阻相等：$R_A = R_B = R_C = r$。 补偿原理（电桥法/运算逻辑），现代仪表通常采用“两次测量，一次计算”的逻辑（或电桥平衡逻辑）：\n1、回路 1（测量回路）：电流从 线 A 流入，经过 $R_{PT100}$，从 线 B 流回。 $$阻值_1 = R_A + R_{PT100} + R_B = 2r + R_{PT100}$$ 2、回路 2（补偿回路）： 电流从 线 B 流入，直接从 线 C 流回（因为 B 和 C 在探头根部是短接的，电流不经过 PT100）。 $$阻值_2 = R_B + R_C = 2r$$ 3、最终计算： 仪表内部算法执行减法： $$R_{真实} = 阻值_1 - 阻值_2$$ $$R_{真实} = (2r + R_{PT100}) - 2r = R_{PT100}$$ 如此，导线电阻 $r$ 就被完美消除掉了。无论电缆是 10 米还是 100 米，无论夏天还是冬天，只要三根线变化一致，误差就会被自动扣除\n","date":"2025-12-02T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%A6%82%E4%BD%95%E8%AE%AD%E7%BB%83%E5%B7%A5%E7%A8%8B%E7%B3%BB%E7%BB%9F%E6%80%9D%E7%BB%B4/","title":"如何训练工程系统思维"},{"content":"继上篇的 [[参数化补偿]]，这里汇总了一些在仪表研发和系统集成中，除了“补偿”之外的一些指导思想。\n1、差分设计思想（Differential Design） 核心逻辑： 不要只测“绝对值”，要测“差异值”。通过物理架构抵消共模干扰。\n在 CEMS 中，环境变化（光源波动、电源纹波、温度整体漂移）往往同时作用于所有通道。如果只看单路信号，很难分清是浓度变了还是灯泡暗了。\n典型应用： 参比光路（Reference Channel）： 比如非分散红外（NDIR）气体分析仪。设计两个探测器，一个前加滤光片只透过不被吸收的光（参比端），另一个透过被测气体吸收的光（测量端）。 算法逻辑： 不是看测量端电压 $V_{meas}$ 多少，而是看 $V_{meas} / V_{ref}$ 的比值。 价值： 光源亮度衰减了 50%，两个通道同时衰减，比值不变。这种物理层面的抵消，比软件补偿更底层、更可靠。 CEMS（DOAS）： CEMS 中测 $SO_2$/$NO_x$ 的主流技术。它利用气体的窄带吸收（快变信号）和宽带散射（慢变信号）的差异，直接在频谱上把粉尘干扰（宽带）像剥洋葱一样剥离掉。 2、闭环反馈与自动归零（Closed-loop \u0026amp; Auto-Zeroing） 核心逻辑： 仪器不能是“开环”的，它必须有一个不断回到原点的机制，以此来锚定测量的基准\n传感器最大的敌人是零点漂移。与其拼命制造不漂移的传感器，不如设计一套机制，让它每隔一段时间就“看一眼”什么是零。\n典型应用： 电磁阀切换： 几乎所有的 CEMS 分析仪内部都有电磁阀。每隔 4 小时或 24 小时，系统自动切断烟气，通入洁净空气（例如实现每 24h 自动校零一次）。 动态调整： 此时读数如果不是 0（比如漂移到了 2ppm），系统自动将当前电压定义为新的“零点”。 价值： 这种“分时复用”的设计思想，把长期的稳定性要求，降低为了“在两次自动校零间隔内稳定”即可。这极大降低了硬件设计难度。 3、失效安全与防御性设计（Fail-Safe Design） 核心逻辑： 假设系统一定会出故障，那么出故障时，必须停留在最安全的状态，而不是破坏性最大的状态。\nCEMS 涉及高温伴热和流体传输，一旦失控，后果往往是损坏昂贵的分析仪核心部件。\n典型应用： 伴热管线低温连锁： 这是一个经典的防御设计。采样探头或管线温度如果低于设定值（如 120℃），必须强制停运采样泵。 为什么？ 因为温度不够会导致 $SO_2$ 和水结合成亚硫酸/硫酸，不仅腐蚀管路，液态水进入分析仪气室会直接导致传感器报废。 信号输出： 4-20mA 输出设计中，2mA 通常代表“故障”，0mA 代表“断电/断线”。不能让故障表现为“0 浓度”，误导环保部门以为排放达标。 4、模块化解耦与热隔离（Decoupling \u0026amp; Isolation） 核心逻辑： 将相互影响的物理量在空间上隔绝，让每个模块只处理单纯的任务。\n在仪表设计中，最怕“热 - 电 - 气”混杂在一起互相打架。\n典型应用： 气电分离（Gas-Electronics Separation）： 优秀的分析仪机箱设计，气路部分（易漏气、有腐蚀性）和电路部分（怕腐蚀、怕热）是严格分仓的，中间通过密封隔板隔开。 热隔离： 高温紫外分析仪的气室需要加热到 180℃以上，但光纤光谱仪和电路板只能承受 50℃。设计中会使用气凝胶隔热层、独立的散热风道，或者半导体制冷片制冷，确保“火热的心（气室）”和“冷静的头脑（电路）”互不干扰。 小结 在设计一款仪表时，我们可以按这个层级思考：\n架构层（差分设计）： 能用物理结构抵消的误差，绝不用算法去算。 流程层（闭环归零）： 利用时间换空间，通过频繁校准来维持精度。 算法层（参数化补偿）： 既然规律可循，就用数学模型把剩余的误差修补回来。 安全层（Fail-Safe）： 守住底线，保护核心器件不被次生灾害损坏。 ","date":"2025-12-02T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BB%AA%E8%A1%A8%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/","title":"仪表设计思想"},{"content":"由一张卡片带来的思考，芯片有睡眠、待机、停机、运算等不同的状态，仪表有“校零/预热/测量/吹扫”等状态，本质上都是有限状态机。\n状态机的概念 “状态机”（Finite State Machine, FSM） 是逻辑控制中的一种数学模型。它的第一性原理是：系统在任何一个时刻，只能处于一种特定的状态中。 它不能既是 A 又是 B。\n想象一个人：\n状态 A：睡觉。 (此时如果你听到闹钟响 -\u0026gt; 这是一个事件/输入) 动作： 起床。 状态 B：清醒。 这就是一个最简单的状态机。 如果没有状态机思维，你可能会写出这样的逻辑：“我正在睡觉，同时我在跑步”。这在逻辑上是崩溃的。\n状态机的四大要素 要描述一个状态机，需要定义清楚这四个东西，以 CMES 仪表为例：\n现态 (Current State)： 你现在在哪？（例如：测量中） 条件/事件 (Condition/Event)： 发生了什么事？（例如：收到校准指令 或 定时器时间到） 动作 (Action)： 你要干什么？（例如：切电磁阀、冻结数据） 次态 (Next State)： 做完动作后，你变成了什么？（例如：变成“校准中”） 有限状态机思维 (Finite State Machine, FSM) 核心思想： 系统不是一个连续混沌的过程，而是由若干个离散的、定义明确的状态 组成的。 设计哲学：各司其职，互不干扰。 在 CEMS 中的应用： 预热状态 ： 此时系统的唯一任务是“热起来”。策略： 全功率开启加热器，但禁止开启采样泵（防止冷凝水抽入气室，类似芯片的软启动保护）。 校零状态： 此时系统的任务是“找基准”。策略： 切换电磁阀，屏蔽掉所有超标报警（因为标气可能超标），并冻结 4-20mA 输出（保持在测量前的数值），防止 DCS 误报警。 吹扫状态： 此时系统的任务是“清洁”。策略： 泵反转或开启反吹气源，此时任何测量数据都是无效的，必须打上“无效数据”的 Flag。 负载分级与最坏情况设计 (Worst-Case Design) 芯片之所以有很多电容，是因为设计者考虑到了最坏的瞬时功耗。在 CEMS 设计中，这对应着“功耗预算 (Power Budgeting)”思想：\n不同档位（状态）的功耗是不一样的： 预热状态： 伴热管线加热（2000W）+ 探头加热（500W）+ 仪表加热（200W）。这是峰值功耗（Max Load）。 测量状态： 加热器只需保温（占空比 30%），但泵全速转。这是典型功耗。 待机状态： 只有电路板供电。 设计陷阱： 很多新手设计师只按“典型功耗”选电缆和空开，结果一到冬天冷启动（预热状态），全系统跳闸。 思维模型： 必须按照“所有耗能元件同时开启的那个瞬间”（通常是上电瞬间或预热态）来设计供电系统。 ","date":"2025-12-02T00:00:00Z","permalink":"https://teaize.github.io/p/%E7%8A%B6%E6%80%81%E6%9C%BA/","title":"状态机"},{"content":"在二氧化硫紫外荧光分析仪当中，荧光灯会随着使用的老化，光强逐渐变弱，那么仪表参考的基准变了，自然测出来的数据就会和真值有所偏差。如下卡片内容所示，这是一种参数化补偿设计。\n实际上，在 CEMS 领域，这是一个核心且无处不在的设计思想。因为 CEMS 系统处于极其恶劣的工况（高温、高湿、高腐蚀、高粉尘）下，且要求长期（3-6 个月）免维护运行，纯粹靠硬件的“刚性”往往无法抵抗物理定律带来的漂移和退化。此时，我们就需要大量引入可测变量（传感器数据）作为补偿参数，通过软件算法来“拉回”偏差。\n一些应用 1、工况参数补偿 这是参数化补偿在 CEMS 中最直观的应用。分析仪测得的通常是“特定状态下的浓度”，但法规要求的是“标况干基浓度”。温度和压力就是这里的“可测不一致性”。\n问题背景： 烟气温度和压力随锅炉负荷波动，导致气体摩尔体积变化，直接影响测量值的准确性 补偿参数： 温度（$t$）、压力（$P$） 补偿逻辑： 引入状态方程进行修正，将工况浓度折算为标况浓度： $$C_{std} = C_{meas} \\times \\frac{273.15}{273.15 + t} \\times \\frac{P + P_{atm}}{101.325}$$ 这里，$t$ 和 $P$ 就是动态补偿参数，抵消了环境物理量变化带来的“不一致”。 2、光源衰减与脏污补偿（针对“退化现象”） CEMS 的光学器件（透镜、反射镜、光源）随时间推移必然会老化或沾染灰尘。\n问题背景： 朗伯 - 比尔定律 $A = \\lg(I_0/I)$ 依赖于初始光强 $I_0$。如果光源老化导致 $I_0$ 下降，或者视窗脏污导致透光率下降，测量值就会漂移。 补偿参数： 参考信号强度（Reference Signal）或 光强衰减系数。 设计实现： 双光路/双波长设计： 引入一个不被待测气体吸收的“参考波长”。 当参考波长的光强 $I_{ref}$ 下降时，系统认为这是由光源老化或灰尘引起的共模干扰。 系统会自动根据 $I_{ref}$ 的衰减比例，对测量信号 $I_{meas}$ 进行等比例补偿，或者自动调整增益（AGC），从而抵消硬件退化的影响。 3、传感器线性度与全温区补偿 没有完美的线性传感器，也没有完全不受环境温度影响的电子元器件。\n问题背景： 电化学传感器或某些光学检测器在不同环境温度下，灵敏度（Slope）和零点（Zero）会发生漂移。 补偿参数： 温度系数（Temperature Coefficient）与 多项式拟合系数。 设计实现： 在分析仪内部（如光学平台或传感器旁）安装高精度温度探头。 建立一个温度 - 修正量的数学模型（通常是二次或三次多项式）。 $$Output_{corrected} = Output_{raw} \\times (1 + \\alpha \\times (T_{curr} - T_{cal}))$$ 其中 $\\alpha$ 就是温度补偿系数。这使得设备即使从 $20^\\circ C$ 变到 $40^\\circ C$，输出依然稳定。 4、氧化锆氧量计的内阻补偿 问题背景： 氧化锆头在长期高温运行后，电极会老化，内阻增加，导致响应变慢或本底电势变化。 补偿设计： 现代高端氧化锆变送器会周期性测量探头的内阻（作为监测参数）。当内阻发生可预期的变化时，变送器会调整加热电流或对电势信号进行算法补偿，延长探头的使用寿命（虽然最终还是需要更换，但在退化期能保持数据可用）。 小结 参数化补偿设计在 CEMS 中的核心思想是：承认不完美，利用相关性。我们不再试图制造一个在任何温度、压力、老化程度下都物理性质绝对不变的“完美仪器”(这会极大提高成本，或者物理上做不到)，而是：\n承认干扰和退化的存在（如光源会暗，承认水汽有干扰）。 量化这些干扰（通过传感器测出温度、光强、干扰气浓度）。 计算出修正值并实时抵消。 这种思想将硬件的制造难度转移到了软件算法和系统集成上，也是是现代精密仪器的核心竞争力之一\n","date":"2025-12-01T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8F%82%E6%95%B0%E5%8C%96%E8%A1%A5%E5%81%BF/","title":"参数化补偿"},{"content":"复习到一张一年前的卡片，卡片内容：在某些方面，不锈钢刚度大是一种优点，但在压铆螺母压铆方面，却会带来一些问题，需要采用高强度特种不锈钢材料的压铆螺母，压铆螺母铆接不牢固经常需要再点焊\n在普通碳钢板（如 SPCC、SECC）上压铆时，通常使用普通不锈钢螺母（CLS 型号，通常为 304 材质）。但在不锈钢板上，普通 CLS 螺母完全行不通。\n其实，这涉及到一个核心的物理力学原理：压铆要想牢固，螺母必须显著硬于板材。压铆螺母是靠挤压压入板材的，螺母的压花齿和导向槽必须具备硬度优势，迫使板材发生塑性变形。 另外，不锈钢有一种加工硬化的特性，当你试图挤压它时，它会瞬间变硬，结果就是硬碰硬，板材没有流动，反而是螺母的压花齿被压平了。所以需要采用高强度特种不锈钢材料的压铆螺母\n二律背反 Antinomy 这其中就体现了一种二律背反的现象，或者说，是一种“服役性能”与“工艺性能”的博弈（Performance vs. Processability Trade-off）\n这种思想的核心在于认识到，材料的物理属性是中性的，所谓的“优缺点”完全取决于它所处的时间段\n在“使用阶段”（服役期）： 我们希望不锈钢刚度大、硬度高、耐腐蚀。这时候，刚度大是优点，代表着产品结实、不变形。 在“制造阶段”（出生期）： 我们需要对材料进行塑形（折弯、压铆、切削）。这时候，刚度大就变成了阻力，意味着难以流动、损耗刀具、结合力差。 这种思想的本质是：一个完美的工程设计，不能只盯着产品“做好了之后”的样子（功能），必须同时对产品“如何被造出来”的过程（工艺）表现出极大的敬畏\n如何在未来的工作中多利用这种思想 初级工程师看到的是材料的强度； 资深工程师看到的是材料的流变。需要我们养成分时段、分维度审视材料属性的习惯，可以尝试下面这四种思维模型：\n思维模型一：时间轴切片法（Timeline Slicing） 在选材时，不要只看一张物性表，要在脑海里画一条时间轴，把材料在不同阶段的表现列出来\n练习： 当你想选一种“超强、超硬”的材料时，立刻反问自己： 切削时： 它会不会崩刀？ 焊接时： 它会不会因为碳当量高而裂纹？ 装配时： 它会不会太硬导致无法过盈配合？ 应用案例： 汽车齿轮。 使用时需要极高的表面硬度（耐磨）。 制造时需要较低的硬度（方便滚齿加工）。 解决方案： 利用时间轴思维，先用软状态加工齿形，再通过渗碳淬火在最后阶段改变表面属性。这就是“错峰”解决矛盾。 思维模型二：功能解耦法（Functional Decoupling） 如果不锈钢板又硬又难压铆是一个死结，那就不要试图用“一种材料”解决所有问题。将“结构支撑”和“连接功能”分开。\n思想： 既然基材硬度大导致压铆困难，那就引入第三者，或者改变连接界面。 应用案例： 镶件注塑： 塑料太软握不住螺钉，就埋入铜螺母；铝合金件中打入钢丝螺套。 涂层技术： 基体用廉价易加工的碳钢（解决工艺问题），表面镀镍或喷涂（解决防锈的功能问题），而不是死磕全不锈钢。 思维模型三：顺势而为法（Process Compensation） 既然材料的某个属性（如刚度大）在工艺上是劣势，我们可以通过改变工艺环境，暂时“抑制”这个属性，或者利用这个属性。\n思想： 如果硬碰硬不行，能不能换个物理环境？ 应用案例： 温热成形： 钛合金在常温下很难冲压（回弹大、易裂），但在高温下延展性极好。我们在制造阶段加热它，利用它变软的瞬间加工，冷却后它又恢复了高强度。 思维模型四：木桶短板的逆向思维 通常我们说短板决定容量，但在制造中，最难加工的那个特征决定了整个零件的成本和良率。\n思想： 既然不锈钢板压铆容易失效，那这是否是必须的结构？ 应用案例： 如果你发现为了配合压铆，不得不把整块板材的选型变得很复杂，不如直接取消压铆。 改为拉铆螺母（依靠螺母自身的变形，而不是板材变形，完美避开了不锈钢硬度高导致板材不流动的问题）。 这种思维会让你跳出“如何把这个铆钉压好”的战术陷阱，上升到“如何实现连接”的战略高度。 ","date":"2025-12-01T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%9C%8D%E5%BD%B9%E6%80%A7%E8%83%BD%E4%B8%8E%E5%B7%A5%E8%89%BA%E6%80%A7%E8%83%BD%E7%9A%84%E5%8D%9A%E5%BC%88/","title":"服役性能与工艺性能的博弈"},{"content":"如何训练出一种“对思考过程的思考”，也就是元认知能力（Metacognition）。这里摘抄了 AI 给的一些建议。通过如下四个步骤刻意练习，在大脑中建立起“模型库”\n第一步：抽象化训练（给问题“起名字”） 很多工程师止步于“解决问题”，而高阶工程师强在“定义问题”。\n当你解决完“不锈钢压铆不牢”的问题后，不要只在笔记本上写“下次要扩孔”。你要强迫自己把这个具体的物理现象，抽象成一个通用的概念。\n初级思考： 这个螺母硬度不够，要换硬的。 中级思考： 这是硬度匹配的问题，要保证 A 比 B 硬。 模型化思考（我的思考方式）： 这是**“加工性能与服役性能的矛盾”，或者是“二律背反”。 如何练习： 每次解决一个技术难题后，问自己一句：“这件事如果在别的行业、别的领域发生，它叫什么？”\n第二步：跨界联想（利用你的多重兴趣） 思维模型最强大的时候，往往是跨学科借用的时候。你可以尝试把这些毫不相关的领域强行联系起来：\n机械 vs 心理学：\n你提到的 NPD（自恋型人格障碍）有一个特点：外表自大（刚度高），内心脆弱（韧性差）。 这不就是陶瓷材料或者未回火的马氏体钢吗？ 思维模型： “高强低韧系统”。这种系统极其危险，看着很强，一受冲击就“崩塌”（人格崩塌/零件断裂）。 应用： 当你设计一个机构时，如果发现它太刚硬没有缓冲，你可以对自己说：“这结构太 NPD 了，容易暴雷，我得加点阻尼（同理心/韧性）。” 第三步：学习现成的“工程师外挂”——TRIZ 理论 如果你觉得靠自己总结太慢，机械工程界其实有一套现成的“思维模型百科全书”，叫做 TRIZ（发明问题解决理论）。\n苏联科学家分析了 200 万份专利，提炼出了 40 个发明原理和 39 个工程参数。我刚才提到的“矛盾”，在 TRIZ 里叫“物理矛盾”或“技术矛盾”。\n刚才的例子： 不锈钢既要硬（使用）又要软（加工）。 TRIZ 解决方案： “分离原理”。 时间分离： 现在的状态（热）和未来的状态（冷）不一样。（比如温热成形） 空间分离： 核心部分硬，边缘部分软。（比如激光局部退火） 如何练习： 建议你把 TRIZ 的 40 个发明原理 打印出来贴在工位旁。遇到想不通的死结，挨个过一遍。比如“分割”、“抽取”、“局部质量”、“不对称”等。这相当于给你的大脑装了一个作弊器。\n第四步：从“What”到“How”再到“Why”的深度挖掘 普通人看现象，高手看结构，大师看系统。\n你可以养成“追问三层”的习惯：\n现象层（What）： 为什么压铆不牢？ -\u0026gt; 因为有硬化层。 原理层（How）： 为什么有硬化层会有影响？ -\u0026gt; 因为阻碍了塑性流动。 模型层（Why/Meta）： 为什么我们非要塑性流动？ -\u0026gt; 因为我们试图用形变来换取连接力。 当你走到第三层，你就不再受困于“怎么把孔钻得更好”，而是可以思考“怎么把连接做得更稳”。\n","date":"2025-12-01T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%83%E8%AE%A4%E7%9F%A5metacognition/","title":"元认知Metacognition"},{"content":"干湿氧差减法,它通过比较“含水的烟气”和“脱水的烟气”中氧气浓度的变化，来反推水分有多少\n核心概念 湿氧 vs 干氧 要理解这个原理，首先要明白两个概念：\n湿氧 ($O_{2, wet}$)： 指原汁原味的烟气中的氧含量。此时烟气里混杂着水蒸气。 获取方式： 通常是用氧化锆探头直接插入高温烟道（In-situ），在高温下直接测量出来的。因为水在高温下是气态，占据体积，所以测出来的是“湿基氧含量”。 干氧 ($O_{2, dry}$)： 指除去水分后的烟气中的氧含量。 获取方式： 通过采样管把烟气抽出来，经过冷凝器（除水），把水蒸气变成液态排掉，剩下的干气再送入分析仪（如磁氧分析仪或另一台氧化锆）测量。 原理推演 水分子是个“占位符” 想象一个拥挤的房间（烟气），里面有 100 个人（气体分子）：\n其中有 10 个 穿红衣服的（氧气）。 其中有 10 个 穿蓝雨衣的（水蒸气）。 剩下 80 个 是穿灰衣服的（氮气、CO2 等）。 场景一：在烟道里直接测（湿氧）\n这时候水蒸气还在房间里。氧气的占比 = $\\frac{10}{100} = 10%$。,这就是 $O_{2, wet} = 10%$。\n场景二：抽出来除水后测（干氧）\n我们把穿蓝雨衣的 10 个人（水蒸气）赶出房间。这时候房间里总人数变成了 $100 - 10 = 90$ 人。但是穿红衣服的（氧气）还是 10 个人。氧气的占比 = $\\frac{10}{90} \\approx 11.11%$。,这就是 $O_{2, dry} \\approx 11.11%$。\n发现了吗？干氧浓度（11.11%）总是大于湿氧浓度（10%）。这两个数值的差值，完全取决于刚才赶走了多少个“穿蓝雨衣的人”（水分）。只要我们同时测到了 $O_{2, dry}$ 和 $O_{2, wet}$，就可以通过下面的公式直接算出水分含量（$H_2O%$）：\n注意：氧化锆探头（Zirconia Oxygen Sensor）只认识“自由身”的氧气分子（$O_2$），完全“看不见”被锁在水分子（$H_2O$）里面的那个氧原子\n","date":"2025-11-30T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%B9%B2%E6%B9%BF%E6%B0%A7%E5%B7%AE%E5%87%8F%E6%B3%95/","title":"干湿氧差减法"},{"content":"缘由 四月份的某一天闪过一个灵感，想在之后添加 Anki 卡片时，在卡片的开头添加上日期。这种方案一直用到了今天，效果很棒\n实际上，这无意中触碰到了记忆心理学中一个非常核心的概念：将“语义记忆”与“情景记忆”（Episodic Memory，生活中的经历）相结合。加上日期后，那张卡片就不再仅仅是一个冷冰冰的知识点，它变成了一个时间胶囊。当你复习时，你不仅在复习知识，还在“复习”当时那个努力的自己。这种“元认知”（对学习过程的认知）带来的成就感，是维持长期 Anki 习惯的最强动力。\n仔细一想，也许还能扩展出更多：\n1、增加“来源/出处” 在“日期”旁边，再增加一个简单的字段，记录你是在哪里、或者什么场景下捕捉到这个知识点的，例如：\n2023-12-05 | 和朋友在咖啡馆聊天时提到的概念 2024-12-10 | 更换了硬件芯片解决了令人头秃问题后的教训 2、添加“为什么这很重要”字段 很多时候我们过了一年再看卡片，会纳闷：“我为什么要背这个？”导致产生厌烦情绪。添加一个 {{Why}} 字段，用一句话写给未来的自己。例如：\n这个概念虽然冷门，但它解释了我为什么 XXX 记着这个，下次写代码报错时就能立马意识到这是 XXX 问题 这赋予了知识“情绪价值”。当你疲惫时，看到过去的自己告诉你“这个很重要，因为它能帮你解决 X 问题”，动力会显著提升；如果之后用不着这个了，对照一下 {{Why}} 字段，也可以删除或者暂停卡片\n3、使用“实拍图”而非“网络图” 如果 Anki 能🔗Google 相册就好，这样就能快速调用手机中的图片了。可是目前并没有这个功能\n4、极简的“评分/心情”标签 如果不想打太多字，也可以用 Emoji 作为标签（Tag），例如制卡时打上标签，如 #🔥 (重要且紧急)、#💡 (灵光一现)、#💀 (极难，死磕很久才懂)。\n当复习时看到 #💀，你会对过去的努力会心一笑：“当时觉得难如登天，现在看也不过如此嘛。” —— 这就是你提到的“感知进步”\n","date":"2025-11-30T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8Eanki-%E8%AF%AD%E4%B9%89%E8%AE%B0%E5%BF%86%E4%B8%8E%E6%83%85%E6%99%AF%E8%AE%B0%E5%BF%86/","title":"关于Anki-语义记忆与情景记忆"},{"content":"稳定性优先原则 Stability-first principle\n一些芯片存在“使能”引脚（Enable、EN 等），它们存在的主要目的，就是控制“什么时候让芯片真正开始工作”，以避免在电源、时钟或外设没准备好之前就开始运行，导致错误输出、不稳定行为甚至损坏。 同样，在一些传感器检测系统中，也存在“预热”的说法，需要先使系统达到稳定状态之后，传感器再开始工作。如果系统还未稳定，即使传感器有输出，这些输出也可能是不准确、不可信的，这些不准确的数据反而更容易误导使用者。\n本质一句话：先保证自己处于正确、稳定、可控的状态，再向外界产生影响。换句话说，不成熟的输出比没有输出更危险\n","date":"2025-11-30T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E7%A8%B3%E5%AE%9A%E6%80%A7%E4%BC%98%E5%85%88%E5%8E%9F%E5%88%99/","title":"关于稳定性优先原则"},{"content":"在 CEMS 稀释法（尤其是湿法抽取、稀释取样）中，干净的零气是系统准确度的基础。 零气的核心目标是：不含任何会影响气体分析的成分。\n零气需要去除哪些杂质 一般来说，需要去除：\n去除本底污染气体 SO₂ NO、NO₂（总称 NOx） CO CO₂（有时不完全去） O₃ H₂S、NH₃、VOC（有机物） 去除颗粒物 PM、灰尘、烟尘等固体颗粒 去除水分（H₂O） 水汽会影响红外吸收、冷凝会影响流量稳定 也会导致传递线腐蚀或反应吸附 去除油雾、气溶胶 来自空气压缩机或管路污染 去除臭氧与活性氧 避免氧化其他成分，特别是 NO → NO₂ 为什么要去除这些 污染物 危害 SO₂、NOx、CO 直接影响零点校准，测量值偏高 H₂O 影响稀释比、吸收光谱干扰、冷凝堵塞 VOC 干扰红外光谱，形成背景噪声 颗粒物 堵塞过滤器和稀释器喷嘴 O₃ 氧化 NO，让 NOx 测量出现假值 油雾 污染管路、吸附气体导致滞后 本质一句话：零气必须不含任何可吸收红外/紫外/电化学干扰的成分，同时要无颗粒、无水、无油。\n零气产生方式 常见零气发生方式：\n1、压缩空气 + 多级净化方式 步骤链路 1： 粗过滤（去颗粒） 活性炭吸附（去 VOC / SO₂ / H₂S） 分子筛 / 干燥剂（去水） 高效氧化催化（Pall / Hopcalite）： 将 CO、HC 氧化为 CO₂、H₂O 臭氧分解过滤器 中高效 HEPA 过滤 最终输出：高纯洁净零气\n改进的步骤链路 2： 压缩空气输入 除水/除油过滤（粗滤） 变压吸附（PSA）或 干燥剂 —\u0026gt; 去除水分（露点小于 -40℃） 活性炭 —\u0026gt; 去除 VOCs, O3, 部分 SO2 氧化催化（Hopcalite） —\u0026gt; 将 CO 转化为 CO2，将 NO 转化为 NO2 新增 化学吸附/碱石灰（Soda Lime）或 分子筛（13X） —\u0026gt; 这是最关键的一步，用于吸附刚刚产生的 CO2 以及酸性气体 SO2, NO2 新增 普拉飞（Purafil / 高锰酸钾氧化铝） —\u0026gt; 深度去除残留的 NO 和轻分子有机物（可选，视环境而定） 末端 HEPA 过滤（High-Efficiency Particulate Air，高效滤网） —\u0026gt; 拦截粉尘 污染物 步骤链路 1 步骤链路 2 备注 颗粒物 ✅ 优秀 ✅ 优秀 HEPA 必不可少 水分 ($H_2O$) ✅ 优秀 ✅ 优秀 稀释法核心要求 油/VOCs ✅ 良好 ✅ 优秀 活性炭的作用 一氧化碳 ($CO$) ✅ 转化为 $CO_2$ ✅ 转化为 $CO_2$ 后被吸收 必须氧化 二氧化碳 ($CO_2$) ❌ 未去除 (反而增加) ✅ 去除 需要加装脱碳单元 氮氧化物 ($NO_x$) ⚠️ 可能残留 $NO$ ✅ 深度去除 需要氧化 + 化学吸附 2、零气发生器（氧化催化） 利用催化炉将空气中痕量杂质完全氧化 多数可达到：\nSO₂ \u0026lt; 0.1 ppm NOx \u0026lt; 0.1 ppm THC \u0026lt; 0.1 ppm 3、高纯氮（N₂）替代 适用于紫外或化学发光 NOx 校准 缺点：不能用于氧浓度测量校准\n小结 稀释法零气的本质目标：干净、稳定、无干扰。\n需要去除：\n污染气体 水分 颗粒 油雾 臭氧和活性气体 所有测量组分的背景浓度 最终得到 真正意义上的零基准气体，才能保证稀释法测量准确可靠。\n氧化催化（Hopcalite） 霍加拉特基本概念 氧化催化（Hopcalite，霍加拉特剂），通常被称为 “氧化柱”、“催化转化柱”\nHopcalite 是一种黑褐色的颗粒状物质（主要成分是二氧化锰 $MnO_2$ 和氧化铜 $CuO$ 的混合物），它不是靠物理孔隙去拦截杂质，而是靠化学反应去转化气体 常见名称：CO 催化氧化柱、霍加拉特柱 常见外观 不锈钢管 (316L)： 最常见。耐高压、耐腐蚀。通常是一根两端带有滤网（防止颗粒吹出）的不锈钢圆柱体 透明亚克力/玻璃管： 某些实验室级或低压设备为了便于观察介质状态会使用。 内部结构 气体从一端进入，穿过致密堆积的颗粒层，从另一端流出。 停留时间 (Residence Time)： 柱子的长度和直径设计很重要，必须保证气体在里面停留足够的时间，才能完全反应掉 $CO$ 和 $NO$ 为什么它能将 NO 转换成 NO2 难点： 一氧化氮 ($NO$) 是一种中性偏弱的气体，很难被普通的化学吸附剂（如碱石灰、活性炭）直接抓获。它像泥鳅一样容易穿透过滤器。 策略： Hopcalite 作为氧化剂，先把 $NO$ 氧化成二氧化氮 ($NO_2$)。 结果： $NO_2$ 是强酸性气体。一旦它变成 $NO_2$，后面的 碱性吸附剂（如碱石灰/Soda Lime） 或者 化学吸附剂（如 Purafil） 就能轻而易举地把它吸附掉。 霍加拉特使用注意事项 严禁碰水，Hopcalite 非常怕水（包括高湿度空气）。\n失效原理： 水分子会占据催化剂表面的活性位点，导致催化剂“中毒”失效。一旦受潮，它就无法再将 $CO$ 转化为 $CO_2$，也无法转化 $NO$。 系统布局铁律： 在你的链路中，Hopcalite 必须 放置在 强力干燥（分子筛/变压吸附） 之后。 ✅ 正确顺序： 压缩机 -\u0026gt; 冷凝 -\u0026gt; 深度干燥 -\u0026gt; Hopcalite 氧化柱 -\u0026gt; 吸附柱 -\u0026gt; 精滤。 ❌ 错误顺序： 压缩机 -\u0026gt; Hopcalite -\u0026gt; 干燥 (这样催化剂几天就报废了)。 在霍加拉特后端，需要有吸附柱，例如混合吸附剂（活性炭 + 碱石灰 +Purafil），用于将刚才氧化出来的 CO2 和 NO2 吸附掉 为什么霍加拉特在 CO 方面用的更多呢 需要注意的是，业界提到霍加拉特，大多数情况是针对 CO，不过也确实能转换 NO：\n$MnO_2$ 是一种极强的氧化剂。在催化化学中，它不仅能切断 $CO$ 的碳氧键，也能在常温下催化 $NO$ 与空气中的 $O_2$ 反应。 实验数据支持： 多项研究表明，锰基催化剂在常温下对 $NO$ 的氧化转化率可以达到 40%~90%（取决于流速和接触时间）。 痛点一：它“管杀不管埋” 对于 $CO$，它将其转化为 $CO_2$。对于大多数不需要测量 $CO_2$ 的场合（如环境空气站），$CO_2$ 直接穿透过去也没关系，无毒无害。 对于 $NO$，它将其转化为 $NO_2$。$NO_2$ 依然是污染物，而且具有腐蚀性。如果你后面没有东西把 $NO_2$ 吃掉，那你实际上并没有“去除”氮氧化物，只是给它“换了个马甲”。 痛点二：转化效率不如 CO 稳定 霍加拉特切除 $CO$ 如同切菜，效率极高。 但对于 $NO$ 的氧化，受流速、温度和竞争吸附（如果同时存在 CO，CO 会抢占活性位点）的影响较大。 谁才是除 NO 的正规军 在标准的 CEMS 零气发生器设计中，为了彻底去除 $NO$，通常不单独依赖霍加拉特，而是引入另一种特殊材料：高锰酸钾氧化铝，商业俗称 Purafil（品牌名泛称）\n工作原理： 化学吸附（Chemisorption）。 它利用高锰酸钾 ($KMnO_4$) 的强氧化性将 $NO$ 氧化，并且直接将其转化为固态的硝酸盐 ($NO_3^-$) 固定在球体内部 优势： 一步到位，既氧化又吸收，不需要后面再跟一个吸附柱 分子筛 分子筛通常是米白色或褐色的圆球状颗粒（直径约 1.6mm - 3.2mm），看起来有点像陶粒或未加工的药丸。它被致密地填充在金属罐体（干燥塔）中\n它的核心原理：以此之名（“筛子”），它由人工合成的沸石晶体（Zeolite）构成\n微观结构： 它的每一颗小球内部都有数以亿计的、孔径完全均一的微孔通道。 筛分原理（物理吸附）： 这些微孔的大小是精确控制的（单位是埃，$\\mathring{A}$）。 只进不亦出： 如果气体分子的直径 小于 孔径，就会被吸进去并紧紧锁在孔穴里。 拒之门外： 如果气体分子的直径 大于 孔径，它就进不去，只能随气流流走。 打个比方，想象一个带有无数小孔的捕捉陷阱。\n水分子 ($H_2O$) 个头很小（约 $2.8 \\mathring{A}$），一下就掉进陷阱里出不来了。 氮气 ($N_2$)、氧气 ($O_2$) 个头较大（约 $3.6 \\mathring{A}$ 左右），掉不进孔里，于是顺利通过。 结果：出来的空气里就没有水了。 为什么零气发生器中用它而不是用硅胶呢 理由一：深度干燥能力（低露点） 硅胶在空气很湿的时候吸水快，但在空气比较干的时候就吸不动了。 分子筛是“贪婪”的： 即使空气湿度已经很低，它依然能强力捕捉残留的水分子。这就是为什么它能把露点压到 $-40^\\circ C$ 甚至 $-70^\\circ C$ 的原因。 理由二：多功能性（除 $CO_2$） 特定型号的分子筛不仅能吸水，还能吸附 $CO_2$、$SO_2$ 等酸性气体。 分子筛根据孔径大小分为不同型号，在 CEMS 零气中，最常见的是 13X 和 4A\n型号 孔径 特点 在零气中的作用 4A 分子筛 $4\\mathring{A}$ 最经典的干燥剂 深度除水。它不吸附较大的分子，专心除水。 13X 分子筛 $10\\mathring{A}$ 孔径很大，吸附力极强 除水 + 除 $CO_2$ + 除油。它是制备“无 $CO_2$ 空气”的神器。 它是如何工作的 PSA 变压吸附 (Pressure Swing Adsorption)。分子筛有一个特性：加压时吸附，减压时释放。 在你的零气发生器内部，通常有两个装满分子筛的罐子（A 罐和 B 罐）交替工作：\nA 罐工作： 压缩空气进入 A 罐，高压下，水分子被分子筛抓牢，干空气流出。 B 罐再生： 此时 B 罐通入少量干空气并减压，分子筛“松手”，把刚才抓住的水分吐出来排到机箱外（你会听到定期的“噗——嘶”排气声）。 切换： 几分钟后，A、B 互换角色。 这就是为什么这套系统可以连续 24 小时产生干空气而不需要经常更换滤料。 ","date":"2025-11-30T00:00:00Z","permalink":"https://teaize.github.io/p/%E9%9B%B6%E6%B0%94%E4%BA%A7%E7%94%9F%E6%96%B9%E5%BC%8F/","title":"零气产生方式"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 from docx import Document from docx.shared import Pt from docx.enum.text import WD_PARAGRAPH_ALIGNMENT from docx.oxml.ns import qn # 创建文档 doc = Document() # 设置中文字体 style = doc.styles[\u0026#39;Normal\u0026#39;] style.font.name = \u0026#39;宋体\u0026#39; style._element.rPr.rFonts.set(qn(\u0026#39;w:eastAsia\u0026#39;), \u0026#39;宋体\u0026#39;) style.font.size = Pt(12) # 添加标题 title = doc.add_heading(\u0026#39;备件收据\u0026#39;, level=1) title.alignment = WD_PARAGRAPH_ALIGNMENT.CENTER # 修改后的正文内容 lines = [ \u0026#34;今交付给 XXX 先生/女士，由其接收我方留存于现场的一套备件，具体信息如下：\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;项目编号：XXX\u0026#34;, \u0026#34;备件名称：XXX\u0026#34;, \u0026#34;数量：各1套\u0026#34;, \u0026#34;交付日期：____年____月____日\u0026#34;, \u0026#34;存放地点：_____________________\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;上述物品为项目备用件，存放于现场，仅供后续维护或更换使用，所有权归属原单位所有。接收人已确认物品完好，并承诺妥善保管。\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;特此收据。\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;经手人签字：_______________ 接收人签字：_______________\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;日期：____年____月____日\u0026#34; ] for line in lines: p = doc.add_paragraph(line) p.paragraph_format.space_after = Pt(6) # 保存文档 file_path = \u0026#34;/mnt/data/备件收据_项目号XS2024009041_修订版.docx\u0026#34; doc.save(file_path) file_path ","date":"2025-11-29T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BD%BF%E7%94%A8python%E5%88%9B%E5%BB%BAword%E6%96%87%E6%A1%A3/","title":"使用Python创建Word文档"},{"content":"仪器仪表的机箱、机柜、面板上印字、标识、Logo，常见方法如下：\n丝网印刷（丝印） 原理：用丝网油墨直接印在面板上，再烘干固化 优点：成本低、颜色鲜艳、适用于批量生产 缺点：耐磨一般，时间久了可能掉字 常用材质：金属喷漆面板、塑料面板 使用场景：批量仪表外壳、按钮面板 激光雕刻（激光打标） 原理：用激光烧蚀材料形成文字或图形 优点：永久性、不掉色、精度高、耐腐蚀、耐高温 缺点：只能做单色（通常白/黑/金属色），图案较简单 常用材质：铝、不锈钢、工程塑料 适用场景：工业级仪器、高端设备、户外设备 UV 数码打印 原理：喷墨 +UV 光固化，类似“打印机直接在面板上打印” 优点：可彩色、高分辨率、适合复杂图案、速度快 缺点：表面硬度比喷漆低，容易刮花（但可加保护透明漆） 适用场景：LOGO、彩色图标、少量生产、定制版 金属铭牌 / 标牌（蚀刻、丝印、激光） 形式：独立金属片，固定在机箱上（铆接或粘贴） 优点：坚固、耐腐蚀、显专业 缺点：成本高、需要安装工序 适用：型号铭牌、参数铭牌、品牌标识 热转印 / 水转印 优点：可做非常复杂的图案，立体感强、效果好 缺点：工艺要求高、适合塑料壳 场景：外观要求高、消费类产品 贴纸（普通 / 透明 PET / PVC / 强粘 / 背胶） 优点：成本低、灵活、快速、适用于小批量 缺点：容易翘边、老化、掉色 场景：试产阶段、型号区分标签、临时标识 移印（Pad printing） 优点：适合弧面、凹凸表面印字 缺点：不如激光耐用 场景：按钮、旋钮、曲面外壳 选择建议 工控仪表、CEMS、户外设备：激光雕刻 / 金属铭牌（耐久） 批量塑料外壳：丝印 LOGO 彩色、高质量外观：UV 打印 小批量或者研发阶段：贴纸 曲面按键：移印 ","date":"2025-11-29T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BB%AA%E5%99%A8%E4%BB%AA%E8%A1%A8%E5%A4%96%E5%A3%B3%E5%8D%B0%E5%AD%97%E4%B8%8Elogo%E5%B7%A5%E8%89%BA%E6%96%B9%E6%B3%95/","title":"仪器仪表外壳印字与Logo工艺方法"},{"content":" 1 vi /usr/nanox/bin/Casella 切换成英文输入法，Shift+D，删除字符 \u0026amp;\n1 cd /usr/share/fonts/X11/100dpi/ \u0026amp;\u0026amp; cp /mnt/nfs/AR-PL-New-Sung-12.fnt . \u0026amp;\u0026amp; ls -l AR-PL-New-Sung-12.fnt 1 2 3 set bootdelay 0 save pri ","date":"2025-11-29T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%B8%BB%E6%9D%BF%E5%AD%97%E5%BA%93%E6%96%87%E4%BB%B6/","title":"主板字库文件"},{"content":" 手动工具 螺丝刀：用于拧紧或拆卸螺丝，固定 PCB、电源板、端子、外壳等 内六角扳手：用于紧固内六角螺钉，常用于结构件或机壳连接 钳子（尖嘴钳、斜口钳）：尖嘴钳用于夹持、弯线；斜口钳用于剪电线、扎带 扳手/套筒：拧螺母、螺栓 镊子：夹小元器件、定位紧凑空间的螺丝 电气与焊接工具 烙铁：焊接电阻、电容、芯片等元件到电路板上 热熔胶枪：用于临时固定线束、插头、PCB，防止振动松动 热风枪：拆焊芯片、热缩管收缩、防水封线 万用表：测量电压、电流、电阻，检查电路是否正常 电笔：检测是否带电 材料与辅料 硅橡胶（RTV silicone）：用于密封、防水、减震、固定元件，常用于探头、电缆入口处 导热硅脂/导热垫片：用于功率器件（MOSFET、稳压器）与散热器之间，提高散热 绝缘胶带（PVC）：包线、绝缘、临时固定 高温胶带（Kapton）：隔离高温区域，如焊接附近 扎带：整理线束，避免干扰和拉扯 热缩管：包裹接线点，加强绝缘、防水 精密工具与测量工具 游标卡尺：测量尺寸，保证结构件间配合精确 扭力螺丝刀：用于控制紧固力度防止损坏塑料或螺纹 划线笔、记号笔：标记装配位置 放大灯/显微镜：观看小型贴片器件焊点 清洁与整理 酒精：清理焊锡残留、清洁探头表面 防静电刷：清理电路板不伤元件 防静电手环：防止静电损坏芯片 结构辅助件 垫片、螺母、螺丝、铆钉：用于结构固定与装配 橡胶减震垫：用于仪器内部减震、降低噪声提升可靠性 ","date":"2025-11-29T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%A3%85%E9%85%8D%E8%BE%85%E5%8A%A9%E4%BB%B6/","title":"装配辅助件"},{"content":"关于气阻 在 CEMS 仪器仪表当中，最好在检测气室出口设置阀门或性能稳定的气阻阀，以提高气室背压，减少流速变化对测量的影响，同时还可以提高仪表的灵敏度。 如何理解上述这段话\n假设你想精确测量一条管道里水的温度或成分，如果水流很急、忽快忽慢，你放在水里的温度探头就会一直被冲得乱晃，测量值又会受到流速变化带来的“扰动”，读数不稳定。如果在出口处加一个阀门，让水“稍微堵一点”，形成一定的背压，水流就会变得平稳、缓慢、可控，测量就更加稳定和精确。\n气阻的实际作用 稳定流速 气阻相当于在出口处加一个“刹车”，让气体流速更恒定。 流速稳定 → 吸收室或光腔内的气体浓度变化更稳定 → 输出信号更平滑。 提高背压 背压升高后，气体在气室里停留时间变长，反应更充分。 减少外界扰动 采样泵波动 前级采样管抽力变化 烟道压力变化 这种思想有点像是控温。例如环境温度可能在 -10℃、有的环境温度可能 20℃、有的可能 30℃，但是为了在测量时保持一个恒温的温度测量，就会将预设温度提高到例如 50℃，这样不管周边的环境温度是多少度，最终都会加热到 50℃。气阻这个例子就是将预设的流量设置到一个非常低的水平，这样就算采样泵老化或者前级管抽力发生变化，也不会影响到整体的流量\n核心思想是：主动建立稳定的工作点，消除外界波动带来的干扰。\n核心思想 人为设定一个“目标工作条件” 例如温度设为 50℃，流量设为低而稳定的参考流量。 让系统在这个目标点附近稳定工作 不管外界怎么变，内部都保持一致的工作条件。 削弱外界波动对测量结果的影响 例如外界温度、压力、抽力变化。 也就是说：\n控温系统：把测量环境变成“自己说了算” → 周围 -10℃也无所谓 气阻系统：把流量变成“自己说了算” → 泵强一点或弱一点也无所谓 换句话说：\n系统越稳定，测量越可靠；不去追着外界变化跑，而是建立自己的“标准平台”。\n","date":"2025-11-24T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%B0%94%E9%98%BB%E7%9A%84%E7%90%86%E8%A7%A3/","title":"关于气阻的理解"},{"content":"起初自己并不相信“人格”这个说法，认为和“十二星座”、“阴阳五行”是一种性质的。没有接触过类似的书籍，没有接触过相关的课程，也因此更不会去主动搜索了解，直到身边真正遇到这样的人。\nNPD 是 Narcissistic Personality Disorder 的缩写，中文叫做自恋型人格障碍。这种说法是有科学依据的，它被 DSM-5（美国精神疾病诊断与统计手册第 5 版）明确列为一种人格障碍，也就是说，它不是网络上随便起的词，而是一种有临床研究与诊断标准支撑的心理障碍。\n1、几个典型特征是：\n极度需要被崇拜和关注：希望别人认可、赞美自己，稍微受到否定就难以接受 具有特权感，不合理地期待特殊待遇或他人会无条件顺从 在人际关系中剥削他人，利用他人来达成自己的目的 缺乏共情能力：很难真正理解别人的感受，经常伤害别人但不自知 经常嫉妒他人或认为别人嫉妒自己 2、与“普通自恋”的区别\n普通自恋（健康） NPD（障碍） 爱自己、努力提升 脆弱自尊、无法接受失败 有共情能力，能换位思考 缺乏共情，忽略他人感受 能接受批评 对批评极度敏感 能建立正常关系 人际关系混乱，利用别人 3、相关读物\n《情感勒索》——先理解控制与操纵 情感勒索 (豆瓣) 《自恋的基因》——了解 NPD 自恋的基因 (豆瓣) 《原生家庭》——理解深层原因与疗愈方向 原生家庭 (豆瓣) 4、属于什么领域的科学，如何从零开始接触这个领域\nNPD 人格障碍属于精神病学（Psychiatry）和临床心理学（Clinical Psychology）领域。\n如果想进一步了解这个领域，可以按这个顺序展开：\n普通心理学 \u0026amp; 人格心理学 了解基本概念、什么是人格 临床心理学 \u0026amp; 异常心理学 了解人格障碍分类标准 依恋理论 了解人格形成机制 自体心理学 / NPD 专题研究 深入理解自恋人格的结构 咨询与治疗方法 了解如何帮助或相处 5、遗憾和痛恨的是，自己 2025 年才意识到这样的概念\n学校教育更多关注“知识”，而不是“自我和心理” 很少有人教我们，情绪是什么、人格是什么、如何理解自己，于是心理学、人格学变成了“只有遇到问题才会接触的知识” 人容易把“看不见的东西”当成不重要 心理、人格、情绪无法像机械结构那样看见与测量，所以很多人觉得：“跟我没关系”、“没必要研究” 人在没有遇到痛点前，不会主动探索认知边界 很多概念，只有在经历冲突、挫折、关系困扰、工作压力后， 才会让人想：“为什么会这样？有没有更深的解释？”。这时才会发现自己理解世界的方式不够用了 痛点 ≈ 打开新世界的大门 另外，自己以往太过于自信，过去思维体系足以支持自己成长的一段时间，没有意识到自己的思维体系已开始进入一种故步自封的状态 6、之后如何避免类似的问题\n保持谦卑，不轻易下结论 遇到不懂的问题，先问：这件事我真的了解吗？有没有可能我不知道关键的信息？ 少评判，多提问 建立长期学习机制，而不是靠随机触发 每周选一个领域补充新知识 订阅领域文章、视频 与不同背景的人交流 意识到“看不见的东西往往最重要” 心理、关系、认知、思维模式比技术、工具更影响人生走向 允许自己“暂时不知道” “不知道”不是弱点，而是通往真正理解的入口 每次遇到困惑，问自己三个问题 我以前的认知在哪个地方失效了？ 为什么会失效？ 我接下来要补什么？ 给我的一种感觉是：NPD 就像是情感当中的吸血鬼。如果将感情比作交易系统当中的价值曲线，当前价值对应你两的感情，NPD 就像是大空头，时不时需要空一下，你必须充当多头的角色，不断往里投入时间、情绪、增大对她的包容和服从。 你作为多头，持续的投入，直到某一天，你终于快坚持不住了，而此时 NPD 却持续吸走你的能量。当你也从多头转到空头的那一天，感情出现恐慌情绪，价值曲线快速下跌。当价格跌破某一感情线时，这段感情可能就彻底结束了。 类似于我在加杠杆做多，而 NPD 却在不断套现，导致情绪资产无法继续维持，最终断崖式崩盘\nNPD is like an emotional vampire. If we compare a relationship to a trading system’s value curve—where the current value represents the emotional state between two people—then NPD behaves like a major short seller. They constantly need to short the market emotionally, and you are forced to take the long position, continuously investing time, emotions, patience, and obedience. As the long side, you keep injecting energy into the relationship until one day you can barely hold on, while the NPD partner keeps draining your emotional resources. When you finally switch from long to short, panic hits the emotional market and the value curve collapses rapidly. Once the price breaks below a certain emotional support line, the relationship may be completely finished. It’s like you are adding leverage to go long, while the NPD is continually cashing out, causing the emotional asset to become unsustainable and ultimately crash off a cliff.\n","date":"2025-11-23T00:00:00Z","permalink":"https://teaize.github.io/p/npd%E8%87%AA%E6%81%8B%E5%9E%8B%E4%BA%BA%E6%A0%BC%E9%9A%9C%E7%A2%8D/","title":"NPD自恋型人格障碍"},{"content":"发现一个有趣的规律：很多东西都存在惯性，例如传统文化，一些比较糟粕的传统文化到如今依旧还有很多人遵从；传感器也有惯性，例如热电偶和热电阻的热惯性就不一样\n绝大多数现实世界中的系统和现象都表现出某种形式的“惯性”或“滞后”，这意味着它们对外部变化的响应总是需要时间，并且会“留恋”于它们之前的状态。本质上，本质上都是系统抵抗状态改变的能力\n例如：\n物理学：质量惯性 工程学：热惯性 热电偶与热电阻： 它们的测量端都有一定的质量和体积。当环境温度突然变化时，它们需要时间来加热或冷却到新的温度。这个时间就是它们的热惯性，通常用时间常数 ($\\tau$) 来衡量 电学：电感、电容，抵抗的结果是电流/电压的瞬时改变 生物学：初中学过的生态系统具有稳定性，实际上也是惯性。 一个成熟的生态系统对外部的干扰（如气候变化、物种入侵）具有很强的抵抗力。即使受到一定程度的破坏，它也能在一定程度上恢复，这种抵抗和恢复的能力就是生态惯性 文化与社会惯性：一种思想、制度或传统一旦确立，即使环境变化或证明其不合理，它也会继续存在很长时间。 所以说，惯性是系统的固有属性，正是这种惯性使世界从混沌走向有序，也是我们设计控制系统时必须考虑的核心因素。\n","date":"2025-11-23T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%83%AF%E6%80%A7%E7%9A%84%E6%80%9D%E8%80%83/","title":"关于惯性的思考"},{"content":"该篇继《NPD 自恋型人格障碍》\n其一，不要太陷入某一次吵架当中，等事后你会发现，这其实只是一场短暂的多空博弈而已。（1）不要情绪化交易，（2）格局要大一点。如果目光短浅，仅仅沉溺在这段吵架当中，只会消耗自己的意志和专注力，让自己焦虑。 情感曲线像加密货币市场，24h 开市，周六周天也不休息。如果是长期投资者，只要不双方不犯原则性问题，就不要太关注这些小争执，多将注意力转移到真正需要的地方。 交往了这么久，情感曲线经营了那么久，不会就因为这点鸡毛蒜片的小事结束了吧，我是不信的。\n其二，上面说的，格局要大一点，可是，如果缩小整条情感曲线（纵观所有的交往），都看不到曲线明显的上涨或下跌的趋势，一只处于横盘状态，那说明这段感情也是有问题的。或许是双方没有一个共同目标，或许双方眼光太过于狭隘\n","date":"2025-11-23T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%83%85%E6%84%9F%E6%9B%B2%E7%BA%BF/","title":"情感曲线"},{"content":"认知能力训练方法 ① 认知输入训练 每天至少 20～30 分钟 接触新知识，让大脑持续更新模型\n读一本专业书 / 通识书 看一篇深度文章 听专家讲解或课程 目标不是读多少，而是：看见新的观点，挑战旧的思维框架\n② 认知输出训练 把学到的内容用自己的话表达出来\n写一段总结（100~200 字即可） 讲给别人听（或模拟讲给别人听） 我学到了什么 哪句话最触动我 怎样能用到现实场景 原理：输出 = 深度理解 + 反思，是真正吸收的过程\n③ 自我提问法（提升思维深度） 遇到任何事情，不急着下结论，让自己养成 5 个问题反射\n1 2 3 4 5 为什么？ 有没有更好的解释？ 有没有证据？ 如果相反情况成立会怎样？ 真正的底层逻辑是什么？ 这 5 个问题，会强迫大脑走更深的路径，而不是停留在表面。\n④ 认知盲区训练 每周选一个完全不懂或不熟悉的领域主题，比如：\n心理学、经济学、哲学、神经科学、历史、金融 目标不是成为专家，而是：让大脑习惯在陌生领域生存，降低傲慢，提高开放度\n⑤ 假设检验训练（防止自以为是） 当你产生一个观点时，做一件事：找会反驳你的证据\n例子：\n“我觉得市场会涨” → 去找“为什么会跌”的理由 “某个人很糟糕” → 去找“他可能被误解”的理由 这叫二阶思考，能有效避免固化思维与认知偏见\n⑥ 复盘训练（提升判断力） 每天 5 分钟回顾今天的决策，问 3 个问题：\n1 2 3 今天最值得总结的 1 件事是什么？ 为什么会这样？ 如果重来，我会怎么做？ 复盘不是写流水账，是写 认知升级点\n⑦ 建立“一点点进步表” 每天只要求：\n1 个输入 1 个输出 1 个思考 每天 1mm，持续一年 = 巨大差异\n训练的核心思想 认知不是天赋，是肌肉 肌肉靠训练增长，不靠想象增长\n只要做到一件事，你一定会变强：持续训练，而不是偶尔努力\n建议执行模板 1 2 3 输入：看书10分钟 / 视频10分钟 输出：写总结100字 思考：3个关键问题 坚持 60 天，你会看到明显变化：\n思考更深 容易看清问题核心 不再被情绪带跑 更稳、更清晰、更独立 认知能力书单 《认知觉醒：开启自我改变的原动力》 — 周坤 著。内容涵盖“大脑起源、潜意识、元认知、专注力”等，对“提升认知”这个主题切入较好。 《清醒思考的艺术》 — 罗尔夫·多贝里 著（中文译本）。讨论常见思维谬误、怎么让思维更清晰。来自豆瓣书单推荐。 《认知心理学及其启示》 — 约翰·R·安德森 著（中文版）。这是偏“理论 + 科学”的入门读物，适合你当做 “认知能力提升” 的基础书。 《身份的焦虑》 — 艾伦·狄波顿 著。虽然不专讲“认知训练”，但从社会心理／自我认知角度，很能开阔视野。 《人类简史》 — 尤瓦尔·赫拉利 著。虽然是历史类书籍，但书中“认知革命”一章对理解人类思维、认知演化很有启发。 ","date":"2025-11-23T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%AE%A4%E7%9F%A5%E8%83%BD%E5%8A%9B%E8%AE%AD%E7%BB%83%E6%96%B9%E6%B3%95/","title":"认知能力训练方法"},{"content":"压力传感器类型 表压（Gauge Pressure, GP） 表压是相对于大气压的压力。大多数日常使用的压力传感器（如轮胎压力表）都是表压传感器\n例如：一个轮胎的内部压力测量值为 250 kPa（表压），表示该压力比大气压 101.3 kPa 高出 250 kPa 计算公式：$P_{\\text{表}} = P_{\\text{绝}} - P_{\\text{大气}}$ 绝压（Absolute Pressure, AP） 绝压是相对于绝对真空（0 Pa）的压力，常用于气象测量、航空和工业真空系统等领域\n例如：标准大气压 101.3 kPa 就是一个绝对压力值 计算公式：$P_{\\text{绝}} = P_{\\text{表}} + P_{\\text{大气}}$ 差压（Differential Pressure, DP） 差压是指两个不同位置之间的压力差，广泛用于流量计（如孔板流量计）、过滤器监测等\n例如：测量管道内流体的进出口压力差，以计算流量或监测堵塞情况 计算公式：$P_{\\text{差}} = P_1 - P_2$ 复合压（Compound Pressure, CP） 复合压可以测量正压和负压（真空），适用于既需要测量正压，又要测量真空的应用场景，如空调系统和气体泄漏检测等\n例如：空调系统可能会测量 -50 kPa（真空） 到 +300 kPa 之间的压力范围 小结 类型 参考压力 适用场景 表压 大气压 轮胎压力、液压系统 绝压 绝对真空 气象、航空、真空设备 差压 两点之间 流量计、过滤器监测 复合压 大气压（正压 + 负压） 空调、气体泄漏检测 某压力传感器技术特点：放大型SDX - SDX系列 - Product - 上海圣色传感技术有限公司_Sensepa_专业定制_压力传感器_压力变送器_倾角开关_角度传感器\n主要参数有\n供电电压 供电电流 压力量程 零点输出 满量程输出 输出源电流 精度 响应时间 过载压力 补偿温度 工作温度 储存温度 零点输出电压 以上举例的压力传感器中，零点输出是0.5V（或其他非零电压），并不一定是零点对应的 0V，这样做有什么好处呢：\n防止负压或负信号 在单电源供电系统（如 5V 或 10V）中，如果传感器的零点输出为 0V，那么负压可能无法正确检测，甚至可能被误认为是断开或故障 采用 0.5V 零点 可以让传感器支持一定范围的负压（如 -100 kPa ～ +100 kPa） 防止传感器零漂影响：传感器在长时间使用后，可能会发生零漂，如果零点设为 0V，一旦零漂出现，可能会导致负压误判或数据错误；设定 0.5V 零点 可以给零点漂移留有一定的容错空间，提高稳定性 避免信号处理中的非线性问题 许多传感器输出信号后，会经过运算放大器、ADC（模数转换器）等电路处理，而 0V 信号可能会遇到非线性误差，或者导致放大电路无法正常工作 适应标准信号输出 工业标准信号常见的输出范围： 0.5V ～ 4.5V（对应 0% ～ 100% 压力范围） 1V ～ 5V（适用于部分控制系统） 4mA ～ 20mA（常见于工业自动化传感器） 其中 0.5V ～ 4.5V 这种方式可以避免 0V（可能被误认为断线），同时提供较大的信号范围，方便后续信号处理 补偿温度 以上举例的压力传感器中，温度补偿范围为 0-85℃，那么补偿温度有什么意义：\n压力传感器通常由应变片、MEMS 芯片等敏感元件构成，温度变化会影响其电阻值、灵敏度、零点漂移等特性，导致误差。如果没有温度补偿，环境温度变化会导致传感器输出偏差 补偿温度范围（0～85℃） 说明在该范围内，传感器的测量误差已经过工厂校准和补偿，误差被控制在规格书允许的范围内；超出补偿温度范围（如低于 0℃ 或高于 85℃），传感器仍可工作，但误差可能增大，不再符合精度指标 常见的补偿方式有：\n温度传感器补偿：内置温度传感器，实时检测温度变化，进行数字或模拟补偿。 激光修正补偿：在生产时，工厂通过激光调整电阻或 EEPROM 校准参数，减少温度漂移 通过激光修正电阻，改变传感器的电桥平衡，使其零点漂移最小化 通过测试不同温度点的传感器误差，并计算补偿参数，写入 EEPROM，让传感器自动修正漂移 软件补偿：某些智能传感器可通过 MCU 计算修正温漂误差。 压力传感器按工作原理分类 应变片式（Strain Gauge）：利用惠斯通电桥测量压力引起的微小变形，广泛用于工业控制 压阻式（Piezoresistive）：常见于 MEMS 传感器，灵敏度高，但需要温度补偿 电容式（Capacitive）：用于测量小压力变化，如医疗设备 谐振式（Resonant）：通过频率变化检测压力，常用于高精度测量 光纤式（Optical Fiber）：适用于高温、高压、强电磁干扰环境 使用注意事项 选型注意 量程匹配：压力传感器的满量程应略大于工作压力的 1.5～2 倍，以防止过载损坏。 工作温度：确保传感器的补偿温度和工作温度符合环境要求。 防护等级（IP 级别） 安装与维护 传感器安装方向： 液体测量：传感器应安装在管道下方，避免气泡影响 气体测量：传感器应安装在管道上方，避免冷凝水影响 避免机械冲击与振动，必要时加减震装置 防止电磁干扰： 传感器信号线避免与强电电缆并行敷设 使用屏蔽电缆，并在单侧接地 (屏蔽层的一端接地，外部电磁干扰通过屏蔽层流入接地) 定期校准 一般压力传感器建议每 6 个月至 1 年校准一次 参考资料 NPI-19 Series Medium Pressure Sensors | NovaSensor NPI-19A-CZ101AH软排线芯体绝压15psi压力传感器Novasensor - 供应商网 AGR12 表压型压力传感器（模拟款）-压力传感器-温湿度传感器 温湿度芯片 温湿度变送器模块 气体传感器 流量传感器 广州奥松电子股份有限公司 放大型SDX - SDX系列 - Product - 上海圣色传感技术有限公司_Sensepa_专业定制_压力传感器_压力变送器_倾角开关_角度传感器 ","date":"2025-03-23T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8E%8B%E5%8A%9B%E4%BC%A0%E6%84%9F%E5%99%A8/","title":"压力传感器"},{"content":"Anki2Obsidian 例如在笔记当中：\n1 \u0026lt;a href=\u0026#34;obsidian://open?vault=SynZhPObsidan\u0026amp;amp;file=05-Work%2FRFID%E6%89%AB%E6%8F%8F%E7%B3%BB%E7%BB%9F\u0026#34;\u0026gt;Obsidian笔记\u0026lt;/a\u0026gt; 可以通过该超链接调整到 Obsidian 笔记\nAnki 中的特殊字段 1 2 3 4 5 6 7 8 The note\u0026#39;s tags: {{Tags}} The type of note: {{Type}} The card\u0026#39;s deck: {{Deck}} The card\u0026#39;s subdeck: {{Subdeck}} The card\u0026#39;s flag: {{CardFlag}} The type of card (\u0026#34;Forward\u0026#34;, etc): {{Card}} The content of the front template (only valid in back template): {{FrontSide}} 例如在模板中插入字段： 参考资料 6.1. 字段替换 | Anki 官方文档翻译\n","date":"2025-03-22T00:00:00Z","permalink":"https://teaize.github.io/p/about-anki/","title":"About Anki"},{"content":"截止阀 工作原理：通过阀瓣的上下移动来调节流体的流量，阀瓣与阀座之间的密封来关闭或开启流动通道 应用场合：适用于流量调节和关闭场合，常用于水、气、油等流体的管道中 区别：适合精确调节流量，不适合快速开启或关闭 止回阀 参考资料：douyin.com/video/7016633131096673566\n工作原理：依靠流体的流动方向来控制阀门的开启或关闭，防止流体反向流动 应用场合：用于防止回流的场合，如泵的出口 区别：只允许单向流动，不可用于调节流量 蝶阀 工作原理：通过蝶板在阀体内的旋转来调节或截断流体的流动，蝶板的角度决定流量大小。 应用场合：适用于气体和液体的流量控制，尤其在大口径管道中。 区别：结构简单，重量轻，适合大流量和低压场合。 闸阀 工作原理：通过阀瓣的上下移动来实现全开或全关状态，流体在阀体内几乎没有阻碍。 应用场合：主要用于管道的开启和关闭，适合于不需要流量调节的场合。 区别：流阻小，密封性好，但不适合频繁开关。 球阀 工作原理：通过一个带有通孔的球体旋转来控制流体的流动，球体的旋转可实现快速开启和关闭。 应用场合：广泛应用于水、油、气等流体的管道，适合频繁操作的场合。 区别：开启和关闭迅速，流阻小，适合高压和高温的应用。 小结 截止阀：适合流量调节。 止回阀：防止流体反向流动。 蝶阀：适合大流量、低压。 闸阀：全开或全关，流阻小。 球阀：快速开启和关闭，适合高压高温。 参考资料 https://www.douyin.com/video/7414094886435032320 douyin.com/video/7016633131096673566 管道常用五种阀门工作原理（截止阀止回阀蝶阀闸阀球阀）.mp4 ","date":"2025-03-22T00:00:00Z","permalink":"https://teaize.github.io/p/%E7%AE%A1%E9%81%93%E5%B8%B8%E7%94%A8%E4%BA%94%E7%A7%8D%E9%98%80%E9%97%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/","title":"管道常用五种阀门工作原理"},{"content":"参考资料 SolidWorks Web Help，阅读时注意语法支持的版本，目前只有英文手册 书籍：SOLIDWORKS二次开发与API教程 2020版 ","date":"2025-03-20T00:00:00Z","permalink":"https://teaize.github.io/p/sw-%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91/","title":"SW-二次开发"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 |总装图|XXX-00| |第一层零件图|XXX-01| |第一层装配图|XXX-02-00| |第二层零件图|XXX-02-01| |第二层装配体|XXX-02-02-00| |第三层零件图|XXX-02-02-01| |第三层装配体|XXX-02-02-02-00| |第四层零件图|XXX-02-02-02-01| |XXX-02-02-02-02| |XXX-02-02-02-03| |……| |第三层零件图|XXX-02-02-03| |……|……| |第二层零件图|XXX-02-03| |……|……| |第一层零件图|XXX-03| |第一层装配体|XXX-04-00| |……|……| 参考资料：【基础知识】公司内部机械设计及制图规范参考（适合solidworks所有机械行业）_装配_零部件_草图\n","date":"2025-03-17T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%B7%A5%E7%A8%8B%E5%9B%BE%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/","title":"工程图命名规则"},{"content":"在线图像生成：硅基流动统一登录\n1 a coastal scene I really enjoy is one where the ocean stretches endlessly to the horizon under a sky painted with the soft colors of twilight. The waves crash gently against the shore, creating a rhythmic sound that blends with the salty breeze. The sand feels warm beneath your feet, still holding the heat from the day, but it’s cool at the water\u0026#39;s edge where the surf meets the land. In the distance, seagulls wheel and dive, their calls mingling with the sound of the waves. As the sun sets, the sky turns into a canvas of purples, oranges, and pinks, reflecting off the surface of the water, giving the whole scene a serene, almost otherworldly glow. The cool night air starts to roll in, but there\u0026#39;s still a peaceful warmth in the fading light. The feeling of infinity is overwhelming, as if the ocean and sky could go on forever, and the world feels both vast and intimately close at the same time. 1 The air is crisp, filled with the scent of pine and damp earth. As the sun begins to rise, its soft, golden light filters through the trees, casting long shadows and illuminating the mist that clings to the forest floor. The sound of rustling leaves and distant bird calls is the only noise, creating a peaceful, almost sacred atmosphere. The trees, tall and ancient, stand like silent guardians, their trunks covered in moss, while small streams trickle nearby, adding a gentle, soothing melody to the scene. There\u0026#39;s a sense of timelessness, as if the world is holding its breath, waiting for the day to begin. ","date":"2025-03-12T00:00:00Z","permalink":"https://teaize.github.io/p/ai%E5%9B%BE%E5%83%8F%E7%94%9F%E6%88%90/","title":"AI图像生成"},{"content":"《非暴力沟通》是美国心理学家马歇尔·卢森堡（Marshall B. Rosenberg）提出的一种沟通方式，强调同理心、尊重与理解。书中核心思想可归纳如下：\n观察与评判分开 人们常常把主观评价混入观察之中，但非暴力沟通要求我们只描述事实，不带主观判断。例如，不说“你总是迟到”，而是说“你今天迟到了 10 分钟”。 表达感受，而非指责 许多人在表达不满时习惯指责他人，例如“你让我很生气”，但更好的表达方式是“我感到生气，因为……”。这样可以让对方更容易理解你的情绪，而不会本能地防御或反击。 聚焦需求，而非具体行为 感受源于需求的满足或未满足，而非他人的行为。例如，生气可能是因为“我需要被尊重”，而不是“对方不听我的话”。明确自己的需求有助于更有效地表达，而不是陷入争执。 提出具体可行的请求，而非模糊的要求 许多沟通问题源于含糊不清的表达。例如，与其说“希望你尊重我”，不如说“希望你说话时语气温和一些”。清晰的请求更有可能被理解和接受。 核心理念是：带着同理心去倾听，用清晰、尊重、无攻击性的方式表达自己。这种沟通方式有助于减少误解和冲突，让人与人之间的关系更加和谐。\n“聚焦需求，而非具体行为” 是非暴力沟通（NVC）的核心原则之一，它强调我们在沟通时应当关注自己的需求，而不是仅仅指责对方的行为。这样可以让沟通更具建设性，避免冲突升级，同时让对方更容易理解和接受你的诉求。\n1 2 3 4 5 6 错误示范：关注具体行为 ❌ “你总是不听我说话，你根本不在乎我！” - 这句话的焦点是指责对方的行为（“不听我说话”），并带有假设（“你不在乎我”）。 - 可能引发对方的防御：“我有听啊！你误会了！” - 容易导致争吵，而不是理解和改善关系。 1 2 3 4 5 正确示范：聚焦需求 ✅ “当我和你说话时，我希望被关注和倾听，因为这让我感到被尊重和理解。” - 这句话表达了“希望被关注和倾听”的需求，而不是指责对方“总是不听”。 - 对方更容易接受，也更容易找到方法来满足你的需求，比如他可以调整注意力、眼神接触或做出回应。 非暴力沟通提供了一个简单的四步模型，可以帮助我们把重点放在需求上：\n观察（不带评价地描述事实） 感受（表达自己的情绪） 需求（明确自己内心的真正需求） 请求（提出具体可行的行动方案） 例如：“当我看到你看手机而没有回应我的问题时（观察），我感到有些失落（感受），因为我需要被关注和理解（需求）。你可以在我说话时放下手机，和我有更多眼神交流吗？（请求）”\n这样表达比直接指责“你总是玩手机”更容易让对方接受，并愿意做出改变。\n","date":"2025-03-12T00:00:00Z","permalink":"https://teaize.github.io/p/%E9%9D%9E%E6%9A%B4%E5%8A%9B%E6%B2%9F%E9%80%9A/","title":"非暴力沟通"},{"content":" 知识的价值在于应用，而非积累 仅仅收集和记忆知识并不会带来真正的成长，关键在于如何把知识转化为能力和行动 学习的目标应该是解决问题，而不是追求知识的“占有感” 高效学习需要建立知识体系 知识是网络化的，零散的信息难以形成深层理解 通过构建知识地图、框架思维和主题学习，可以让知识之间建立联系，形成稳固的知识体系 费曼学习法 + 刻意练习，提高知识吸收率 费曼学习法（用简单语言解释概念）能帮助加深理解，防止“伪学习” 结合刻意练习（针对薄弱环节进行强化），能够更有效地掌握新知识 外部工具 + 内部认知，提高学习效率 外部工具（如笔记、思维导图、卡片盒等）能帮助整理和回顾知识 内部认知（如批判性思维、元认知）决定了我们如何筛选、组织和运用知识 两者结合，才能真正提升学习效果 知识管理的核心是输入 - 存储 - 输出的循环 输入：主动选择高质量信息，避免信息过载 存储：建立有效的笔记系统，把知识结构化 输出：通过写作、分享、实践等方式强化记忆，实现知识的内化 生活每天都在生产未经加工的经验素材。我们的判断来源于经验，而有效的经验来源于对判断的反思。反思，让我们把生活的素材重新解读，成为洞见。\n","date":"2025-03-12T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E7%B2%BE%E8%BF%9B%E6%8C%87%E5%8D%97/","title":"个人知识管理精进指南"},{"content":"程序代码 1 2 3 4 5 6 7 8 9 10 11 12 13 import network ssid = \u0026#34;你的WiFi名称\u0026#34; password = \u0026#34;你的WiFi密码\u0026#34; wlan = network.WLAN(network.STA_IF) # STA 模式 wlan.active(True) # 启用 WiFi wlan.connect(ssid, password) # 连接 WiFi while not wlan.isconnected(): # 等待连接 pass print(\u0026#34;连接成功，IP 地址：\u0026#34;, wlan.ifconfig()[0]) # 输出 IP 地址 1 2 3 4 5 6 7 8 9 10 11 12 13 import network ssid = \u0026#34;coffeelize\u0026#34; password = \u0026#34;18195786901\u0026#34; wlan = network.WLAN(network.STA_IF) # STA 模式 wlan.active(True) # 启用 WiFi wlan.connect(ssid, password) # 连接 WiFi while not wlan.isconnected(): # 等待连接 pass print(\u0026#34;连接成功，IP 地址：\u0026#34;, wlan.ifconfig()[0]) # 输出 IP 地址 程序返回\n1 连接成功，IP 地址： 192.168.31.35 ","date":"2025-03-10T00:00:00Z","permalink":"https://teaize.github.io/p/esp32-%E8%BF%9E%E6%8E%A5wifi%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97/","title":"ESP32-连接Wifi代码模块"},{"content":"SSD1306 是一款常见的 OLED（有机发光二极管）显示驱动芯片，常用于小型单色 OLED 显示屏，分辨率一般为 128×64 或 128×32。这里展示的是 I2C（两线：SCL、SDA）的通信方式\n硬件接线 |SSD1306|ESP32（默认 I2C）| |:\u0026mdash;:\u0026mdash;|:\u0026mdash;:\u0026mdash;| |VCC|3.3V 或 5V| |GND|GND| |SCL|GPIO22（SCL）| |SDA|GPIO21（SDA）|\n查找 I2C 设备 1 2 3 4 5 6 7 8 9 from machine import Pin, I2C i2c = I2C(0, scl=Pin(22), sda=Pin(21)) devices = i2c.scan() # 扫描 I2C 设备 if devices: print(\u0026#34;I2C 设备地址:\u0026#34;, [hex(dev) for dev in devices]) else: print(\u0026#34;未找到 I2C 设备，请检查接线！\u0026#34;) 程序返回：\n1 I2C 设备地址: [\u0026#39;0x3c\u0026#39;] 程序 显示文字 注意：需下载并上传 ssd1306.py 到 ESP32\n1 2 3 4 5 6 7 8 9 10 from machine import Pin, SoftI2C import ssd1306 # 初始化 I2C i2c = SoftI2C(scl=Pin(22), sda=Pin(21), freq=100000) oled = ssd1306.SSD1306_I2C(128, 64, i2c) # 显示文本 oled.text(\u0026#34;Coffeelize, Go home!\u0026#34;, 20, 30) oled.show() 如果要显示大字体，可以下载 symbol.py 并上传到 ESP32\nsymbol.py 是一个自定义库，用于在 SSD1306 OLED 屏幕上 显示大字体（16x16 或更大）。因为在 MicroPython 的 ssd1306 官方驱动中，text() 方法只能显示 默认 8x8 像素的 ASCII 字符，字体有些小\n1 2 3 4 5 6 7 8 9 10 11 12 from machine import Pin, SoftI2C import ssd1306 import symbol # 初始化 I2C i2c = SoftI2C(scl=Pin(22), sda=Pin(21), freq=100000) oled = ssd1306.SSD1306_I2C(128, 64, i2c) dsp = symbol.Symbol(oled) # 仍然保留 symbol # 显示文本 oled.text(\u0026#34;Meow, Go home!\u0026#34;, 20, 30) oled.show() 迷你像素画/动画 例如在屏幕中绘制一个移动端点\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import ssd1306 from machine import Pin, SoftI2C import time i2c = SoftI2C(scl=Pin(22), sda=Pin(21)) oled = ssd1306.SSD1306_I2C(128, 64, i2c) x, y = 0, 30 dx = 1 # 方向 while True: oled.fill(0) # 清屏 oled.pixel(x, y, 1) # 画一个点 oled.show() x += dx if x \u0026gt;= 128 or x \u0026lt;= 0: dx = -dx # 反向移动 time.sleep(0.05) 电子时钟 可以结合 ESP32 内部 RTC 来做一个 电子时钟 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import network import ssd1306 import time from machine import Pin, SoftI2C i2c = SoftI2C(scl=Pin(22), sda=Pin(21)) oled = ssd1306.SSD1306_I2C(128, 64, i2c) while True: t = time.localtime() now = f\u0026#34;{t[3]:02d}:{t[4]:02d}:{t[5]:02d}\u0026#34; # 格式化小时:分钟:秒 oled.fill(0) # 清屏 oled.text(\u0026#34;Current Time:\u0026#34;, 10, 20) oled.text(now, 35, 40) oled.show() time.sleep(1) GUI 参考资料：GitHub - peterhinch/micropython-nano-gui: A lightweight MicroPython GUI library for display drivers based on framebuf class\n","date":"2025-03-10T00:00:00Z","permalink":"https://teaize.github.io/p/ssd1306-oled%E6%98%BE%E7%A4%BA%E5%B1%8F/","title":"SSD1306-OLED显示屏"},{"content":"一、传感器基础 传感器（Sensor） 将物理量（如温度、压力、光强）转换为电信号的装置。 示例：热电偶（温度→电压）、光敏电阻（光强→电阻值）。\n灵敏度（Sensitivity） 输出信号变化量与输入物理量变化的比值。 公式：S = ΔV/ΔP（如 10mV/°C）。\n分辨率（Resolution） 传感器可检测的最小输入变化量，决定测量精度。\n二、信号类型 模拟信号（Analog Signal） 连续变化的电信号（如电压、电流），需通过 ADC 转换为数字信号。\n数字信号（Digital Signal） 离散的二进制信号（如 0/1、I2C、SPI 协议），抗干扰能力强。\n三、核心电路元件 运算放大器（Op-Amp） 用于信号放大、滤波、阻抗匹配。 典型电路：差分放大（抑制共模噪声）。\n模数转换器（ADC, Analog-to-Digital Converter） 将模拟信号转换为数字信号，关键参数：分辨率（如 12 位）、采样率（如 1kHz）。\n参考电压（Reference Voltage, Vref） 为 ADC 或比较器提供稳定基准电压，影响测量精度。\n四、噪声与抗干扰 信噪比（SNR, Signal-to-Noise Ratio） 有用信号与噪声的功率比值，单位 dB（越高越好）。\n低通滤波（LPF, Low-Pass Filter） 允许低频信号通过，抑制高频噪声。 实现方式：RC 电路、运放有源滤波。\n电磁兼容（EMC, Electromagnetic Compatibility） 电路在电磁环境中抗干扰且不干扰其他设备的能力。\n五、接口与通信 I2C（Inter-Integrated Circuit） 双线制串行总线（SCL 时钟线、SDA 数据线），支持多设备通信。\nSPI（Serial Peripheral Interface） 四线制高速同步接口（SCK、MOSI、MISO、CS），全双工通信。\n六、性能参数 线性度（Linearity） 传感器输出与输入物理量之间的直线关系偏差（常用%FS 表示）。\n响应时间（Response Time） 传感器输出达到稳定值 90% 所需时间（如温度传感器需 5 秒）。\n迟滞（Hysteresis） 输入量增大和减小时输出差异，反映传感器的回程误差。\n七、电源管理 供电电压（Vcc/Vdd） 传感器工作电压范围（如 3.3V 或 5V±10%）。\n功耗（Power Consumption） 静态电流（待机时）与动态电流（工作时）的消耗，影响电池寿命。\n八、校准与补偿 零点漂移（Zero Drift） 无输入时输出信号的缓慢偏移，需定期校准。\n温度补偿（Temperature Compensation） 通过电路或算法消除温度对传感器输出的影响（如热敏电阻网络）。\n九、传感器类型扩展 MEMS 传感器（Micro-Electro-Mechanical Systems） 微机电系统传感器，集成机械结构与电子电路（如加速度计、陀螺仪）。 关键特点：微型化、低功耗、批量生产成本低。\n压电传感器（Piezoelectric Sensor） 利用压电效应将机械应力转换为电荷（如压力传感器、超声波探头）。 需配合电荷放大器处理微弱信号。\n霍尔传感器（Hall Effect Sensor） 检测磁场变化并输出电压（如电机转速检测、位置开关）。 典型输出：模拟线性信号或数字开关信号。\n应变片（Strain Gauge） 电阻值随形变变化的传感器，用于测量应力或重量（需惠斯通电桥电路放大信号）。\n十、信号处理进阶 跨阻放大器（Transimpedance Amplifier） 将电流信号转换为电压信号，用于光电二极管等电流型传感器。 公式：Vout = I_in × R_feedback（如 I/V 转换）。\n锁相放大器（Lock-In Amplifier） 通过参考信号同步检测微弱信号，抑制噪声（如光学传感中的低频信号提取）。\nPWM（Pulse Width Modulation） 通过调节脉冲宽度传递模拟信息（如温度控制中的占空比调节）。 优势：数字信号抗干扰，可直接驱动执行器。\n十一、误差与补偿技术 非线性补偿（Nonlinearity Compensation） 通过多项式拟合或查表法修正传感器非线性误差（如热敏电阻的温度 - 电阻曲线）。\n共模抑制比（CMRR, Common-Mode Rejection Ratio） 差分放大器抑制共模干扰的能力（单位 dB，越高越好）。 公式：CMRR = 20log10(Ad/Ac)，Ad 为差模增益，Ac 为共模增益。\n自校准（Self-Calibration） 传感器内置校准电路（如自动零点校正），减少人工干预。\n十二、接口协议扩展 RS-485 工业级差分串行通信协议，支持长距离（1200 米）和多设备组网（如工业传感器网络）。\nCAN 总线（Controller Area Network） 汽车电子常用抗干扰总线，支持优先级仲裁（如车载传感器数据整合）。\n4-20mA 电流环（Current Loop） 工业传感器标准输出，抗噪声能力强，可长距离传输（0mA 表示故障，提高可靠性）。\n十三、电源与保护电路 LDO（Low Dropout Regulator） 低压差线性稳压器，为传感器提供稳定电压（如 3.3V，压差低至 0.2V）。 对比：开关电源效率高但噪声大。\nTVS 二极管（Transient Voltage Suppressor） 瞬态电压抑制器，保护传感器端口免受静电（ESD）或浪涌损坏。\n电源去耦（Power Decoupling） 通过并联电容（如 0.1μF 陶瓷电容 +10μF 电解电容）滤除高频噪声。\n十四、环境因素与可靠性 IP 防护等级（Ingress Protection） 传感器外壳防尘防水等级（如 IP67：完全防尘，可短时浸水）。\nMTBF（Mean Time Between Failures） 平均无故障时间，衡量传感器寿命（工业级传感器可达 10 万小时）。\n热噪声（Johnson-Nyquist Noise） 电阻器件因温度产生的随机噪声（公式：V_rms = √(4kTRB)，k 为玻尔兹曼常数）。\n十五、新兴技术 无线传感器网络（WSN, Wireless Sensor Network） 基于 ZigBee、LoRa 或 NB-IoT 的无线传输方案（如物联网环境监测系统）。\nAI 边缘处理（Edge AI） 在传感器端集成 AI 芯片，实现本地数据处理（如振动传感器的故障预测）。\n柔性传感器（Flexible Sensor） 使用聚合物或纳米材料制成，可弯曲贴合表面（如可穿戴健康监测设备）。\n十六、实用设计技巧 接地策略： 模拟地与数字地单点连接，避免地环路噪声。 敏感信号采用屏蔽线（如热电偶信号线）。 PCB 布局： 传感器信号走线远离高频或大电流路径。 使用铺铜降低阻抗，避免天线效应。 故障诊断： 示波器观察信号波形（如检查 ADC 采样是否混叠）。 万用表测量参考电压是否漂移（排查零点误差）。 ","date":"2025-03-10T00:00:00Z","permalink":"https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E7%94%B5%E8%B7%AF/","title":"传感器电路"},{"content":"DHT11 模块介绍 DHT11 模块：一款结合了温湿度检测以及信号处理 IC 的传感器模块，通信方式采用单总线串行通信\n信号类型：数字信号 精度：温度精度 ±2°C，湿度 ±5% 取样周期：2S 工作电压：3-5.5V 工作电流：2.5mA（测量时），150μA（待机） 温度范围：0-50℃ 湿度范围：20-90% 电路复杂度：直接连接，无需额外电路 代码复杂度：直接调用库函数读取温度 接线 DHT11 模块已集成上拉电阻，无需额外添加（如果 DHT11 模块无内置上拉电阻，需在 DATA 引脚和 5V 之间外接一个 4.7kΩ 电阻）\n程序 MicroPython 内置的 DHT11 程序库（dht），通过 dht 程序库获取温湿度数据，需要如下四个步骤\n导入 dht 库 创建 DHT11 对象 执行 measure 方法 注意读取频率：DHT11 的采样间隔需 ≥1 秒，建议设为 2 秒，否则可能读取失败 通过两个方法分别获取温度和湿度 1 2 3 4 5 6 7 8 9 10 11 12 13 from machine import Pin, Timer import dht from time import sleep_ms d = dht.DHT11(Pin(4)) # 创建一个 DHT11 实例，连接到 GPIO 4 while True: d.measure() # 触发测量 temp = d.temperature() # 获取温度值 hum = d.humidity() # 获取湿度值 print(\u0026#34;temperature:\u0026#34;+str(temp)+\u0026#34;℃\u0026#34;) print(\u0026#34;humidity:\u0026#34;+str(hum)+\u0026#34;%\u0026#34;) sleep_ms(2000) # 每 2 秒测量一次 返回结果\n1 2 3 4 5 temperature:22℃ humidity:66% temperature:22℃ humidity:68% ...... DHT11 的局限性 精度较低：温度误差 ±2°C，湿度 ±5%，适用于一般场景（如室内环境监测），不适用于高精度实验。 响应速度慢：每次读取需等待 1~2 秒，不适合高速采样场景。 单总线协议：同一引脚只能连接一个 DHT11，无法并联多个传感器。 通讯方式 DHT11 通过单总线（1-Wire）协议与外部设备（如 Arduino、ESP32）通信：\n主机（Arduino）发送启动信号：拉低总线至少 18ms，然后释放。 DHT11 响应：拉低总线 80μs，再拉高 80μs，表示准备发送数据。 数据传输：DHT11 发送 40 位数据（16 位湿度 + 16 位温度 + 8 位校验和），每位通过高低电平的持续时间表示 0 或 1。 1 2 3 湿度整数部分 | 湿度小数部分 | 温度整数部分 | 温度小数部分 | 校验和 0001 1001 | 0000 0000 | 0001 1000 | 0000 0000 | 0011 0001 （25% RH） | （0% RH） | （24°C） | （0°C） | 校验和=49 拓展 为什么 DHT11 模块直接返回数字信号 DHT11 内部集成了一个专用集成电路（ASIC），负责以下任务：\n模拟信号采集： 读取热敏电阻的电阻值（温度） 读取电容式元件的电容值（湿度） 模拟信号调理： 对原始信号进行放大、滤波，消除噪声 模数转换（ADC） 将调理后的模拟信号转换为数字信号（例如，温度值用 8 位二进制表示，湿度值用 8 位二进制表示） 校准与补偿 根据预存的校准参数（如非线性补偿、温度漂移补偿）修正数字信号 数字编码： 将温度和湿度数据打包成固定格式的二进制数据 能否查看或自定义修改 ASIC 的底层代码 不能，原因如下：\n硬件固化设计：ASIC 的逻辑功能是通过物理电路实现的（如晶体管布局），而非运行在通用处理器上的软件代码。它的“逻辑”被固化在硅片中，无法通过软件更新或调试接口修改。 封闭式协议与知识产权：DHT11 的通信协议和数据格式是厂商定义的，其内部校准参数、ADC 算法等属于商业机密，未开放给用户访问。 缺乏调试接口：DHT11 没有提供 JTAG、SWD 等硬件调试接口，无法通过常规手段读取内部逻辑。 通过上位机读取 DHT11 模块数据 需要考虑的问题：\n通信方式选择：ESP32 和笔记本电脑之间可以通过哪些方式通信？常见的有串口、Wi-Fi、蓝牙等。用户需要选择一种适合他们应用场景的方式。 数据传输协议：确定使用哪种协议来发送数据。比如，通过串口发送简单的文本格式，或者使用 HTTP、MQTT 等更复杂的协议。 上位机程序开发：用户需要在笔记本电脑上编写程序来接收和显示数据。这可能涉及到 Python、Java、C#或其他语言，取决于用户的熟悉程度和需求。 代码实现细节：如何在 ESP32 上编写代码，将传感器数据发送到上位机？需要确保数据格式正确，传输稳定。 错误处理和稳定性：考虑通信过程中可能出现的错误，如连接中断、数据丢失等，如何进行处理以保证系统的稳定性。 用户友好性：上位机程序是否易于使用，是否需要图形界面，还是简单的命令行输出即可。 实现步骤大致如下：\n配置 ESP32 连接 Wi-Fi。 在 ESP32 上创建 TCP 服务器或 HTTP 服务器。 读取传感器数据并发送到连接的客户端。 在上位机编写程序连接 ESP32，接收并显示数据 使用 WiFi（Socket）通信 ESP32 若连接了 WiFi，可以在 ESP32 上开启一个 Socket 服务器，让上位机通过 TCP 访问它\n1、ESP32 代码（作为服务器）；可将代码运行在一个 Thonny 实例上\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 import network import socket from machine import Pin import dht import time SSID = \u0026#34;coffeelize\u0026#34; #你的WiFi名称 PASSWORD = \u0026#34;xxxxxxxx\u0026#34; #你的WiFi密码 # 连接WiFi wifi = network.WLAN(network.STA_IF) wifi.active(True) wifi.connect(SSID, PASSWORD) while not wifi.isconnected(): pass # 等待WiFi连接 # 打印IP地址 print(\u0026#34;Connected, IP:\u0026#34;, wifi.ifconfig()[0]) # 初始化DHT11 d = dht.DHT11(Pin(4)) # 创建TCP服务器 s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) s.bind((\u0026#39;\u0026#39;, 8080)) # 监听端口8080 s.listen(1) print(\u0026#34;等待客户端连接...\u0026#34;) conn, addr = s.accept() print(\u0026#34;客户端连接:\u0026#34;, addr) while True: d.measure() temp = d.temperature() hum = d.humidity() data = f\u0026#34;{temp},{hum}\\n\u0026#34; conn.send(data.encode()) # 发送数据 time.sleep(2) 1 2 Connected, IP: 192.168.31.35 等待客户端连接... 2、在 Windows 上运行另一个 Thonny 实例\n1 2 3 4 5 6 7 8 9 10 11 12 13 import socket ESP32_IP = \u0026#34;192.168.31.35\u0026#34; # ESP32 IP PORT = 8080 s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) s.connect((ESP32_IP, PORT)) while True: data = s.recv(1024).decode().strip() if data: temp, hum = data.split(\u0026#39;,\u0026#39;) print(f\u0026#34;温度: {temp}℃, 湿度: {hum}%\u0026#34;) 3、两边都运行起来后： 不同方式的比较 方法 适用场景 传输方式 优点 缺点 串口通信（UART） 直接连接笔记本 USB 串口 简单，适合调试 需 USB 线，距离受限 WiFi Socket 同一局域网内 TCP/IP 可无线读取，速度快 需 WiFi 网络 MQTT 远程监控 MQTT 协议 适合云端，支持多个设备 需 MQTT 服务器 拓展 2 如何理解 Wifi Socket 可以把 Socket 理解成两台设备（比如 ESP32 和笔记本）之间的“电话线”。这条“电话线”允许两台设备 通过 WiFi 进行数据传输，就像两个人在打电话一样，一个人说，另一个人听。\n服务器（ESP32）：负责监听和等待连接，它是数据的“提供者” 客户端（笔记本）：主动连接服务器，它是数据的“使用者” 服务器 不会主动给客户端发消息，它只是等着客户端来“点单”，然后才会提供数据 需求 服务器（ESP32） 客户端（笔记本） 网络要求 连接同一 WiFi，获取 IP 连接同一 WiFi，知道 ESP32 的 IP 通信端口 监听特定端口（如 8080） 连接到 ESP32 的 IP 和端口 数据格式 按一定格式发送数据 按格式解析数据 可能问题 WiFi 连接失败、IP 变动、端口被占用 连接不上 ESP32、数据丢失 解决方案 确保 WiFi 稳定、检查 IP、换端口 确保同一 WiFi、确认 IP、用 ping 测试 拓展 3 图表动态展示数据 客户端通过图像形式动态展示数据，这里切换成 Pycharm 作为 IDE 了，因为涉及到 matplotlib 模块\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 import socket import matplotlib.pyplot as plt import matplotlib.animation as animation from collections import deque # ESP32的IP和端口 ESP32_IP = \u0026#34;192.168.31.35\u0026#34; # 替换为 ESP32 IP 地址 PORT = 8080 # 端口号 # 创建Socket连接 s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) s.connect((ESP32_IP, PORT)) # 连接ESP32 # 维护最近 30 个数据点（最多 1 分钟） MAX_POINTS = 30 times = deque(maxlen=MAX_POINTS) # 时间数据 temps = deque(maxlen=MAX_POINTS) # 温度数据 hums = deque(maxlen=MAX_POINTS) # 湿度数据 # 创建图形窗口 fig, ax = plt.subplots(2, 1, figsize=(10, 8)) # 温度曲线 ax[0].set_title(\u0026#39;Temperature (°C)\u0026#39;) ax[0].set_xlabel(\u0026#39;Time (s)\u0026#39;) ax[0].set_ylabel(\u0026#39;Temperature (°C)\u0026#39;) ax[0].grid(True) # 添加网格 line_temp, = ax[0].plot([], [], label=\u0026#39;Temperature\u0026#39;, color=\u0026#39;r\u0026#39;) # 湿度曲线 ax[1].set_title(\u0026#39;Humidity (%)\u0026#39;) ax[1].set_xlabel(\u0026#39;Time (s)\u0026#39;) ax[1].set_ylabel(\u0026#39;Humidity (%)\u0026#39;) ax[1].grid(True) # 添加网格 line_hum, = ax[1].plot([], [], label=\u0026#39;Humidity\u0026#39;, color=\u0026#39;b\u0026#39;) # 设定初始 X 轴范围 ax[0].set_xlim(0, 60) ax[1].set_xlim(0, 60) # **更新数据并绘制** def update_data(frame): try: # 从ESP32接收数据 data = s.recv(1024).decode().strip() if data: # 解析温度和湿度 temp, hum = data.split(\u0026#39;,\u0026#39;) temp = float(temp) hum = float(hum) # 计算当前时间戳（假设每次更新间隔 2s） if times: new_time = times[-1] + 2 # 继续增加 2s 时间 else: new_time = 0 # 第一帧从 0 开始 # 更新数据 times.append(new_time) temps.append(temp) hums.append(hum) # 更新曲线数据 line_temp.set_data(times, temps) line_hum.set_data(times, hums) # **更新 X 轴范围（防止 `min == max` 报错）** if len(times) \u0026gt; 1: ax[0].set_xlim(min(times), max(times)) ax[1].set_xlim(min(times), max(times)) else: ax[0].set_xlim(new_time, new_time + 1) ax[1].set_xlim(new_time, new_time + 1) # **动态更新 Y 轴范围** if temps: ymin_t, ymax_t = min(temps), max(temps) ax[0].set_ylim(ymin_t - 2, ymax_t + 2) # 温度 Y 轴增加 2°C 缓冲区 if hums: ymin_h, ymax_h = min(hums), max(hums) ax[1].set_ylim(ymin_h - 5, ymax_h + 5) # 湿度 Y 轴增加 5% 缓冲区 return line_temp, line_hum except Exception as e: print(f\u0026#34;Error: {e}\u0026#34;) return line_temp, line_hum # 动画更新，避免缓存问题 ani = animation.FuncAnimation(fig, update_data, interval=2000, cache_frame_data=False) # 显示图表 plt.tight_layout() plt.show() 自动调整 Y 轴范围 温度 Y 轴范围：min(temps) - 2 到 max(temps) + 2 湿度 Y 轴范围：min(hums) - 5 到 max(hums) + 5 添加网格线 grid(True)，让纵坐标数据更清晰。 X 轴范围固定为最近 60 秒 times 只存储最近 30 个数据点（每 2s 采样一次，60s = 30 点） 进一步优化程序 提高性能，减少不必要的 set_xlim/set_ylim 计算 set_xlim() 和 set_ylim() 只有在数据更新时才调用，而不是每帧都执行。 让温湿度数据绘制更平滑 可以使用 Line2D.set_xdata() 和 Line2D.set_ydata() 来更新数据，而不是 set_data()，减少不必要的计算 让 X 轴时间显示更加友好 用 datetime.now() 记录真实时间，而不是 times[-1] + 2 这样模拟的时间，避免时间误差累积 增加异常处理，避免程序崩溃 如果 ESP32 断开连接，程序不会直接崩溃，而是尝试重连。 在 recv() 读取数据时，添加 try-except 捕获 socket.error 以防止网络问题导致程序崩溃。 ","date":"2025-03-09T00:00:00Z","permalink":"https://teaize.github.io/p/esp32-dht11%E6%B8%A9%E6%B9%BF%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8/","title":"ESP32-DHT11温湿度传感器"},{"content":"参考资料 MicroPython: I2C LCD Display with ESP32/ESP8266 | Random Nerd Tutorials Keywords：ESP32 LCD1602 micropython 基本介绍 LCD1602 是一款 16 列 × 2 行 的字符型液晶显示屏，常用于单片机、Arduino、树莓派等开发板的文本显示。它可以显示 英文、数字、符号，但不能直接显示图像。\n接口类型 LCD1602 有两种主要的通信方式【这里用的是 I²C 接口】：\n并行接口（4 位或 8 位模式，标准 HD44780 控制器） 需要 多个 GPIO 口 进行连接，数据传输速度快，但占用的引脚较多。 I²C 接口（常见的是带 PCF8574 I2C 模块） 仅需 SDA（数据） 和 SCL（时钟）两个引脚，大大减少了 IO 口的占用，使用更方便。 如果是 并口版本，一般有以下 16 个引脚：\n引脚 说明 备注 VSS 电源地 接 GND VDD 电源正 一般接 5V（部分可 3.3V） V0 对比度调节 需接 电位器 调节 RS 寄存器选择 0=指令，1=数据 RW 读/写选择 0=写入，1=读取（一般接 GND 使能写入） E 使能信号 高电平触发 D0-D7 数据线 4 位模式用 D4-D7，8 位模式用 D0-D7 A 背光电源正 接 5V K 背光电源地 接 GND 如果是 I²C 版本（带 PCF8574 扩展板），只保留 4 个引脚：\nVCC：接 5V，部分可接 3.3V GND：接地 SDA：数据线 SCL：时钟线 这里使用的是带 I2C 驱动器的 LCD；驱动器上配置了一个电位器，可用于调整 LCD 上背景和字符之间的对比度【在没有 I2C 支持的“普通”LCD 上，需要在电路中添加电位器来调整对比度】 LCD1602 连接和使用 1、硬件连接\n1 2 3 4 5 6 LCD1602 (I2C) → Arduino / ESP32 --------------------------------- VCC → 5V（或 3.3V） GND → GND SDA → A4（ESP32: GPIO21） SCL → A5（ESP32: GPIO22） 这里需要注意，需要支持 I2C，需要选择支持 I2C 的引脚， GPIO 引脚不起作用的\n2、查找连接的 I2C 设备\n1 2 3 4 5 6 7 8 9 10 11 12 from machine import Pin, I2C import time # 设置I2C引脚 i2c = I2C(0, scl=Pin(22), sda=Pin(21)) # 根据你的硬件连接调整SCL和SDA引脚 # 扫描I2C设备 devices = i2c.scan() if devices: print(\u0026#34;I2C devices found:\u0026#34;, devices) else: print(\u0026#34;No I2C devices found\u0026#34;) 返回结果\n1 I2C devices found: [39] 所以地址就是 39，而不是 0x39\n3、下载并上传 lcd_api.py\n参考教程：MicroPython: I2C LCD Display with ESP32/ESP8266 | Random Nerd Tutorials 下载地址：lcd_api.py\nThonny 打开下载的 py 文件，然后另存到 ESP32 上去 4、下载并上传 machine_i2c_lcd.py\n下载地址：machine_i2c_lcd.py\n5、显示静态文字\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 # Rui Santos \u0026amp; Sara Santos - Random Nerd Tutorials # Complete project details at https://RandomNerdTutorials.com/micropython-i2c-lcd-esp32-esp8266/ from machine import Pin, SoftI2C from machine_i2c_lcd import I2cLcd from time import sleep # Define the LCD I2C address and dimensions I2C_ADDR = 39 I2C_NUM_ROWS = 2 I2C_NUM_COLS = 16 # Initialize I2C and LCD objects i2c = SoftI2C(sda=Pin(21), scl=Pin(22), freq=400000) # for ESP8266, uncomment the following line #i2c = SoftI2C(sda=Pin(4), scl=Pin(5), freq=400000) lcd = I2cLcd(i2c, I2C_ADDR, I2C_NUM_ROWS, I2C_NUM_COLS) lcd.putstr(\u0026#34;It\u0026#39;s working :)\u0026#34;) sleep(4) try: while True: # Clear the LCD lcd.clear() # Display two different messages on different lines # By default, it will start at (0,0) if the display is empty lcd.putstr(\u0026#34;Hello World!\u0026#34;) sleep(2) lcd.clear() # Starting at the second line (0, 1) lcd.move_to(0, 1) lcd.putstr(\u0026#34;Hello World!\u0026#34;) sleep(2) except KeyboardInterrupt: # Turn off the display print(\u0026#34;Keyboard interrupt\u0026#34;) lcd.backlight_off() lcd.display_off() 拓展 驱动起到了什么作用 ESP32 通过 I2C 总线（SDA/SCL） 与 PCF8574 I/O 扩展芯片 进行通信，控制 LCD1602\nLCD1602 本身是 并行接口 的字符液晶模块，它通常需要 8 个数据位 + 控制位（RS、RW、E） 来进行操作。如果直接使用 ESP32 控制，会占用大量的 GPIO 口【如果直接使用 并行接口 控制 LCD1602，理论上是不需要额外的驱动库的，因为可以直接使用 GPIO 发送命令和数据】 如果 LCD1602 连接了 I2C 扩展模块（如 PCF8574 芯片），它就可以通过 I2C 总线（SDA/SCL）进行通信，这样就减少了引脚使用 方法 GPIO 口占用 代码复杂度 适用场景 使用 I2C 驱动（推荐） 仅 2 根线 简单，调用 Python 函数即可 适合 ESP32，节省引脚 直接用 GPIO（无驱动） 6~8 根线 复杂，手动写 LCD 指令 适用于无 I2C 模块的 LCD1602 在 ESP32 + LCD1602 I2C 方案中，驱动的作用是：\n简化代码（不需要手写 LCD 指令） 节省 GPIO（只用 SDA \u0026amp; SCL） 封装 LCD 控制逻辑（不用自己算指令） PCF8574 在 LCD1602 I2C 中的作用 PCF8574 是一颗 I2C 转 8 位 GPIO 的 I/O 扩展芯片，在 LCD1602 I2C 版本的模块上，它的作用主要是：\n扩展 ESP32 的 I/O 端口，从而用 I2C 控制 LCD1602，节省 GPIO 资源。 将 ESP32 发送的 I2C 信号转换为 LCD1602 需要的并行信号（数据和命令）。 适配不同的电平，确保 ESP32（3.3V）能够控制 LCD1602（5V）。 如果不用 PCF8574，而是直接用 GPIO 并行控制 LCD1602，就不需要 I2C 驱动，但会占用更多的 GPIO，并且需要自己写 LCD1602 驱动代码\n那使用这种方式相对于直接并行接口来说有什么缺点呢：\n速度比直接并行模式慢（因为 I2C 速度受限） 需要额外的 I2C 驱动代码 如果 I2C 地址不匹配，可能导致 LCD 无法工作 ","date":"2025-03-09T00:00:00Z","permalink":"https://teaize.github.io/p/lcd1602%E6%B6%B2%E6%99%B6%E6%98%BE%E7%A4%BA%E5%99%A8/","title":"LCD1602液晶显示器"},{"content":" ‎早餐 - 歌单 - Apple Music 提取 Apple Music 早餐歌单数据 需求描述：获取 Apple music 中早餐歌单的歌曲名和演唱者 问题描述：常规的方法，拷贝歌单的 HTML 给 AI 模型进行处理，但是文本量太长，字数达到限制，AI 处理\nDeepseek 1、找到包含歌单的 HTML 部分，复制下来 2、让 AI 帮忙进行数据分析，从 HTML 中抽取出歌曲名（HTML、CSS 代码都是非常有规律的，相同的数据类型，AI 非常轻松的能进行处理）。给出一个例子，让 AI 自己去找规律提取 3、得到的结果 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 - Be Here Now - Solar Power - Fear When You Fly - SUNRISE - The Architect - Better Together - Heatstroke - GOOD DAY - In Bloom - May Ninth - Coffee In The Morning - BLACKBIIRD - me and you - last day on earth - Little Life - Somebody Like Me - Rollin\u0026#39; - Sofa King - Just A Word - Yesterdays - Coffee With You - Good News - Breakfast in Bed - Sweet Nothing - I\u0026#39;ll Be Here - My Love Mine All Mine - Waiting On the World to Change - You’re Here That’s the Thing - Pegasus (ft. Phoebe Bridgers) - Sweet Disposition - Sun/Son - Humble Quest - Seasons - Please Do Not Lean (feat. BADBADNOTGOOD) - SNAP - No One - I Say a Little Prayer - I See Right Now - Hurricane - everything about her - Fault Line - Someday - Drunk, Running - Meadow - Break In - Bougainvillea - I Left A Party For You - What Do I Know? - Stella Brown - What Should I Do? - Don\u0026#39;t Stop - Shelter - easier said - Glue Song - Good Thing - Thinking About You - Goodbye Yellow Brick Road (2014 Remaster) - 2000 \u0026amp; When - Grey Skies - Save Us - I Love This Song - Weightless - Backup Plan - Boyhood - Cotton Candy Lemonade - breakfast song - Lonely Eyes - can I call you back? - always, i\u0026#39;ll care - The Day That I Met You - The Good Tears - Over - Blue - Nikes On - Lifetime - ily (i love you baby) [feat. Emilee] - More Than Perfect - I\u0026#39;ll Wait - Rain - the way things go - Somewhere - Beach Boy - Sunshine (feat. Fousheé) - Red Line - What Is Going on? - A Dream With a Baseball Player - Come Away with Me - Waiting Is A Waste - Better Days - Ghost Killer - Easy (feat. Mark Ronson) - as long as you care - Mrs Magic - The Beach - Decompose - how deep? - Follow My Echo - Mariposa - Keeping The Light On ChatGPT 1 https://music.apple.com/cn/playlist/%E6%97%A9%E9%A4%90/pl.296fd5d490444aaf80e23fa3dea02cb7 这是apple music的早餐歌单，现在我需要获取歌单中的歌曲名和歌曲作者。请你提取出来，例如，第一首歌歌曲名：Be Here Now，作者Beck，请你用markdown表格的形式发给我 注意开启联网搜索。列举出来的表格歌单，根本就不是当前网页中的歌单，差评，估计表格后面的歌曲都是 GPT 瞎想的 序号 歌曲名 演唱者 1 Be Here Now Beck 2 Solar Power Lorde 3 Fear When You Fly Cleo Sol 4 Syncopate MICHELLE 5 Breadwinner Kacey Musgraves 6 Banana Pancakes Jack Johnson 7 Skyline Khalid 8 Slow Down Forrest Frank 9 The Cure for Pain Jon Foreman 10 Look Up Joy Oladokun 11 Pelota Khruangbin 12 Older Parcels 13 Light On Maggie Rogers 14 Good Days SZA 15 Kyoto Phoebe Bridgers 16 Mystery of Love Sufjan Stevens 17 Motion Sickness Phoebe Bridgers 18 Don\u0026rsquo;t Know Why Norah Jones 19 Georgia Vance Joy 20 Someone to You BANNERS 21 Lost in Yesterday Tame Impala 22 Heat Waves Glass Animals 23 The Less I Know the Better Tame Impala 24 Dreams Fleetwood Mac 25 Sunday Morning Maroon 5 26 Budapest George Ezra 27 Riptide Vance Joy 28 Bloom The Paper Kites 29 Ophelia The Lumineers 30 Ho Hey The Lumineers 31 Little Talks Of Monsters and Men 32 Dog Days Are Over Florence + The Machine 33 Take a Chance Flume feat. Little Dragon 34 Everything Has Changed Taylor Swift feat. Ed Sheeran 35 Bubbly Colbie Caillat 36 Put Your Records On Corinne Bailey Rae 37 I\u0026rsquo;m Yours Jason Mraz 38 Lucky Jason Mraz feat. Colbie Caillat 39 Better Together Jack Johnson 40 Upside Down Jack Johnson 41 Somewhere Over the Rainbow Israel Kamakawiwo\u0026rsquo;ole 42 Here Comes the Sun The Beatles 43 Blackbird The Beatles 44 Imagine John Lennon 45 What a Wonderful World Louis Armstrong 46 Can\u0026rsquo;t Help Falling in Love Elvis Presley 47 Stand by Me Ben E. King 48 Lean on Me Bill Withers 49 Ain\u0026rsquo;t No Sunshine Bill Withers 50 Lovely Day Bill Withers 51 Just the Two of Us Grover Washington Jr. feat. Bill Withers 52 Isn\u0026rsquo;t She Lovely Stevie Wonder 53 Sir Duke Stevie Wonder 54 Superstition Stevie Wonder 55 I Wish Stevie Wonder 56 Signed, Sealed, Delivered I\u0026rsquo;m Yours Stevie Wonder 57 You Are the Sunshine of My Life Stevie Wonder 58 My Cherie Amour Stevie Wonder 59 For Once in My Life Stevie Wonder 60 Higher Ground Stevie Wonder 61 Don\u0026rsquo;t You Worry \u0026lsquo;Bout a Thing Stevie Wonder 62 I Just Called to Say I Love You Stevie Wonder 63 Part-Time Lover Stevie Wonder 64 Master Blaster (Jammin\u0026rsquo;) Stevie Wonder 65 Do I Do Stevie Wonder 66 That Girl Stevie Wonder 67 Overjoyed Stevie Wonder 68 Lately Stevie Wonder 69 Ribbon in the Sky Stevie Wonder 70 As Stevie Wonder 71 Another Star Stevie Wonder 72 All I Do Stevie Wonder 73 Knocks Me Off My Feet Stevie Wonder 74 Pastime Paradise Stevie Wonder 75 Summer Soft Stevie Wonder 76 Love\u0026rsquo;s in Need of Love Today Stevie Wonder 77 Village Ghetto Land Stevie Wonder 78 Ngiculela - Es Una Historia - I Am Singing Stevie Wonder 79 If It\u0026rsquo;s Magic Stevie Wonder 80 Ordinary Pain Stevie Wonder 81 Saturn Stevie Wonder 82 Joy Inside My Tears Stevie Wonder 83 Isn\u0026rsquo;t She Lovely (Instrumental) Stevie Wonder 84 Contusion Stevie Wonder 85 Ebony Eyes Stevie Wonder 86 Rocket Love Stevie Wonder 87 Send One Your Love Stevie Wonder 88 I Ain\u0026rsquo;t Gonna Stand for It Stevie Wonder 89 Happy Birthday Stevie Wonder 90 That’s What Friends Are For Dionne Warwick feat. Elton John, Gladys Knight \u0026amp; Stevie Wonder 91 We Are the World U.S.A. for Africa 92 Ebony and Ivory Paul McCartney \u0026amp; Stevie Wonder 93 Just Good Friends Michael Jackson \u0026amp; Stevie Wonder 94 Get It Stevie Wonder \u0026amp; Michael Jackson 95 How Come, How Long Babyface feat. Stevie Wonder 96 True to Your Heart 98º feat. Stevie Wonder 97 Misrepresented People Stevie Wonder 正则表达式 1、复制歌单的 HTML 代码，文本长度太长，超过了 ChatGPT、Deepseek、Gemini 等 AI 的文本长度，只能先正则表达式提取出关键内容，然后再进一步处理了\n2、在线正则表达式：正则表达式在线测试 - 站长工具，这样就从一大堆的 HTML 代码中提取了演唱者和歌曲名\n1 aria-label=\u0026#34;播放(.*?)的《(.*?)》\u0026#34; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 aria-label=\u0026#34;播放Beck的《Be Here Now》\u0026#34; aria-label=\u0026#34;播放Lorde的《Solar Power》\u0026#34; aria-label=\u0026#34;播放Cleo Sol的《Fear When You Fly》\u0026#34; aria-label=\u0026#34;播放MICHELLE的《SUNRISE》\u0026#34; aria-label=\u0026#34;播放Kacey Musgraves的《The Architect》\u0026#34; aria-label=\u0026#34;播放Jack Johnson的《Better Together》\u0026#34; aria-label=\u0026#34;播放Khalid的《Heatstroke》\u0026#34; aria-label=\u0026#34;播放Forrest Frank的《GOOD DAY》\u0026#34; aria-label=\u0026#34;播放Jon Foreman \u0026amp;amp; Joy Oladokun的《In Bloom》\u0026#34; aria-label=\u0026#34;播放Khruangbin的《May Ninth》\u0026#34; aria-label=\u0026#34;播放Wet的《Coffee In The Morning》\u0026#34; aria-label=\u0026#34;播放Beyoncé, Tanner Adell, Brittney Spencer, Tiera Kennedy \u0026amp;amp; Reyna Roberts的《BLACKBIIRD》\u0026#34; aria-label=\u0026#34;播放gabrielle hope的《me and you》\u0026#34; aria-label=\u0026#34;播放Tai Verdes的《last day on earth》\u0026#34; aria-label=\u0026#34;播放Cordelia的《Little Life》\u0026#34; aria-label=\u0026#34;播放Joy Oladokun的《Somebody Like Me》\u0026#34; aria-label=\u0026#34;播放Blessing Offor的《Rollin\u0026#39;》\u0026#34; aria-label=\u0026#34;播放Royel Otis的《Sofa King》\u0026#34; aria-label=\u0026#34;播放Prateek Kuhad的《Just A Word》\u0026#34; aria-label=\u0026#34;播放Public Library Commute的《Yesterdays》\u0026#34; aria-label=\u0026#34;播放Abbey Cone的《Coffee With You》\u0026#34; aria-label=\u0026#34;播放Bakar的《Good News》\u0026#34; aria-label=\u0026#34;播放Stephanie Poetri \u0026amp;amp; gnash的《Breakfast in Bed》\u0026#34; aria-label=\u0026#34;播放Taylor Swift的《Sweet Nothing》\u0026#34; aria-label=\u0026#34;播放Colbie Caillat \u0026amp;amp; Sheryl Crow的《I\u0026#39;ll Be Here》\u0026#34; aria-label=\u0026#34;播放Mitski的《My Love Mine All Mine》\u0026#34; aria-label=\u0026#34;播放John Mayer的《Waiting On the World to Change》\u0026#34; aria-label=\u0026#34;播放beabadoobee的《You’re Here That’s the Thing》\u0026#34; aria-label=\u0026#34;播放Arlo Parks的《Pegasus (ft. Phoebe Bridgers)》\u0026#34; aria-label=\u0026#34;播放Jillian Edwards的《Sweet Disposition》\u0026#34; aria-label=\u0026#34;播放Jhené Aiko的《Sun/Son》\u0026#34; aria-label=\u0026#34;播放Maren Morris的《Humble Quest》\u0026#34; aria-label=\u0026#34;播放Madison Ryann Ward的《Seasons》\u0026#34; aria-label=\u0026#34;播放Daniel Caesar的《Please Do Not Lean (feat. BADBADNOTGOOD)》\u0026#34; aria-label=\u0026#34;播放Rosa Linn的《SNAP》\u0026#34; aria-label=\u0026#34;播放Kacy Hill的《No One》\u0026#34; aria-label=\u0026#34;播放Aretha Franklin的《I Say a Little Prayer》\u0026#34; aria-label=\u0026#34;播放Molly Parden的《I See Right Now》\u0026#34; aria-label=\u0026#34;播放Dylan Dunlap的《Hurricane》\u0026#34; aria-label=\u0026#34;播放Amie Blu的《everything about her》\u0026#34; aria-label=\u0026#34;播放Sophie Holohan的《Fault Line》\u0026#34; aria-label=\u0026#34;播放Unflirt的《Someday》\u0026#34; aria-label=\u0026#34;播放Lizzy McAlpine的《Drunk, Running》\u0026#34; aria-label=\u0026#34;播放Emelie Trahan的《Meadow》\u0026#34; aria-label=\u0026#34;播放NewDad的《Break In》\u0026#34; aria-label=\u0026#34;播放Daneshevskaya的《Bougainvillea》\u0026#34; aria-label=\u0026#34;播放Pilar Victoria的《I Left A Party For You》\u0026#34; aria-label=\u0026#34;播放Sarah Crean的《What Do I Know?》\u0026#34; aria-label=\u0026#34;播放Jelani Aryeh的《Stella Brown》\u0026#34; aria-label=\u0026#34;播放Kevin Abstract的《What Should I Do?》\u0026#34; aria-label=\u0026#34;播放Fleetwood Mac的《Don\u0026#39;t Stop》\u0026#34; aria-label=\u0026#34;播放Alice Phoebe Lou的《Shelter》\u0026#34; aria-label=\u0026#34;播放elijah woods的《easier said》\u0026#34; aria-label=\u0026#34;播放beabadoobee的《Glue Song》\u0026#34; aria-label=\u0026#34;播放Cecily的《Good Thing》\u0026#34; aria-label=\u0026#34;播放Beck的《Thinking About You》\u0026#34; aria-label=\u0026#34;播放Elton John的《Goodbye Yellow Brick Road (2014 Remaster)》\u0026#34; aria-label=\u0026#34;播放sunnytheduo的《2000 \u0026amp;amp; When》\u0026#34; aria-label=\u0026#34;播放Kate Bollinger的《Grey Skies》\u0026#34; aria-label=\u0026#34;播放Lennon Stella的《Save Us》\u0026#34; aria-label=\u0026#34;播放flowerovlove的《I Love This Song》\u0026#34; aria-label=\u0026#34;播放Arlo Parks的《Weightless》\u0026#34; aria-label=\u0026#34;播放Maya Hawke的《Backup Plan》\u0026#34; aria-label=\u0026#34;播放The Japanese House的《Boyhood》\u0026#34; aria-label=\u0026#34;播放Blu DeTiger的《Cotton Candy Lemonade》\u0026#34; aria-label=\u0026#34;播放Juliet Ivy的《breakfast song》\u0026#34; aria-label=\u0026#34;播放Lauv的《Lonely Eyes》\u0026#34; aria-label=\u0026#34;播放SHY Martin的《can I call you back?》\u0026#34; aria-label=\u0026#34;播放Jeremy Zucker的《always, i\u0026#39;ll care》\u0026#34; aria-label=\u0026#34;播放Matilda Mann的《The Day That I Met You》\u0026#34; aria-label=\u0026#34;播放Dylan Dunlap的《The Good Tears》\u0026#34; aria-label=\u0026#34;播放KAIRO的《Over》\u0026#34; aria-label=\u0026#34;播放Jackson Wang的《Blue》\u0026#34; aria-label=\u0026#34;播放Healy的《Nikes On》\u0026#34; aria-label=\u0026#34;播放SG Lewis的《Lifetime》\u0026#34; aria-label=\u0026#34;播放Surf Mesa的《ily (i love you baby) [feat. Emilee]》\u0026#34; aria-label=\u0026#34;播放Brittney Spencer的《More Than Perfect》\u0026#34; aria-label=\u0026#34;播放Madison Ryann Ward的《I\u0026#39;ll Wait》\u0026#34; aria-label=\u0026#34;播放Lucy Park的《Rain》\u0026#34; aria-label=\u0026#34;播放beabadoobee的《the way things go》\u0026#34; aria-label=\u0026#34;播放Hauskey的《Somewhere》\u0026#34; aria-label=\u0026#34;播放BENEE的《Beach Boy》\u0026#34; aria-label=\u0026#34;播放Steve Lacy的《Sunshine (feat. Fousheé)》\u0026#34; aria-label=\u0026#34;播放Ben Chandler的《Red Line》\u0026#34; aria-label=\u0026#34;播放Hannah Jadagu的《What Is Going on?》\u0026#34; aria-label=\u0026#34;播放Faye Webster的《A Dream With a Baseball Player》\u0026#34; aria-label=\u0026#34;播放Norah Jones的《Come Away with Me》\u0026#34; aria-label=\u0026#34;播放Mina Okabe的《Waiting Is A Waste》\u0026#34; aria-label=\u0026#34;播放Tyler James Bellinger的《Better Days》\u0026#34; aria-label=\u0026#34;播放Sarah Klang的《Ghost Killer》\u0026#34; aria-label=\u0026#34;播放Troye Sivan \u0026amp;amp; Kacey Musgraves的《Easy (feat. Mark Ronson)》\u0026#34; aria-label=\u0026#34;播放Ruel的《as long as you care》\u0026#34; aria-label=\u0026#34;播放Strawberry Guy的《Mrs Magic》\u0026#34; aria-label=\u0026#34;播放Max Leone的《The Beach》\u0026#34; aria-label=\u0026#34;播放spill tab的《Decompose》\u0026#34; aria-label=\u0026#34;播放Tai Verdes的《how deep?》\u0026#34; aria-label=\u0026#34;播放Dylan Dunlap的《Follow My Echo》\u0026#34; aria-label=\u0026#34;播放Peach Tree Rascals的《Mariposa》\u0026#34; aria-label=\u0026#34;播放Joy Oladokun的《Keeping The Light On》\u0026#34; 3、将提取出的信息再次交给 AI 处理\n序号 歌曲名 作者 1 Be Here Now Beck 2 Solar Power Lorde 3 Fear When You Fly Cleo Sol 4 SUNRISE MICHELLE 5 The Architect Kacey Musgraves 6 Better Together Jack Johnson 7 Heatstroke Khalid 8 GOOD DAY Forrest Frank 9 In Bloom Jon Foreman \u0026amp; Joy Oladokun 10 May Ninth Khruangbin 11 Coffee In The Morning Wet 12 BLACKBIIRD Beyoncé, Tanner Adell, Brittney Spencer, Tiera Kennedy \u0026amp; Reyna Roberts 13 me and you gabrielle hope 14 last day on earth Tai Verdes 15 Little Life Cordelia 16 Somebody Like Me Joy Oladokun 17 Rollin' Blessing Offor 18 Sofa King Royel Otis 19 Just A Word Prateek Kuhad 20 Yesterdays Public Library Commute 21 Coffee With You Abbey Cone 22 Good News Bakar 23 Breakfast in Bed Stephanie Poetri \u0026amp; gnash 24 Sweet Nothing Taylor Swift 25 I\u0026rsquo;ll Be Here Colbie Caillat \u0026amp; Sheryl Crow 26 My Love Mine All Mine Mitski 27 Waiting On the World to Change John Mayer 28 You’re Here That’s the Thing beabadoobee 29 Pegasus (ft. Phoebe Bridgers) Arlo Parks 30 Sweet Disposition Jillian Edwards 31 Sun/Son Jhené Aiko 32 Humble Quest Maren Morris 33 Seasons Madison Ryann Ward 34 Please Do Not Lean (feat. BADBADNOTGOOD) Daniel Caesar 35 SNAP Rosa Linn 36 No One Kacy Hill 37 I Say a Little Prayer Aretha Franklin 38 I See Right Now Molly Parden 39 Hurricane Dylan Dunlap 40 everything about her Amie Blu 41 Fault Line Sophie Holohan 42 Someday Unflirt 43 Drunk, Running Lizzy McAlpine 44 Meadow Emelie Trahan 45 Break In NewDad 46 Bougainvillea Daneshevskaya 47 I Left A Party For You Pilar Victoria 48 What Do I Know? Sarah Crean 49 Stella Brown Jelani Aryeh 50 What Should I Do? Kevin Abstract 51 Don\u0026rsquo;t Stop Fleetwood Mac 52 Shelter Alice Phoebe Lou 53 easier said elijah woods 54 Glue Song beabadoobee 55 Good Thing Cecily 56 Thinking About You Beck 57 Goodbye Yellow Brick Road (2014 Remaster) Elton John 58 2000 \u0026amp; When sunnytheduo 59 Grey Skies Kate Bollinger 60 Save Us Lennon Stella 61 I Love This Song flowerovlove 62 Weightless Arlo Parks 63 Backup Plan Maya Hawke 64 Boyhood The Japanese House 65 Cotton Candy Lemonade Blu DeTiger 66 breakfast song Juliet Ivy 67 Lonely Eyes Lauv 68 can I call you back? SHY Martin 69 always, i\u0026rsquo;ll care Jeremy Zucker 70 The Day That I Met You Matilda Mann 71 The Good Tears Dylan Dunlap 72 Over KAIRO 73 Blue Jackson Wang 74 Nikes On Healy 75 Lifetime SG Lewis 76 ily (i love you baby) [feat. Emilee] Surf Mesa 77 More Than Perfect Brittney Spencer 78 I\u0026rsquo;ll Wait Madison Ryann Ward 79 Rain Lucy Park 80 the way things go beabadoobee 81 Somewhere Hauskey 82 Beach Boy BENEE 83 Sunshine (feat. Fousheé) Steve Lacy 84 Red Line Ben Chandler 85 What Is Going on? Hannah Jadagu 86 A Dream With a Baseball Player Faye Webster 87 Come Away with Me Norah Jones 88 Waiting Is A Waste Mina Okabe 89 Better Days Tyler James Bellinger 90 Ghost Killer Sarah Klang 91 Easy (feat. Mark Ronson) Troye Sivan \u0026amp; Kacey Musgraves 92 as long as you care Ruel 93 Mrs Magic Strawberry Guy 94 The Beach Max Leone 95 Decompose spill tab 96 how deep? Tai Verdes 97 Follow My Echo Dylan Dunlap 98 Mariposa Peach Tree Rascals 99 Keeping The Light On Joy Oladokun 昏昏欲睡 歌曲名 演唱者 Back Home (Rework) lloom Perspective lofi geek midwest juniorodeo \u0026amp; Delayde Asleep With You Son Nu A Foggy View softy Sinking Euxia \u0026amp; Kainbeats waxing moon zxry. long night felt Sunrise Basmati Away We Go Lomme Dreamlike Encounters Obie Hans Native zya Calmest Place on Earth Pearldiver Way Back When Beddy The Fall Constantine Secret Stars Astro Casual Early June lloom Underwater Blue MyceliumBug Whispers of Shibuya Pearldiver oj on the porch in -4 celcius HM Surf capri Kromattic Parallel Kainbeats Chamomile Tea Maono The Emperor\u0026rsquo;s Ride Home Daphné Seek koia Whispers Lomme \u0026amp; Elk Beats Cedar Tykho Zandukeli Yakubu Gnite Orion Beddy sub zero bby knife quiet pond Bcalm Between Bcalm Moonlight Canvas Obie Hans Drift Away Kattnap Mulberry Ln Beddy slow breaths No Spirit \u0026amp; colours in the dark Over The Moon cxlt. Light as a Feather Fuyu Echo (feat. Arjun K. Verma) Painted Postcard Obie Hans Remember koia The Sanctuary sftspkn \u0026amp; Prithvi Till The Rain Stops Chill Denis Carry Me Phonedown \u0026amp; møndberg Perpetual Dream Corey J. Beats Stargazing sftspkn \u0026amp; Prithvi still miss you Chill Denis \u0026amp; hushfall Flowing dozy Lost \u0026amp; Never Found Chill Denis \u0026amp; mėlyna Liminal Spaces Constantine Wait For Me Plant Guy Ode To The Night Sky cxlt. Burley Pearldiver Warm Blankets Seek Shelter \u0026amp; Solar Body In Balance Mujo \u0026amp; Sweet Medicine Storm Clouds bedroom lofi \u0026amp; Late Night Tones Wildheart COSMOGLOW Starry Night Gerardo Millán \u0026amp; Blocktane I\u0026rsquo;m Gonna Miss You hushfall \u0026amp; jxsn SUNLIGHT coquelicot Ripples Lomme \u0026amp; Elk Beats Space Between the Stars luv pug \u0026amp; Spaniel Mac (feat. Lofido) Sleeprune (Instrumental) Kainbeats \u0026amp; idylla In the Garden Euxia Velvet Afternoon Kattnap Elysian Amesyt Cloudgate Kainbeats Lyla rhoom Moving On Dontcry \u0026amp; cxlt. Astronaut Elk Beats \u0026amp; Lomme Everything Will Get Better Jam\u0026rsquo;addict Fall Softly (Lofi Version) Blocktane \u0026amp; Mahaji (feat. Steezy Prime) cycles Kino MacGregor Memories Dontcry \u0026amp; Nokiaa Quiet Storm Pepper \u0026amp; Lola Whispering Winds zya Kamakura Breeze Blue Gardenia Scenery Yasumu Moongazers Astro Casual Dreaming In Lofi valmy Adrift Cauzy daydreamer Redseal Midtown Midnight auv Celestial Reverie vimef \u0026amp; Chill Denis Hornsby\u0026rsquo;s Tavern Captain Kidd Collide A Scope NueBoo \u0026amp; Recalibration Machine onyx Kromattic Tea Leaves Lomme \u0026amp; Elk Beats Daydreams Sleepermane \u0026amp; Casiio I am LIVE FREE Defensive xander. \u0026amp; Philip Somber Daydreamer Osoku Finesse Ajose \u0026amp; zxry. sReim erwOn Orka tillit Diamonds in the Sky Oatmello Dusty Lanterns Nice Pajamas \u0026amp; Hypntc Tripping Over Charlee Nguyen \u0026amp; Tsunamii kRia erwOn Places We Go Euxia Cannonier Shrimpnose ","date":"2025-03-09T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%8F%90%E5%8F%96apple-music%E6%AD%8C%E5%8D%95/","title":"提取Apple Music歌单"},{"content":"自定义快捷键 使对称：Alt+Q 插入基准面：Alt+F 转换为构造线：Alt+W 使水平：Alt+A 使竖直：Alt+D 使共线：Alt+X 使重合：Alt+C 选择直线中点：右键直线，B 使相等：Shift+W ","date":"2025-03-07T00:00:00Z","permalink":"https://teaize.github.io/p/sw%E5%BF%AB%E6%8D%B7%E9%94%AE/","title":"SW快捷键"},{"content":"一、提升提问质量的通用原则 明确背景：说明问题的使用场景/目标（如学术论文/商业决策/兴趣学习） 结构化描述：将复杂问题拆解为具体子问题（避免模糊的一揽子提问） 提供示例：给出你期望的回答格式（如大纲/代码/表格/对比分析） 定义需求：说明回答的深度（如科普级/专业级）和限制条件（如字数/语言） 二、高效提问模板 模板 1：学术/技术类问题 1 2 3 【背景】我正在研究______领域，目标是解决______问题。 【当前进展】目前已知______，但遇到______困难。 【具体需求】请用______（如公式/代码/图表）解释______，并推荐相关文献。 模板 2：决策建议类问题 1 2 3 【目标】我需要在______情况下选择______（如职业方向/投资方案）。 【选项】目前考虑的方案有：A.______ B.______ C.______ 【限制条件】需考虑______（如预算/时间/风险），优先关注______因素。 模板 3：创意生成类问题 1 2 3 【主题】需要为______（如产品/故事/活动）设计创意。 【风格要求】希望融合______和______元素，类似______（示例）。 【限制】需避免______，必须包含______。 模板 4：纠错/优化类问题 1 2 3 【原始内容】附上你的代码/文案/方案（可简化脱敏）。 【问题现象】当______时会出现______错误/效果不理想。 【尝试方法】已尝试过______，但______。 三、实操案例对比 低效提问：\u0026quot; 如何学习 Python？\u0026quot; 优化后提问： 1 2 3 4 5 6 【背景】我是一名市场营销从业者，想用Python自动化处理Excel报表。 【基础水平】已掌握基础语法，但不懂如何连接Excel。 【具体需求】请用代码示例说明： 1. 用pandas读取含合并单元格的Excel文件 2. 将处理后的数据按部门分类导出为单独sheet 3. 推荐适合商业场景的Python学习资源（中文优先） 四、进阶技巧 预设边界： ❌ 避免：\u0026quot; 全面分析中美关系 \u0026quot; ✅ 优化：\u0026quot; 请从科技竞争角度，对比 2018-2023 年中美在 AI 领域的政策差异 \u0026quot; 分步推进： Step1: 先解释区块链的基本原理（比喻手法） Step2: 再说明智能合约在供应链金融中的具体应用案例 Step3: 最后分析该技术的实施风险 反向验证： \u0026quot; 如果我假设 ___ ，这个推论是否存在逻辑漏洞？\u0026quot; ","date":"2025-03-03T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%A6%82%E4%BD%95%E6%8F%90%E9%97%AE/","title":"如何提问"},{"content":"机加工技术要求 材料要求 指定零件的材质，例如钢材（45#钢、不锈钢）、铝合金、铜合金等 材料牌号和执行的标准（如 GB、ASTM 等） 热处理要求 例如调质、淬火、退火、正火等热处理工艺及其具体要求 硬度指标（如 HRC 45~50） 表面处理要求 表面涂层（如镀锌、镀镍、阳极氧化、发黑处理等） 印字：字体：Arial，字高：5.5mm，颜色：黑色，文字左右居中放置 底色：RAL 7035 镀黑色PTFE表面要求光洁，无划痕。 XXX 焊接好后整体喷塑 内表面喷氟处理，涂层厚度 20~30um，可在200℃环境下长期使用 镀镍后螺纹二次攻牙处理 棱边倒钝，去毛刺 涂层厚度或质量要求 表面粗糙度（Ra 值） 尺寸公差 关键尺寸的公差要求，例如±0.01mm 未标注的尺寸公差执行 GB/T 1804-2000M 标准 对装配或功能影响较大的尺寸标注具体的公差等级（如 H7/g6） 形位公差 包括平面度、平行度、垂直度、同轴度、圆跳动等要求 通常以符号和数值标注（例如平行度≤0.01mm） 未注形位公差值应按GB/T 1184-H 配合公差 孔和轴的配合公差等级（如 H7/g6） 对重要配合部位标注特定的配合关系 孔加工要求 孔间距公差（例如±0.02mm） 孔的加工形式（钻孔、攻丝、沉头孔等） 孔的直径公差和表面粗糙度要求 压铆螺母在背面/正面压铆 所有螺纹在喷涂时需要保护。 工艺孔加工完焊死，外表面走平整，工艺孔打压测试0.2MPa下零泄漏 表面粗糙度 各部位的表面粗糙度要求（例如 Ra≤1.6μm） 重要表面可能单独注明粗糙度要求 装配及工艺要求 标注装配要求，如装配间隙或过盈要求 具体工艺说明，如需要夹具辅助加工或特定的焊接方法 其他技术要求 防锈处理（如油封、防锈涂层等） 清洗要求（例如无油污、无残渣） 整体酸洗，超声波酒精清洗，烘干 验收标准和方法（如关键尺寸需全检或抽检标准） 焊接要求 明确焊接方式，如手工电弧焊（SMAW）、气体保护焊（MIG/TIG）、电阻焊、激光焊等 氩弧焊，零件位置关系如图，保证焊接不漏气 焊缝形式和尺寸 焊接质量要求 焊接部位的焊后处理要求（如清除焊渣、抛光等） 焊接完外表面电抛光 焊接处不可有焊瘤 示例技术要求书写：\n材料：45#钢，执行 GB/T 699-2015 标准 热处理：调质处理，硬度 HRC 28~32 表面粗糙度：未注表面 Ra3.2μm，配合面 Ra1.6μm 孔径公差：φ20H7，孔间距公差±0.02mm 表面处理：发黑处理，涂防锈油 检验要求：关键尺寸需全检，其他尺寸按抽检标准检验 焊接要求 在机加工图纸的技术要求中，如果涉及焊接工艺，通常包括以下焊接要求：\n焊接方法 明确焊接方式，如手工电弧焊（SMAW）、气体保护焊（MIG/TIG）、电阻焊、激光焊等。 对于特殊焊接方法，需要注明具体标准或工艺规范。 焊接材料 指定焊接材料或焊丝型号，例如 E6013、ER70S-6 等。 如果需要，注明焊接材料的执行标准。 焊缝形式和尺寸 标明焊缝类型（如对接焊缝、角焊缝、T 型焊缝等）。 焊缝尺寸，包括焊缝高度、焊角尺寸、坡口角度等。 焊缝的具体位置在图纸中应清晰标注。 焊接质量要求 标明焊缝等级（如按 GB/T 3323 规定的等级：一级、二级、三级）。 对焊缝的外观要求（如无气孔、裂纹、咬边等缺陷）。 焊接部位的焊后处理要求（如清除焊渣、抛光等）。 焊后热处理要求 如果有必要，要求进行焊后热处理（如消除应力处理）。 热处理温度范围和保温时间。 无损检测要求 指定检测方法（如射线探伤 RT、超声波探伤 UT、磁粉检测 MT、渗透检测 PT）。 标明检测范围和验收标准。 表面处理要求 对焊接后的表面处理，如打磨光滑、喷漆或防锈处理。 涂层厚度和质量要求。 特殊工艺要求 明确焊接过程中的特殊要求，例如预热温度、焊接顺序、层间温度等。 对焊接环境的要求（如防止风吹或潮湿）。 示例焊接技术要求书写 焊接方法：手工电弧焊（SMAW），使用 E6013 焊条。 焊缝形式：角焊缝，焊脚尺寸 4mm，焊缝长度为 50mm。 焊接质量：符合 GB/T 3323 二级焊缝标准。 无损检测：关键焊缝进行超声波探伤（UT），探伤比例为 100%。 焊后处理：焊后进行打磨并喷涂防锈漆，漆膜厚度≥30μm。 特殊要求：焊接前母材需预热至 100℃，焊后消除应力热处理（550℃，保温 2 小时）。 ","date":"2025-01-21T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%9C%BA%E5%8A%A0%E5%B7%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E6%B1%82/","title":"机加工技术要求"},{"content":"结构拆装方式 根据产品功能、制造和装配需求将整体结构拆分为多个零部件，进而生产、运输及维修。 设计要点： 功能明确，每个部件功能单一 考虑重组事宜，减少复杂性和重组时间 常见材料厚度问题 根据材料特性设计适当的厚度，保证强度、装配效果和外观质量。 设计要点: 材料厚薄均匀，避免重点。 厚度不足会导致变形，过厚增加成本和重量。 常见结构固定方式 通过物理或化学方式连接零件，确保稳定性和可感应性。 设计要点： 根据连接需求选择合适的方式 (如临时性用卡扣，长期性用胶水）。 预留足够的固定空间并配备公差。 参考资料 防水结构设计 通过密封设计防止液体渗入，保护内部组件。 设计要点： 接缝处采用密封胶条或防水涂层，设计密封条（如橡胶圈、硅胶垫圈）。 使用防水涂层或防水材料 保证整体成型或配置防水接口。 确保结构满足 IP 防护等级（如 IP65、IP68） 防尘结构设计 目标：避免灰尘进入设备内部影响性能。 设计要点： 设置防尘密封圈。 设计防尘网或滤网。 保持内部气压高于外界（如设计微正压结构）。 防震与抗冲击结构 利用缓冲材料或结构设计吸收冲击力，防止内部零件损坏。 设计要点： 选择高弹性材料，如硅胶、泡沫垫。 确定抗冲击区域的分布合理。 增加减震器（如橡胶垫、弹簧）。 设计隔振槽或减振框架。 参考资料：[[减震器]] 热管理结构设计 通过设计散热器通道或材料导热性能，降低设备温度。 设计要点： 优化孔布局，避免局部过热。 结合文艺复兴 (风扇) 和笔记本电脑 (中世纪片)。 散热结构设计 目标：优化设备的散热性能，保证运行稳定性和安全性。 设计要点： 计算热源分布，设计合理的散热通道。 采用散热材料（如铝、铜、热导率高的复合材料）。 设计通风口和散热片，避免气流阻塞。 考虑强制散热（风扇）或自然对流散热。 可拆卸结构设计 关于维修、清洁或功能模块的更换。 设计内容： 采用模块化设计，便于快速替换或升级。 选择方便的连接方式（如卡扣式、螺钉式） 确保多次安装拆卸后结构支架，不影响性能。 折叠与伸缩结构设计 通过折叠或伸缩功能优化产品的存储性或便携性。 设计要点： 走廊链或滑轨部分可靠，防止多次操作后松动。 设计紧凑，保证折叠后的稳定性和安全性。 防滑结构设计 通过表面处理或增加障碍物，增强握持或接触稳定性。 设计要点： 根据使用场景选择帆布纹路或材料（如橡胶垫）。 保证外观结构美观与功能兼顾。 导向与限位结构设计 通过导向槽或限位装置确保组件安装顺利并避免错误操作。 设计要点： 目标作品形状明确，内容错性好。 限制位部分需具备稳定的机械性能。 声学结构设计 优化声学性能以提升声音或噪音效果，结合结构形状和材料特性。 设计要点： 计算集中频率，避免干扰干扰。 选择吸音或坟墓材料。 光学结构设计 优化声学性能以提升声音或噪音效果，结合结构形状和材料特性。 设计要点： 计算集中频率，避免干扰干扰。 选择吸音或坟墓材料。 嵌入与卡扣设计 通过嵌入或卡扣连接方式实现安装和感应。 设计要点： 设计足够的扣合力，避免松动或丢失。 确保感应时不损坏卡扣或嵌入部件。 结构防误操作设计 通过形状、尺寸、颜色等差异化设计，避免操作错误或安装。 设计要点： 差异化设计显而易见，减少用户判断时间。 对高风险场景优先设计防误功能。 快速装配结构设计 通过优化零件接口和连接方式，提高装配效率。 设计要点： 减少装配步骤和零件数量。 提供明确的装配方向或标志。 减重结构设计 目标：减轻设备重量，便于携带或安装。 设计要点： 使用轻量化材料（如镁合金、碳纤维）。 使用蜂窝结构或加强筋，减重同时保证强度。 耐腐蚀结构设计 目标：延长设备在腐蚀环境中的使用寿命。 设计要点： 选择耐腐蚀材料（如不锈钢、耐腐蚀涂层）。 避免缝隙腐蚀，设计光滑表面。 增加排水或通气通道，减少积液。 抗电磁干扰结构设计 目标：避免电子设备受到外界电磁波干扰。 设计要点： 采用屏蔽结构，如金属外壳或导电涂层。 合理布置信号线，避免交叉干扰。 增加接地措施，减少电磁辐射。 美学与人机工程结构设计 目标：提升用户体验，符合人体工程学。 设计要点： 考虑手持舒适性，优化握持部位。 调整控制界面的角度和高度，方便操作。 设计外形曲线，提高视觉吸引力。 优化重量分布，减少长时间使用的疲劳感。 滑动与旋转结构设计 通过运动组件的滑动或旋转实现运动功能。 设计要点： 保证运动结束，无卡顿或异响。 使用耐磨材料，延长使用寿命。 出模方式 为实现从模具中顺利脱模,采用不同的结构设计来避免卡死或变形。 设计要点： 提供适当的脱模斜度（一般 2°~3°)。 复杂结构需设计分型面和抽芯机构。 模具纹理精加工 通过纹理加工提升产品的外观和触感，同时掩盖表面缺陷。 设计要点： 根据品牌定位选择纹理 (如高端产品更注重细致和光滑）。 控制纹理纹理，避免影响模具消耗。 特殊模具及工艺 针对复杂产品或特殊材料，采用专用模具和工艺进行加工。 设计要点: 根据产品性能需求工艺选择。 保证模具精度和加工稳定性。 参考资料 工业设计必须了解的19种结构常识 ","date":"2025-01-15T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%B7%A5%E4%B8%9A%E8%AE%BE%E8%AE%A1%E7%BB%93%E6%9E%84/","title":"工业设计结构"},{"content":"关于离开学术界的建议 原文链接：advice for academic refugees - eigenrobot,s Blog\n最近我遇到了一位新同事，他是一位离开学术界的前任教授。像许多人一样，他似乎受到了伤害。这是他的第一份私营部门工作。\n我必须尊重他：他是自愿离开的。他身居要职，距离终身教授评审还有几年时间。在经过一生的努力后，从这样的地方离开是很难的。但他并不开心，他对自己的研究计划越来越失望，不再享受劳动本身，这也削弱了他享受私人生活的能力。因此他辞职了，并不是每个人都有勇气这样做。\n当我与他谈论入职和结识时，我意识到我正在与一个更有成就的自己的过去版本交谈。有一些有害的行为模式和观点被灌输给研究生。在接下来的几周中，我将尽力引导我的同事进入私营部门，并帮助他克服他所经历的；但今天我只有半个小时的时间，而且受限于专业规范，只能触及表面。\n认识到你们许多人可能处于与我同事类似的境地，或者更糟的是，对于那些仍然被学术体系所束缚并希望从一个叛教者那里得到一些观点的人，我提供一些关于学术环境中不言而喻的规范、它们在私营部门（以及几乎所有地方）中的不适应性，以及如何更成功地过渡到作为企业打工人的幸福生活的思考。\n学术界不适合人类 早些时候，我在 LessWrong 上看到了一篇最新的帖子，截图如下：\nWhile reading Eliezer\u0026rsquo;s recent AGI Ruin post, I noticed that while I had several points I wanted to ask about, I was reluctant to actually ask them for a number of reasons:\nI have a very conflict-avoidant personality and I don\u0026rsquo;t want to risk Eliezer or someone else yelling at me; I get easily intimidated by people with strong personalities, and Eliezer… well, he can be intimidating; I don\u0026rsquo;t want to appear dumb or uninformed (even if I am in fact relatively uninformed, hence me wanting to ask the question!); I feel like there\u0026rsquo;s an expectation that I would need to do a lot of due diligence before writing any sort of question, and I don\u0026rsquo;t have the time or energy at the moment to do that due diligence. ![[Pasted image 20230504185441.png]]\n我的性格非常避免冲突，我不想冒险让埃利泽尔或其他人对我大喊大叫； 我很容易被个性强的人吓到，而埃利泽尔…嗯，他可能会令人感到害怕； 我不想显得愚蠢或无知（即使事实上我相对无知，因此我想问问题！）； 我觉得应该在写任何问题之前需要做很多尽职调查，而我目前没有时间或精力去做这样的尽职调查。 我欣赏帖子作者的诚实和自我意识，并且认为他在这里列举的几点是对学术界社交环境对人们的影响，或者对某种神经类型的人来说会加剧的影响的一个很好的概括。\n这些特征本身在道德上并没有错，但我想强调的是，它们不仅令人不愉快，而且不利于在商业环境中发挥作用。当你跳出学术界之后，你应该尽快摆脱它们。\n我将我的建议分为一下四个主要点：\n没有人认为你是笨蛋 学术界的奇特之处在于：无论是相对的还是基本的表现，都会得到明确的，有时甚至是公开的评价；你很快就会形成一种声誉，尤其是在课堂或研讨会上犯错，会让人感到羞耻。学术界倾向于通过“让我们看看我能多快毁掉整个演示文稿”来解决这个问题。虽然这可能会有效地激励学者们找出他们工作中的错误，但也会让他们极度厌恶风险，并担心听众对他们的看法。\n我在工业界的经验是，根本没有人在乎这些。及时写出分析报告、明确你的主张并清楚地分析局限性。人们可能会对你的结果提出异议，但如果他们这样做，并不是因为他们认为你是个白痴：通常是因为他们认为你的推理有特定的问题，或者因为他们希望结果可能会不同。通常，就你的工作类别而言，你就是房间里最有能力的人，你的同事们往往默认会尊重你。\n除了你应该尽快放弃对你的智力的看法的任何剩余的焦虑和恐惧之外，这里最大的失败模式是在完美主义上浪费时间。\n在学校里，花大量时间尝试将分析写成一篇完美的论文，以排除来自你自己或他人的任何可能的批评是有意义的。但是，在商业界，没有论文编辑会怀疑和审查你的工作，他们将是项目的经理或工程师，他们会相信你的话，即分析就是你所说的那样。他们可能会有批评，而且是好的批评，但通常是基于领域知识而不是对估计量统计特性的深入了解。如果你从同事那里得到了好的批评，那也没关系，如果你还没有发布，不会有任何惩罚。只需花五分钟回去修复它，庆幸你没有花三天时间试图预测错误。\n我不是建议你草率或不诚实，但来自学术界的人可能会偏向于风险规避，这在商业环境中是没有意义的，在商业环境中，你更有可能根据你的产出而不是关于你的技术成熟度。\n没有人在乎你是否聪明 每个人默认都认为你有能力的反面是，没有人关心你是否聪明，你不应该浪费你的时间或他们的时间来试图证明你是聪明的。\n主要的失败模式包括：\n为学术受众写作，而不是简单直接地为非专家读者写作； 使用最深奥的方法来展示你熟悉某个问题的方法学细微差别（而不是为了得到一个能够对决策有所指导的可接受答案）。除非你是向专家呈现，否则没有人关心你是否使用 blabla 方法；他们只想要一个能够回答问题的答案。 再次强调，诚实地对自己追求任何程度的方法复杂性以及以适当的语言和时间表向观众传达结果的回报率的重要性。你不需要展示自己的才华；你需要快速地产生足够好的结果。\n好消息是这很容易。学术界以长期存在的问题为特征，这些问题已经讨论了几十年，几乎没有新颖的数据来解决它们。相比之下，工业界是一个大量预算、最小化官僚主义和丰富数据的研究领域。如果你能够快速地使用一些高级的模型并得到有趣的结果，没有人会阻止你，但十有八九的情况是，机会成本考虑应该让你选择直接绘制一些线条来回答问题。这可能不是“复杂的”，但它是“快速和高效的”，最重要的是它“有效”。\n只需要与人交谈 商业界的人比学术界的人更外向一些，但你应该感到放心，只要走向他们，与他们交谈就好了，有更重要的原因。\n他们的工作就是与你交谈，并回答与工作相关的问题。如果他们因为你联系他们而生气，那就是他们的问题。 与人交谈也是你的工作，如果你不与人交谈，就会错过必要的信息。 直接询问别人问题通常是解决问题的最快方法。你的雇主宁愿你通过问一个基本问题并在五分钟内得到答案来解决问题，而不是花费两整个工作日试图得出答案。 许多系统文档不完善，唯一获取信息的方法就是询问直接了解该系统的人。 没有人会认为你愚蠢，因为你要问一个基本问题，而你需要得到答案。你的表现正在被评估，但是它是基于你的产出，如果你通过打扰同事来获取帮助来改善你的产出，你将得到相应的奖励。在会议中，提出基本问题通常很好，因为通常你不是唯一一个缺乏背景的人。\n工业界有些人的个性很强，如果你更加内向，一开始可能很难应对。好消息是，发展强烈的个性在某种程度上是一种实践，可以打开或关闭；在你的利益可能一致的情况下应对这样的个性是一个很好的学习机会。记住，在这样的对话中，你可能是你工作类别的权威人士，人们期望你履行你的职责，即使这涉及到当有人试图压倒你时，你坚持自己的立场；并且在大多数情况下，你有权这样做。\n如果有帮助的话，你可以把这样的遭遇看作是在与社交障碍进行互动的练习，以实现目标，而不是普通的“人类”互动。你还可以与你的经理或同事提前讨论如何处理这样的互动。\n最后，要与你的经理坦诚交流。工作场所的一个优点是快速反馈；他们应该在定期会议中向你介绍他们认为你做得好或不好的事情，以及如何改进错误。如果他们没有这样做，请确保你要求这样的反馈。如果出现问题，请与对方交流。很容易来自一个每月与你的导师交谈一次或者继续专注于一个项目的环境，但这对于保持与你的团队的联系是非常糟糕的。\n要么做要么不做 学校往往训练人们处于一种被动等待任务的状态。这种情况在工业界也可能发生，但通常情况下，一群人会识别出一个问题或机会，并迅速解决或利用它。随着时间的推移，如果你不适应这种新环境，不积极地寻求改变并在这些改变上迅速前进，你就不会做得很好。\n我并不是说你不应该与你的经理清除重大项目，对于更大的计划，你必须说服其他人与你一起投入。但是，总体而言，你需要利用你所掌握的本地知识，抓住机会并取得进展，而不是等待分配任务。\n一个推论是，你可以控制你正在做什么，而且往往情况下，如果有更好的时间利用方式存在，你可以决定停止做某事。有些期限是硬性的，但往往情况下，某个项目变得陈旧，应该延期或甚至放弃，以利用更高的回报率选项。以这种方式优先处理工作本身就是一项重要的技能，加快发展这种技能的最佳方式，通常是与你的经理或同事进行清晰的沟通。\n结论：这不仅仅是工业界的问题 在讨论学术界无法为人们的生活提供足够准备的一些核心领域后，我想强调一点，我所讨论的学术上的错误也是日常生活中一些文化束缚的反模式。为了追求工业优化的简洁沟通，我给你留下以下要点:\n你可以选择以其他身份认同自己，而不仅仅是“聪明”的标签，这样做不仅能让你成为一个更好的人，而且在实际上也更聪明。找到一些其他的价值信号。 人们不是你的教授或顾问。只要与他们交谈就好了。也许他们会因为你的冒犯而对你大喊大叫，但那又怎样？他们可能对你没有任何权力，而另一种选择就是整个人生都变成一个墙边花。 你不需要请求许可才能去洗手间，你可以自主地抓住机会，而不是像一篇下周五要交的论文一样等待机会主动找上门来。 有些项目或努力是否仍然有价值？你是否真的永远不会完成它，只是对你不断的承诺感到焦虑，但你说过你要做到，所以你必须做到吗？ ","date":"2025-01-10T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E7%A6%BB%E5%BC%80%E5%AD%A6%E6%9C%AF%E7%95%8C%E7%9A%84%E5%BB%BA%E8%AE%AE/","title":"关于离开学术界的建议"},{"content":"博客论坛 CAD Home CAD之家|首页 机械时代网 机械工程师 SolidWorks机械工程师网——最大的SolidWorks学习平台 电子发烧友 机械社区 - 百万机械行业人士网络家园 传感器专家网 - 传感器行业垂直服务平台 溪风博客SolidWorks自学网站 - 关注SolidWorks教程|SolidWorks插件|SolidWorks练习题的一站式SolidWorks自学网站 博士钣金官方网站-bsbanjin.com 教程网站 机械设计视频教程免费在线观看学习 - 软件自学网 机械制造基础资料库_设计师专属电子书下载-米思米技术之窗 机械制造基础资料库_设计师专属电子书下载-米思米技术之窗 我要自学网-视频教程|免费教程|自学电脑|3D教程|平面教程|影视动画教程|办公教程|机械设计教程|网站设计教程-我要自学网 ","date":"2025-01-06T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%9C%BA%E6%A2%B0%E5%8D%9A%E5%AE%A2%E8%AE%BA%E5%9D%9B/","title":"机械博客论坛"},{"content":" 不急、不求、不发怒 好好休息，尽情玩乐 早睡早起 明确表达自己的意思 别急着抱怨 遵守约定 常怀感恩 不贪心 谨言慎行 常保笑容 凡事未雨绸缪 更坦率 今天也要用心度过 切忌不懂装懂 给自己找乐子 待人更亲切… 虽然都是理所当然的事，也净是一些羞于向别人提起的事；但所谓的成长，就是提升理所当然之事的精确度。唯有如此，才能有新的发现，新的挑战。\n","date":"2025-01-04T00:00:00Z","permalink":"https://teaize.github.io/p/25%E5%B2%81%E5%A6%82%E4%BD%95%E8%A7%84%E5%88%92%E4%BD%A0%E7%9A%84%E4%BA%BA%E7%94%9F/","title":"25岁，如何规划你的人生"},{"content":"界面与基本操作 界面布局：包含工具栏、特征树、文件管理器等 基本操作：视图操作（缩放、旋转、平移）、选择工具、快捷键使用等 软件设置 [[SW软件优化设置]] 零件建模 草图绘制：二维草图创建，包含直线、圆、矩形、弧线等基本几何元素 特征操作：拉伸、切割、旋转、扫掠、放样等 [[SW裁剪]] [[SW基准面]] [[23-NewNote/SW-装饰螺纹线]] [[SW异形孔向导]] 参数化设计：通过尺寸和约束实现设计的可变性和自适应性 [[基于规则的模块化设计]] 镜像与阵列：在设计中实现对称或多次重复元素 [[SW阵列]] 实体建模与曲面建模：进行复杂的曲面设计和分析 装配设计 组件插入与约束：将零件添加到装配体中并定义相对位置与运动限制 装配体运动分析：模拟各组件之间的运动和干涉检查 虚拟装配：在没有实际零件的情况下，测试装配效果 工程图与注释 工程图创建：从零件或装配模型生成二维工程图，自动生成视图（如主视图、剖视图、局部视图等） [[SW-工程图模板的制作]] [[SW注解小技巧]] 标注与尺寸：对工程图中的几何体添加尺寸、角度和公差 [[SW工程图切边处理]] 符号与注释：加入焊接符号、表面处理符号等，提升图纸的可读性与完整性 渲染与可视化 材质与纹理：给零件或装配体添加材质、颜色和纹理，以提高视觉效果 [[SW-开启小金球]] 光照与相机设置：调整场景中的光照、相机视角，生成更真实的渲染效果 动画与仿真：通过动画功能演示装配体的运动过程 [[SW动画]] [[SW-SMG文件]] 仿真与分析 静力学分析：进行受力、变形、应力分布的分析 热分析：分析零件或装配体在不同温度条件下的热传导和热膨胀 流体分析：进行流体流动、压力分布等的仿真 运动学分析：模拟装配体的动态运动，计算运动轨迹、速度、加速度等 数控加工与制造 CAM 功能：生成数控机床的加工路径（如铣削、车削等） 切削模拟：模拟工具与工件的接触，优化加工路径 加工工艺与材料选择：结合具体的加工工艺要求，进行材料、工艺的选择和优化 数据管理与协作 PDM 系统：SolidWorks 与产品数据管理（PDM）系统集成，管理设计文件的版本、权限及协作 Pack and Go：打包文件，进行项目分享或备份 配置管理：在同一文件中管理不同版本的设计配置（如尺寸变化、材料变化等） [[SW收藏]] [[SW链接数值]] [[SW装配体中的方程式]] 自定义功能 宏与 API 编程：通过宏或 API 接口进行自定义功能的开发，自动化常规操作 用户界面定制：根据需要定制工具栏、快捷键等，提升操作效率 协同设计与分享 设计协同：多人协作设计和实时反馈 文件导入与导出：支持多种格式的文件导入（如 STEP、IGES、STL 等），便于与其他设计软件之间的兼容与共享 ","date":"2025-01-04T00:00:00Z","permalink":"https://teaize.github.io/p/sw%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/","title":"SW简明笔记"},{"content":"密封的基本分类 静密封：用于固定连接的密封，如垫片密封、O 型圈密封 [[O形密封圈]] 动密封：用于运动部件之间的密封，如旋转密封、往复密封 特殊密封：用于高压、高温或特殊介质环境的密封，如膨胀节密封 密封材料 弹性材料：如橡胶、硅胶、氟橡胶等 [[材料-密封材料]] 塑性材料：如聚四氟乙烯（PTFE）、尼龙 金属材料：如金属垫片、金属环 [[金属密封圈]] 复合材料：如石墨复合材料、橡胶金属复合材料 密封结构设计 密封形式：选择合适的密封结构（如 U 型、V 型、唇型） 密封尺寸：确定密封件的尺寸和配合公差 密封接触面：设计接触面的粗糙度和硬度以提高密封性能 密封件压缩量：确保压缩量适中，防止过紧或过松 密封性能要求 密封性：确保在工作条件下无泄漏 耐介质性：密封件能够抵抗介质的化学腐蚀 耐高低温：密封件能适应工作环境的温度范围 耐磨性：动密封件需具备良好的耐磨性能 密封失效分析 失效形式：如老化、磨损、挤出、介质侵蚀等 失效原因：如材料选择不当、安装不正确、工况超限等 解决措施：更换更适合的密封材料，优化密封设计 密封的安装与维护 安装要求：确保安装表面清洁、平整，无毛刺或损伤 润滑与保护：在动密封件安装时加入润滑剂，减少磨损 检查与更换：定期检查密封件的状态，及时更换失效部件 密封应用领域 工业密封：如管道法兰密封、阀门密封、泵密封 动力设备密封：如发动机、液压系统、压缩机密封 特殊行业密封：如化工设备、高真空设备、核工业密封 密封技术标准与测试 常用标准：如 GB、ISO、DIN、ASME 等相关密封标准 性能测试：如密封性试验、压力试验、耐久性测试 数据记录：记录密封性能测试数据并进行分析 专题 [[Trelleborg-特瑞堡]] ","date":"2025-01-04T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%AF%86%E5%B0%81%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/","title":"密封简明笔记"},{"content":"参考资料 下厨房 美食天下 爱料理 Github做饭指南 知乎 你是明白了哪几个基本原理之后而厨艺大增的？ 菜单 红烧冬瓜 皮蛋豆腐 - 小红书 蒜蓉龙虾尾- 小红书 牛肉炖土豆 - 小红书 土豆炒牛肉 - 小红书 虾仁鸡蛋豆腐 - 小红书 地三鲜- 小红书 蒜黄鸡蛋 香菇炒肉 海蛎煎_美食天下 蟹味菇滑蛋 牛肉羹 - 小红书 紫菜炒饭- 小红书 炸醋肉 - 小红书 闽南咸饭 - 小红书 菌菇拌面_美食天下 红萝卜炒鸡蛋 - 小红书 耗油生菜_下厨房 香芹拌腐竹_下厨房 鲫鱼豆腐汤_下厨房 糖醋排骨_下厨房 虎皮鸡蛋 - 小红书 蒜蓉龙虾尾 - 小红书 牛肉炖土豆 - 小红书 腊味煲仔饭 - 小红书 炖鸡鸡汤_下厨房 【豆腐这样吃，瞬间光盘的做法步骤图】奶油小厨房_下厨房 滑动验证 麻婆豆腐 鱼香肉丝 蘸料 海鲜蘸料 - 小红书 凉拌灵魂调料汁 - 小红书 小食 三明治 南瓜鸡蛋饼 - 小红书 空气炸锅炸薯条- 小红书 南瓜鸡蛋饼 - 小红书 贝贝南瓜烤蛋奶 水蒸蛋 - 小红书 烤冷面_下厨房 油炸鸡蛋丝_下厨房 汤 山药排骨汤_下厨房 花生汤- 小红书 蘑菇汤 - 小红书 口蘑冬瓜汤 - 小红书 山药排骨汤_下厨房 紫菜蛋花汤-小红书 山药骨头汤 - 小红书 待尝试 芝士焗饭 - 小红书 香煎鸡胸肉 - 小红书 大学生糊弄做饭之糖醋鸡胸肉！ - 小红书 ","date":"2025-01-04T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%81%9A%E9%A5%AD%E7%AE%80%E6%98%8E%E6%89%8B%E5%86%8C/","title":"做饭简明手册"},{"content":"参考资料 Tinkercad - From mind to design in minutes Tinkercad 是一款免费的在线软件工具集合，可帮助世界各地的用户进行思考、创造和制造。我们是三维设计、工程和娱乐软件领导企业 Autodesk 国产嘉立创EDA - 一个用心为中国人定制的电路板开发平台 更简单，更强大的国产在线 PCB 设计软件 电子技术资料工具-电子发烧友 电子工程师工具库 - 电子发烧友网 Yours for the making - Instructables 台灣智能感測科技, 一個讓你的夢想實現,創意可以實踐的地方 China PCB Prototype \u0026amp; Fabrication Manufacturer - PCB Prototype the Easy Way ","date":"2025-01-03T00:00:00Z","permalink":"https://teaize.github.io/p/diy%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8C/","title":"DIY设计手册"},{"content":" 1 2 3 4 5 6 import matplotlib.pyplot as plt from matplotlib import rcParams # 设置 Matplotlib 使用支持中文的字体，例如 SimHei rcParams[\u0026#39;font.sans-serif\u0026#39;] = [\u0026#39;SimHei\u0026#39;] # Windows 默认中文字体 rcParams[\u0026#39;axes.unicode_minus\u0026#39;] = False # 解决负号显示问题 ","date":"2025-01-03T00:00:00Z","permalink":"https://teaize.github.io/p/pycharm-matplotlib%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA/","title":"Pycharm-Matplotlib中文显示"},{"content":"花销分类 宠物：猫粮、猫砂，和猫咪相关的器具 软件：软件会员 电子硬件：一些学习用的电子产品类 超市：超市购物 水电气：水电费用，燃气费用 骑行：小黄车花销 奶茶：记录奶茶、咖啡 理发：可以查看理发的频率 交通：只记录往 NFC 中充值的钱，不记录单笔地铁花销的钱 购物：指网上购物 医疗：指体检、诊所医院这类 ![[Pasted image 20240709191924.png]]\n","date":"2025-01-03T00:00:00Z","permalink":"https://teaize.github.io/p/%E8%AE%B0%E8%B4%A6%E5%8A%A9%E6%89%8B/","title":"记账助手"},{"content":"链接 [[标准件3D模型下载方法]] 3D 模型资料 在线3D资源库网站 | 机械网站 SolidWorks插件外购件模型标准件模型下载SolidWorks选型库下载 - solidworks插件 - 溪风博客SolidWorks自学网站 三维CAD零部件在线模型库 - LinkAble PARTcommunity Download 3D CAD Models for free | 3Dfindit GrabCAD Making Additive Manufacturing at Scale Possible Partscad 零部件CAD - 零部件管理和三维电子目录 Traceparts 3D 零件库 3dsource 3D 零件库 知名机械供应商 知名机械供应商官网 | 机械网站 特美意：特美意电子 中国 TME官网 | 供应商直授权电子元器件分销商 ","date":"2025-01-03T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%A8%A1%E5%9E%8B%E8%B5%84%E6%96%99/","title":"模型资料"},{"content":"大学生生存手册 参考资料\nGitHub - SurviveSJTU/SurviveSJTUManual: 更新2008年版本的《上海交通大学生存手册》gitbook发布于https://survivesjtu.gitbook.io/survivesjtumanual/ GitHub - SurviveSJTU/SJTU-Application: https://survivesjtu.github.io/SJTU-Application/#/ GitHub - SUSTech-Application/2019-Fall: https://SUSTech-Application.github.io/2019-Fall SUSTech-Application-2019-Fall 一亩三分地社区: 留学|求职|投资|移民|生活 - 高信噪比 + 纯干货 逸尘的博客 | Yichen Blog 研究生建议 参考资料\n给研究生的学术建议 advice for academic refugees - eigenrobot,s Blog 论文被拒很正常，一定要勇于承受，千万不可玻璃心。翟天临事件之后，现在文章越来越难发了。别说是你了，各种教授都经常被拒稿，被拒的路上你我同在，你不孤单。但当然，发文还是有一些技巧的， 读博开始，一定是越早发文章越好。无论是高质量还是水文章，都是成果。尤其是学校有毕业要求的，越早完成越好，先把基本盘稳住，然后再去慢慢打磨一两篇精品。 读博需要的是聪明人下笨功夫。说实话，读博真的没有那么难，就一般人的努力程度而言，还达不到需要拼天赋的地步。所以在读博期间，你只要足够勤奋就行了。 不要指望导师，凡事尘部都得靠自己。记住，自己永远是自己课题的第一责任人。任何寄希望于他人的想法，到最后都会被现实狠狠教训一番. 论文不会写就多读多悟，多去看你想发的期刊，多总结。他山之石，可以攻玉。小到专业词汇. 短语的准确使用，大到谋篇布局和思想立意的设\n计，都值得花精力学习。 课程只是为了拿学分，别选太多课。理工科就选有用的数学课和专业课。别缺课. 认真听，课后不需要花太多功夫。如非必须，无必要学二外。 提早谋划和设计好学位论文整体框架。不是发几篇期刊论文，然后堆堆就能应付学位论文的。 期刊论文要讲究学术性，不能写成技术报告。学术论文要有洞见，要有思想，要有启迪。每位博士生都要不断修炼“讲故事”的能力。 尊重审稿人. 评审专家。无论是论文还是答辩，收到意见逐条认真回复。不要去杠，该加数据加数据，该加理论分析就加理论分析。 小论文 (即期刊论文) 修改和回复意见，要尽量在 point to point response 文档里全部写清楚。在原文里修改的部分也尽量一并誊抄，好让审稿人省时省力些。记住，对审稿人好就是对自己好。 ","date":"2025-01-03T00:00:00Z","permalink":"https://teaize.github.io/p/%E6%A0%A1%E5%9B%AD%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/","title":"校园生存手册"},{"content":"1、查看提交历史\n1 git log 此时会列出所有的提交记录，找到需要退回到的节点状态，复制这个哈希值\n1 2 3 4 5 commit 8008642ff9d660935ad1c4a357e1f84dc6849802 Author: teaize \u0026lt;xxx@qq.com\u0026gt; Date: Sun Oct 27 10:28:03 2024 +0800 Create 基于规则的模块化设计.md 2、重置到指定提交节点\n1 git reset --hard 8008642ff9d660935ad1c4a357e1f84dc6849802 --hard 选项表示将当前工作目录和暂存区都重置到指定的提交状态 git reset --soft abc1234：只重置提交记录，保留暂存区的更改。 git reset --mixed abc1234：重置提交记录并清除暂存区的更改，但保留工作区的修改。 3、推送到 GitHub\n1 2 3 4 5 git push origin \u0026lt;branch-name\u0026gt; --force 分支名通常为main分支，此时为： git push origin main --force PS：如果遇到网络连接问题：Failed to connect to github.com port 443 after 1043 ms: Connection refused，可参考 Git报错： Failed to connect to github.com port 443 解决方案-CSDN博客\n","date":"2024-12-23T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%8D%9A%E5%AE%A2%E6%81%A2%E5%A4%8D%E5%88%B0%E6%9F%90git%E8%8A%82%E7%82%B9/","title":"博客恢复到某Git节点"},{"content":"基础操作 对尺寸进行命名 双击尺寸进行修改时，可以对尺寸进行命名\n显示特征尺寸 右键注解，显示特征尺寸，可以显示出这个零件中的所有尺寸\n链接数值 所谓链接数值就是将模型中的两个或几个尺寸与同一个变量关联，令这两个或几个尺寸的数值相等，从而建立这几个尺寸之间的链接关系。这样当更改其中一个尺寸的值时，与此变量关联的尺寸也将同时更改。\n方程式 在创建模型时，有时需要使用模型的一个尺寸值来定义另外一个尺寸值，或由于其他原因需要在参数之间创建关联，而这些关联无法使用普通的几何关系来添加，此时，即需要使用方程式。需要说明的是，方程式多用于设置两个尺寸间的复杂关系。简单链接关系可以直接使用链接数值\nSolidWorks 中的变量都是全局变量，即使用时不必考虑范围，在整个模型或装配体中都可用，而公式则会区分是零件内可用还是装配体内可用。 尺寸路径是 尺寸名@特征名 形式的，@为分割符号，前面是尺寸名，后面是特征名。如在装配体中，则为 尺寸名@特征名@零件名 全局变量栏：用于定义全局变量 特征栏：用于定义特征状态，压缩、解除压缩，或质量、密度等 方程式栏：用于添加方程式 案例分析 使用方程式设计动态孔。案例的关键要点在于：使用方程式令阵列的个数与板的长度关联，此外使用 if 语句判断板长度很小时（不够阵列的时候）将阵列特征压缩\n1、首先显示特征尺寸 2、通过方程式关联零件总长与孔阵列的间距这两个参数 3、如上所述，特征栏用于定义特征状态，压缩、解除压缩等。如果零件很短不够孔阵列时，此时需要将阵列特征设置为压缩状态，即在方程式中的特征栏进行设置\n1 =if( \u0026#34;D1@拉伸-薄壁1\u0026#34;\u0026lt;50mm,\u0026#34;suppressed\u0026#34;,\u0026#34;unsuppressed\u0026#34;) 注：这里的 suppressed 和 unsuppressed 在编写函数时会弹出提示，不需要全部自己输入。如下，该特征自动被压缩\n","date":"2024-10-23T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E8%AE%BE%E8%AE%A1/","title":"基于规则的模块化设计"},{"content":"参考资料 模拟→数字信号，5分钟看懂！看完之后觉得很巧妙！ - YouTube 模拟信号是连续的；数字信号是离散的，它的任何一个值都是规定的最小数单位的整数倍，比如电压表上显示的就是数字量。\n电压表的作用是将模拟信号转变为数字信号，转换主要靠的是一种 ADC(Analog to Digital Converter, 模拟数字转换器) 的芯片\nADC 转换器有很多类型，如\n并联比较型 AD 计数型 AD 主次逼近 AD 双积分型 AD … 案例分析 并联比较型 AD 这里主要介绍并联比较型 AD，这种类型比较好理解。比如要测量一个量程 0-8V 的电压，主要存在哪些问题呢：\n假设将量程分为 8 份，也就是 1V 的精度，如何分成 8 等份呢？ 串联 8 个电阻，每个电阻分压 1V，电路中的不同位置也就有了 1V、2V、3V…8V 如何量化电压呢？ 通过比较器，测量电压大于电路中的电压，比较器输出 1，反之则输出 0 比如测量电压为 2.1V，则输 2 个 1，表示 2V 如何对比较器的数据进行存储呢？ 在每一个比较器后面都加一个 D 型触发器（控制端为低电平时，输出端的数据可以保持之前存储的数据，而不会随着数据输入端数据端变化而改变），这样采集到的数据就被锁存器保存下来了 这 8 个锁存器共有 8 种输出结果，如何将这些输出结果转换为二进制数呢 使用优先编码器 那么也就可以通过优先编码器的输出结果得出电压的大小了，比如输出的 000，就表示 1V，输出的 001 表示 2V 无论测量电压是 0.2V 还是 0.8V，输出端结果都是 000（也就是 1V），因为精度就只有那么高。如果想要解决这个问题，就需要提高精度。想要提高精度，就需要成倍的增加电阻、比较器和触发器的数量 此外，因为这些比较器和锁存器都是并联的，可以在同一时间同时运行，因此也是各类 AD 转换器中运行速度最快的\n补充资料 比如测量一个量程 0-8V 的电压，首先需要对其进行量化，假设将其分成 8 份，也就是精度为 1V，那么可以用三位二进制数对这 8 份进行表示\n那如何将电压分成 8 份呢？也就是如何量化呢？以及如何将量化的电压转换成二进制数呢？\n那如何将电压分成 8 份呢 —\u0026gt; 串联 8 个阻值相同的电阻\n比较器 Vr 为参考电压，Vin 为测量电压。若测量电压 Vin 大于参考电压 Vr，比较器输出 1；反之则输出 0\nD 型触发器 也叫做 D 型锁存器，可以存储 1 位数据\n当控制端输入 1 时，给数据输入端 D 输入什么，输出端 Q 就会输出什么；如果控制端 C 输入 0，那么输出端 Q 就会保持上一次存储的结果，此时无论数据输入端 D 输入什么，Q 中的值都不会发生改变\n优先编码器 将八种输出结果转换为 3 位二进制数表示 ","date":"2024-10-06T00:00:00Z","permalink":"https://teaize.github.io/p/adc%E8%BD%AC%E6%8D%A2%E5%99%A8%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/","title":"ADC转换器简明笔记"},{"content":" 爱上半导体 - YouTube Automatedo - YouTube 简睿学堂 - YouTube 制造原理 - YouTube T-Sir设计课堂 - YouTube 思維咖啡 - YouTube 小Lin说 - YouTube 工程技术思维 - YouTube Principles by Ray Dalio - YouTube Steve Cutts Mark Rober - YouTube ","date":"2024-10-06T00:00:00Z","permalink":"https://teaize.github.io/p/%E5%96%9C%E6%AC%A2%E7%9A%84youtube%E9%A2%91%E9%81%93/","title":"喜欢的Youtube频道"},{"content":"安装脚本 设置 —\u0026gt; Script Library —\u0026gt; 选择想要的脚本点击安装即可\n安装的脚本可在 Obsidian工具面板 最下栏 Download 中查看\nPS：可鼠标长按拖动面板中的插件按钮到侧边栏\n已安装插件：\nSet Stroke Width of Selected Elements：设置线条宽度\nSet Dimensions：设置元素尺寸\nBoolean Operations：布尔运算\nMindmap format：将已有的箭头整理为类似思维导图样式的箭头\nAuto Layout：自动布局\nAdd Connector Point：添加无序列表符号\nSet Text Alignment：设置文字对齐\nSplit text by lines：单个元素多行文本 —\u0026gt; 多个元素单行文本\nBox Selected Elements：给选中元素添加边框\nConnect elements：连接元素\nSlideshow：实现类似幻灯片效果\nSlideshow 超越PPT：使用obsidian Excalidraw Slideshow 创造动态演示_哔哩哔哩_bilibili A detailed walkthrough of the Excalidraw-Obsidian Slideshow 3.0 script - YouTube 使用流程 安装插件 绘制元素 通过以下两种方式设置幻灯片播放顺序 绘制一个箭头来控制顺序：绘制一根箭头，跨过不同元素。绘制完之后，选择箭头，然后点击 slide show 命令；若需要调整，可右键对箭头进行编辑调整 通过设置 Frame 来控制顺序：会自动按照 Frame 的顺序进行播放 设计库 经常需要复用的元素，可右键元素 —\u0026gt; Add to library\n也可以安装别人的设计库：Excalidraw Libraries\nPiping and instrumentation diagram P\u0026amp;ID Stick Figures Collaboration Thicc arrow Webpage frames Stick Figures Mathematical Symbols Presentation Templates ","date":"2024-09-19T00:00:00Z","permalink":"https://teaize.github.io/p/excalidraw%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/","title":"Excalidraw简明笔记"},{"content":"软连接 1 mklink /D \u0026#34;F:\\003-SynZhPObsidian\\SynZhPObsidian\\00-HugoBlog\u0026#34; \u0026#34;D:\\001-Github\\Hugo-Main\\content\\post\u0026#34; 删除 Obsidian 当中已经存在的 00-HugoBlog 文件夹\n1 mklink /D \u0026#34;D:\\SycObsidian\\SynZhPObsidan\\00-HugoBlog\u0026#34; \u0026#34;D:\\02-Github\\Hugo-Main\\content\\post\u0026#34; 删除Obsidian当中已经存在的\n1 mklink /D \u0026#34;D:\\SycObsidian\\SynZhPObsidan\\HugoNotes\u0026#34; \u0026#34;D:\\02-Github\\Hugo-Main\\content\\page\\notes\u0026#34; mklink 是 Windows 中的一个命令行工具，用于创建符号链接，类似于 MacOS 系统中的 ln -s 命令（可参考 Obsidian2Hexo | 智朋的个人博客） /D 表示要创建的是一个目录符号链接，而不是文件符号链接 第一个路径是源目录的实际路径，第二个路径通过符号链接指向第一个路径，即在访问第二个路径时，实际上是在访问第一个路径 首先删除 Obsidian 当中的 00-HugoBlog，在该路径下调用 CMD，运行上面的命令之后，会在当前路径下生成一个链接文件夹 00-HugoBlog 实现功能 将第二个路径至于 Obsidian 文件夹中，相当于利用 Obsidian 作为 Markdown 的编辑器，这样做可以充分利用 Obsidian 中的一些插件 第一个路径为 Hugo 博客的 post 目录，即发布博客的源文件目录。在 Obsidan 中增删改 markdown 文件，相当于直接编辑了 post 目录中的 markdown 文件，修改完成之后可快速推送到 github 仓库中 已为 Hugo 创建了一个 Github Action，检测到 Github 中仓库有新提交，就会触发生成网页并部署等一系列操作 通过以上操作，非常方便的在多台设备上创建笔记并发布博文；博客的源文件自动备份在 Github 的私有仓库中，通过 Github Action 创建的静态页面自动部署在 teaize.github.io 公开仓库中\n之前在 Mac 上使用 Hexo 框架来生成博客，几乎只能在 Mac 上生成静态页面，再发布博客，并且需要 hexo clean, hexo g, hexo d 来部署；当前这个 Hugo 方案就方便很多\n有个问题还是没有弄明白，明明在 Obsidian 中放的是一个软连接，Obsidian 竟然可以实现云同步：）\n1 mklink /D \u0026#34;F:\\003-SynZhPObsidian\\SynZhPObsidian\\HugoNotes\u0026#34; \u0026#34;D:\\001-Github\\Hugo-Main\\content\\page\\notes\u0026#34; ","date":"2024-09-08T00:00:00Z","permalink":"https://teaize.github.io/p/hugo-obsidian%E8%BD%AF%E8%BF%9E%E6%8E%A5/","title":"Hugo-Obsidian软连接"}]