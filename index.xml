<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Coffity&#39;s Blog</title>
        <link>https://teaize.github.io/</link>
        <description>Recent content on Coffity&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Coffity</copyright>
        <lastBuildDate>Tue, 23 Dec 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://teaize.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>博客嵌入HTML-气体单位转换器</title>
        <link>https://teaize.github.io/p/%E5%8D%9A%E5%AE%A2%E5%B5%8C%E5%85%A5html-%E6%B0%94%E4%BD%93%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2%E5%99%A8/</link>
        <pubDate>Tue, 23 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8D%9A%E5%AE%A2%E5%B5%8C%E5%85%A5html-%E6%B0%94%E4%BD%93%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2%E5%99%A8/</guid>
        <description>
	&lt;script src=&#34;https://cdn.tailwindcss.com&#34;&gt;&lt;/script&gt;
	&lt;style&gt;
	.input-with-unit {
	  position: relative;
	}
	.input-with-unit input {
	  padding-right: 3rem;
	}
	.input-with-unit span {
	  position: absolute;
	  right: 0.5rem;
	  top: 50%;
	  transform: translateY(-50%);
	  color: #666;
	  font-size: 0.9rem;
	  pointer-events: none;
	}
	&lt;/style&gt;

  &lt;div class=&#34;bg-white shadow-xl rounded-2xl p-8 max-w-4xl w-full mx-4&#34;&gt;
    &lt;h1 class=&#34;text-3xl font-bold mb-4 text-center&#34;&gt;气体单位转换器&lt;/h1&gt;

    &lt;p class=&#34;text-sm text-gray-600 mb-4 bg-blue-50 p-4 rounded&#34;&gt;
      说明：本计算基于 &lt;strong&gt;25℃、1 个大气压&lt;/strong&gt; 的标准状态，采用公式：
      &lt;br&gt;mg/m³ = ppb × 分子量 ÷ 24.45 ÷ 1000
      &lt;br&gt;ppb = mg/m³ × 1000 × 24.45 ÷ 分子量
      &lt;br&gt;&lt;strong&gt;稀释比说明&lt;/strong&gt;：稀释比 &gt; 1 表示样品在测量时被稀释过（例如 10 倍稀释），要恢复未稀释的原始浓度，计算结果应当 &lt;strong&gt;乘以&lt;/strong&gt; 稀释比进行修正。
    &lt;/p&gt;

    &lt;div class=&#34;grid grid-cols-1 md:grid-cols-2 gap-6&#34;&gt;
      &lt;div&gt;
        &lt;label class=&#34;block mb-1&#34;&gt;选择气体&lt;/label&gt;
        &lt;select id=&#34;gas&#34; class=&#34;w-full p-2 border rounded&#34;&gt;
          &lt;option value=&#34;so2&#34;&gt;二氧化硫 (SO₂)&lt;/option&gt;
          &lt;option value=&#34;no&#34;&gt;一氧化氮 (NO)&lt;/option&gt;
          &lt;option value=&#34;no2&#34;&gt;二氧化氮 (NO₂)&lt;/option&gt;
          &lt;option value=&#34;co&#34;&gt;一氧化碳 (CO)&lt;/option&gt;
        &lt;/select&gt;
      &lt;/div&gt;

      &lt;div&gt;
        &lt;label class=&#34;block mb-1&#34;&gt;稀释比&lt;/label&gt;
        &lt;div class=&#34;input-with-unit&#34;&gt;
          &lt;input type=&#34;number&#34; id=&#34;dilution&#34; value=&#34;1&#34; min=&#34;1&#34; class=&#34;w-full p-2 border rounded&#34; title=&#34;稀释比，&gt;1 表示样品被稀释（例如 10 表示 10 倍稀释）&#34;&gt;
          &lt;span&gt;倍&lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div&gt;
        &lt;label class=&#34;block mb-1&#34;&gt;输入数值&lt;/label&gt;
        &lt;div class=&#34;input-with-unit&#34;&gt;
          &lt;input type=&#34;number&#34; id=&#34;value&#34; class=&#34;w-full p-2 border rounded&#34; placeholder=&#34;输入数值，按下确认后计算&#34;&gt;
          &lt;span id=&#34;input-unit-label&#34;&gt;ppb&lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div&gt;
        &lt;label class=&#34;block mb-1&#34;&gt;选择输入单位&lt;/label&gt;
        &lt;select id=&#34;unit&#34; class=&#34;w-full p-2 border rounded&#34; onchange=&#34;updateUnitLabel()&#34;&gt;
          &lt;option value=&#34;ppb&#34;&gt;ppb&lt;/option&gt;
          &lt;option value=&#34;mgm3&#34;&gt;mg/m³&lt;/option&gt;
        &lt;/select&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class=&#34;mt-6 flex gap-4&#34;&gt;
      &lt;button id=&#34;confirmBtn&#34; class=&#34;flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded&#34;&gt;确认转换&lt;/button&gt;
      &lt;button id=&#34;clearBtn&#34; class=&#34;bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-4 rounded&#34;&gt;清除&lt;/button&gt;
    &lt;/div&gt;

    &lt;div id=&#34;result&#34; class=&#34;mt-6 p-4 bg-gray-50 border rounded text-lg text-center font-semibold&#34;&gt;&lt;/div&gt;

    &lt;p class=&#34;text-xs text-gray-500 mt-4&#34;&gt;
      * 本工具仅供参考，实际监测应考虑温度、压力及湿度等因素进行修正。
    &lt;/p&gt;
  &lt;/div&gt;

  &lt;script&gt;
    const molWeights = {
      so2: 64.066,
      no: 30.006,
      no2: 46.0055,
      co: 28.01
    };

    function updateUnitLabel() {
      const unit = document.getElementById(&#39;unit&#39;).value;
      document.getElementById(&#39;input-unit-label&#39;).textContent = unit === &#39;ppb&#39; ? &#39;ppb&#39; : &#39;mg/m³&#39;;
    }

    function convert() {
      const gas = document.getElementById(&#39;gas&#39;).value;
      const value = parseFloat(document.getElementById(&#39;value&#39;).value);
      const unit = document.getElementById(&#39;unit&#39;).value;
      const dilution = parseFloat(document.getElementById(&#39;dilution&#39;).value) || 1;
      const resultDiv = document.getElementById(&#39;result&#39;);

      if (isNaN(value) || isNaN(dilution) || dilution &lt;= 0) {
        resultDiv.textContent = &#39;请输入有效数值和稀释比（稀释比应大于 0）&#39;;
        return;
      }

      const MW = molWeights[gas];
      let converted;

      if (unit === &#39;ppb&#39;) {
        // ppb -&gt; mg/m3
        converted = value * MW / 24.45 / 1000; // 等价于 value * MW / 24450
      } else {
        // mg/m3 -&gt; ppb
        converted = value * 1000 * 24.45 / MW;
      }

      // 稀释比修正：若样品被稀释（稀释比 &gt; 1），恢复原始浓度需乘以稀释比
      converted = converted * dilution;

      resultDiv.textContent = unit === &#39;ppb&#39;
        ? `${value} ppb (稀释比 ${dilution}) → ${converted.toFixed(6)} mg/m³`
        : `${value} mg/m³ (稀释比 ${dilution}) → ${converted.toFixed(3)} ppb`;
    }

    document.getElementById(&#39;confirmBtn&#39;).addEventListener(&#39;click&#39;, convert);
    document.getElementById(&#39;clearBtn&#39;).addEventListener(&#39;click&#39;, ()=&gt;{
      document.getElementById(&#39;value&#39;).value = &#39;&#39;;
      document.getElementById(&#39;dilution&#39;).value = &#39;1&#39;;
      document.getElementById(&#39;result&#39;).textContent = &#39;&#39;;
    });

    // 初始化
    updateUnitLabel();
  &lt;/script&gt;
</description>
        </item>
        <item>
        <title>关于检出限</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%A3%80%E5%87%BA%E9%99%90/</link>
        <pubDate>Tue, 23 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%A3%80%E5%87%BA%E9%99%90/</guid>
        <description>&lt;p&gt;检出限（Detection Limit / Limit of Detection, LOD），简单来说，是仪器能够可靠地从噪声中分辨出被测组分的最低浓度。&lt;/p&gt;
&lt;h3 id=&#34;核心定义&#34;&gt;核心定义
&lt;/h3&gt;&lt;p&gt;检出限是指在给定的置信水平（通常为 95% 或 99%）内，分析方法能够检出待测组分的最小浓度。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;不仅是“看到”：&lt;/strong&gt; 仪器显示的数值必须比背景噪声（底噪）足够大，大到我们可以确定这不是仪器的偶然波动，而是真的有污染物。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;定性不定量：&lt;/strong&gt; 检出限通常被认为是“定性”的界限。即：低于这个浓度，我们不能确定污染物是否存在；达到这个浓度，我们确定它存在，但此时测得的数值准确度（定量）往往不够。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;在-cems-行业中的分类&#34;&gt;在 CEMS 行业中的分类
&lt;/h3&gt;&lt;p&gt;在实际应用中，检出限通常分为两类，区分它们对选型和运维至关重要：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;仪器检出限&lt;/strong&gt; (IDL, Instrument Detection Limit)： 指分析仪主机（如红外分析仪、紫外分析仪）在实验室环境下，直接通入零气测试得到的极限。它只反映仪器本身的电子噪声和稳定性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;方法检出限&lt;/strong&gt; (MDL, Method Detection Limit)： 这是 CEMS 系统 真正关注的。它包括了取样探头、伴热管线、冷凝除水系统等整个采样链路对样品的损耗和干扰。由于样品的吸附和稀释，&lt;strong&gt;方法检出限通常高于仪器检出限&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;检出限如何计算&#34;&gt;检出限如何计算
&lt;/h3&gt;&lt;p&gt;在 CEMS 的标准（如中国的 &lt;strong&gt;HJ 76-2017&lt;/strong&gt;）和相关计量规程中，通常采用“空白标准偏差法”：$$LOD = 3 \times \sigma$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;$\sigma$（标准偏差）：&lt;/strong&gt; 对零点气体（如高纯氮气）进行多次重复测量（通常为 7 次或 20 次），计算其测量值的标准偏差。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;3 倍原则：&lt;/strong&gt; 统计学上认为，当信号达到噪声标准偏差的 3 倍时，该信号源于真实的污染物的把握度约为 99%。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;如标准 &lt;code&gt;HJ 76-2017&lt;/code&gt; 中关于检出限的描述

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251223185209445.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251223185209445.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;检出限-vs-分辨率&#34;&gt;检出限 vs 分辨率
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;分辨率： 是仪器显示出的“刻度”（仪表显示的最小末位数字）。比如能显示到 0.01mg/m³。&lt;/li&gt;
&lt;li&gt;关系： 很多低端仪器分辨率很高，但检出限很差。这就像一把尺子刻度到了 0.1 毫米，但由于手抖（噪声大），你永远测不准 1 毫米以下的东西。&lt;strong&gt;好的分析仪，检出限通常大于分辨率。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;如何理解好的分析仪检出限通常大于分辨率&#34;&gt;如何理解：好的分析仪，检出限通常大于分辨率
&lt;/h3&gt;&lt;h4 id=&#34;概念本质的对比&#34;&gt;概念本质的对比
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;指标&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;形象比喻&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;决定因素&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;分辨率 (Resolution)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;尺子的刻度：&lt;/strong&gt; 你最细能画到哪一格？&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;数字化能力：&lt;/strong&gt; 由电路（AD 转换器位长）和软件显示决定。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;检出限 (LOD)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;手稳不稳：&lt;/strong&gt; 即使刻度很细，如果手抖，你最小能看准多少？&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;物理极限：&lt;/strong&gt; 由传感器噪声、电路底噪、光学散射等决定。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;一个优秀的分析仪设计遵循“&lt;strong&gt;宁可让你看到波动的真实，也不让你看到静止的虚假&lt;/strong&gt;”的原则。&lt;/p&gt;
&lt;h4 id=&#34;a-只有分辨率足够小才能观察到噪声&#34;&gt;A. 只有分辨率足够小，才能观察到噪声
&lt;/h4&gt;&lt;p&gt;如果一台仪器的检出限是 $0.5mg/m^3$（意味着在这个浓度以下数据都在乱跳），而它的分辨率被设定为 $1.0mg/m^3$（即显示器只能显示 0, 1, 2…）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;后果： 所有的噪声波动都被强行“归零”或“四舍五入”了。你看到的是一个极其平稳的“0”，但这其实是&lt;strong&gt;数据造假&lt;/strong&gt;，因为它掩盖了仪器的真实波动和温漂。&lt;/li&gt;
&lt;li&gt;好的设计： 分辨率设为 $0.01mg/m^3$。当你通入零气时，你会看到数值在 -0.05 到 +0.05 之间跳动。这种跳动虽然不好看，但它提供了计算标准偏差（$\sigma$）的原始数据，让你能真实地算出检出限。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;b-统计学的必然要求&#34;&gt;B. 统计学的必然要求
&lt;/h4&gt;&lt;p&gt;根据公式 $LOD = 3 \times \sigma$，我们需要计算标准偏差。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果分辨率比 $\sigma$ 还要大，测量值就会变成一串死板的数字（例如全是 0），此时计算出的 $\sigma$ 也是 0。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;逻辑悖论：&lt;/strong&gt; 这样算出来的检出限也会是 0，这在物理上是不可能的（意味着仪器没有噪声）。因此，为了准确捕捉噪声的统计特征，&lt;strong&gt;分辨率必须远小于噪声的量级&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;常见误区把分辨率当成精度&#34;&gt;常见误区：把分辨率当成精度
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;厂家的猫腻： 某些厂商为了参数好看，会在显示屏上强行保留 4 位小数（极高的分辨率），让你觉得仪器很准。但如果你看它的技术手册，检出限可能只有 1.0。这意味着小数点后面那三位数字全都是&lt;strong&gt;无效的随机噪声&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;高端仪器的做法： 高端分析仪&lt;strong&gt;其分辨率通常比检出限小一个数量级&lt;/strong&gt;（例如检出限 0.1，分辨率 0.01）。这样做的目的是让运维人员在做零点校准时，能够清晰地观察到零位的微小漂移趋势。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;总结来说：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;分辨率&lt;/strong&gt;（我能显示的最小数） &amp;lt; &lt;strong&gt;噪声强度&lt;/strong&gt;（我能观察到的波动） &amp;lt; &lt;strong&gt;检出限&lt;/strong&gt;（我敢保证是真实存在的浓度值）。&lt;/li&gt;
&lt;li&gt;这就是为什么我们说“检出限大于分辨率”的原因：&lt;strong&gt;它证明了这台机器的显示精度足以支撑它对物理极限的捕捉，而不是在用软件修饰数据。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;检出限与漂移的区别&#34;&gt;检出限与漂移的区别
&lt;/h2&gt;&lt;p&gt;检出限（LOD）和漂移（Drift）是两个描述仪器“不确定性”的最重要指标。它们既有本质的区别，又在实际应用中相互牵制。&lt;/p&gt;
&lt;p&gt;简单来说：&lt;strong&gt;检出限决定了仪器“能不能看见”，而漂移决定了仪器“看的是不是一直准”。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;检出限-vs-漂移核心区别&#34;&gt;检出限 vs 漂移：核心区别
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;维度&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;检出限 (LOD)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;漂移 (Drift)&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;本质含义&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;短期噪声&lt;/strong&gt;的统计表现。&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;长期趋势&lt;/strong&gt;的偏差累积。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;时间尺度&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;极短时间&lt;/strong&gt;（几分钟内）：读数在零点附近的快速上下跳动。&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;较长时间&lt;/strong&gt;（24 小时或 7 天）：读数缓慢地朝着一个方向偏离。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;表现形式&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;“毛刺”或“锯齿波”。&lt;/td&gt;
          &lt;td&gt;“坡度”或“台阶”。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;主要成因&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;电子元件热噪声、光电探测器散粒噪声、信号放大器的底噪。&lt;/td&gt;
          &lt;td&gt;环境温度变化、光源老化、光学镜片污染、气压波动、采样管路吸附。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;计算逻辑&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$3 \times \sigma$（标准偏差）。&lt;/td&gt;
          &lt;td&gt;$终点值 - 初始值$（绝对差值）。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;检出限与漂移的内在联系&#34;&gt;检出限与漂移的内在联系
&lt;/h3&gt;&lt;h4 id=&#34;-漂移会淹没检出限&#34;&gt;① 漂移会“淹没”检出限
&lt;/h4&gt;&lt;p&gt;这是最核心的联系。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;理论状态： 假设一台仪器的检出限是 $1mg/m^3$，如果零点绝对不动，你测到 $2mg/m^3$ 时可以很有信心。&lt;/li&gt;
&lt;li&gt;现实状态： 如果仪器的零点漂移是 $5mg/m^3$（24 小时内），那么即使你看到了 $2mg/m^3$ 的读数，你根本无法判断这是因为“真的有污染物”，还是因为“仪器自己飘了”。&lt;/li&gt;
&lt;li&gt;结论： &lt;strong&gt;在高精度的监测中，漂移是检出限的“实际约束”。 一个检出限极低但漂移很大的仪器，是没有实际意义的&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;-它们共同定义了测量下限&#34;&gt;② 它们共同定义了“测量下限”
&lt;/h4&gt;&lt;p&gt;在 CEMS 行业标准（如 HJ 76）中，评估一台仪器是否能用于“超低排放”监测，不是只看检出限，而是看“零点漂移”是否小于排放限值的一定比例。如下图为 HJ 76 标准中的部分性能指标截图

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251223192035439.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251223192035439.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;用打靶来理解&#34;&gt;用“打靶”来理解
&lt;/h3&gt;&lt;p&gt;想象你正在用一把步枪（分析仪）射击靶心（真实浓度）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;检出限（噪声）： 相当于你的**“手抖”程度。手抖得越厉害（噪声大），子弹散布圆就越大，你越难打中细小的目标。&lt;/li&gt;
&lt;li&gt;漂移： 相当于“瞄准镜松动”。随着时间的推移，虽然你的手还是很稳，但瞄准镜慢慢偏了。即便你打得很准，子弹也会整团地偏向靶心的一侧。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么-cems-行业更怕漂移&#34;&gt;为什么 CEMS 行业更怕“漂移”
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;检出限是天生的： 仪器选型定下来，检出限基本就定了，它影响的是数据的“毛刺感”。&lt;/li&gt;
&lt;li&gt;漂移是后天的： 随着现场粉尘污染、水分进入、环境温度变化，漂移会持续发生。如果漂移失控，会导致环保数据虚高（被罚款）或者虚低（数据失真）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;扩展资料&#34;&gt;扩展资料
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  mindmap
  root((CEMS/分析仪
  性能指标框架))
    测量品质
      检出限 LOD
        能够识别的最低浓度
      准确度 Accuracy
        测量值与真实值的接近程度
      线性误差 Linearity
        全量程范围内的一致性
      重复性 Repeatability
        多次测量同一气体的一致性
    稳定性
      零点漂移 Zero Drift
        长时间无信号时的数值偏移
      量程漂移 Span Drift
        长时间高浓度下的数值偏移
      平均无故障时间 MTBF
        系统的整体可靠性
    响应特性
      响应时间 T90
        达到稳定值90%所需的时间
      滞后时间
        气体进入管线到仪器反应的延迟
    环境与抗干扰
      交叉干扰 Cross-Sensitivity
        非目标气体如水分对测量影响
      压力/温度补偿
        环境波动对测量值的修正能力
      防护等级 IP
        设备对防尘防水的耐受度
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>嵌入HTML-气体单位转换器</title>
        <link>https://teaize.github.io/p/%E5%B5%8C%E5%85%A5html-%E6%B0%94%E4%BD%93%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2%E5%99%A8/</link>
        <pubDate>Tue, 23 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%B5%8C%E5%85%A5html-%E6%B0%94%E4%BD%93%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2%E5%99%A8/</guid>
        <description>&lt;h3 id=&#34;方式一markdown-嵌入-iframe&#34;&gt;方式一：Markdown 嵌入 Iframe
&lt;/h3&gt;&lt;p&gt;这里直接将 HTML 通过 Iframe 的方式嵌入。步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;将 HTML 文件放入 &lt;code&gt;static/html-files/example.html&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;在你的 Markdown 文章中直接写入 &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt; 标签：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;这是我的博文内容...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;iframe src=&amp;#34;/html-files/example.html&amp;#34; width=&amp;#34;100%&amp;#34; height=&amp;#34;1000px&amp;#34; frameborder=&amp;#34;0&amp;#34;&amp;gt;&amp;lt;/iframe&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;继续博文内容...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;缺点：Markdown 编辑器中无法预览，因为 html 文件在博客目录下，不再笔记软件目录下&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;方式-2博客嵌入-html&#34;&gt;方式 2：博客嵌入 html
&lt;/h3&gt;&lt;p&gt;如果你希望这个 HTML 文件看起来像一篇普通的博文，带有 &lt;code&gt;hugo-theme-stack&lt;/code&gt; 的侧边栏、头像和评论区，你可以直接将 HTML 放在 &lt;code&gt;content&lt;/code&gt; 文件夹下。操作步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;将 &lt;code&gt;.html&lt;/code&gt; 文件放入 &lt;code&gt;content/post/&lt;/code&gt;（或其他你存放文章的目录）。&lt;/li&gt;
&lt;li&gt;关键：添加 Front Matter。在 HTML 文件的最顶端手动加入 Hugo 的元数据（YAML 格式），并用 &lt;code&gt;---&lt;/code&gt; 包裹。&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;title: &amp;#34;我的 HTML 页面标题&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;date: 2023-10-27
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;description: &amp;#34;这是一个直接使用 HTML 编写的文章&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;image: &amp;#34;cover.jpg&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;h1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;欢迎来到我的页面&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;h1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;这段内容会自动被套在 Stack 主题的框架内。&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;注意点：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不要包含 &lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; 标签。Hugo 的模板会自动生成这些标签。&lt;/li&gt;
&lt;li&gt;只保留 &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; 内部的核心内容。&lt;/li&gt;
&lt;li&gt;如果 HTML 里有专属的 &lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt; 或 &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;，可以直接写在里面。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;参见：&lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E6%B0%94%E4%BD%93%E5%8D%95%E4%BD%8D%E8%BD%AC%E6%8D%A2%E5%99%A8/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;气体单位转换器&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;缺点：会破坏原始 HTML 格式，破坏了想要恢复回来比较麻烦&lt;/p&gt;
&lt;h3 id=&#34;下面演示方式-1&#34;&gt;下面演示：方式 1
&lt;/h3&gt;&lt;iframe src=&#34;https://teaize.github.io/html-files/气体单位转换器.html&#34; width=&#34;100%&#34; height=&#34;1000px&#34; frameborder=&#34;0&#34;&gt;&lt;/iframe&gt;
</description>
        </item>
        <item>
        <title>XXX-00-AutoCAD入门学习大纲</title>
        <link>https://teaize.github.io/p/xxx-00-autocad%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E5%A4%A7%E7%BA%B2/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-00-autocad%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E5%A4%A7%E7%BA%B2/</guid>
        <description>&lt;p&gt;以下是制定的 AutoCAD 学习框架，分为四个阶段，帮助你从零基础快速过渡到实战水平：&lt;/p&gt;
&lt;h2 id=&#34;第一阶段建立坐标思维入门期&#34;&gt;第一阶段：建立“坐标”思维（入门期）
&lt;/h2&gt;&lt;p&gt;不要急着画复杂的图，先熟悉软件的操作逻辑。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;界面与基本操作： 熟悉绘图区、命令行（非常重要）、状态栏。学会缩放（滚轮）和平移（按住滚轮）。&lt;/li&gt;
&lt;li&gt;坐标系理解： 理解绝对坐标和相对坐标（例如输入 &lt;code&gt;@100,50&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;基础绘图命令： 掌握 &lt;strong&gt;L&lt;/strong&gt; (直线)、&lt;strong&gt;C&lt;/strong&gt; (圆)、&lt;strong&gt;REC&lt;/strong&gt; (矩形)、&lt;strong&gt;PL&lt;/strong&gt; (多段线)。
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;关键点&lt;/strong&gt;：习惯看屏幕下方的&lt;strong&gt;命令行提示&lt;/strong&gt;，它会告诉你下一步该做什么。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;第二阶段高效修改与精准定位成长期&#34;&gt;第二阶段：高效修改与精准定位（成长期）
&lt;/h2&gt;&lt;p&gt;“画”图只占 30%，“改”图占 70%。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;修改命令： 熟练使用 &lt;strong&gt;CO&lt;/strong&gt; (复制)、&lt;strong&gt;M&lt;/strong&gt; (移动)、&lt;strong&gt;RO&lt;/strong&gt; (旋转)、&lt;strong&gt;TR&lt;/strong&gt; (修剪)、&lt;strong&gt;EX&lt;/strong&gt; (延伸)、&lt;strong&gt;O&lt;/strong&gt; (偏移)。&lt;/li&gt;
&lt;li&gt;捕捉与追踪： 掌握 &lt;strong&gt;F3&lt;/strong&gt; (对象捕捉) 和 &lt;strong&gt;F11&lt;/strong&gt; (对象捕捉追踪)。这是保证图纸精准（不漏缝、不重叠）的核心。&lt;/li&gt;
&lt;li&gt;选择技巧： 蓝色框选择与绿色框选择的区别（窗选 vs 交叉选）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;第三阶段标准化与组织管理进阶期&#34;&gt;第三阶段：标准化与组织管理（进阶期）
&lt;/h2&gt;&lt;p&gt;这是区分“业余”和“专业”的分水岭。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;图层管理 (Layer)： 学习如何分层（如：中心线层、轮廓线层、标注层）。学会控制颜色、线型和图层开关。&lt;/li&gt;
&lt;li&gt;块 (Block) 的应用：
&lt;ul&gt;
&lt;li&gt;学习创建块 (B) 和插入块 (I)。&lt;/li&gt;
&lt;li&gt;实战建议： 如果你以后涉及 CEMS 或分析仪设计，可以将常用的传感器、阀门、法兰做成“块”，随取随用。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;填充 (Hatch)： 掌握 H 命令，为剖视图添加材质阴影。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;第四阶段标注输出与工程规范实战期&#34;&gt;第四阶段：标注、输出与工程规范（实战期）
&lt;/h2&gt;&lt;p&gt;图纸是画给人看的，必须符合标准。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;标注系统： 掌握 DLI (线性标注)、DAN (角度标注)。学习设置标注样式 (D)，调整文字大小和箭头样式。&lt;/li&gt;
&lt;li&gt;布局与打印： 理解“模型空间”与“布局空间”的区别。学习如何按比例导出为 PDF。&lt;/li&gt;
&lt;li&gt;图框与模板： 建立自己的标准 A3/A4 图框模板，包含标题栏。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;框架图&#34;&gt;框架图
&lt;/h2&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    Start((AutoCAD 学习框架)) --&gt; Phase1[第一阶段: 基础入门]
    Start --&gt; Phase2[第二阶段: 编辑与精准]
    Start --&gt; Phase3[第三阶段: 组织与效率]
    Start --&gt; Phase4[第四阶段: 标准与输出]

    subgraph &#34;Phase 1: 建立绘图逻辑&#34;
    Phase1 --&gt; P1_1(软件界面与坐标系)
    Phase1 --&gt; P1_2(基础命令: L直线/C圆/REC矩形)
    Phase1 --&gt; P1_3(命令行交互习惯)
    end

    subgraph &#34;Phase 2: 修改与定位&#34;
    Phase2 --&gt; P2_1(对象捕捉与追踪 F3/F11)
    Phase2 --&gt; P2_2(修改命令: CO复制/M移动/TR修剪)
    Phase2 --&gt; P2_3(偏移 O 与 镜像 MI)
    end

    subgraph &#34;Phase 3: 数据管理&#34;
    Phase3 --&gt; P3_1(图层管理 Layer: 颜色/线型)
    Phase3 --&gt; P3_2(块 Block: 零件复用与属性)
    Phase3 --&gt; P3_3(填充 Hatch: 剖切面表达)
    end

    subgraph &#34;Phase 4: 交付与规范&#34;
    Phase4 --&gt; P4_1(标注系统: 尺寸/文字/引线)
    Phase4 --&gt; P4_2(布局空间 Layout 与 打印 PDF)
    Phase4 --&gt; P4_3(国家标准: 图框与标题栏)
    end

    Phase4 --&gt; Success((达到实战水平))
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>XXX-01-AutoCAD快捷键清单</title>
        <link>https://teaize.github.io/p/xxx-01-autocad%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%B8%85%E5%8D%95/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-01-autocad%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%B8%85%E5%8D%95/</guid>
        <description>&lt;p&gt;在 CAD 圈子里，高手通常是“左手键盘，右手鼠标”：右手只管定位和点击，左手在大键盘左侧区域完成所有指令输入。&lt;/p&gt;
&lt;h3 id=&#34;1-绘图核心最常用的笔&#34;&gt;1. 绘图核心（最常用的“笔”）
&lt;/h3&gt;&lt;p&gt;这几个命令几乎构成了所有 2D 图形的骨架。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;L (Line)： 直线。&lt;/li&gt;
&lt;li&gt;PL (Polyline)： 多段线。老手更爱这个，因为它是一个整体，方便后期计算周长、面积，也方便导入 SolidWorks 转换成 3D 拉伸路径。&lt;/li&gt;
&lt;li&gt;REC (Rectangle)： 矩形。&lt;/li&gt;
&lt;li&gt;C (Circle)： 圆形。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-修改与编辑拉开差距的关键&#34;&gt;2. 修改与编辑（拉开差距的关键）
&lt;/h3&gt;&lt;p&gt;CAD 的精髓不在于画，而在于“改”。 熟练掌握这几个，你的效率会直接翻倍。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;O (Offset)： 偏移。这是使用频率最高的命令之一。画平行线、墙体、管路厚度全靠它。&lt;/li&gt;
&lt;li&gt;TR (Trim)： 修剪。剪掉多余的线。&lt;/li&gt;
&lt;li&gt;EX (Extend)： 延伸。把线延长到特定边界。&lt;/li&gt;
&lt;li&gt;CO (Copy)： 复制。&lt;/li&gt;
&lt;li&gt;M (Move)： 移动。&lt;/li&gt;
&lt;li&gt;MI (Mirror)： 镜像。画对称零件（如分析仪机箱、法兰）时的神技。&lt;/li&gt;
&lt;li&gt;S (Stretch)： 拉伸（老手秘籍）。不要一个点一个点移动，用框选直接拉伸图形的一部分，保持比例不变地缩放。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-精准控制像狙击手一样准确&#34;&gt;3. 精准控制（像狙击手一样准确）
&lt;/h3&gt;&lt;p&gt;这些是功能键，控制绘图的“手感”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;F3 (Osnap)： 对象捕捉开关。保证你的线精准连接到端点或圆心。&lt;/li&gt;
&lt;li&gt;F8 (Ortho)： 正交模式。强制只画水平或垂直线。&lt;/li&gt;
&lt;li&gt;Space / Enter： 重复上一个命令。画完一条线，按一下空格立刻又是画线命令。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-组织与管理图纸乱不乱全靠它&#34;&gt;4. 组织与管理（图纸乱不乱全靠它）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;LA (Layer)： 图层管理器。&lt;/li&gt;
&lt;li&gt;B (Block)： 定义块。比如你画好了一个“采样泵”的符号，把它变成块，以后一键调用。&lt;/li&gt;
&lt;li&gt;MA (Matchprop)： 特性匹配。俗称“格式刷”，让选中的图形立刻变得跟参考图形一模一样（颜色、图层、线型）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;给你的老手心得&#34;&gt;给你的“老手”心得：
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;空格键代替回车键： 在 AutoCAD 中，空格和回车的作用是一样的。左手大拇指永远悬停在空格键上，这能让你输入命令的速度比别人快一倍。&lt;/li&gt;
&lt;li&gt;ESC 键是救命草： 只要操作卡住了，或者想退出当前命令，疯狂按几下 ESC 永远没错。&lt;/li&gt;
&lt;li&gt;鼠标中键（滚轮）：
&lt;ul&gt;
&lt;li&gt;滚动： 缩放。&lt;/li&gt;
&lt;li&gt;按住拖动： 平移画面。&lt;/li&gt;
&lt;li&gt;双击中键： 全屏显示所有图形（图纸找不到了？双击中键就回来了）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>XXX-02-CAD初始化设置与常见命令概念</title>
        <link>https://teaize.github.io/p/xxx-02-cad%E5%88%9D%E5%A7%8B%E5%8C%96%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%E6%A6%82%E5%BF%B5/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-02-cad%E5%88%9D%E5%A7%8B%E5%8C%96%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%E6%A6%82%E5%BF%B5/</guid>
        <description>&lt;h3 id=&#34;1动态输入&#34;&gt;1、动态输入
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;动态输入（Dynamic Input，快捷键 F12） 是一项&lt;strong&gt;交互功能&lt;/strong&gt;。简单来说，它就像是把屏幕底部的“命令行”搬到了你的&lt;strong&gt;十字光标（鼠标）旁边&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在动态输入模式下，&lt;code&gt;Tab&lt;/code&gt; 键是切换输入框（比如长宽切换、长角切换）的神器。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222183243958.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222183243958.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;2autotrack自动追踪&#34;&gt;2、AutoTrack（自动追踪）
&lt;/h3&gt;&lt;p&gt;简单来说，AutoTrack 的作用是在你绘图时提供&lt;strong&gt;临时的虚线（辅助线）&lt;/strong&gt;，帮你精准对齐，而不需要你真的去画辅助线（XL 或 L）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;极轴追踪 (Polar Tracking, F10)：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;当你的鼠标移动到特定角度（如 0°、45°、90°）时，会弹出一根无限延伸的虚线，帮你锁定角度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;对象捕捉追踪 (Object Snap Tracking, F11)：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;这是高阶绘图的神技。&lt;/strong&gt; 你只需将鼠标悬停在某个点上（不点击），等出现一个小加号 &lt;code&gt;+&lt;/code&gt;（代表“获取”了该点），然后移动鼠标，CAD 就会根据这个点引出水平或垂直的对齐虚线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3选择集视觉效果&#34;&gt;3、选择集（视觉效果）
&lt;/h3&gt;&lt;p&gt;选择集—&amp;gt;视觉效果设置，这里主要分为两个核心板块：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A. &lt;strong&gt;选择预览&lt;/strong&gt; (Selection Preview)：这是指：当你的鼠标只是悬停在某个图形上，还没点击时，图形会发生什么变化。
&lt;ul&gt;
&lt;li&gt;虚线/加粗/变色： 默认情况下，对象会变亮或变成虚线。&lt;/li&gt;
&lt;li&gt;避坑指南： 建议勾选“锁定图层上的对象”。这样当你鼠标划过那些不需要改动的锁定图层时，它们不会亮起来，能极大地减少视觉干扰并提升系统流畅度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;B. &lt;strong&gt;区域选择效果&lt;/strong&gt; (Area Selection Effects)：“拉框选”时的视觉设置
&lt;ul&gt;
&lt;li&gt;窗口选择（Window Selection）： 从左往右拉，默认是蓝色框。只有完全被包围的对象才会被选中。&lt;/li&gt;
&lt;li&gt;交叉选择（Crossing Selection）： 从右往左拉，默认是绿色框。只要碰到的对象都会被选中。&lt;/li&gt;
&lt;li&gt;老手建议： &lt;strong&gt;默认的蓝色和绿色是工业标准，不建议改&lt;/strong&gt;。但如果你觉得颜色太刺眼，可以适当调高透明度（让框变得更“虚”一点），这样你能更清楚地看到框下面的线条。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;指示选择区域：它决定了当你拉动鼠标进行框选时，选框内部是否要“填充颜色”&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;新装软件设置&#34;&gt;新装软件设置
&lt;/h2&gt;&lt;p&gt;可以直接输入命令 &lt;code&gt;OP&lt;/code&gt; (Options) 打开选项面板，按以下清单进行设置：&lt;/p&gt;
&lt;h3 id=&#34;1-文件安全与兼容性防止丢档与打不开&#34;&gt;1. 文件安全与兼容性（防止丢档与打不开）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;另存为版本： 建议设置为 &lt;strong&gt;AutoCAD 2007 或 2010 DWG&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;自动保存间隔： 默认 10 分钟，建议改为 &lt;strong&gt;5 分钟&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;理由： 崩溃是常有的事，5 分钟的损失通常可以接受。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;文件扩展名： 确保勾选“保存预览图像”，这样你在文件夹里查看时能看到缩略图。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222195030344.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222195030344.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;2-视觉反馈与操作手感老手的定制化&#34;&gt;2. 视觉反馈与操作手感（老手的“定制化”）
&lt;/h3&gt;&lt;p&gt;让软件用起来更顺手，视线更舒服。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;十字光标大小： 默认是 5，建议改为 100。
&lt;ul&gt;
&lt;li&gt;理由： 光标横跨整个屏幕，能帮你快速进行视觉对齐，判断不同物体是否在同一水平线或垂直线上，甚至不需要辅助线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;背景颜色： “显示”选项卡 -&amp;gt; “颜色”。
&lt;ul&gt;
&lt;li&gt;建议：将“统一背景”设为&lt;strong&gt;纯黑色&lt;/strong&gt;或&lt;strong&gt;深灰色&lt;/strong&gt;。长时间盯着亮色非常伤眼。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;圆弧和圆的平滑度： “显示”选项卡 -&amp;gt; “显示精度”。
&lt;ul&gt;
&lt;li&gt;建议： 将“圆弧和圆的平滑度”从 100 改为 &lt;strong&gt;2000-5000&lt;/strong&gt;。这样圆看起来就是圆，而不是多边形（这只是显示问题，不影响打印，但影响心情）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222195417914.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222195417914.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;3-操作逻辑优化提速核心&#34;&gt;3. 操作逻辑优化（提速核心）
&lt;/h3&gt;&lt;p&gt;这是老手和新手拉开差距的地方。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;右键功能自定义： “用户系统配置”选项卡 -&amp;gt; “右键单击自定义”。
&lt;ul&gt;
&lt;li&gt;核心动作： 开启“间歇单击”。&lt;/li&gt;
&lt;li&gt;老手秘籍：
&lt;ul&gt;
&lt;li&gt;快点右键 = &lt;code&gt;Enter&lt;/code&gt;（确定/重复上一个命令）。&lt;/li&gt;
&lt;li&gt;长按右键 = 弹出快捷菜单。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;效果： 你的右手不再需要离开鼠标去按键盘的回车键，绘图效率飞升。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;选择集预览： 就像我们之前讨论的，在“选择集”里设置好预览过滤器，避开锁定图层。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222195808575.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222195808575.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222200020851.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222200020851.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;4-单位与精度工程图的基础&#34;&gt;4. 单位与精度（工程图的基础）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;单位设置 (命令：&lt;code&gt;UN&lt;/code&gt;)：
&lt;ul&gt;
&lt;li&gt;进入后，将长度精度设为 &lt;strong&gt;0.00&lt;/strong&gt;（机械行业通常到两位小数足够）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;插入比例：&lt;/strong&gt; 务必确认为 毫米 (Millimeters)。如果你在画 CEMS 系统图时单位是英寸，导入 SolidWorks 时比例会全部乱掉。

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222200130042.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222200130042.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;导出-profile-配置&#34;&gt;导出 Profile (配置)
&lt;/h3&gt;&lt;p&gt;当你把这一切都设置好后：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;OP&lt;/code&gt; 选项面板里点击 &lt;strong&gt;“配置”&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;“导出”&lt;/strong&gt;，存为一个 &lt;code&gt;.arg&lt;/code&gt; 文件。&lt;/li&gt;
&lt;li&gt;以后你重装系统、换电脑，或者去公司上班，只需“导入”这个文件，所有的习惯瞬间回归，不需要重新设置。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;隐藏技巧&#34;&gt;隐藏技巧
&lt;/h2&gt;&lt;h3 id=&#34;oops-命令--比-undo-更聪明的撤销&#34;&gt;OOPS 命令 —— 比 Undo 更聪明的“撤销”
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;场景： 你删掉了一个设备块，接着又画了半小时的管路，突然发现那个设备块不该删。如果按 &lt;code&gt;Ctrl+Z&lt;/code&gt;，这半小时画的管路也就没了。&lt;/li&gt;
&lt;li&gt;操作： 直接输入 &lt;strong&gt;&lt;code&gt;OOPS&lt;/code&gt;&lt;/strong&gt; 并回车。&lt;/li&gt;
&lt;li&gt;价值： 它会&lt;strong&gt;只恢复最后一次被删除的对象&lt;/strong&gt;，而不影响你删除之后进行的任何其他操作。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;夹点模式的高级循环&#34;&gt;夹点模式的高级循环
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    Start[&#34;选中对象并点击基准夹点&#34;] --&gt; Move[&#34;1.移动(Move)&#34;]
    Move -- &#34;按一次空格&#34; --&gt; Rotate[&#34;2.旋转(Rotate)&#34;]
    Rotate -- &#34;按一次空格&#34; --&gt; Scale[&#34;3.缩放(Scale)&#34;]
    Scale -- &#34;按一次空格&#34; --&gt; Mirror[&#34;4.镜像(Mirror)&#34;]
    Mirror -- &#34;按一次空格&#34; --&gt; Start
&lt;/div&gt;
&lt;h3 id=&#34;快速微调-nudge--强迫症福音&#34;&gt;快速微调 (Nudge) —— 强迫症福音
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;场景： 在画 流程图时，某个标签离管路太近了，想移动一点点，但开着捕捉（Snap）它总是跳来跳去。&lt;/li&gt;
&lt;li&gt;操作： 选中对象，按住 &lt;strong&gt;Ctrl + 键盘方向键&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;价值： 对象会按照极小的像素级单位进行微移。这在调整 P&amp;amp;ID 图纸的视觉美感时超级好用&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;前一次选择-p--选错后的救命稻草&#34;&gt;“前一次选择” (P) —— 选错后的救命稻草
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;P&lt;/code&gt; 不是一个独立的命令，而是一个“选择模式”。它只能在命令行提示 “选择对象:” (Select objects:) 的时候输入。&lt;/p&gt;
&lt;p&gt;例如下面的情况：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你执行了一个命令（比如 &lt;code&gt;M&lt;/code&gt; 移动），选中了一堆零件并完成了移动。&lt;/li&gt;
&lt;li&gt;你突然发现这堆零件还需要旋转（&lt;code&gt;RO&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;输入 &lt;code&gt;RO&lt;/code&gt; 回车。&lt;/li&gt;
&lt;li&gt;当屏幕提示“选择对象:”时，不要去手动点，直接键盘输入 &lt;strong&gt;&lt;code&gt;P&lt;/code&gt;&lt;/strong&gt; 然后按&lt;strong&gt;空格&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;奇迹发生：&lt;/strong&gt; 上一次参与移动的那堆零件瞬间被再次选中。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意：如果你选了一堆东西，然后按了 &lt;code&gt;ESC&lt;/code&gt; 没做任何动作，那么 &lt;code&gt;P&lt;/code&gt; 记录的还是上一个&lt;strong&gt;成功执行&lt;/strong&gt;的命令所选的对象。&lt;/p&gt;
&lt;h3 id=&#34;两点之间的中点-m2p--告别辅助线&#34;&gt;两点之间的中点 (M2P) —— 告别辅助线
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;场景： 你想在两个法兰或者两根管子的正中间放一个传感器，但那里没有任何特征点。&lt;/li&gt;
&lt;li&gt;操作： 在执行命令（比如 &lt;code&gt;Move&lt;/code&gt; 或 &lt;code&gt;Circle&lt;/code&gt;）&lt;strong&gt;要求指定点时&lt;/strong&gt;，输入 &lt;strong&gt;&lt;code&gt;M2P&lt;/code&gt;&lt;/strong&gt; 然后回车。&lt;/li&gt;
&lt;li&gt;动作： &lt;strong&gt;依次点击两个端点，CAD 会自动捕捉到这两点连线的中点&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;价值： 彻底不需要为了找中心而先画一根辅助线再删掉了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;捕捉自-from--偏移定位&#34;&gt;捕捉自 (FROM) —— 偏移定位
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;场景： 你想在距离柜子左边墙壁正好 水平 100，垂直 150 的地方画一个泵。&lt;/li&gt;
&lt;li&gt;操作： 在画线指令下，按 &lt;strong&gt;Shift + 右键&lt;/strong&gt; 选择 &lt;strong&gt;“捕捉自/自”&lt;/strong&gt;。点击机柜的左下角顶点，然后输入 &lt;code&gt;@150,100&lt;/code&gt;。采样泵（或圆）就精准地出现在了距离角落水平 100、垂直 150 的位置&lt;/li&gt;
&lt;li&gt;价值： 直接定位，不需要先画线再偏移。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;在位编辑&#34;&gt;在位编辑
&lt;/h3&gt;&lt;p&gt;CAD 的新版本中，&lt;code&gt;MT&lt;/code&gt; 命令后可能只会出现圈 2 的在位编辑文本框。如果想要切换旧版编辑器（如下图，除了文本框，还有文字格式弹框，方便修改文字格式），可按如下操作：&lt;/p&gt;
&lt;p&gt;命令行输入 &lt;code&gt;OP&lt;/code&gt; —&amp;gt; 输入 &lt;code&gt;MTEXTED&lt;/code&gt; 回车 —&amp;gt; 输入 &lt;code&gt;OldEditor&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251223181132.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251223181132.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;沉孔锥孔符号&#34;&gt;沉孔、锥孔符号
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;在文字编辑状态下，点击顶部功能区（Ribbon）或右键菜单中的 &lt;strong&gt;“符号” (Symbol)&lt;/strong&gt; 按钮（图标通常是一个 &lt;code&gt;@&lt;/code&gt; 符号）。&lt;/li&gt;
&lt;li&gt;在下拉列表中选择 &lt;strong&gt;“其他…” (Other…)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在弹出的“字符映射表”中：
&lt;ul&gt;
&lt;li&gt;将字体切换为 &lt;strong&gt;GDT&lt;/strong&gt;（这是机械制图专用字体）。&lt;/li&gt;
&lt;li&gt;找到沉孔（类似 &lt;code&gt;v&lt;/code&gt; 的符号）和锥孔（类似 &lt;code&gt;w&lt;/code&gt; 的符号）。&lt;/li&gt;
&lt;li&gt;点击“选择” -&amp;gt; “复制”，回到 CAD 里粘贴即可。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251223182006.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251223182006.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;更简单一点的方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在文字编辑状态下，先切换为 gdt 字体&lt;/li&gt;
&lt;li&gt;英文输入法，小写状态下，输入 v、w、x 就可以自动如下符号&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;![[Pasted image 20251223182514.png]]&lt;/p&gt;
&lt;h3 id=&#34;巧用多重引线样式-multileader-style&#34;&gt;巧用“多重引线样式” (Multileader Style)
&lt;/h3&gt;&lt;p&gt;标注孔位时，我们通常不只输入一个符号，而是“符号 + 文字”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入 &lt;strong&gt;&lt;code&gt;MLS&lt;/code&gt;&lt;/strong&gt; (Multileader Style) 建立一个新样式，命名为“孔标注”。&lt;/li&gt;
&lt;li&gt;在“内容”选项卡中，预设好文字内容（例如先打个 &lt;code&gt;v&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;以后标注：&lt;/strong&gt; 直接点一下孔，引线拉出来，沉孔符号就在那等着你了，你只需要填数字。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251223183457531.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251223183457531.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;备忘录习惯在-dwt-模板里留一行样板&#34;&gt;“备忘录”习惯：在 DWT 模板里留一行“样板”
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;在你的标准模板文件（&lt;code&gt;.dwt&lt;/code&gt;）的图框外（非打印区域），写下一行所有你常用的特种符号、特殊字体。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;以后画图：&lt;/strong&gt; 缺符号了？直接往左边扫一眼，用 &lt;strong&gt;&lt;code&gt;MA&lt;/code&gt;&lt;/strong&gt; (格式刷) 或者 &lt;strong&gt;&lt;code&gt;CO&lt;/code&gt;&lt;/strong&gt; (复制) 过来改个数字就行。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;核心的控制码-control-codes&#34;&gt;核心的“控制码” (Control Codes)
&lt;/h3&gt;&lt;p&gt;除了 GDT 字体，有些通用符号是可以用 &lt;code&gt;%%&lt;/code&gt; 开头的控制码输入的，这在任何编辑器下都有效：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;输入代码&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;对应符号&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;记忆口诀&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;&lt;code&gt;%%c&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$\phi$ (直径)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;C&lt;/strong&gt;ircle&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;&lt;code&gt;%%d&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$^\circ$ (度数)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;D&lt;/strong&gt;egree&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;&lt;code&gt;%%p&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$\pm$ (正负号)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;P&lt;/strong&gt;lus/Minus&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>XXX-02-CAD样式管理</title>
        <link>https://teaize.github.io/p/xxx-02-cad%E6%A0%B7%E5%BC%8F%E7%AE%A1%E7%90%86/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-02-cad%E6%A0%B7%E5%BC%8F%E7%AE%A1%E7%90%86/</guid>
        <description>&lt;p&gt;因为有经验，这里直接开始上强度了。&lt;/p&gt;
&lt;p&gt;为什么要搞样式？为了“&lt;strong&gt;一处修改，全局更新&lt;/strong&gt;”，以及“&lt;strong&gt;多人协作，标准统一&lt;/strong&gt;”。以下是高阶绘图必须精通的四大样式体系：&lt;/p&gt;
&lt;h3 id=&#34;1-文字样式-text-style--命令st-style&#34;&gt;1. 文字样式 (Text Style) —— 命令：&lt;code&gt;ST&lt;/code&gt; (Style)
&lt;/h3&gt;&lt;p&gt;新手习惯随便选个宋体或黑体，老手则会建立严格的体系。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SHX 字体 vs. TrueType 字体：
&lt;ul&gt;
&lt;li&gt;老手建议： 尽量用 &lt;strong&gt;SHX（大字体）&lt;/strong&gt;。原因：渲染快、不卡顿，且符合国家机械制图标准（如 &lt;code&gt;gbenor.shx&lt;/code&gt; + &lt;code&gt;gbcbig.shx&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;TrueType（如微软雅黑）： 只用于封面或需要美观的说明，因为它非常占内存，图纸大了会卡。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;字高设为 0： 在样式里将字高设为 &lt;code&gt;0&lt;/code&gt;。
&lt;ul&gt;
&lt;li&gt;秘籍： 如果样式里写死了高度（如 3.5），你在画图时就无法手动调整。设为 0 可以让你在标注或输入文字时灵活定义高度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-标注样式-dimension-style--命令d-dimstyle&#34;&gt;2. 标注样式 (Dimension Style) —— 命令：&lt;code&gt;D&lt;/code&gt; (Dimstyle)
&lt;/h3&gt;&lt;p&gt;这是最复杂的部分，决定了图纸的“专业感”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;五大核心选项卡：
&lt;ul&gt;
&lt;li&gt;线 (Lines)： 这里的重点是“超出尺寸线”和“起点偏移量”。这决定了标注线和物体之间那个标准的“留白”。&lt;/li&gt;
&lt;li&gt;符号和箭头 (Symbols and Arrows)： 机械图用实心闭合箭头，建筑图用倾斜斜杠。&lt;/li&gt;
&lt;li&gt;文字 (Text)： 建议关联你刚才建好的“文字样式”。&lt;/li&gt;
&lt;li&gt;调整 (Fit)： &lt;strong&gt;最关键！&lt;/strong&gt; 这里有个“使用全局比例”。如果你在画一个很大的厂房，标注看不见，不要去改文字大小，去改这个全局比例。&lt;/li&gt;
&lt;li&gt;主单位 (Primary Units)： 设置精度（如 0.00）。老手还会在这里设置“消零”（隐藏 10.00 后面的 00）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-多重引线样式-multileader-style--命令mls&#34;&gt;3. 多重引线样式 (Multileader Style) —— 命令：&lt;code&gt;MLS&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;当你需要给零件写编号（如 ①、②）或写技术说明时，这个比普通文字好用百倍。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优势： 它可以让你轻松对齐一排引线（命令：&lt;code&gt;MLEADERALIGN&lt;/code&gt;），让图纸看起来像强迫症一样整齐。
内容类型： 引线不仅能写字，还能直接关联“块”（比如做一个圆圈里面带数字的块作为零件球标）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-注释性-annotative--高阶必杀技&#34;&gt;4. 注释性 (Annotative) —— 高阶必杀技
&lt;/h3&gt;&lt;p&gt;这是新手和老手的&lt;strong&gt;分水岭&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;痛点： 以前我们画 1:10 和 1:100 的图，文字大小要手动算。&lt;/li&gt;
&lt;li&gt;原理： 开启“注释性”后，无论你把图纸缩放到什么比例，打印出来的文字永远是 3.5mm 高。&lt;/li&gt;
&lt;li&gt;建议： 刚开始可能觉得难用，但一旦掌握了“注释性比例”，你就不再需要为缩放比例头疼了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5-高阶玩家的大招图纸模板-dwt&#34;&gt;5. 高阶玩家的“大招”：图纸模板 (.DWT)
&lt;/h3&gt;&lt;p&gt;如果你每次打开 CAD 都要重新设置一遍这些样式，那不叫高手。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;找个空文件，把你的文字样式（中文、英文）、标注样式（1:1, 1:2, 1:10）、图层（中心线、轮廓、标注）、图框全部设置好。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;另存为 &lt;code&gt;.DWT&lt;/code&gt; 格式&lt;/strong&gt;（AutoCAD 图形模板）。&lt;/li&gt;
&lt;li&gt;在设置里把这个模板设为默认启动文件。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这样，你每次“Ctrl+N”新建时，自带一套标准的“军火库”。&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    Root((CAD 高阶标准化系统)) --&gt; Styles[样式管理 System Styles]
    Root --&gt; Intelligence[智能特性 Intelligence]
    Root --&gt; Assets[资产管理 Assets]
    Root --&gt; Output[最终交付 Output]

    subgraph &#34;Styles: 视觉统一&#34;
    Styles --&gt; ST[文字样式 ST: SHX字体/字高归零]
    Styles --&gt; D[标注样式 D: 全局比例/消零/留白]
    Styles --&gt; MLS[多重引线 MLS: 对齐规则/块关联]
    end

    subgraph &#34;Intelligence: 动态缩放&#34;
    Intelligence --&gt; AN[注释性 Annotative: 异比例自动缩放]
    Intelligence --&gt; DB[动态块 Dynamic Blocks: 参数化零件符号]
    end

    subgraph &#34;Assets: 组织架构&#34;
    Assets --&gt; LA[图层体系 Layer: 命名规范/线宽映射]
    Assets --&gt; Template[DWT 模板: 预设所有样式/标题栏]
    end

    subgraph &#34;Output: 跨软件联动&#34;
    Output --&gt; PDF[标准打印: 颜色样式表 CTB]
    Output --&gt; SW[SolidWorks 映射: 3D转2D图层自动归类]
    end

    %% 行业应用关联
    CEMS[针对 CEMS/分析仪行业] -.-&gt; DB
    CEMS -.-&gt; LA
    CEMS -.-&gt; SW
&lt;/div&gt;
&lt;h3 id=&#34;如何解读这个框架&#34;&gt;如何解读这个框架？
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;左侧（Styles）是你的“基本功”： 只有把文字、标注、引线的样式定死了，你的图纸看起来才像是一个人的作品，而不是东拼西凑的。&lt;/li&gt;
&lt;li&gt;中间（Intelligence）是“效率助推器”：
&lt;ul&gt;
&lt;li&gt;注释性让你在画大布局图（1:100）和局部细节图（1:10）时，标注文字的大小看起来是一模一样的。&lt;/li&gt;
&lt;li&gt;动态块非常适合你：比如你定义一个“阀门”块，可以通过点击下拉菜单切换它是“开”还是“关”，而不需要画两个块。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;右侧（Assets &amp;amp; Output）是“专业交付”：
&lt;ul&gt;
&lt;li&gt;DWT 模板是你所有心血的结晶，建议你一旦定好一套满意的样式，立刻封存为模板。&lt;/li&gt;
&lt;li&gt;SolidWorks 映射：当你从 SW 导出工程图到 CAD 时，如果映射做好了，CAD 会自动识别哪些是粗实线（轮廓），哪些是细实线（标注），并自动分层。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>XXX-03-CAD块</title>
        <link>https://teaize.github.io/p/xxx-03-cad%E5%9D%97/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-03-cad%E5%9D%97/</guid>
        <description>&lt;p&gt;简单来说，块就是将多个图形对象（线、圆、文字等）“打包”成一个单一的整体。你可以把它想象成一个“印章”或者一个“乐高零件”。&lt;/p&gt;
&lt;h3 id=&#34;框架图&#34;&gt;框架图
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    Objects[散乱的线/圆/弧] -- &#34;B (创建)&#34; --&gt; BlockDef[块定义: 存在于当前文件]
    BlockDef -- &#34;W (写块)&#34; --&gt; DWGFile[独立的 DWG 文件: 存入个人库]
    
    DWGFile -- &#34;I (插入)&#34; --&gt; Drawing[当前图纸中的实例]
    BlockDef -- &#34;I (插入)&#34; --&gt; Drawing
    
    Drawing -- &#34;BE (编辑)&#34; --&gt; Change[修改形状]
    Change -- &#34;保存&#34; --&gt; Update[全图所有实例自动同步]
    
    Drawing -- &#34;X (炸开)&#34; --&gt; Objects[变回散乱的线]
&lt;/div&gt;
&lt;h3 id=&#34;一-为什么要用块核心价值&#34;&gt;一、 为什么要用“块”？（核心价值）
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;全局更新（牵一发而动全身）： 如果你在图纸里用了 100 个采样泵符号，后来发现泵的形状画错了。
&lt;ul&gt;
&lt;li&gt;不用块： 你得手动改 100 次。&lt;/li&gt;
&lt;li&gt;用了块： &lt;strong&gt;你只需修改“块定义”，全图 100 个泵会自动同步更新&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;减小文件体积： &lt;strong&gt;CAD 只记录一个块的定义，其余的只是“引用”&lt;/strong&gt;。这能让复杂的系统图运行得更流畅。&lt;/li&gt;
&lt;li&gt;标准化管理： 你可以建立一套标准件库（分析仪、机柜、法兰、单向阀），保证全公司画出来的图纸符号一模一样。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;二-块的常用操作指令&#34;&gt;二、 块的常用操作指令
&lt;/h3&gt;&lt;h4 id=&#34;1-创建块b-block&#34;&gt;1. 创建块：&lt;code&gt;B&lt;/code&gt; (Block)
&lt;/h4&gt;&lt;p&gt;这是“打包”的过程。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;关键点：基点 (Base Point)。这是你以后插入块时的“手抓点”。&lt;/li&gt;
&lt;li&gt;老手建议：永远不要选默认的 (0,0,0)，务必在图形上点击一个有意义的点（如圆心或左下角）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-插入块i-insert&#34;&gt;2. 插入块：&lt;code&gt;I&lt;/code&gt; (Insert)
&lt;/h4&gt;&lt;p&gt;把做好的印章盖到图纸上。&lt;/p&gt;
&lt;h4 id=&#34;3-编辑块be-bedit&#34;&gt;3. 编辑块：&lt;code&gt;BE&lt;/code&gt; (Bedit)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;可直接双击块，进入块编辑器，进入一个专用的灰白色背景空间，修改块的形状。&lt;/li&gt;
&lt;li&gt;修改完点击“保存并退出”，全图的同名块都会变。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-写块w-wblock&#34;&gt;4. 写块：&lt;code&gt;W&lt;/code&gt; (WBlock)
&lt;/h4&gt;&lt;p&gt;这是建立“个人军火库”的神技。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;普通的块（B）只存在于当前文件里。&lt;code&gt;W&lt;/code&gt; 命令能把块单独存成一个硬盘上的 &lt;code&gt;.dwg&lt;/code&gt; 文件，以后你打开任何新工程，都能直接调用这个文件。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;5-清理块pu&#34;&gt;5. 清理块：&lt;code&gt;PU&lt;/code&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;删除块： 只是把图面上的“实例”删掉了，但这个块的“定义”依然像幽灵一样躲在文件的后台。&lt;/li&gt;
&lt;li&gt;清理 (Purge)： 它是去后台“查户口”，把那些在图面上已经没有被使用的块定义、图层、样式彻底删掉。&lt;/li&gt;
&lt;li&gt;什么时候用 &lt;code&gt;PU&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;减小文件体积、解决卡顿&lt;/li&gt;
&lt;li&gt;清理冗余图层：当你删除了所有标注，但“标注图层”死活删不掉时，用 &lt;code&gt;PU&lt;/code&gt; 就能把它彻底拔除。&lt;/li&gt;
&lt;li&gt;交付标准： 给客户发图纸前，老手都会 &lt;code&gt;PU&lt;/code&gt; 一遍，显得图纸非常干净、专业。可参考 [[XXX-05-CAD清理组合拳]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;三-老手的块进阶准则&#34;&gt;三、 老手的“块”进阶准则
&lt;/h3&gt;&lt;h4 id=&#34;1-永远在0-图层画块&#34;&gt;1. 永远在“0 图层”画块
&lt;/h4&gt;&lt;p&gt;这是 CAD 里最容易踩的坑。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;规则： 在画块的原始对象时，务必把它们放在 &lt;code&gt;0&lt;/code&gt; 图层，颜色设为 &lt;code&gt;Bylayer&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;结果： 这样当你把块插入到“设备图层”时，它会变绿；插入到“标注图层”时，它会变红。&lt;strong&gt;如果你在画块时就用了特定图层，它就“死”在那儿了，无法随层变色&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-属性块att-attribute&#34;&gt;2. 属性块：&lt;code&gt;ATT&lt;/code&gt; (Attribute)
&lt;/h4&gt;&lt;p&gt;如果你想让块带上信息（比如这个泵的型号、功率、厂家），你需要使用 &lt;strong&gt;“属性”&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你可以做一个带文字的块，每次插入时，它会弹窗问你：“这个零件的编号是多少？”。这样你的图纸不仅是画，还是一张&lt;strong&gt;数据库&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>XXX-04-CAD文字样式</title>
        <link>https://teaize.github.io/p/xxx-04-cad%E6%96%87%E5%AD%97%E6%A0%B7%E5%BC%8F/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-04-cad%E6%96%87%E5%AD%97%E6%A0%B7%E5%BC%8F/</guid>
        <description>&lt;p&gt;处理别人图纸时常见的两个噩梦是：&lt;strong&gt;打开全是问号（乱码）和文字样式多得数不清（冗余）&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;一-文字样式的核心st-命令&#34;&gt;一、 文字样式的核心：&lt;code&gt;ST&lt;/code&gt; 命令
&lt;/h3&gt;&lt;p&gt;当你输入 &lt;code&gt;ST&lt;/code&gt; 弹出对话框时，有三个参数决定了文字的命运：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;SHX 字体 vs. TrueType 字体：
&lt;ul&gt;
&lt;li&gt;SHX（单线体）： 图标是个“A”，CAD 自家格式。优点是渲染极快，占内存极小。&lt;/li&gt;
&lt;li&gt;TTF（填充体）： 图标是个“双 T”，如微软雅黑。优点是美观，缺点是文件大了以后缩放图纸会卡。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;大字体（Big Font）：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;这是处理中文字体的关键&lt;/strong&gt;。在 SHX 模式下，左边选 &lt;code&gt;txt.shx&lt;/code&gt; 或 &lt;code&gt;gbenor.shx&lt;/code&gt;（常规字母），&lt;strong&gt;必须勾选“使用大字体”&lt;/strong&gt;，右边选 &lt;code&gt;gbcbig.shx&lt;/code&gt;（中文字符），这样才能正常显示中文。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;高度设为 0：
&lt;ul&gt;
&lt;li&gt;老手准则： 在样式设置里，高度永远设为 &lt;code&gt;0&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;原因： 如果设为固定高度（如 3.5），那么在标注样式里你就改不动它了。设为 0，它就是“活”的，可以随标注样式的比例缩放。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;二-解决满屏问号的三个招式&#34;&gt;二、 解决“满屏问号”的三个招式
&lt;/h3&gt;&lt;p&gt;当你打开厂家的图纸，发现文字全是 &lt;code&gt;?&lt;/code&gt;，是因为你电脑里缺他用的那个字体文件（&lt;code&gt;.shx&lt;/code&gt;）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一招：硬核补全
&lt;ul&gt;
&lt;li&gt;看报错提示缺什么（比如 &lt;code&gt;hztxt.shx&lt;/code&gt;），去网上下载一个，扔进 CAD 安装目录下的 &lt;code&gt;Fonts&lt;/code&gt; 文件夹里。重启 CAD 即可。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第二招：强制替换（临时应急）
&lt;ul&gt;
&lt;li&gt;打开图纸时，如果弹出“缺少 SHX 文件”，不要点取消，选择“为每个 SHX 文件指定替换文件”，然后统一选择 &lt;code&gt;gbcbig.shx&lt;/code&gt; 或 &lt;code&gt;hztxt.shx&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第三招：修改系统变量（一劳永逸）
&lt;ul&gt;
&lt;li&gt;输入 &lt;code&gt;FONTALT&lt;/code&gt;（默认替换字体），将其值改为 &lt;code&gt;gbcbig.shx&lt;/code&gt;。这样以后再遇到缺字体的图纸，CAD 会自动用这个字体顶替，不再弹窗问你。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;三-如何清理样式爆炸的图纸&#34;&gt;三、 如何清理“样式爆炸”的图纸？
&lt;/h3&gt;&lt;p&gt;如果你发现图纸里有 50 个文字样式（比如 &amp;ldquo;Style1&amp;rdquo;, &amp;quot; 新建 1&amp;quot;, &amp;ldquo;Standard_1&amp;rdquo; 等），你需要进行“归一化”处理：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;快速选择归类（QSELECT）：
&lt;ul&gt;
&lt;li&gt;右键 -&amp;gt; 快速选择。&lt;/li&gt;
&lt;li&gt;对象类型选“文字”，特性选“文字样式”。&lt;/li&gt;
&lt;li&gt;把所有乱七八糟样式的文字，在特性面板里一键改为你自定义的“标准样式”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;组合拳清理（PU）：
&lt;ul&gt;
&lt;li&gt;改完之后，运行我们之前说的 &lt;code&gt;PU&lt;/code&gt; 命令。&lt;strong&gt;那些没有被任何文字引用的“废弃样式”就会被彻底删掉&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;标准命名法：
&lt;ul&gt;
&lt;li&gt;不要按字体命名（如“微软雅黑”），要&lt;strong&gt;按用途命名&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;建议命名：&lt;code&gt;0_Standard&lt;/code&gt;（通用文字）、&lt;code&gt;0_Title&lt;/code&gt;（图框标题）、&lt;code&gt;0_Note&lt;/code&gt;（技术要求）。加个 &lt;code&gt;0&lt;/code&gt; 是为了让它们永远排在样式列表的最顶端。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;字体管理逻辑流程图&#34;&gt;字体管理逻辑流程图
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    Open[打开外部图纸] --&gt; Check{是否有问号?}
    Check -- 是 --&gt; Substitution[1.FONTALT自动替换]
    Substitution --&gt; ST_Dialog[2.ST界面重新指定大字体]
    Check -- 否 --&gt; Bloat{样式是否冗余?}
    
    Bloat -- 是 --&gt; QSELECT[3.QSELECT全选异类样式]
    QSELECT --&gt; Change[4.特性面板统一修改为标准样式]
    Change --&gt; PURGE[5.PU清理无效样式定义]
    
    PURGE --&gt; Final[干净、标准的图纸]
    ST_Dialog --&gt; Final
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>XXX-05-CAD清理组合拳</title>
        <link>https://teaize.github.io/p/xxx-05-cad%E6%B8%85%E7%90%86%E7%BB%84%E5%90%88%E6%8B%B3/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-05-cad%E6%B8%85%E7%90%86%E7%BB%84%E5%90%88%E6%8B%B3/</guid>
        <description>&lt;p&gt;如果你的图纸经常崩溃、显示异常，或者从厂家拷贝来的图块带了大量“脏数据”，这套流程就是你的救命稻草。这套组合拳的专业顺序通常是：&lt;strong&gt;Audit (体检) -&amp;gt; Overkill (瘦身) -&amp;gt; Purge (清扫)&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;第一式audit体检修复&#34;&gt;第一式：Audit（体检修复）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;功能： 扫描整个图纸的数据库，寻找并修复逻辑错误。&lt;/li&gt;
&lt;li&gt;应用场景： 图纸无故卡顿、复制粘贴失效、或者有些图形“看得见点不着”时。&lt;/li&gt;
&lt;li&gt;老手操作：
&lt;ul&gt;
&lt;li&gt;输入 &lt;code&gt;AUDIT&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;命令行询问“是否修复发现的任何错误？”，输入 &lt;code&gt;Y&lt;/code&gt;（是）。&lt;/li&gt;
&lt;li&gt;注： 它会像杀毒软件一样扫描一遍，最后告诉你修复了多少个错误对象。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第二式overkill重叠清理&#34;&gt;第二式：Overkill（重叠清理）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;功能： 自动删除重叠的线条、合并部分重叠的线。&lt;/li&gt;
&lt;li&gt;应用场景： 非常关键！尤其是当你准备把 AutoCAD 的 2D 草图导入 &lt;strong&gt;SolidWorks&lt;/strong&gt; 建模时。SolidWorks 的草图最怕重叠线（会报错、无法拉伸），&lt;code&gt;Overkill&lt;/code&gt; 能一键解决。&lt;/li&gt;
&lt;li&gt;老手设置：
&lt;ul&gt;
&lt;li&gt;输入 &lt;code&gt;OV&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;全选图纸。&lt;/li&gt;
&lt;li&gt;在弹出的对话框中，勾选**“忽略特性”**（比如颜色、线型）。这样即使一根红线和一根蓝线重叠，它也会把多余的那根删掉，只留下一根。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三式-purge深度强力清扫&#34;&gt;第三式：-Purge（深度强力清扫）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;功能： 除了普通 &lt;code&gt;PU&lt;/code&gt; 能删掉的块和图层，这一招能删掉隐藏得更深的“注册应用程序”数据（Regapps）。&lt;/li&gt;
&lt;li&gt;现象： 有时候图纸里明明没东西，文件却有几十 MB 大，普通 &lt;code&gt;PU&lt;/code&gt; 根本没用，这就是 &lt;code&gt;Regapps&lt;/code&gt; 在作怪。&lt;/li&gt;
&lt;li&gt;老手操作：
&lt;ol&gt;
&lt;li&gt;输入 &lt;code&gt;-PURGE&lt;/code&gt;（&lt;strong&gt;注意前面有个减号&lt;/strong&gt;，这会启动命令行版本）。&lt;/li&gt;
&lt;li&gt;输入 &lt;code&gt;R&lt;/code&gt;（代表 Regapps）。&lt;/li&gt;
&lt;li&gt;询问“要清理的名称”，直接按 &lt;strong&gt;Enter&lt;/strong&gt;（默认全选）。&lt;/li&gt;
&lt;li&gt;询问“是否确认每个要清理的名称”，输入 &lt;code&gt;N&lt;/code&gt;（否）。&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;奇迹时刻：你会看到命令行刷刷刷删掉成千上万个没用的注册项。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第四式组合拳后的收招regen&#34;&gt;第四式：组合拳后的“收招”——REGEN
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;功能： 重新生成图形（Regenerate）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用：&lt;/strong&gt; 所有的清理做完后，输入 &lt;code&gt;RE&lt;/code&gt;，让 CAD 重新计算一次当前的显示数据。你会发现圆变圆了，线条缩放也顺滑了。&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;昵称&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;解决的问题&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;对 SolidWorks 的意义&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Audit&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;医生&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;修复数据库底层的“断裂”和错误。&lt;/td&gt;
          &lt;td&gt;保证文件导出时数据不损坏。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Overkill&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;裁缝&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;删除重叠线、多余的点、合并共线。&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;最高。&lt;/strong&gt; 避免 3D 建模时草图闭合失败。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;-Purge&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;清洁工&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;删除顽固的 Regapps 和无用块。&lt;/td&gt;
          &lt;td&gt;减小体积，防止 3D 软件读取文件时假死。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;工作流&#34;&gt;工作流
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    Start[获取外部厂家图纸] --&gt; Step1[AUDIT: 逻辑体检修复]
    Step1 --&gt; Step2[OV: 清理重叠几何体]
    Step2 --&gt; Step3[PU: 清除无用块/图层]
    Step3 --&gt; Step4[-PU &gt; R: 强力清除 Regapps]
    Step4 --&gt; Step5[RE: 重新生成显示]
    Step5 --&gt; End[干净专业的工程模板]
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>XXX-06-CAD标注样式</title>
        <link>https://teaize.github.io/p/xxx-06-cad%E6%A0%87%E6%B3%A8%E6%A0%B7%E5%BC%8F/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/xxx-06-cad%E6%A0%87%E6%B3%A8%E6%A0%B7%E5%BC%8F/</guid>
        <description>&lt;p&gt;标注样式管理器（Dimension Style Manager，快捷键 &lt;code&gt;D&lt;/code&gt;） 是 AutoCAD 里参数最密集、最让人头大的一块&lt;/p&gt;
&lt;h3 id=&#34;一-标注样式的四大支柱&#34;&gt;一、 标注样式的“四大支柱”
&lt;/h3&gt;&lt;h4 id=&#34;1-线与箭头-lines--symbols--长什么样&#34;&gt;1. 线与箭头 (Lines &amp;amp; Symbols) —— “长什么样”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;超出尺寸线 (Extend beyond dim lines)： 决定了标注的那根斜横线往外伸出多少。&lt;/li&gt;
&lt;li&gt;起点偏移量 (Offset from origin)： &lt;strong&gt;老手非常在意这个。&lt;/strong&gt; 决定了标注线和物体之间留出的空隙。如果没有空隙，图纸看起来会糊成一团，分不清哪是零件，哪是标注。&lt;/li&gt;
&lt;li&gt;箭头大小： 机械制图通常用 2.5 或 3.5。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-文字-text--怎么读&#34;&gt;2. 文字 (Text) —— “怎么读”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;文字样式： 直接关联 [[XXX-04-CAD文字样式]] 讲过的 &lt;code&gt;ST&lt;/code&gt; 设置好的样式。&lt;/li&gt;
&lt;li&gt;从尺寸线偏移 (Offset from dim line)： 文字和线之间的距离，太近了打印出来看不清，太远了容易混淆。&lt;/li&gt;
&lt;li&gt;文字对齐： 建议选“与尺寸线对齐”，这样斜着的线，文字也是斜着的，符合制图规范。&lt;/li&gt;
&lt;li&gt;角度的数字一律写成&lt;strong&gt;水平方向&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这里查看国标 &lt;code&gt;GB/T 4458.4-2003 机械制图 尺寸注法&lt;/code&gt;：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;线性尺寸数字的方向，有以下两种注写方法，&lt;strong&gt;一般应采用方法 1 注写&lt;/strong&gt;；在不致引起误解时，也允许采用方法 2。但在一张图样中，应尽可能采用同一种方法。
方法 1：数字应按图 18 所示的方向注写，并尽可能避免在图示 30° 范围内标注尺寸，当无法避免时可按图 19 的形式标注。

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222202238086.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222202238086.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;


方法 2：对于非水平方向的尺寸，其数字可水平地注写在尺寸线的中断处（图 20、图 21）。
![[Pasted image 20251222202259.png]]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;3-调整-fit--核心大脑&#34;&gt;3. 调整 (Fit) —— “核心大脑”
&lt;/h4&gt;&lt;p&gt;这是整个管理器里最重要的一页。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;全局比例 (Use overall scale of)：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;如果你画的是 1:1 的零件，这里填 1。&lt;/li&gt;
&lt;li&gt;如果你画的是 1:100 的厂房布局，这里填 100。&lt;/li&gt;
&lt;li&gt;秘籍： 它会一键把箭头、文字、间距全部放大 100 倍，而不需要你一个个去改。&lt;/li&gt;
&lt;li&gt;优化： 勾选“在尺寸界线之间绘制尺寸线”，防止文字乱跳。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-主单位-primary-units--精度控制&#34;&gt;4. 主单位 (Primary Units) —— “精度控制”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;精度： 机械加工通常设为 &lt;code&gt;0.00&lt;/code&gt;，绘制系统流程图（例如 P&amp;amp;ID）时可设为 &lt;code&gt;0&lt;/code&gt; 即可。&lt;/li&gt;
&lt;li&gt;消零 (Zero Suppression)：
&lt;ul&gt;
&lt;li&gt;勾选“后缀 (Trailing)”。&lt;/li&gt;
&lt;li&gt;效果： 10.000 会显示为 10，10.500 显示为 10.5。这能让图纸瞬间清爽很多。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222204149666.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251222204149666.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-26-实现Modbus RTU 协议</title>
        <link>https://teaize.github.io/p/zzz-26-%E5%AE%9E%E7%8E%B0modbus-rtu-%E5%8D%8F%E8%AE%AE/</link>
        <pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-26-%E5%AE%9E%E7%8E%B0modbus-rtu-%E5%8D%8F%E8%AE%AE/</guid>
        <description>&lt;p&gt;前几篇[[ZZZ-23-零点校准]]、[[ZZZ-24-满量程校准]]已经把分析仪的“心脏”（采集与校准）做好了，现在我们要给它装上“嘴巴”，让它能和工业控制系统（PLC/DCS）交流&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-14-串口通讯UART</title>
        <link>https://teaize.github.io/p/zzz-14-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AFuart/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-14-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AFuart/</guid>
        <description>&lt;p&gt;如果说 GPIO 和 PWM 是单片机的“手脚”，定时器是“脉搏”，那么 &lt;strong&gt;串口通信（UART）&lt;/strong&gt; 就是单片机的“嘴巴”和“耳朵”。有了它，单片机就能把内部的运行数据（比如传感器的数值、调试信息）发送给电脑显示出来，也能接收电脑发来的指令。&lt;/p&gt;
&lt;h3 id=&#34;1-什么是-uart通俗理解&#34;&gt;1. 什么是 UART？（通俗理解）
&lt;/h3&gt;&lt;p&gt;UART (Universal Asynchronous Receiver/Transmitter)，即通用异步收发传输器。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;异步 (Asynchronous)：意思是通信双方没有共同的时钟线（不像 SPI 或 I2C 有根时钟线牵着）。&lt;/li&gt;
&lt;li&gt;收发 (Receiver/Transmitter)：它有两根核心信号线：
&lt;ul&gt;
&lt;li&gt;TX (Transmit)：发送数据（嘴巴）。&lt;/li&gt;
&lt;li&gt;RX (Receive)：接收数据（耳朵）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;全双工：因为有两根线，单片机可以一边说一边听，互不干扰。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-uart-的接头暗号通信参数&#34;&gt;2. UART 的“接头暗号”（通信参数）
&lt;/h3&gt;&lt;p&gt;既然没有时钟线同步，通信双方必须提前约定好“说话的速度”和“说话的格式”，否则就是鸡同鸭讲，显示乱码。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;参数名称&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;常用设置&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;形象比喻&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;波特率 (Baud Rate)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;115200&lt;/strong&gt; / 9600&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;说话的速度&lt;/strong&gt;（每秒钟发送多少个比特位）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;停止位 (Stop Bits)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;句号&lt;/strong&gt;（一段话结束的标志）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;数据位 (Data Bits)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;8 bits&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;单词长度&lt;/strong&gt;（每次发 8 位，刚好一个字节）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;奇偶校验 (Parity)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;None&lt;/strong&gt; (无)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;逻辑纠错&lt;/strong&gt;（检查话有没有传错）。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;3-硬件连接必须交叉&#34;&gt;3. 硬件连接：必须“交叉”
&lt;/h3&gt;&lt;p&gt;这是初学者最容易犯错的地方。单片机和电脑（通过 USB-TTL 模块）连接时：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;单片机的 TX（PA9）&lt;/strong&gt; $\rightarrow$ &lt;strong&gt;USB-TTL 的 RX&lt;/strong&gt;（我的嘴对着你的耳朵）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;单片机的 RX（PA10）&lt;/strong&gt; $\leftarrow$ &lt;strong&gt;USB-TTL 的 TX&lt;/strong&gt;（你的嘴对着我的耳朵）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GND&lt;/strong&gt; $\leftrightarrow$ &lt;strong&gt;GND&lt;/strong&gt;（必须共地，参考电压一致）&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    subgraph STM32_MCU [STM32 开发板]
        TX1[PA9 / TX]
        RX1[PA10 / RX]
        GND1[GND]
    end

    subgraph USB_TTL [USB-TTL 模块]
        RX2[RXD]
        TX2[TXD]
        GND2[GND]
    end

    TX1 --- RX2
    RX1 --- TX2
    GND1 --- GND2
&lt;/div&gt;
&lt;h3 id=&#34;4-stm32cubeide-配置步骤&#34;&gt;4. STM32CubeIDE 配置步骤
&lt;/h3&gt;&lt;p&gt;我们通常使用 &lt;strong&gt;USART1&lt;/strong&gt;（它是单片机里最高速、最常用的串口）。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;开启串口：在 &lt;code&gt;.ioc&lt;/code&gt; 文件左侧找到 &lt;strong&gt;Connectivity -&amp;gt; USART1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;设置模式：将 &lt;strong&gt;Mode&lt;/strong&gt; 设为 &lt;strong&gt;Asynchronous&lt;/strong&gt;（异步）。
&lt;ul&gt;
&lt;li&gt;你会发现引脚图上 &lt;strong&gt;PA9 (TX)&lt;/strong&gt; 和 &lt;strong&gt;PA10 (RX)&lt;/strong&gt; 变绿了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;配置参数：
&lt;ul&gt;
&lt;li&gt;Baud Rate: &lt;strong&gt;115200&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;Word Length: &lt;strong&gt;8 bits&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;Stop Bits: &lt;strong&gt;1&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;生成代码：按 &lt;code&gt;Ctrl + S&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221091559217.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221091559217.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;5-核心代码实现&#34;&gt;5. 核心代码实现
&lt;/h3&gt;&lt;h4 id=&#34;a-发送数据让单片机说话&#34;&gt;A. 发送数据（让单片机说话）
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Running...&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_UART_Transmit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 每秒发一次
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 3 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;![[Pasted image 20251221092640.png]]&lt;/p&gt;
&lt;h4 id=&#34;b-接收数据让单片机听话&#34;&gt;B. 接收数据（让单片机听话）
&lt;/h4&gt;&lt;p&gt;在串口通信中，让单片机接收数据（听话）通常有两种方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;轮询接收（Polling）：单片机死等电脑发消息，不来就不干别的。&lt;/li&gt;
&lt;li&gt;中断接收（Interrupt）：单片机边干活边等，电脑一发消息就立刻停下活去处理。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在实际开发中，&lt;strong&gt;中断接收&lt;/strong&gt;才是最专业、最常用的，这里单独开一篇学习—&amp;gt;[[ZZZ-15-串口通讯中断接收]]&lt;/p&gt;
&lt;h3 id=&#34;6-一个进阶的小技巧重定向-printf&#34;&gt;6. 一个进阶的小技巧：重定向 &lt;code&gt;printf&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;如果你想像在电脑上写 C 语言一样使用 &lt;code&gt;printf(&amp;quot;数值是: %d&amp;quot;, value);&lt;/code&gt;，你需要做一个“重定向”。&lt;/p&gt;
&lt;p&gt;第一步：包含头文件 在 &lt;code&gt;main.c&lt;/code&gt; 最顶部的 &lt;code&gt;USER CODE BEGIN Includes&lt;/code&gt; 区域：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;第二步：重定向（告诉编译器 printf 往串口跑）&lt;/strong&gt; 在 &lt;code&gt;main.c&lt;/code&gt; 里的 &lt;code&gt;MX_USART1_UART_Init()&lt;/code&gt; 函数之后，或者专门的 &lt;code&gt;USER CODE BEGIN 0&lt;/code&gt; 区域：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 0 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__io_putchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 核心代码：通过串口1发送一个字符
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_UART_Transmit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HAL_MAX_DELAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 0 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这样，你之后所有的 &lt;code&gt;printf&lt;/code&gt; 都会自动通过串口 1 发送到电脑上。&lt;/p&gt;
&lt;h3 id=&#34;常见避坑指南&#34;&gt;常见避坑指南
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;波特率不匹配：如果电脑串口助手设置的是 9600，单片机是 115200，你会看到满屏乱码。&lt;/li&gt;
&lt;li&gt;未接 GND：如果不接地线，信号没有参考平面，也会产生乱码或无法接收。&lt;/li&gt;
&lt;li&gt;阻塞问题：&lt;code&gt;HAL_UART_Receive&lt;/code&gt; 在没收到数据前会一直卡在那（死等）。在正式项目中，我们通常会配合&lt;strong&gt;中断&lt;/strong&gt;或 &lt;strong&gt;DMA&lt;/strong&gt; 来接收数据。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-15-串口通讯中断接收</title>
        <link>https://teaize.github.io/p/zzz-15-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-15-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6/</guid>
        <description>&lt;h3 id=&#34;第一步stm32cubeide-配置-ioc&#34;&gt;第一步：STM32CubeIDE 配置 (.ioc)
&lt;/h3&gt;&lt;p&gt;我们要开启串口的&lt;strong&gt;中断“开关”&lt;/strong&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;打开 &lt;strong&gt;Connectivity -&amp;gt; USART1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;NVIC Settings&lt;/strong&gt; 选项卡。&lt;/li&gt;
&lt;li&gt;勾选 &lt;strong&gt;USART1 global interrupt&lt;/strong&gt; 后的 &lt;strong&gt;Enabled&lt;/strong&gt; 框。&lt;/li&gt;
&lt;li&gt;保存（Ctrl + S）生成代码。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221093455837.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221093455837.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;第二步编写接收逻辑-mainc&#34;&gt;第二步：编写接收逻辑 (main.c)
&lt;/h3&gt;&lt;p&gt;中断接收的逻辑是：你先告诉单片机“你听着，收到一个字节就叫我”，然后单片机去跑 &lt;code&gt;while(1)&lt;/code&gt;。当电脑发来数据，单片机自动跳进“回调函数”执行任务。&lt;/p&gt;
&lt;h4 id=&#34;1-定义接收缓存&#34;&gt;1. 定义接收缓存
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main.c&lt;/code&gt; 的 &lt;code&gt;USER CODE BEGIN PV&lt;/code&gt; (Private Variables) 区域定义一个变量来存放收到的字符：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rx_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 接收缓冲区，存放电脑发来的一个字节
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;2-开启听力模式&#34;&gt;2. 开启“听力”模式
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main&lt;/code&gt; 函数的 &lt;code&gt;while(1)&lt;/code&gt; 之前，调用一次中断接收函数：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 告诉单片机：开启中断接收，收满 1 个字节就存到 rx_data 变量里
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_UART_Receive_IT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rx_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;3-编写收到命令后做什么-回调函数&#34;&gt;3. 编写“收到命令后做什么” (回调函数)
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main.c&lt;/code&gt; 最下方的 &lt;code&gt;USER CODE BEGIN 4&lt;/code&gt; 区域，重写回调函数。我们要实现：电脑发 &lt;strong&gt;&amp;lsquo;1&amp;rsquo;&lt;/strong&gt; 亮灯，发 &lt;strong&gt;&amp;lsquo;0&amp;rsquo;&lt;/strong&gt; 灭灯。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;HAL_UART_RxCpltCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UART_HandleTypeDef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Instance&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;USART1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 确认是串口 1 触发的中断
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rx_data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 电脑发来字符 &amp;#39;1&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 亮灯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;LED ON!&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 回复电脑
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rx_data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 电脑发来字符 &amp;#39;0&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_SET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// 灭灯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;LED OFF!&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 回复电脑
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 重要：中断是一次性的，处理完后必须再次开启，否则下次就收不到了
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;HAL_UART_Receive_IT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rx_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;注意这里使用了 printf，需要查看 [[ZZZ-14-串口通讯UART]] 中关于 printf 的设置&lt;/p&gt;
&lt;h3 id=&#34;第三步原理图解-中断流程&#34;&gt;第三步：原理图解 (中断流程)
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    A[1.程序启动:开启中断接收] --&gt; B[2.CPU运行while循环]
    B --&gt; C[3.电脑发送字符]
    C --&gt; D[4.硬件触发UART中断]
    D --&gt; E[5.进入Callback回调函数]
    E --&gt; F[6.执行逻辑:如开关灯]
    F --&gt; G[7.重新调用Receive_IT续约]
    G --&gt; B
&lt;/div&gt;
&lt;h3 id=&#34;第四步串口调试助手测试&#34;&gt;第四步：串口调试助手测试
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;烧录程序。&lt;/li&gt;
&lt;li&gt;打开串口调试助手，波特率 115200。&lt;/li&gt;
&lt;li&gt;在发送框输入字符 &lt;strong&gt;&lt;code&gt;1&lt;/code&gt;&lt;/strong&gt;（注意是&lt;strong&gt;字符模式&lt;/strong&gt;，不是十六进制），点击发送。
&lt;ul&gt;
&lt;li&gt;现象：板子上的 PC13 灯亮了，助手屏幕显示 &lt;code&gt;LED ON!&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;在发送框输入字符 &lt;strong&gt;&lt;code&gt;0&lt;/code&gt;&lt;/strong&gt;，点击发送。
&lt;ul&gt;
&lt;li&gt;现象：板子上的 PC13 灯灭了，助手屏幕显示 &lt;code&gt;LED OFF!&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;避坑指南为什么我的单片机只听一次话&#34;&gt;避坑指南：为什么我的单片机只听一次话？
&lt;/h3&gt;&lt;p&gt;在代码里会看到反复强调最后一行 &lt;code&gt;HAL_UART_Receive_IT&lt;/code&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原因&lt;/strong&gt;：HAL 库的中断接收是“单次任务制”。当你收完指定的 1 个字节后，中断就会自动关闭。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解决&lt;/strong&gt;：必须在回调函数结束前，再次调用该函数，相当于给单片机续一份“听力合规”，它才能持续监听。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;进阶挑战如何接收一个单词&#34;&gt;进阶挑战：如何接收一个“单词”
&lt;/h3&gt;&lt;p&gt;刚才实现的例子是“一个字节”触发一次中断。但现实中，我们经常需要接收一串字符，比如发送 &lt;code&gt;&amp;quot;ON&amp;quot;&lt;/code&gt; 开启，发送 &lt;code&gt;&amp;quot;OFF&amp;quot;&lt;/code&gt; 关闭。作为初学者，处理字符串接收有&lt;strong&gt;两种最常用&lt;/strong&gt;的思路：&lt;/p&gt;
&lt;h4 id=&#34;方案-a字节拼接法最基础锻炼逻辑&#34;&gt;方案 A：字节拼接法（最基础，锻炼逻辑）
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原理：依然是 1 个字节触发一次中断。&lt;/li&gt;
&lt;li&gt;逻辑：在单片机里准备一个“小篮子”（数组）。每收到一个字节，就把它丢进篮子，直到收到了回车符 &lt;code&gt;\n&lt;/code&gt;，说明一句话说完了。然后用 &lt;code&gt;strcmp&lt;/code&gt; 函数比较这个篮子里装的是不是 &lt;code&gt;&amp;quot;ON&amp;quot;&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;方案-b空闲中断法最优雅专业用法&#34;&gt;方案 B：空闲中断法（最优雅，专业用法）
&lt;/h4&gt;&lt;p&gt;这是处理&lt;strong&gt;不定长数据&lt;/strong&gt;（比如一条指令有时长，有时短）最优雅、最工业级的方案。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原理：利用 STM32 串口的一个高级特性——&lt;strong&gt;IDLE（空闲中断）&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;逻辑：单片机会盯着串口线，如果发现超过 1 个字节的时间没有新数据进来了，它就认为“这串话发完了”，然后一次性把整个数组交给你处理。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面开始方案 B 空闲中断法的学习&lt;/p&gt;
&lt;h3 id=&#34;1-为什么它最优雅&#34;&gt;1. 为什么它最“优雅”？
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;传统中断&lt;/strong&gt;：像“强迫症”，必须数够 10 个字节才告诉你。如果对方只发了 5 个，你就永远在死等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;空闲中断&lt;/strong&gt;：像“观察员”。它不管对方发了多少，它只盯着信号线。只要线上一段时间没有波动了（空闲了），它就认为“这串话发完了”，立刻叫醒 CPU。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;最强组合：UART IDLE + DMA&lt;/strong&gt; 通常我们会配合 &lt;strong&gt;DMA&lt;/strong&gt;（直接存储器访问）使用。DMA 就像一个搬运工，数据一到就自动搬到内存里，不占用 CPU 资源。只有当一串话全说完了（触发 IDLE），CPU 才出来看一眼。&lt;/p&gt;
&lt;h3 id=&#34;2核心原理图&#34;&gt;2、核心原理图
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    Sender[电脑/传感器] -- 发送数据流 --&gt; RX_Pin[STM32 RX 引脚]
    RX_Pin -- 自动搬运 --&gt; DMA[DMA 搬运工]
    DMA -- 存入 --&gt; Buffer[内存缓冲区/数组]
    
    subgraph &#34;检测机制&#34;
        Line[信号线状态] -- 消失一段时间 --&gt; IDLE_Flag[触发 IDLE 空闲中断]
    end

    IDLE_Flag -- 通知 --&gt; CPU[CPU 处理整条数据]
&lt;/div&gt;
&lt;h3 id=&#34;3-stm32cubeide-配置步骤&#34;&gt;3. STM32CubeIDE 配置步骤
&lt;/h3&gt;&lt;p&gt;我们要用到 HAL 库中一个非常强大的“新”函数：&lt;code&gt;HAL_UARTEx_ReceiveToIdle_DMA&lt;/code&gt;（这里的 &lt;strong&gt;Ex&lt;/strong&gt; 代表 Extended 扩展功能）。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;开启 DMA&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;.ioc&lt;/code&gt; 文件中，点击 &lt;strong&gt;Connectivity -&amp;gt; USART1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;DMA Settings&lt;/strong&gt; 选项卡 -&amp;gt; 点击 &lt;strong&gt;Add&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;选择 &lt;strong&gt;USART1_RX&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Priority&lt;/strong&gt; 选 Medium（中等）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mode&lt;/strong&gt; 选 &lt;strong&gt;Normal&lt;/strong&gt;（普通模式，接收完处理后再重开）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;确认 NVIC&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;在 &lt;strong&gt;NVIC Settings&lt;/strong&gt; 选项卡中，确保 &lt;strong&gt;USART1 global interrupt&lt;/strong&gt; 已勾选（DMA 配合空闲中断也需要开启串口总中断）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;生成代码&lt;/strong&gt;：&lt;code&gt;Ctrl + S&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221095739564.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221095739564.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;4-编写代码-mainc&#34;&gt;4. 编写代码 (main.c)
&lt;/h3&gt;&lt;h4 id=&#34;第一步定义缓冲区&#34;&gt;第一步：定义缓冲区
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rx_buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 准备一个足够大的“篮子”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第二步启动接收在-main-函数循环前&#34;&gt;第二步：启动接收（在 main 函数循环前）
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 告诉单片机：用 DMA 方式接收数据，如果触发了空闲中断或存满了 100 字节，就叫我
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_UARTEx_ReceiveToIdle_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rx_buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 禁掉 DMA 的过半中断（可选，防止大数据量时频繁进中断）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;__HAL_DMA_DISABLE_IT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdma_usart1_rx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DMA_IT_HT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第三步编写回调函数&#34;&gt;第三步：编写回调函数
&lt;/h4&gt;&lt;p&gt;注意！空闲中断的回调函数和之前的 &lt;code&gt;RxCpltCallback&lt;/code&gt; 不同，它叫 &lt;strong&gt;&lt;code&gt;RxEventCallback&lt;/code&gt;&lt;/strong&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Size 参数非常有用：它告诉你这次实际上收到了多少个字节
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;HAL_UARTEx_RxEventCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UART_HandleTypeDef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Instance&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;USART1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 1. 处理数据：比如把收到的单词原封不动发回给电脑
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;HAL_UART_Transmit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rx_buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 2. 可以在这里做字符串比较
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strncmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rx_buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;ON&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strncmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rx_buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;OFF&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        	&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_SET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 3. 重要：处理完后，必须再次开启接收
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;HAL_UARTEx_ReceiveToIdle_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rx_buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;__HAL_DMA_DISABLE_IT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdma_usart1_rx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DMA_IT_HT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;5-这种方案的职业美感体现在哪&#34;&gt;5. 这种方案的“职业美感”体现在哪？
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Size 变量&lt;/strong&gt;：这是神来之笔。如果你发 &lt;code&gt;&amp;quot;Hello&amp;quot;&lt;/code&gt;，&lt;code&gt;Size&lt;/code&gt; 就是 5；如果你发 &lt;code&gt;&amp;quot;How are you&amp;quot;&lt;/code&gt;，&lt;code&gt;Size&lt;/code&gt; 就是 11。你再也不用自己去写循环判断 &lt;code&gt;\n&lt;/code&gt; 了。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;极低 CPU 占用&lt;/strong&gt;：在数据传输过程中，CPU 甚至可以去“睡觉”（进入低功耗模式）。只有整句话说完了，CPU 才醒过来处理一下。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;高可靠性&lt;/strong&gt;：不再会因为数据发得太快而导致丢字节（DMA 硬件级搬运）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;常见避坑&#34;&gt;常见避坑
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;重载函数名&lt;/strong&gt;：一定要写对 &lt;code&gt;HAL_UARTEx_RxEventCallback&lt;/code&gt;，拼错一个字母它都不会运行。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;缓冲区溢出&lt;/strong&gt;：如果你定义的 &lt;code&gt;rx_buf&lt;/code&gt; 是 100，但对方一次性发了 150 个字节，DMA 会在满 100 的时候强制触发一次中断。所以缓冲区要设得比最长的指令稍微大一点。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;现在你可以试试发送 &lt;code&gt;&amp;quot;Hello STM32&amp;quot;&lt;/code&gt;。你会发现，无论你发多长或多短，单片机都能精准地识别出长度并回复你。并且发送 &lt;code&gt;ON&lt;/code&gt;，灯会亮、发送 &lt;code&gt;OFF&lt;/code&gt;，灯会灭&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-16-DMA</title>
        <link>https://teaize.github.io/p/zzz-16-dma/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-16-dma/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-14-串口通讯UART]]、 [[ZZZ-15-串口通讯中断接收]]，[[ZZZ-15-串口通讯中断接收]] 中应用到了 DMA，这节就来学习 DMA&lt;/p&gt;
&lt;h3 id=&#34;1-为什么要用-dma从搬砖中解放-boss&#34;&gt;1. 为什么要用 DMA？（从“搬砖”中解放 Boss）
&lt;/h3&gt;&lt;p&gt;在没有 DMA 之前，所有的数据搬运都必须经过 CPU。&lt;/p&gt;
&lt;h4 id=&#34;场景串口收到-100-字节数据&#34;&gt;场景：串口收到 100 字节数据
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;非 DMA 模式（CPU 模式）&lt;/strong&gt;： 每收到一个字节，串口就拍拍 CPU 的肩膀说：“老板，来货了，快把它搬到内存里！” CPU 必须放下手头正在算的数学题，跑过去搬一个字节，然后再回来算题。100 个字节，CPU 就得被打断 100 次。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DMA 模式&lt;/strong&gt;： CPU 告诉 DMA：“快递员，一会儿串口那边有 100 件货，你直接帮我搬到 0x2000… 这个地址的仓库（内存）里，搬完了再通知我。” 于是，CPU 继续心无旁骛地算题，DMA 在后台默默搬运。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-dma-在硬件体系中的位置&#34;&gt;2. DMA 在硬件体系中的位置
&lt;/h3&gt;&lt;p&gt;在 STM32 的内部，DMA 就像是一条“高速旁路”。它拥有访问内存（SRAM）和外设（如 UART, ADC, SPI）的权利。&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    subgraph &#34;STM32 内部总线架构&#34;
        CPU[Cortex-M3 内核&lt;br/&gt;&#39;大Boss&#39;]
        DMA[DMA 控制器&lt;br/&gt;&#39;搬运工&#39;]
        BusMatrix{总线矩阵&lt;br/&gt;&#39;交通枢纽&#39;}
        
        SRAM[SRAM 内存&lt;br/&gt;&#39;仓库&#39;]
        Flash[Flash 闪存&lt;br/&gt;&#39;代码库&#39;]
        Peripherals[外设: UART/ADC/SPI&lt;br/&gt;&#39;码头&#39;]
    end

    CPU --&gt; BusMatrix
    DMA --&gt; BusMatrix
    BusMatrix --- SRAM
    BusMatrix --- Flash
    BusMatrix --- Peripherals

    style CPU fill:#f96,stroke:#333
    style DMA fill:#bbf,stroke:#333
    style BusMatrix fill:#eee,stroke:#333
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;关键点&lt;/strong&gt;：DMA 和 CPU 是并列的，它们共享总线。当 DMA 在搬运数据时，只要不发生“抢车道（总线竞争）”，CPU 完全可以在处理别的事情。&lt;/p&gt;
&lt;h3 id=&#34;3-dma-的三要素快递单怎么填&#34;&gt;3. DMA 的“三要素”（快递单怎么填）
&lt;/h3&gt;&lt;p&gt;要让 DMA 工作，你（CPU）只需要在初始化时填好这张“快递单”：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;从哪搬？(Source)：比如外设的寄存器地址（串口的数据寄存器）。&lt;/li&gt;
&lt;li&gt;搬到哪？(Destination)：比如你定义的数组地址（内存）。&lt;/li&gt;
&lt;li&gt;搬多少？(Direction &amp;amp; Size)：搬运的方向、搬多少个字节、每次搬 8 位还是 16 位。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;4-结合上节的串口空闲中断案例&#34;&gt;4. 结合上节的“串口空闲中断”案例
&lt;/h3&gt;&lt;p&gt;我们来看看 DMA 在那个案例里具体干了什么：&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  sequenceDiagram
    participant PC as 电脑 (发送端)
    participant UART as 串口外设 (码头)
    participant DMA as DMA 搬运工
    participant RAM as 接收数组 (仓库)
    participant CPU as CPU (老板)

    Note over CPU, RAM: 1. CPU 设置 DMA: &#39;搬到数组里，搬完叫我&#39;
    PC-&gt;&gt;UART: 发送数据 &#39;H&#39;
    UART-&gt;&gt;DMA: 货到了，快搬走
    DMA-&gt;&gt;RAM: 自动存入数组[0]
    PC-&gt;&gt;UART: 发送数据 &#39;e&#39;
    UART-&gt;&gt;DMA: 货又到了
    DMA-&gt;&gt;RAM: 自动存入数组[1]
    
    Note right of PC: ...一段时间不发数据了...
    
    UART-&gt;&gt;CPU: 触发 IDLE (空闲中断)
    CPU-&gt;&gt;RAM: 老板起床处理整串数据 &#34;He...&#34;
&lt;/div&gt;
&lt;h3 id=&#34;5-dma-的重要特性通道-channel&#34;&gt;5. DMA 的重要特性：通道 (Channel)
&lt;/h3&gt;&lt;p&gt;你在 CubeIDE 里看到 &lt;code&gt;DMA1 Channel 1&lt;/code&gt;, &lt;code&gt;Channel 2&lt;/code&gt;…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;通道&lt;/strong&gt;就像是&lt;strong&gt;独立的传送带&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;串口接收需要一条通道，ADC 采集需要一条通道。&lt;/li&gt;
&lt;li&gt;STM32F103C8T6 内部通常有两个 DMA 控制器（DMA1 和 DMA2），每个控制器有 5-7 个通道。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6-为什么要配合空闲中断&#34;&gt;6. 为什么要配合“空闲中断”？
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DMA 的弱点&lt;/strong&gt;：它很“死板”，它只管搬运，直到搬满你设定的数量（比如 100 字节）。如果对方只发了 10 个字节就停了，DMA 就会一直等下去，不告诉 CPU。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;空闲中断的强项&lt;/strong&gt;：它很“机灵”，只要线上一没动静，它就叫醒 CPU。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;强强联手&lt;/strong&gt;：DMA 负责默默搬运不累着 CPU，空闲中断负责在关键时刻提醒 CPU 结账。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;总结dma-的好处&#34;&gt;总结：DMA 的好处
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;极大地减轻 CPU 负担&lt;/strong&gt;：CPU 不再需要为每一个字节的传输而中断。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;提高实时性&lt;/strong&gt;：在高速通信（如 SPI 驱动屏幕）中，DMA 能跑满带宽，而 CPU 搬运可能跟不上速度。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;降低功耗&lt;/strong&gt;：CPU 可以在 DMA 搬运时进入低功耗模式。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-17-ADC</title>
        <link>https://teaize.github.io/p/zzz-17-adc/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-17-adc/</guid>
        <description>&lt;p&gt;如果说串口是单片机的“嘴巴”，那么 ADC 就是单片机的“眼睛”。它让单片机能够感知真实世界中连续变化的模拟信号（如光照、温度、声音、电压）。&lt;/p&gt;
&lt;h3 id=&#34;1-什么是-adc通俗理解&#34;&gt;1. 什么是 ADC？（通俗理解）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;模拟信号（Analog）&lt;/strong&gt;：大自然中的信号，比如 0.5V, 1.25V, 3.3V，是连续不断的。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数字信号（Digital）&lt;/strong&gt;：单片机的大脑，只能理解 0 和 1（二进制数字）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ADC 的角色&lt;/strong&gt;：就像一个&lt;strong&gt;带有刻度的量杯&lt;/strong&gt;。它把杯子里液面的高度（电压）转化成一个具体的数字，告诉单片机：“现在的电压是 2048”。&lt;/p&gt;
&lt;h3 id=&#34;2-stm32-adc-的核心参数&#34;&gt;2. STM32 ADC 的核心参数
&lt;/h3&gt;&lt;p&gt;在 STM32F103C8T6 中，自带有一个 ADC，ADC 的性能非常强劲：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;参数&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;数值&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;含义&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;分辨率 (Resolution)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;12 位 (12-bit)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;把 0~3.3V 分成 $2^{12} = 4096$ 份。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;转换范围 (Range)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;0V ~ 3.3V&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;超过 3.3V 可能烧毁引脚，低于 0V 读不到。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;对应关系&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;0 $\to$ 0V, 4095 $\to$ 3.3V&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;数值每增加 1，代表电压增加了约 0.8mV。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;通道数量&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;10 个外部通道&lt;/td&gt;
          &lt;td&gt;PA0&lt;del&gt;PA7, PB0&lt;/del&gt;PB1 都可以作为“眼睛”。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;3-adc-的内部构造-mermaid&#34;&gt;3. ADC 的内部构造 (Mermaid)
&lt;/h3&gt;&lt;p&gt;你会发现 ADC 也有很多 &lt;strong&gt;Channel（通道）&lt;/strong&gt;，它的原理和定时器通道类似：一个“测量核心”配合一个“多路开关”。&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    subgraph &#34;外部世界 (模拟信号)&#34;
        In0[PA0: 光敏电阻]
        In1[PA1: 电位器]
        In2[PA2: 电池电压]
    end

    subgraph &#34;ADC 内部&#34;
        MUX{多路开关&lt;br/&gt;Multiplexer}
        Core[ADC 核心&lt;br/&gt;12位量化]
        DataReg[数据寄存器&lt;br/&gt;DR]
    end

    In0 --&gt; MUX
    In1 --&gt; MUX
    In2 --&gt; MUX
    
    MUX --&gt; Core
    Core --&gt; DataReg
    DataReg --&gt; CPU[CPU 或 DMA]
&lt;/div&gt;
&lt;h3 id=&#34;4-三种常见的看世界方式&#34;&gt;4. 三种常见的“看世界”方式
&lt;/h3&gt;&lt;p&gt;根据你对实时性的要求，ADC 有三种工作模式：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;单次转换 (Single Conversion)：点一下，看一眼。看完了就闭上眼。&lt;/li&gt;
&lt;li&gt;连续转换 (Continuous Conversion)：睁着眼不眨，一直看，一直更新数据。&lt;/li&gt;
&lt;li&gt;扫描模式 (Scan Mode)：&lt;strong&gt;如果有多个通道（比如同时看光敏和电位器），它会挨个看一圈&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;5-快速上手实验读取电位器电压轮询模式&#34;&gt;5. 快速上手实验：读取电位器电压（轮询模式）
&lt;/h3&gt;&lt;p&gt;我们先用最简单的&lt;strong&gt;轮询方式&lt;/strong&gt;（类似于按键扫描）来感受 ADC。&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    subgraph STM32 [STM32F103C8T6]
        3V3[3.3V Pin]
        GND[GND Pin]
        PA1[PA1 / ADC_IN1]
    end

    subgraph POT [电位器 / 传感器]
        VCC_IN[1号脚: VCC]
        OUT[2号脚: 信号输出]
        GND_IN[3号脚: GND]
    end

    3V3 --- VCC_IN
    PA1 --- OUT
    GND --- GND_IN
&lt;/div&gt;
&lt;h4 id=&#34;第一步cubeide-配置-ioc&#34;&gt;第一步：CubeIDE 配置 (.ioc)
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;在左侧点击 &lt;strong&gt;Analog -&amp;gt; ADC1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;勾选 &lt;strong&gt;IN1&lt;/strong&gt;（对应引脚 &lt;strong&gt;PA1&lt;/strong&gt;）。&lt;/li&gt;
&lt;li&gt;在下方的 &lt;strong&gt;Parameter Settings&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Continuous Conversion Mode&lt;/strong&gt;：设为 &lt;strong&gt;Enabled&lt;/strong&gt;（让它不停地转换）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;保存生成代码。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221103430273.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221103430273.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;开启了 ADC 之后，需要注意一下这里的 ADC 分频

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221103632155.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221103632155.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;第二步编写代码-mainc&#34;&gt;第二步：编写代码 (main.c)
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main&lt;/code&gt; 函数的 &lt;code&gt;while(1)&lt;/code&gt; 之前启动 ADC，在 &lt;code&gt;while(1)&lt;/code&gt; 里读取。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意这里也用到了 printf 和串口通讯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 1. 开启 ADC
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 2. 等待转换完成（超时时间 10ms）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADC_PollForConversion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HAL_OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 3. 读取 12 位的数字量 (0-4095)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;HAL_ADC_GetValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 4. 将数字换算成电压 (单位: V)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;voltage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 5. 通过串口打印出来看看
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ADC Value: %lu, Voltage: %.2fV&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 每半秒看一眼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221104502276.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221104502276.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;6-进阶预告为什么-adc-最离不开-dma&#34;&gt;6. 进阶预告：为什么 ADC 最离不开 DMA？
&lt;/h3&gt;&lt;p&gt;你可能已经发现了：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果 ADC 开启了&lt;strong&gt;连续转换&lt;/strong&gt;，它每秒钟能产生几十万个数据。&lt;/li&gt;
&lt;li&gt;如果 CPU 每次都去 &lt;code&gt;GetValue&lt;/code&gt;，那 CPU 真的就什么都不用干了，光在那“看眼睛”了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;专业做法&lt;/strong&gt;：开启 &lt;strong&gt;ADC + DMA&lt;/strong&gt;。 让 DMA 这个“快递员”自动把 ADC 转换好的数据搬运到数组里，CPU 只需要在想看的时候去数组里翻一下就行了。&lt;/p&gt;
&lt;h3 id=&#34;常见避坑指南&#34;&gt;常见避坑指南
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;引脚悬空&lt;/strong&gt;：如果你不接任何东西到 PA1，读到的数值会乱跳。这是正常的，因为引脚在感知空气中的静电电场（这叫“天线效应”）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;采样时间&lt;/strong&gt;：如果信号变化很快，需要调整 &lt;strong&gt;Sampling Time&lt;/strong&gt;（采样时间），让量杯有足够的时间装满水（充好电）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;扩展资料&#34;&gt;扩展资料
&lt;/h3&gt;&lt;p&gt;在 CubeIDE 中选择 ADC1 时，能看到 IN0、IN1…，这些是&lt;strong&gt;频道选择&lt;/strong&gt;。就像电视机有很多个频道，但只有一个屏幕，ADC 内部通常只有一个“测量器”，通过一个开关来决定现在看哪个引脚的电压&lt;/p&gt;
&lt;h4 id=&#34;1-什么是-in0-in1&#34;&gt;1. 什么是 IN0, IN1…？
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;STM32F103C8T6&lt;/code&gt; 中，ADC1 拥有 10 个外部引脚通道。它们的对应关系是固定的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;IN0&lt;/strong&gt; $\to$ PA0&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IN1&lt;/strong&gt; $\to$ PA1&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IN9&lt;/strong&gt; $\to$ PB1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你在 CubeIDE 里勾选了哪个 &lt;code&gt;IN&lt;/code&gt;，就代表你告诉单片机：“我要把这个引脚当成模拟输入来用”。&lt;/p&gt;
&lt;h3 id=&#34;2-adc-内部框架图-mermaid&#34;&gt;2. ADC 内部框架图 (Mermaid)
&lt;/h3&gt;&lt;p&gt;为了理解那些复杂的配置项，我们来看看电压信号进入单片机后经历了什么：&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    subgraph &#34;外部引脚 (Input Channels)&#34;
        P0[PA0/IN0]
        P1[PA1/IN1]
        Pn[...其他引脚]
    end

    subgraph &#34;ADC 内部核心&#34;
        MUX{多路开关&lt;br/&gt;Multiplexer}
        
        subgraph &#34;采样保持与转化&#34;
            SH[采样保持器&lt;br/&gt;Sampling Time]
            SAR[12位逐次逼近器&lt;br/&gt;Successive Approx]
        end
        
        Logic[控制逻辑&lt;br/&gt;Continuous/Scan Mode]
    end

    P0 --&gt; MUX
    P1 --&gt; MUX
    Pn --&gt; MUX

    MUX --&gt; SH
    SH --&gt; SAR
    SAR --&gt; DR[数据寄存器&lt;br/&gt;Data Register]
    
    Logic -.-&gt; MUX
    Logic -.-&gt; SAR

    DR --&gt; CPU[CPU读取/中断]
    DR --&gt; DMA[DMA搬运]

    style SAR fill:#f96,stroke:#333
    style Logic fill:#bbf,stroke:#333
&lt;/div&gt;
&lt;h4 id=&#34;3-配置参数详细拆解&#34;&gt;3. 配置参数详细拆解
&lt;/h4&gt;&lt;p&gt;当你点击 &lt;code&gt;ADC1&lt;/code&gt; 的 &lt;code&gt;Parameter Settings&lt;/code&gt; 时，最核心的配置分为三部分：&lt;/p&gt;
&lt;p&gt;A. 基础设置 (Basic Settings)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Data Alignment (数据对齐)：通常选 Right Alignment（右对齐）。
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;解释&lt;/em&gt;：ADC 结果是 12 位的，但寄存器是 16 位的。右对齐就像我们在本子上写数字，个位对齐，方便直接读取数值。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Scan Conversion Mode (扫描模式)：
&lt;ul&gt;
&lt;li&gt;如果你勾选了&lt;strong&gt;多个&lt;/strong&gt; IN 通道（比如同时看 PA0 和 PA1），就必须 &lt;strong&gt;Enable&lt;/strong&gt;。它会自动按顺序测量选中的所有通道。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Continuous Conversion Mode (连续转换模式)：
&lt;ul&gt;
&lt;li&gt;Enable：它会像监控摄像头一样，拍完一张（转完一次）立刻拍下一张，数据永不停歇地更新。&lt;/li&gt;
&lt;li&gt;Disable：拍一张就闭眼，直到你再次命令它。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;B. 规则组设置 (ADC_Regular_ConversionMode)&lt;/p&gt;
&lt;p&gt;这里决定了“谁先测，测多久”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Number of Conversion：你要测几个通道？如果你选了 IN0 和 IN1，这里就填 2。&lt;/li&gt;
&lt;li&gt;Rank (排名)：这是具体的顺序。
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Rank 1&lt;/code&gt; 选 &lt;code&gt;Channel 0&lt;/code&gt;，代表第一个测 PA0。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Rank 2&lt;/code&gt; 选 &lt;code&gt;Channel 1&lt;/code&gt;，代表第二个测 PA1。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Sampling Time (采样时间)：
&lt;ul&gt;
&lt;li&gt;这是最容易被忽视的参数！ 电压进入单片机需要给内部电容充电。&lt;/li&gt;
&lt;li&gt;如果电压信号“很虚”（阻抗高），你需要把这个时间调大（比如选 55.5 Cycles 或更高），测出来的电压才准。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;C. 外部触发 (External Trigger)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;External Trigger Conversion Source：通常选 Regular Conversion launched by software。
&lt;ul&gt;
&lt;li&gt;意思是：由你在代码里写 &lt;code&gt;HAL_ADC_Start&lt;/code&gt; 来手动开启转换。你也可以设置为由定时器触发（比如每秒精准采集 1000 次）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-为什么配置这么多&#34;&gt;4. 为什么配置这么多？
&lt;/h4&gt;&lt;p&gt;STM32 的 ADC 设计理念是：&lt;strong&gt;尽可能不需要 CPU 介入&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;最简单的配置：单通道、单次转换（你之前的实验）。&lt;/li&gt;
&lt;li&gt;最专业的配置：
&lt;ol&gt;
&lt;li&gt;开启 &lt;strong&gt;Scan Mode&lt;/strong&gt;（看多个引脚）。&lt;/li&gt;
&lt;li&gt;开启 &lt;strong&gt;Continuous Mode&lt;/strong&gt;（不停地看）。&lt;/li&gt;
&lt;li&gt;开启 &lt;strong&gt;DMA&lt;/strong&gt;（让搬运工把看的结果自动写进数组）。&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;结果：CPU 只需要在启动时下个令，然后随时去查数组就行了，完全不浪费 CPU 时间。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-18-ADC多通道采集</title>
        <link>https://teaize.github.io/p/zzz-18-adc%E5%A4%9A%E9%80%9A%E9%81%93%E9%87%87%E9%9B%86/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-18-adc%E5%A4%9A%E9%80%9A%E9%81%93%E9%87%87%E9%9B%86/</guid>
        <description>&lt;p&gt;在“多通道 + DMA”模式下，单片机会像一台&lt;strong&gt;自动流水线&lt;/strong&gt;：ADC 负责把电压“打包”成数字，DMA 负责把包“搬运”到内存。CPU 甚至可以去喝咖啡，只需要在想看数据的时候，去数组里看一眼就行了。&lt;/p&gt;
&lt;h3 id=&#34;1-硬件连接-准备两只眼睛&#34;&gt;1. 硬件连接 (准备两只“眼睛”)
&lt;/h3&gt;&lt;p&gt;假设你准备了两个模拟传感器（比如：一个电位器、一个光敏电阻）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传感器 A 的输出 $\rightarrow$ 连接到 PA0 (ADC1IN0)&lt;/li&gt;
&lt;li&gt;传感器 B 的输出 $\rightarrow$ 连接到 PA1 (ADC1IN1)&lt;/li&gt;
&lt;li&gt;所有 GND $\rightarrow$ 必须全部连在一起（共地）&lt;/li&gt;
&lt;li&gt;电源 $\rightarrow$ 传感器接板子上的 3.3V&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-stm32cubeide-配置-ioc--这是实验的灵魂&#34;&gt;2. STM32CubeIDE 配置 (.ioc) —— 这是实验的灵魂
&lt;/h3&gt;&lt;p&gt;这里的配置比单通道稍微复杂一点，请屏住呼吸：&lt;/p&gt;
&lt;h4 id=&#34;a-adc1-配置&#34;&gt;A. ADC1 配置
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;勾选通道&lt;/strong&gt;：勾选 &lt;strong&gt;IN0&lt;/strong&gt; 和 &lt;strong&gt;IN1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;基本参数 (Parameter Settings)&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Scan Conversion Mode&lt;/strong&gt;：&lt;strong&gt;Enabled&lt;/strong&gt;（扫描模式，必须开，否则它只看一个引脚）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Continuous Conversion Mode&lt;/strong&gt;：&lt;strong&gt;Enabled&lt;/strong&gt;（连续转换，自动循环看）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DMA Continuous Requests&lt;/strong&gt;：&lt;strong&gt;Enabled&lt;/strong&gt;（&lt;strong&gt;极其重要！&lt;/strong&gt; 只有开了这个，DMA 才会源源不断地搬运，否则搬一次就停了）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;规则组参数 (ADC_Regular_ConversionMode)&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Number of Conversion&lt;/strong&gt;：改为 &lt;strong&gt;2&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rank 1&lt;/strong&gt;：选择 Channel 0 (对应 PA0)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rank 2&lt;/strong&gt;：选择 Channel 1 (对应 PA1)。&lt;/li&gt;
&lt;li&gt;建议将 Sampling Time 调大一点（比如 55.5 或 71.5 Cycles），这样数据更稳。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221110653091.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221110653091.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;


(注意上图中采样时间才 1.5 个周期，需要调大一点，太快采不到)&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221111434785.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221111434785.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;配置项&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;位置&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;设置值&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;作用&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;DMA Mode&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;DMA Settings&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;Circular&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;搬运指针自动折返。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Continuous Conversion&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ADC Parameter Settings&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;Enabled&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ADC 拍完一张不停，接着拍。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;DMA Continuous Requests&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ADC Parameter Settings&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;Enabled&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;每次拍完都呼叫快递员搬运。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;b-dma-配置-关键点&#34;&gt;B. DMA 配置 (关键点)
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;点击下方的 &lt;strong&gt;DMA Settings&lt;/strong&gt; 选项卡 -&amp;gt; 点击 &lt;strong&gt;Add&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;选择 &lt;strong&gt;ADC1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DMA 模式设置&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Mode&lt;/strong&gt;：选择 &lt;strong&gt;Circular (循环模式)&lt;/strong&gt;。（这样 DMA 搬完两个数后，会自动回到数组开头覆盖旧数据，形成闭环）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Memory Address Increment&lt;/strong&gt;：勾选 &lt;strong&gt;Increment Address&lt;/strong&gt;。（这样第一个数存数组 [0]，第二个数存数组 [1]）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Data Width&lt;/strong&gt;：Peripheral 和 Memory 都选 &lt;strong&gt;Half Word&lt;/strong&gt; (16 位)。（因为 ADC 结果是 12 位，8 位装不下，用 16 位刚好）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-编写代码-mainc&#34;&gt;3. 编写代码 (main.c)
&lt;/h3&gt;&lt;p&gt;你会惊讶地发现，有了 DMA 后，代码反而变得异常简洁。&lt;/p&gt;
&lt;h4 id=&#34;第一步准备缓冲区&#34;&gt;第一步：准备缓冲区
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main.c&lt;/code&gt; 的 &lt;code&gt;USER CODE BEGIN PV&lt;/code&gt; 区域：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 准备一个容纳 2 个通道数据的“小篮子”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第二步启动-adc-搬运流水线&#34;&gt;第二步：启动 ADC 搬运流水线
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main&lt;/code&gt; 函数的 &lt;code&gt;while(1)&lt;/code&gt; 之前，启动 DMA 传输：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 为了精准，建议先进行 ADC 校准（F1系列特有）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADCEx_Calibration_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 核心命令：启动 ADC + DMA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 参数：ADC句柄，存储的目标地址，要搬运的数据个数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第三步读取并显示数据&#34;&gt;第三步：读取并显示数据
&lt;/h4&gt;&lt;p&gt;此时，数据已经在后台自动刷写到 &lt;code&gt;adc_buffer&lt;/code&gt; 数组里了。在 &lt;code&gt;while(1)&lt;/code&gt; 中：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 直接从内存数组里拿数据，不需要调用任何 HAL_ADC 函数！
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sensor_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sensor_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 转换成电压显示
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sensor_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sensor_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;PA0(A): %.2fV | PA1(B): %.2fV&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;运行后为什么看不到数字：

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221112645285.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221112645285.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;因为在代码中使用 &lt;code&gt;%f&lt;/code&gt; 格式化字符串，但编译器没有开启浮点数支持时，&lt;code&gt;printf&lt;/code&gt; 就会直接忽略这部分内容，导致你看到的输出跳过了数字，直接显示了后面的 &lt;code&gt;V&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;解决方法 A：开启 IDE 设置（最简单）&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在左侧 &lt;strong&gt;Project Explorer&lt;/strong&gt; 中，右键点击你的项目名称，选择 &lt;strong&gt;Properties&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;进入 &lt;strong&gt;C/C++ Build&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Settings&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在右边的选项卡中选择 &lt;strong&gt;Tool Settings&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;找到 &lt;strong&gt;MCU Settings&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;勾选底部的 &lt;code&gt;Runtime Library: Use float with printf from newlib-nano (-u _printf_float)&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;Apply and Close&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;重新编译&lt;/strong&gt;（小锤子）并下载。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221112628596.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221112628596.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;4-实验原理图解-mermaid&#34;&gt;4. 实验原理图解 (Mermaid)
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    subgraph &#34;硬件自动流转 (无需 CPU 参与)&#34;
        SensorA[&#34;传感器 A (PA0)&#34;] -- 采样 --&gt; CH0[&#34;ADC 通道 0&#34;]
        SensorB[&#34;传感器 B (PA1)&#34;] -- 采样 --&gt; CH1[&#34;ADC 通道 1&#34;]
        
        CH0 -- DMA 搬运 --&gt; Buf0[&#34;adc_buffer[0]&#34;]
        CH1 -- DMA 搬运 --&gt; Buf1[&#34;adc_buffer[1]&#34;]
        
        Buf1 -- 循环模式重置 --&gt; Buf0
    end
    
    Buf0 -.-&gt; Read[&#34;CPU 直接读取数组内容&#34;]
    Buf1 -.-&gt; Read
    
    style SensorA fill:#f9f,stroke:#333
    style SensorB fill:#f9f,stroke:#333
    style Read fill:#bbf,stroke:#333
&lt;/div&gt;
&lt;h4 id=&#34;1-为什么这个结构很强大&#34;&gt;1. 为什么这个结构很强大？
&lt;/h4&gt;&lt;p&gt;在传统的做法中，如果你想测两个通道，你需要：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;切到通道 0 $\to$ 启动 $\to$ 等待 $\to$ 读数。&lt;/li&gt;
&lt;li&gt;切到通道 1 $\to$ 启动 $\to$ 等待 $\to$ 读数。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;而在你现在配置的 &lt;strong&gt;扫描模式 (Scan) + 循环模式 (Circular) + DMA&lt;/strong&gt; 下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ADC&lt;/strong&gt; 会自动在 PA0 和 PA1 之间来回切换采样。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DMA&lt;/strong&gt; 会自动把 PA0 的结果放进 &lt;code&gt;adc_buffer[0]&lt;/code&gt;，把 PA1 的结果放进 &lt;code&gt;adc_buffer[1]&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;完全同步&lt;/strong&gt;：这个过程是硬件级锁定的，你永远不用担心 PA1 的数据被误存到了 &lt;code&gt;adc_buffer[0]&lt;/code&gt; 里。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-dma-循环模式&#34;&gt;2. DMA 循环模式
&lt;/h4&gt;&lt;p&gt;结构图当中，循环模式重置是什么意思：&lt;/p&gt;
&lt;p&gt;你可以把 &lt;code&gt;adc_buffer[2]&lt;/code&gt; 想象成一个只有两个格子的&lt;strong&gt;环形跑道&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第 1 步：ADC 转换完第一个通道（PA0），DMA 把结果送进 &lt;code&gt;Buf0&lt;/code&gt;（第一个格子）。&lt;/li&gt;
&lt;li&gt;第 2 步：ADC 转换完第二个通道（PA1），DMA 把结果送进 &lt;code&gt;Buf1&lt;/code&gt;（第二个格子）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;此时，DMA 的搬运任务“名义上”完成了（因为你告诉它只搬 2 个数）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果是普通模式 (Normal Mode)：搬运工 DMA 就地解散，去睡觉了。如果你想再看数据，必须由 CPU 再次下令 &lt;code&gt;HAL_ADC_Start_DMA&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;如果是循环模式 (Circular Mode)：DMA 发现自己到了终点，会&lt;strong&gt;瞬间自动回到起点&lt;/strong&gt;，把指针重新指向 &lt;code&gt;Buf0&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5-这个实验的专业感在哪里&#34;&gt;5. 这个实验的“专业感”在哪里？
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;零等待&lt;/strong&gt;：CPU 不需要调用 &lt;code&gt;PollForConversion&lt;/code&gt; 去死等转换完成。无论何时 CPU 去读 &lt;code&gt;adc_buffer&lt;/code&gt;，拿到的都是&lt;strong&gt;最新的电压值&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;严格同步&lt;/strong&gt;：PA0 和 PA1 的数据几乎是同时采集并按顺序排列的，绝对不会出现通道对错位。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自由扩展&lt;/strong&gt;：如果你有 10 个传感器，只需要在配置里把 Number 改成 10，代码里定义长度为 10 的数组即可，代码量完全不增加。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-19-ADC采样数据滤波</title>
        <link>https://teaize.github.io/p/zzz-19-adc%E9%87%87%E6%A0%B7%E6%95%B0%E6%8D%AE%E6%BB%A4%E6%B3%A2/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-19-adc%E9%87%87%E6%A0%B7%E6%95%B0%E6%8D%AE%E6%BB%A4%E6%B3%A2/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-18-ADC多通道采集]]。你可能会发现传感器传回来的数据：即便你不动传感器，串口打印出的电压值最后两位可能还在不停跳动&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221115244975.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221115244975.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;这是由于环境噪声、电源波动等引起的 &lt;strong&gt;ADC 采样噪声&lt;/strong&gt;。在工业级仪器中，我们通常不会直接使用单次采样的结果，而是需要一个“数字滤镜”。&lt;/p&gt;
&lt;p&gt;这里我们学习滑动平均值滤波 (Moving Average Filter)，让 DMA 一次搬运更多的数据（比如每个通道搬 10 个数），然后求平均值。&lt;/p&gt;
&lt;h3 id=&#34;1-滤波原理以多胜少&#34;&gt;1. 滤波原理：以多胜少
&lt;/h3&gt;&lt;p&gt;原理非常简单：单次采样可能会由于瞬时干扰产生误差，但如果我们连续采 10 次甚至 100 次，取它们的&lt;strong&gt;平均值&lt;/strong&gt;，那些随机的噪声就会互相抵消。&lt;/p&gt;
&lt;p&gt;数学公式表示为：$$V_{avg} = \frac{1}{N} \sum_{i=1}^{N} V_i$$&lt;/p&gt;
&lt;h3 id=&#34;2-硬件与配置调整&#34;&gt;2. 硬件与配置调整
&lt;/h3&gt;&lt;p&gt;为了实现这个功能，我们需要让 DMA 这个“快递员”一次多搬一些货【这里在 [[ZZZ-18-ADC多通道采集]] 的基础上修改代码】。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;修改数组大小：
&lt;ul&gt;
&lt;li&gt;假设我们要对每个通道取 10 次采样的平均值。因为你有 2 个通道，所以数组大小应改为 $2 \times 10 = 20$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DMA 配置（无需修改）：
&lt;ul&gt;
&lt;li&gt;保持之前的 Circular（循环模式） 和 Memory Increment。DMA 会自动按照 CH0, CH1, CH0, CH1 … 的顺序把 20 个数据填满。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-代码实现&#34;&gt;3. 代码实现
&lt;/h3&gt;&lt;p&gt;我们需要在 &lt;code&gt;main.c&lt;/code&gt; 中修改数组定义和读取逻辑。&lt;/p&gt;
&lt;h4 id=&#34;第一步定义更大的缓冲区&#34;&gt;第一步：定义更大的缓冲区
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define SAMPLES 10  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 每个通道采样 10 次
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define CHANNELS 2 &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 共 2 个通道
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 长度为 20 的数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第二步启动采集&#34;&gt;第二步：启动采集
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 为了精准，建议先进行 ADC 校准（F1系列特有＿
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADCEx_Calibration_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 核心命令：启势 ADC + DMA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 参数：ADC句柄，存储的目标地址，要搬运的数据个数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第三步计算平均值算法核心&#34;&gt;第三步：计算平均值（算法核心）
&lt;/h4&gt;&lt;p&gt;由于 DMA 存放的顺序是交替的，我们需要跳着加和：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 累加各个通道的数据
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// adc_buffer[0, 2, 4...] 是通道 A
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// adc_buffer[1, 3, 5...] 是通道 B
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 计算平均值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;avg_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;avg_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 打印转换后的电压
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Stable PA0: %.3fV | Stable PA1: %.3fV&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;avg_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;avg_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;滤波后数据：
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221115903361.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221115903361.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;4-滤波前后的对比图&#34;&gt;4. 滤波前后的对比图
&lt;/h3&gt;&lt;p&gt;通过这种方式，数据流转的逻辑发生了微妙的变化：&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    A[ADC 硬件] -- &#34;快速采样(1kHz)&#34; --&gt; B[DMA 搬运工]
    B -- &#34;填充&#34; --&gt; C[&#34;adc_buffer[20] (原始数据)&#34;]
    C -- &#34;循环覆盖&#34; --&gt; C
    
    subgraph &#34;CPU 软件处理&#34;
        D[for 循环累加] --&gt; E[除以次数]
        E --&gt; F[得到稳定的平均值]
    end
    
    C -.-&gt; D
    F --&gt; G[串口/OLED显示]

    style C fill:#fff2cc,stroke:#d6b656
    style F fill:#d5e8d4,stroke:#82b366,stroke-width:2px
&lt;/div&gt;
&lt;h3 id=&#34;5-进阶小贴士为什么选-10-次&#34;&gt;5. 进阶小贴士：为什么选 10 次？
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;次数越多越稳：如果你取 100 次平均，数值会像粘在屏幕上一样稳。&lt;/li&gt;
&lt;li&gt;副作用：次数越多，数值对真实电压变化的&lt;strong&gt;响应就会变慢&lt;/strong&gt;（滞后感）。&lt;/li&gt;
&lt;li&gt;黄金法则：在工业仪表中，通常选择 8、16 或 32 次采样。&lt;strong&gt;为什么选 2 的次方？&lt;/strong&gt; 因为在单片机中，除以 8 可以直接通过“位移操作”（&lt;code&gt;&amp;gt;&amp;gt; 3&lt;/code&gt;）完成，计算速度极快！&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-20-OLED屏幕</title>
        <link>https://teaize.github.io/p/zzz-20-oled%E5%B1%8F%E5%B9%95/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-20-oled%E5%B1%8F%E5%B9%95/</guid>
        <description>&lt;p&gt;有了这块 &lt;strong&gt;0.96 寸 OLED 屏幕（SSD1306 驱动）&lt;/strong&gt;，你的单片机终于有了自己的“脸”。我们要学习的这个新协议叫 &lt;strong&gt;I2C (Inter-Integrated Circuit)&lt;/strong&gt;，它是嵌入式世界里应用最广的协议之一，因为它的硬件连接极其简单：只需要两根线。&lt;/p&gt;
&lt;h3 id=&#34;1-认识-i2c两根线的交响乐&#34;&gt;1. 认识 I2C：两根线的“交响乐”
&lt;/h3&gt;&lt;p&gt;I2C 协议由飞利浦（现 NXP）发明，它的核心在于“主从架构”和“寻址机制”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SCL (Serial Clock)&lt;/strong&gt;：时钟线，由主设备（STM32）产生稳定的节拍。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SDA (Serial Data)&lt;/strong&gt;：数据线，所有的信息、指令和数据都在这根线上传输。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为什么它比串口厉害？ &lt;strong&gt;串口通常只能“一对一”，而 I2C 可以在同一组引脚上连接多达 128 个设备&lt;/strong&gt;（如屏幕、温湿度传感器、陀螺仪），只要它们的“地址”不一样，就像是总线上的“门牌号”。&lt;/p&gt;
&lt;h3 id=&#34;2-硬件连接别接错-5v&#34;&gt;2. 硬件连接：别接错 5V
&lt;/h3&gt;&lt;p&gt;对于 STM32F103C8T6，我们通常使用 &lt;strong&gt;I2C1&lt;/strong&gt;。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;OLED 引脚&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;STM32 引脚&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;说明&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;VCC&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;3.3V&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;严禁接 5V&lt;/strong&gt;，否则可能烧毁 OLED 驱动芯片。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;GND&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;GND&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;电源负极。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;SCL&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;PB6&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;I2C1 的时钟信号。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;SDA&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;PB7&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;I2C1 的数据信号。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;3-stm32cubeide-配置-ioc&#34;&gt;3. STM32CubeIDE 配置 (.ioc)
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;在左侧点击 &lt;strong&gt;Connectivity -&amp;gt; I2C1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;将 &lt;strong&gt;I2C&lt;/strong&gt; 模式设置为 &lt;strong&gt;I2C&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;参数设置 (Parameter Settings)&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;I2C Speed Mode&lt;/strong&gt;：保持 Standard Mode (100KHz) 即可，对于初学者更稳；如果你追求流畅，可以选 Fast Mode (400KHz)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;你会看到引脚图上 &lt;strong&gt;PB6 (SCL)&lt;/strong&gt; 和 &lt;strong&gt;PB7 (SDA)&lt;/strong&gt; 变绿了。&lt;/li&gt;
&lt;li&gt;保存并生成代码。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221132202219.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221132202219.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;4-为什么要用库&#34;&gt;4. 为什么要用库？
&lt;/h3&gt;&lt;p&gt;串口发数据很简单（发个字符就行），但 OLED 屏幕非常复杂。要显示一个字母 &amp;lsquo;A&amp;rsquo;，你需要告诉驱动芯片：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;“我要在某个坐标画点”。&lt;/li&gt;
&lt;li&gt;“这个点的颜色是亮还是灭”。&lt;/li&gt;
&lt;li&gt;“点阵模组是如何排列的”。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;为了不让代码写成“天书”，我们通常会引入成熟的开源驱动库。最常用的是 &lt;strong&gt;&lt;code&gt;ssd1306_stm32&lt;/code&gt;&lt;/strong&gt; 或轻量化的 &lt;strong&gt;&lt;code&gt;u8g2&lt;/code&gt;&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;待续&#34;&gt;待续
&lt;/h3&gt;</description>
        </item>
        <item>
        <title>ZZZ-21-串口通讯&#43;VOFA</title>
        <link>https://teaize.github.io/p/zzz-21-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF-vofa/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-21-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF-vofa/</guid>
        <description>&lt;p&gt;在工业开发（如 CEMS）中，&lt;strong&gt;VOFA+&lt;/strong&gt; 配合串口（UART）简直是“神兵利器”。它能把枯燥的数字变成实时的波形图，让你一眼看出传感器的数据稳不稳定、有没有噪声。&lt;/p&gt;
&lt;p&gt;这里我们使用 [[ZZZ-18-ADC多通道采集]]、[[ZZZ-19-ADC采样数据滤波]] 中对单片机的配置【两个传感器、串口通讯、扫描模式 (Scan) + 循环模式 (Circular) + DMA】

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221144914068.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221144914068.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;编写代码-mainc&#34;&gt;编写代码 (main.c)
&lt;/h3&gt;&lt;h4 id=&#34;第一步定义更大的缓冲区&#34;&gt;第一步：定义更大的缓冲区
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define SAMPLES 10  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 每个通道采样 10 次
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define CHANNELS 2 &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 共 2 个通道
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 长度为 20 的数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第二步启动采集&#34;&gt;第二步：启动采集
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 为了精准，建议先进行 ADC 校准（F1系列特有＿
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADCEx_Calibration_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 核心命令：启势 ADC + DMA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 参数：ADC句柄，存储的目标地址，要搬运的数据个数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第三步数据平均处理并发送&#34;&gt;第三步：数据平均处理并发送
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 1. 从 DMA 缓冲区计算平均值（让你看到的波形更平滑）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// 通道 A
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 通道 B
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 2. 核心步骤：按照 VOFA+ 的 FireWater 协议打印
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 注意：末尾必须有 \n，VOFA+ 靠它来识别一帧数据的结束
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.3f,%.3f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 3. 适当延时
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// VOFA+ 绘图能力很强，10ms~100ms 都可以。这里设为 20ms，波形会很丝滑
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;在 VOFA+ 的 FireWater 协议中，如何同时发送多个数据通道?
使用 &lt;code&gt;printf&lt;/code&gt; 以逗号分隔数值，并以 &lt;code&gt;\n&lt;/code&gt; 结尾。例如：&lt;code&gt;printf(&amp;quot;%f,%f\n&amp;quot;, val1, val2);&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;配置-vofa-工具&#34;&gt;配置 VOFA+ 工具
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;打开 VOFA+，点击左侧的“小齿轮”图标（设置）。&lt;/li&gt;
&lt;li&gt;数据引擎 (Data Engine)：选择 &lt;strong&gt;FireWater&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;连接配置：
&lt;ul&gt;
&lt;li&gt;选择你的 &lt;strong&gt;COM 口&lt;/strong&gt;（和烧录器/串口线对应）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;波特率&lt;/strong&gt;：检查你在 CubeMX 里的设置，通常是 &lt;strong&gt;115200&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;开始运行：点击右上角的红色圆圈（连接）。&lt;/li&gt;
&lt;li&gt;添加波形图：
&lt;ul&gt;
&lt;li&gt;右键点击空白处 -&amp;gt; &lt;strong&gt;控件&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Waveform&lt;/strong&gt;（波形图）。&lt;/li&gt;
&lt;li&gt;此时你应该能看到两条线在跳动了！&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221145732234.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221145732234.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221145841345.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221145841345.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;进阶挑战工频干扰&#34;&gt;进阶挑战：工频干扰
&lt;/h2&gt;&lt;p&gt;用手摸一下 ADC 的输入引脚，如（3）所示，波形因为人体感应电产生了剧烈的波动，这就是噪声，之后我们会用算法滤掉它&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221150236586.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221150236586.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;为什么会出现圈-3-的波动&#34;&gt;为什么会出现圈 (3) 的波动
&lt;/h3&gt;&lt;p&gt;你观察到的这个波动非常典型。当你的输入引脚（ADC 通道）处于&lt;strong&gt;高阻抗&lt;/strong&gt;状态（比如拔掉了电位器，引脚悬空或者只由人体接触时），它就像一根“天线”，会吸收空间中的电磁干扰，最主要的就是环境中的 &lt;strong&gt;50Hz 市电工频干扰&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;利用算法把这些毛刺磨平&#34;&gt;利用“算法”把这些毛刺“磨平”
&lt;/h3&gt;&lt;p&gt;为了应对你观察到的圈 (3) 这种干扰，工业界最常用的方案是 &lt;strong&gt;一阶滞后滤波 (First-order Lag Filter)&lt;/strong&gt;。它比简单的算术平均值更节省内存，且波形更加平滑。&lt;/p&gt;
&lt;h4 id=&#34;1-滤波原理公式&#34;&gt;1. 滤波原理公式
&lt;/h4&gt;&lt;p&gt;$$Y(n) = \alpha \cdot X(n) + (1 - \alpha) \cdot Y(n-1)$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$X(n)$：本次采样的原始值。&lt;/li&gt;
&lt;li&gt;$Y(n-1)$：上一次滤波后的输出值。&lt;/li&gt;
&lt;li&gt;$\alpha$：滤波系数（$0 &amp;lt; \alpha &amp;lt; 1$）。
&lt;ul&gt;
&lt;li&gt;$\alpha$ 越小，波形越平滑，但响应越慢；$\alpha$ 越大，波形越灵敏，但滤除噪声能力弱。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-代码实现&#34;&gt;2. 代码实现
&lt;/h4&gt;&lt;p&gt;可以直接在 &lt;code&gt;while(1)&lt;/code&gt; 循环上方定义一个静态变量来存储“上一次的值”，并应用这个公式。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;/*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;USER&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CODE&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BEGIN&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.15&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;滤波系数&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;你可以尝试修改这个值观察&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;VOFA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;上的变化&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;/*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;USER&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CODE&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;END&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 1. 计算平均值（作为原始输入值值）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 计算当前这一刻的原始电压
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 2. 核心算法：一阶滞后滤波（只对 A 进行处理作为演示）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 公式：本次输出 = alpha * 本次采样 + (1 - alpha) * 上次输出
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 3. 核心步骤：只用一个 printf，一次性发出三个数据
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// VOFA+ 会识别到 3 个通道：通道0(原始A), 通道1(滤波A), 通道2(原始B)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.3f,%.3f,%.3f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 4. 适当延时，20ms 对应 50Hz 的采样率，对观察干扰波形非常合适
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;红色为原始曲线【注意，这里没有用上面所说的一阶滞后滤波，但依然用了 [[ZZZ-19-ADC采样数据滤波]] 的平均滤波】&lt;/li&gt;
&lt;li&gt;绿色为滤波之后的曲线【相对于红色曲线多了一层一阶滞后滤波】

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221152006005.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221152006005.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果去掉 [[ZZZ-19-ADC采样数据滤波]] 中的平均滤波，直接使用一阶滞后滤波，效果如下

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221152454949.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221152454949.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;另外，还有一个值得学习的点是，如何根据频域图来找干扰（再 VOFA+ 中可以添加频域图）

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221153800773.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221153800773.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;数据的逻辑映射&#34;&gt;数据的逻辑映射
&lt;/h3&gt;&lt;p&gt;掌握了 VOFA+，就相当于拥有了一双“电子显微镜”。我们可以利用这双眼睛，把你的 STM32 变成一个真正的工业测量仪表初级原型。&lt;/p&gt;
&lt;p&gt;在 CEMS（烟气监测）领域，传感器很少直接告诉你“电压是多少”，它们通常输出的是 &lt;strong&gt;4-20mA 电流&lt;/strong&gt;或 &lt;strong&gt;0-5V 电压&lt;/strong&gt;，对应的是&lt;strong&gt;烟气浓度&lt;/strong&gt;（比如 $0 \sim 100,mg/m^3$ 的 $SO_2$）。我们可以在代码中添加一些数学转换，让 VOFA 不再显示枯燥的电压，而是浓度&lt;/p&gt;
&lt;h4 id=&#34;尝试编写一个映射函数&#34;&gt;尝试编写一个“映射函数”
&lt;/h4&gt;&lt;p&gt;假设你正在模拟一个二氧化硫（$SO_2$）传感器：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$0.0V$ 对应 $0,mg/m^3$&lt;/li&gt;
&lt;li&gt;$3.0V$ 对应 $100,mg/m^3$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你可以定义一个公式：$$Concentration = Voltage \times \frac{100}{3.0}$$&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;在&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;里&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;so2_conc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;100.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;计算浓度&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;发送给&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;VOFA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;原始电压&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;滤波电压&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SO2浓度&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%.3f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%.3f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%.3f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;so2_conc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;在-vofa-中观察&#34;&gt;在 VOFA+ 中观察
&lt;/h4&gt;&lt;p&gt;可以在 VOFA+ 里同时打开两个窗口：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;左边放波形图：看电压的平滑度。&lt;/li&gt;
&lt;li&gt;右边放“数字仪表盘” (Number 控件)：直接看当前的 $SO_2$ 浓度数值。当拨动电位器时，你会发现自己正在“调节”烟气浓度。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221155716472.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221155716472.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;思考为什么用-30v-对应-100mgm3&#34;&gt;思考：为什么用 $3.0V$ 对应 $100,mg/m^3$
&lt;/h3&gt;&lt;h4 id=&#34;1留出安全冗余度headroom&#34;&gt;1、留出“安全冗余度”（Headroom）
&lt;/h4&gt;&lt;p&gt;在现实世界中，如果你的传感器满量程刚好是 $3.3V$，而你的单片机供电也是 $3.3V$，这会带来一个很尴尬的问题：&lt;strong&gt;削顶（Clipping）&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果传感器因为某种原因（比如瞬时超标）输出了 $3.35V$，你的 ADC 读出来依然是 $4095$（对应 $3.3V$）。这意味着你丢失了超标的那部分数据，且无法判断它是刚好满量程还是已经&lt;strong&gt;溢出了&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;工程做法：通常会设计电路，&lt;strong&gt;让传感器的最大量程对应 ADC 满量程的 80%~90%&lt;/strong&gt;（例如 $3.0V$）。这样即使信号稍微超出一点，单片机依然能捕捉到变化曲线。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2电压波动风险&#34;&gt;2、电压波动风险
&lt;/h4&gt;&lt;p&gt;单片机的 $3.3V$ 电源往往不是完美的 $3.3000V$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果此时电脑 USB 供电不足，电压降到了 $3.25V$。&lt;/li&gt;
&lt;li&gt;如果你以 $3.3V$ 为标准计算，所有的测量结果都会产生&lt;strong&gt;比例偏差&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;将满量程定在 $3.0V$，可以一定程度上降低对电源绝对精准度的依赖（当然，最专业的做法是使用内部或外部的参考电压基准）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3线性区的保护&#34;&gt;3、线性区的保护
&lt;/h4&gt;&lt;p&gt;大多数运算放大器（模拟信号处理电路）在接近电源轨（比如 $0V$ 或 $3.3V$）时，输出的&lt;strong&gt;线性度&lt;/strong&gt;会变差。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;信号在 $0.5V \sim 2.8V$ 之间可能非常准，是一条直线。&lt;/li&gt;
&lt;li&gt;一旦到了 $3.2V$ 以上，曲线可能会变弯。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;思考&lt;/strong&gt;：为了保证 数据的精准，我们宁愿只用中间那段最准的“黄金区间”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;总结这就是工程思维&#34;&gt;总结：这就是“工程思维”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;数学思维：$3.3V / 4096$，追求理论的极致利用。&lt;/li&gt;
&lt;li&gt;工程思维：$3.0V / 4096$，追求系统的鲁棒性（稳定性）和容错率。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以你会发现很多专业仪器在标定时，都会预留出 10% 的“超量程监测能力”，就是为了防止信号“顶到天花板”导致数据丢失&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-22-参考电压通道</title>
        <link>https://teaize.github.io/p/zzz-22-%E5%8F%82%E8%80%83%E7%94%B5%E5%8E%8B%E9%80%9A%E9%81%93/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-22-%E5%8F%82%E8%80%83%E7%94%B5%E5%8E%8B%E9%80%9A%E9%81%93/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-21-串口通讯+VOFA]]&lt;/p&gt;
&lt;h3 id=&#34;为什么需要参考电压通道&#34;&gt;为什么需要参考电压通道
&lt;/h3&gt;&lt;p&gt;想象你在用一把&lt;strong&gt;塑料尺子&lt;/strong&gt;量桌子的长度。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;正常情况： 尺子是 1 米长，量出桌子是 1.2 米。&lt;/li&gt;
&lt;li&gt;意外情况： 天气太热，尺子&lt;strong&gt;受热膨胀&lt;/strong&gt;变成了 1.1 米，但尺子上的刻度没变。你再去量，发现桌子变成“1.1 米”了。&lt;/li&gt;
&lt;li&gt;结论： 你的“基准”（尺子）变了，量出来的数就不准了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在 STM32 里，那个 $3.3V$ 电源就是你的尺子。如果 USB 供电不稳定，或者接了电机导致电压掉到了 $3.1V$，“尺子”就缩水了，ADC 算出来的电压就会偏大。&lt;/p&gt;
&lt;h3 id=&#34;参考电压通道自带标准样棒&#34;&gt;参考电压通道自带“标准样棒”
&lt;/h3&gt;&lt;p&gt;STM32 芯片内部藏着一个非常稳定的&lt;strong&gt;电压源&lt;/strong&gt;（通常是 $1.2V$ 左右），这个电压&lt;strong&gt;不会&lt;/strong&gt;随着外部 $3.3V$ 的波动而改变。&lt;/p&gt;
&lt;p&gt;操作逻辑很简单：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;你用“缩水的尺子”（不稳的 $3.3V$）去量这根“标准样棒”（内部 $1.2V$）。&lt;/li&gt;
&lt;li&gt;如果你量出来是 $1.25V$，你就知道尺子缩水了。&lt;/li&gt;
&lt;li&gt;通过一个简单的比例换算，你就能把桌子的真实长度找回来。$$真实的电压 = 测量出的电压 \times \frac{内部参考电压额定值}{测量出的内部参考电压}$$&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第一步cubemx-配置给尺子加刻度&#34;&gt;第一步：CubeMX 配置（给尺子加刻度）
&lt;/h3&gt;&lt;p&gt;你需要在 CubeMX 里做三处微调：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;开启通道&lt;/strong&gt;：在 ADC1 的配置界面，找到 &lt;strong&gt;&lt;code&gt;Vrefint Channel&lt;/code&gt;&lt;/strong&gt;，把它勾选上。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;调整转换数量&lt;/strong&gt;：将 &lt;strong&gt;&lt;code&gt;Number of Conversions&lt;/code&gt;&lt;/strong&gt; 从 &lt;code&gt;2&lt;/code&gt; 改为 &lt;strong&gt;&lt;code&gt;3&lt;/code&gt;&lt;/strong&gt;【[[ZZZ-21-串口通讯+VOFA]] 中使用了两个传感器，所以之前这里一只是 2，现在需要再新增一个】&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;配置 Rank&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;Rank 1 和 Rank 2 保持你原来的通道。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rank 3&lt;/strong&gt; 选择 &lt;strong&gt;&lt;code&gt;Internal Reference Voltage&lt;/code&gt;&lt;/strong&gt;。采样时间（Sampling Time）建议选长一点（比如 55.5 或 239.5 Cycles），因为这个内部基准电压需要充放电稳定。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DMA 检查&lt;/strong&gt;：确保 DMA 依然是 &lt;strong&gt;Circular&lt;/strong&gt; 模式。&lt;/li&gt;
&lt;li&gt;保存生成代码（Generate Code）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第二步代码实现数学的魔术&#34;&gt;第二步：代码实现（数学的魔术）
&lt;/h3&gt;&lt;p&gt;回到你的 &lt;code&gt;main.c&lt;/code&gt;。因为多了一个通道，我们要改一下定义和缓冲区。&lt;/p&gt;
&lt;h4 id=&#34;1-修改宏定义&#34;&gt;1. 修改宏定义
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define SAMPLES 10  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define CHANNELS 3  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 从 2 改成 3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;2-在循环中计算真实电压&#34;&gt;2. 在循环中计算真实电压
&lt;/h4&gt;&lt;p&gt;STM32F1 系列的内部参考电压额定值大约是 &lt;strong&gt;1.2V&lt;/strong&gt;。我们的逻辑是：利用这 1.2V 反向推导出当前的电源电压到底是多少。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意，这里也用了两种滤波：
算术平均滤波：一次性搬运 10 个数据并取平均，可以有效消除这种随机的“毛刺”，得到一个相对扎实的“原始均值”
一阶滞后滤波：它通过比例分配，让“本次测量值”只占一小部分比重（15%），而大部分比重保留“上次的结果”（85%）【靠 &lt;code&gt;alpha&lt;/code&gt; 来调节】。它能让波形变得非常“丝滑”，像绸缎一样，几乎看不到锯齿&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* 在 while(1) 之前定义 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.15f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;VREFINT_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.2f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 内部参考电压额定值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_Vref&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 新增：用来存内部基准的累加值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 1. 获取累加值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;c1&#34;&gt;// 假设 Rank 3 是内部基准，索引就是 i*3 + 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;sum_Vref&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 2. 计算平均原始数值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_avg_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_avg_Vref&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_Vref&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 3. 【核心数学换算】
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 原理：V_A / raw_avg_A = VREFINT_NOMINAL / raw_avg_Vref
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 推导出 V_A = VREFINT_NOMINAL * (raw_avg_A / raw_avg_Vref)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 你会发现，3.3 这个不准的数字被彻底踢出了公式！
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;real_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;VREFINT_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_avg_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_avg_Vref&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 4. 同样进行一阶滤波
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;real_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 5. 发送给 VOFA+
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.3f,%.3f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;real_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;为什么这个公式很牛&#34;&gt;为什么这个公式很牛？
&lt;/h3&gt;&lt;p&gt;请看这个神奇的推导：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传统的算式：$V_A = \frac{ADC_{data}}{4095} \times V_{DDA}$ （$V_{DDA}$ 通常假设是 3.3）&lt;/li&gt;
&lt;li&gt;现在的算式：$V_A = 1.2 \times \frac{ADC_{data_A}}{ADC_{data_Vref}}$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;发现了吗？$4095$ 消失了，$3.3$ 也消失了！这意味着：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;就算你的 $3.3V$ 电源因为接了太多负载掉到了 $3.0V$，公式依然成立。&lt;/li&gt;
&lt;li&gt;就算你的 ADC 有微小的增益误差，也会因为分子分母同时缩放而抵消。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-22-制作简易变送器</title>
        <link>https://teaize.github.io/p/zzz-22-%E5%88%B6%E4%BD%9C%E7%AE%80%E6%98%93%E5%8F%98%E9%80%81%E5%99%A8/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-22-%E5%88%B6%E4%BD%9C%E7%AE%80%E6%98%93%E5%8F%98%E9%80%81%E5%99%A8/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-21-串口通讯+VOFA]]，这节学习制作“数字式压力变送器”的雏形&lt;/p&gt;
&lt;p&gt;在 CEMS（烟气在线监测系统）中，几乎所有的流量计、压力变送器和氧分析仪都使用 &lt;strong&gt;4-20mA 电流环&lt;/strong&gt; 协议。[[ZZZ-21-串口通讯+VOFA]] 中实现在在 VOFA 中电压图形的输出，这里我们继续沿用它的单片机配置&lt;/p&gt;
&lt;h3 id=&#34;1-模拟方案设计&#34;&gt;1. 模拟方案设计
&lt;/h3&gt;&lt;p&gt;虽然我们手头没有真实的电流传感器，但我们可以通过数学模拟：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;硬件模拟：假设你在 ADC 引脚上接了一个 &lt;strong&gt;150Ω&lt;/strong&gt; 的采样电阻（工业常用值）。&lt;/li&gt;
&lt;li&gt;电压区间：
&lt;ul&gt;
&lt;li&gt;4mA 对应电压：$4mA \times 150\Omega = 0.6V$&lt;/li&gt;
&lt;li&gt;20mA 对应电压：$20mA \times 150\Omega = 3.0V$&lt;/li&gt;
&lt;li&gt;0.6V ~ 3.0V 就是我们的“有效工作区”。&lt;/li&gt;
&lt;li&gt;低于 0.5V（约 3.3mA）：判定为传感器断线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-核心算法实现&#34;&gt;2. 核心算法实现
&lt;/h3&gt;&lt;p&gt;硬件：USB 转 TTL 模块；两个传感器：一个电位器（方便调节），一个随便什么模拟输出量传感器&lt;/p&gt;
&lt;p&gt;我们将之前的代码升级，加入电流换算、压力转换（假设量程 0-1.6MPa）以及报警逻辑。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define SAMPLES 10  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 每个通道采样 10 次
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define CHANNELS 2 &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 共 2 个通道
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 长度为 20 的数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;注意这里规定了压力传感器的量程 0-1.6 MPa&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 1 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.15f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 滤波系数，你可以尝试修改这个值观察 VOFA+ 上的变化
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;150.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 采样电阻 150 欧
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;         &lt;span class=&#34;c1&#34;&gt;// 假设压力传感器量程 0-1.6 MPa
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I_MIN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;         &lt;span class=&#34;c1&#34;&gt;// 工业标准 4mA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;20.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// 工业标准 20mA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I_FAULT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;// 断线阈值 3.6mA（通常 4mA 以下即报警）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END 1 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 为了精准，建议先进行 ADC 校准（F1系列特有）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADCEx_Calibration_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 核心命令：启动 ADC + DMA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 参数：ADC句柄，存储的目标地址，要搬运的数据个数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;c1&#34;&gt;// 1. 计算平均值（作为原始输入值值）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  		&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  		&lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;c1&#34;&gt;// 计算当前这一刻的原始电压
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;c1&#34;&gt;//这里只用到了一个传感器，传感器B的数据都没有要
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;c1&#34;&gt;//float raw_volt_B = (float)sum_B / SAMPLES * 3.3f / 4095.0f;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;c1&#34;&gt;// 2. 核心算法：一阶滞后滤波（只对 A 进行处理作为演示）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;c1&#34;&gt;// 公式：本次输出 = alpha * 本次采样 + (1 - alpha) * 上次输出
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  	&lt;span class=&#34;c1&#34;&gt;// --- 1. 获取之前的精准滤波电压 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// (假设你已经用 VREFINT 计算出了 real_volt_A)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// --- 2. 换算为电流 (mA) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// --- 3. 换算为物理量 (压力 MPa) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 公式：Pressure = (Current - 4) * (Max_P / (20 - 4))
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I_MIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;P_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;I_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I_MIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 负数强制清零
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// --- 4. 工业逻辑处理 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_fault&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I_FAULT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 断线检测
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_high_alarm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.2f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 超压报警 (1.2MPa)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// --- 5. VOFA+ 多维度输出 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 通道：电流(mA), 压力(MPa), 故障状态(0/1), 报警状态(0/1)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.2f,%.3f,%d,%d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_fault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_high_alarm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;3-你在-vofa-中会看到什么&#34;&gt;3. 你在 VOFA+ 中会看到什么？
&lt;/h3&gt;&lt;p&gt;当你转动电位器模拟传感器输出时：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;电流线&lt;/strong&gt;：你会看到它在 $0 \sim 22mA$ 之间波动。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;压力线&lt;/strong&gt;：它会严格跟随电流。你会发现，当电流低于 $4mA$ 时，压力变为 $0$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;故障线 (is_fault)&lt;/strong&gt;：当你把电位器拧到底（模拟断线，电压接近 $0V$）时，这根线会从 $0$ 跳到 $1$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;报警线 (is_high_alarm)&lt;/strong&gt;：当压力模拟值超过 $1.2MPa$ 时，你会看到一个台阶跳变。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221175741354.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221175741354.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;4-为什么这比单纯测电压更专业&#34;&gt;4. 为什么这比单纯测电压更专业？
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;零点偏移 (Zero Offset)&lt;/strong&gt;：在 CEMS 中，如果传感器显示 $4.01mA$ 而不是 $4.00mA$，我们就需要进行“零点校准”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;故障自诊断&lt;/strong&gt;：如果系统发现电流是 $0mA$，它不会报错“压力低”，而是报错“传感器断线”。这是工业仪表最基本的&lt;strong&gt;鲁棒性&lt;/strong&gt;要求。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;抗噪声&lt;/strong&gt;：由于你之前已经加了&lt;strong&gt;两级滤波&lt;/strong&gt;，你的压力读数在 VOFA+ 上会非常稳定，即使电流有微小的波动，转换后的压力值依然可以精确到小数点后三位。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-23-零点校准</title>
        <link>https://teaize.github.io/p/zzz-23-%E9%9B%B6%E7%82%B9%E6%A0%A1%E5%87%86/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-23-%E9%9B%B6%E7%82%B9%E6%A0%A1%E5%87%86/</guid>
        <description>&lt;p&gt;在 CEMS 维护中，技术人员经常需要进行“零点校准”，以消除变送器老化或环境变化带来的微小偏差。
我们要实现的逻辑是：&lt;strong&gt;当你按下开发板上的按键（或外接按键）时，系统记录当前的电压值为“零点”，之后所有的压力计算都以这个新零点为基准。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;1-开发准备&#34;&gt;1. 开发准备
&lt;/h3&gt;&lt;p&gt;如果开发板上没有按键，需要外接按键的话，推荐使用 &lt;strong&gt;“内部上拉 + 外部接地”&lt;/strong&gt; 的方案，因为这样只需要一根导线和一个按键，不需要额外的电阻。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;轻触按键：一端接单片机的 GPIO 引脚（例如 &lt;code&gt;PB0&lt;/code&gt;），另一端接 GND&lt;/li&gt;
&lt;li&gt;在 CubeMX 里做如下设置：
&lt;ul&gt;
&lt;li&gt;Pin Selection：选择一个空闲引脚（ &lt;code&gt;PB0&lt;/code&gt;），设为 &lt;strong&gt;GPIO_Input&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;GPIO Pull-up/Pull-down：必须选择 &lt;strong&gt;Pull-up&lt;/strong&gt;（上拉）。这样引脚平时才是稳定的高电平。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221183458966.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221183458966.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;2-代码&#34;&gt;2. 代码
&lt;/h3&gt;&lt;p&gt;代码主体结构、单片机配置和 [[ZZZ-21-串口通讯+VOFA]]、[[ZZZ-22-制作简易变送器]] 大体相同&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define SAMPLES 10  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 每个通道采样 10 次
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define CHANNELS 2 &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 共 2 个通道
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 长度为 20 的数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 默认零点是 0.6V (4mA)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibration_flag&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;         &lt;span class=&#34;c1&#34;&gt;// 标定触发标志
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 1 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.15f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 滤波系数，你可以尝试修改这个值观察 VOFA+ 上的变化
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;150.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 采样电阻 150 欧
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;         &lt;span class=&#34;c1&#34;&gt;// 假设压力传感器量程 0-1.6 MPa
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END 1 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 为了精准，建议先进行 ADC 校准（F1系列特有）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_ADCEx_Calibration_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 核心命令：启动 ADC + DMA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 参数：ADC句柄，存储的目标地址，要搬运的数据个数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// 1. 计算平均值（作为原始输入值值）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;sum_B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// 计算当前这一刻的原始电压
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;//这里只用到了一个传感器，传感器B的数据都没有要
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;//float raw_volt_B = (float)sum_B / SAMPLES * 3.3f / 4095.0f;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// 2. 核心算法：一阶滞后滤波（只对 A 进行处理作为演示）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// 公式：本次输出 = alpha * 本次采样 + (1 - alpha) * 上次输出
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 1. 获取滤波后的电压 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 2. 检测按键（假设按键按下为低电平） ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 去抖动
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;c1&#34;&gt;// 【核心动作】：把当前稳定的滤波电压记录为新零点
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;calibration_flag&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 触发一个标志位，可以在 VOFA+ 上看到
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;c1&#34;&gt;// 亮灯提示标定完成
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_SET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 等待按键松开
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 3. 换算电流 (mA) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 4. 【标定后的压力计算】 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 关键逻辑：用当前电压 减去 标定零点电压，再映射到量程
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 这样无论零点怎么飘，标定后的输出在零点处一定是 0 MPa
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibrated_volt_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;calibrated_volt_diff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;P_MAX&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 基于 4-20mA 跨度 (2.4V) 换算
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 忽略微小的负向波动
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 5. VOFA+ 输出 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 通道：电流, 标定前压力(参考), 标定后压力, 零点电压值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.2f,%.3f,%.3f,%.3f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;P_MAX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;2.4f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pressure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;标定前
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221185927805.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221185927805.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;


假设在该位置处进行零点压力校准。也就是按一下按键：
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221190031065.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221190031065.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;标定前后：压力显示 0.026MPa—&amp;gt;0；&lt;strong&gt;压力量程：0-1.6 MPa&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;标定前后：零点电压 0.6—&amp;gt;0.639；&lt;strong&gt;电压量程：0.6~3V&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;也就是说，电压量程比上压力量程（也就是斜率） = 2.4/1.6=1.5。压力从 0.026 变到 0，对应的电压变化就是 0.026X1.5=0.039&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;标定逻辑&#34;&gt;标定逻辑
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    A[开始: While 循环] --&gt; B[获取双重滤波后的电压 volt]
    B --&gt; C{是否按下标定键?}
    
    %% 标定分支
    C -- 是 --&gt; D[消抖延时 20ms]
    D --&gt; E{再次确认按下?}
    E -- 是 --&gt; F[更新 zero_offset_volt = volt]
    F --&gt; G[指示灯反馈/提示标定完成]
    G --&gt; H[等待按键松开]
    H --&gt; I[进入物理量换算]
    
    %% 正常运行分支
    C -- 否 --&gt; I
    E -- 否 --&gt; I

    %% 计算逻辑
    I --&gt; J[换算电流: current_mA = volt / 150 * 1000]
    J --&gt; K[计算标定后压差: diff = volt - zero_offset_volt]
    K --&gt; L[换算压力: pressure = diff * 比例系数]
    
    %% 报警逻辑
    L --&gt; M{current_mA &lt; 3.6mA?}
    M -- 是 --&gt; N[输出: 传感器断线故障]
    M -- 否 --&gt; O{pressure &gt; 1.2MPa?}
    O -- 是 --&gt; P[输出: 压力超限报警]
    O -- 否 --&gt; Q[输出: 状态正常]

    %% 结束一轮
    N --&gt; R[VOFA+ 数据打包发送]
    P --&gt; R
    Q --&gt; R
    R --&gt; S[HAL_Delay 20ms]
    S --&gt; A
&lt;/div&gt;
&lt;h4 id=&#34;第一步为什么要减法建立参考点&#34;&gt;第一步：为什么要“减法”？（建立参考点）
&lt;/h4&gt;&lt;p&gt;假设一个理想的 $0 \sim 1.6,MPa$ 压力传感器：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;理想状态&lt;/strong&gt;：$4mA$ 时电压应为 $0.6V$。此时压力显示应为 $0$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实际状态&lt;/strong&gt;：由于各种原因，现在没压力时，传感器输出变成了 $0.65V$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;如果不标定&lt;/strong&gt;：直接计算会显示出一个微小的压力值（误差）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;标定动作：&lt;strong&gt;当你按下标定键，代码执行 zero_offset_volt = 0.65f&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;从此以后，所有的测量值都要先减去这 $0.65V$【这里有一个容易混乱的点：压力输出为 0，压力传感器零点对应的零点电压不一定为 0.并且校准前和校准后，只是零点电压这个点位变了而已】：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果现在电压是 $0.65V$：$0.65 - 0.65 = 0V$（对应 $0$ 压力，&lt;strong&gt;完美对齐！&lt;/strong&gt;）。&lt;/li&gt;
&lt;li&gt;如果现在电压是 $1.0V$：$1.0 - 0.65 = 0.35V$（只计算超出零点的部分）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第二步为什么要映射比例缩放&#34;&gt;第二步：为什么要“映射”？（比例缩放）
&lt;/h4&gt;&lt;p&gt;减完之后，我们得到了一个“纯净的电压差”，但我们最终要的是“MPa（压力单位）”。这时需要用到&lt;strong&gt;线性插值公式&lt;/strong&gt;。我们需要知道一个关键值：&lt;strong&gt;有效电压跨度（Span）&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;工业标准中，$20mA$ ($3.0V$) 到 $4mA$ ($0.6V$) 之间的跨度是固定不变的：$$Span = 3.0V - 0.6V = 2.4V$$&lt;/li&gt;
&lt;li&gt;这意味着：每增加 $2.4V$ 电压，就代表压力增加了 $1.6,MPa$。
最终公式：$$Pressure = (Volt_{current} - Volt_{zero_offset}) \times \frac{P_{max}}{Span}$$&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;一个常见误区&#34;&gt;一个常见误区
&lt;/h3&gt;&lt;p&gt;例如一个传感器，输出 0~X 量程，之前总是认为传感器输出 0 时，其电压也是 0，实际上不是这样。例如上面的案例中，压力传感器输出 0 时，电压为 0.6V。&lt;/p&gt;
&lt;p&gt;这里的设计同【0&lt;del&gt;20mA 输出比较好还是 4&lt;/del&gt;20mA 输出比较好】，想要解决的是一类问题&lt;/p&gt;
&lt;h4 id=&#34;重新理解你的校准逻辑&#34;&gt;重新理解你的校准逻辑
&lt;/h4&gt;&lt;p&gt;现在你就能明白为什么我们的标定公式是这样设计的了：$$Pressure = (V_{measured} - 0.6) \times \frac{P_{max}}{2.4}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;减去 0.6&lt;/strong&gt;：是把那个“活零点”的基础电压减掉，提取出纯粹的信号增量。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;除以 2.4&lt;/strong&gt;：是因为你的有效信号范围其实只有 $3.0V - 0.6V = 2.4V$。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;工业界常见的电压标准&#34;&gt;工业界常见的电压标准
&lt;/h4&gt;&lt;p&gt;在学习 STM32 和硬件电路时，你会发现工业仪表通常有这几套“方言”：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;信号类型&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;零点 (0%)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;满量程 (100%)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;特点&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;4-20mA&lt;/strong&gt; (电流)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;4mA&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;20mA&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;工业标准&lt;/strong&gt;，抗干扰最强。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;1-5V&lt;/strong&gt; (电压)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;1V&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;5V&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;对应 4-20mA 在 250$\Omega$ 电阻上的电压。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;0.6-3V&lt;/strong&gt; (电压)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;0.6V&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;3.0V&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;上面案例的配置&lt;/strong&gt;，适合 150$\Omega$ 电阻和 3.3V 的 STM32。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>ZZZ-24-满量程校准</title>
        <link>https://teaize.github.io/p/zzz-24-%E6%BB%A1%E9%87%8F%E7%A8%8B%E6%A0%A1%E5%87%86/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-24-%E6%BB%A1%E9%87%8F%E7%A8%8B%E6%A0%A1%E5%87%86/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-23-零点校准]]，演示的案例中【硬件】和【单片机配置】大体相同&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果说“零点校准”是修正坐标轴的&lt;strong&gt;起点&lt;/strong&gt;，那么“满量程校准”就是修正坐标轴的&lt;strong&gt;斜率&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;1-为什么要进行满量程校准&#34;&gt;1. 为什么要进行满量程校准？
&lt;/h3&gt;&lt;p&gt;即使你把零点对齐了（4mA 对应 0），传感器在测量高浓度或高压力时，依然可能产生偏差。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原因：传感器内部的放大电路增益可能随温度变化，或者传感器探头灵敏度衰减。&lt;/li&gt;
&lt;li&gt;结果：原本 $20mA$ 应该代表 $1.6,MPa$，结果传感器只输出了 $19.5mA$。&lt;/li&gt;
&lt;li&gt;校准逻辑：我们需要给传感器一个“标准参考值”（如标准气体或已知压力），告诉单片机：“这就是满量程，请记住现在的斜率。”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-数学模型从-yx-b-到-ykx-b&#34;&gt;2. 数学模型：从 $y=x-b$ 到 $y=k(x-b)$
&lt;/h3&gt;&lt;p&gt;我们之前的压力计算公式可以抽象为：$$Pressure = k \cdot (V_{measured} - V_{zero})$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;$V_{zero}$&lt;/strong&gt;：零点电压（通过零点校准获得）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$k$ (斜率)&lt;/strong&gt;：这是满量程校准要修正的对象。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;满量程校准的推导：当你施加一个标准满量程压力（如 $1.6,MPa$）时，记下当前的电压 $V_{full_measured}$。
那么新的斜率 $k$ 应该是：$$k = \frac{P_{nominal}}{V_{full_measured} - V_{zero}}$$
其中 $P_{nominal}$ 是标准值的额定压力（如 1.6Mpa）&lt;/p&gt;
&lt;h3 id=&#34;3-代码实现方案&#34;&gt;3. 代码实现方案
&lt;/h3&gt;&lt;p&gt;我们需要再增加一个按键逻辑（例如按键接到 PB1）来触发“满量程校准”。&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221203135621.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221203135621.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define SAMPLES 10  					&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 每个通道采样 10 次
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define CHANNELS 2 						&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 共 2 个通道
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 长度为 20 的数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// --- 核心标定参数 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;c1&#34;&gt;// 满量程标定时的标准压力值 (MPa)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;150.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;// 采样电阻 150 欧
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.15f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;                &lt;span class=&#34;c1&#34;&gt;// 一阶滞后滤波系数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// --- 标定状态变量 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.60f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;c1&#34;&gt;// 默认零点电压 (4mA 对应 0.6V)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.6f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.60f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 默认斜率
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.60f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;              &lt;span class=&#34;c1&#34;&gt;// 滤波后的电压变量
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibration_flag&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;c1&#34;&gt;// 标定标志位
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 为了精准，建议先进行 ADC 校准（F1系列特有）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_ADCEx_Calibration_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 核心命令：启动 ADC + DMA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 参数：ADC句柄，存储的目标地址，要搬运的数据个数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 1. 信号采集与双重滤波 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 原始电压计算 (基于 3.3V 理论值，若需更准可换回 VREFINT 公式)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 一阶滞后滤波
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 2. 零点校准逻辑 (PB0) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 初步去抖
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 记录当前电压为新零点
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;c1&#34;&gt;// 亮灯反馈
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_SET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 等待松开
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 3. 满量程校准逻辑 (PB1) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;c1&#34;&gt;// 核心逻辑：斜率 k = 标准压力 / (当前满量程电压 - 零点电压)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.1f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 安全检查：确保满位电压确实大于零点电压
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;c1&#34;&gt;// 成功后快闪两次灯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_TogglePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 4. 最终工业参数换算 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 计算电流 (mA)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 计算校准后的压力
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 负数截断保护
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 5. VOFA+ 数据输出 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 通道说明：1.电流(mA), 2.校准后压力(MPa), 3.零点偏置电压(V), 4.当前斜率k
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.2f,%.3f,%.3f,%.4f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 10Hz 刷新率，适合观察
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;4校准实验&#34;&gt;4、校准实验
&lt;/h3&gt;&lt;p&gt;校准零点前
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221204654926.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221204654926.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;


校准零点后
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221204750064.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221204750064.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;


校准满量程后
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221204520043.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221204520043.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;1-零点漂移被零点偏置电压吸收&#34;&gt;1. 零点漂移被“零点偏置电压”吸收
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;物理现象：传感器在没有压力时，输出原本应该是 $0.6V$，但因为环境温度或老化变成了 $0.65V$。这多出来的 $0.05V$ 就是“零点漂移”。&lt;/li&gt;
&lt;li&gt;数学处理：你通过校准，把变量 &lt;code&gt;zero_offset_volt&lt;/code&gt; 从 $0.6$ 改成了 $0.65$。&lt;/li&gt;
&lt;li&gt;理解：在公式 $(volt - zero_offset_volt)$ 中，那个多出来的 $0.05V$ 确实被 &lt;code&gt;zero_offset_volt&lt;/code&gt; 抵消（吸收）掉了。坐标轴的起点被你平移到了现在真实的位置上。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-量程漂移被斜率吸收&#34;&gt;2. 量程漂移被“斜率”吸收
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;物理现象：传感器现在的“力气”变小了。以前增加 $2.4V$ 代表增加 $1.6,MPa$，现在增加 $2.4V$ 只能代表增加 $1.5,MPa$ 了。&lt;/li&gt;
&lt;li&gt;数学处理：你通过满量程校准，重新计算了 &lt;code&gt;slope_k&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;理解：新的 &lt;code&gt;slope_k&lt;/code&gt; 变大了，它通过补偿增益的方式，“吸收”了传感器灵敏度的下降。它把斜斜的曲线重新拉回到了正确的高度。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;换句话说，在工业仪表中，我们把传感器的所有“不完美”都归结为两个参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;截距 (Intercept)：由 &lt;code&gt;zero_offset_volt&lt;/code&gt; 承载，解决“&lt;strong&gt;从哪开始&lt;/strong&gt;”的问题。&lt;/li&gt;
&lt;li&gt;增益 (Gain/Slope)：由 &lt;code&gt;slope_k&lt;/code&gt; 承载，解决“&lt;strong&gt;走多快&lt;/strong&gt;”的问题。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;满量程校准中的安全检查&#34;&gt;满量程校准中的安全检查
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// --- 3. 满量程校准逻辑 (PB1) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// 核心逻辑：斜率 k = 标准压力 / (当前满量程电压 - 零点电压)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.1f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 安全检查：确保满位电压确实大于零点电压
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;c1&#34;&gt;// 成功后快闪两次灯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		 &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_TogglePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		 &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这里重点关注：&lt;code&gt;if (v_diff &amp;gt; 0.1f)&lt;/code&gt; ，为什么要这么写：&lt;/p&gt;
&lt;h4 id=&#34;预防数学炸弹防止除以零&#34;&gt;预防“数学炸弹”：防止除以零
&lt;/h4&gt;&lt;p&gt;在满量程标定中，斜率的计算公式是：$$k = \frac{P_{NOMINAL}}{V_{full} - V_{zero}}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;风险：如果 $V_{full}$ 等于 $V_{zero}$（即 &lt;code&gt;v_diff&lt;/code&gt; 为 0），程序在执行除法时会触发&lt;strong&gt;硬件异常&lt;/strong&gt;或者得到一个&lt;strong&gt;无穷大（Inf）&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;后果：这会导致你的 &lt;code&gt;calibrated_pressure&lt;/code&gt; 变成乱码，甚至导致单片机程序卡死或复位。&lt;/li&gt;
&lt;li&gt;保护：&lt;code&gt;0.1f&lt;/code&gt; 作为一个门槛，确保了分母永远是一个有意义的正数。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;操作防错防止误触发标定&#34;&gt;操作防错：防止“误触发”标定
&lt;/h4&gt;&lt;p&gt;在 CEMS（烟气在线监测系统）的现场维护中，操作员可能会忙中出错：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;误触：操作员本想按零点标定，却按成了满量程标定。此时传感器还没有通入标准压力或标气。&lt;/li&gt;
&lt;li&gt;逻辑：此时 $V_{full}$ 几乎等于 $V_{zero}$。如果没有这个检查，单片机就会把微小的噪声（比如 $0.001V$ 的波动）当成整个量程的跨度。&lt;/li&gt;
&lt;li&gt;结果：你会得到一个超级巨大的斜率 $k$。标定完后，哪怕空气稍微波动一下，显示屏上的压力数值都会疯狂飙升。&lt;/li&gt;
&lt;li&gt;保护：通过检查，如果差值不到 $0.1V$，程序就会认为“这次标定不合法”，从而拒绝更新 &lt;code&gt;slope_k&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;为什么是-01f-这个值&#34;&gt;为什么是 0.1f 这个值？
&lt;/h4&gt;&lt;p&gt;这个值不是绝对的，它是根据你的硬件环境估算的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;0.1V&lt;/strong&gt; 对应 12 位 ADC 约 &lt;strong&gt;124 个数值&lt;/strong&gt;（$4095 \times \frac{0.1}{3.3}$）。&lt;/li&gt;
&lt;li&gt;对于你的传感器（$0.6V \sim 3.0V$），总跨度是 $2.4V$。$0.1V$ 约占满量程跨度的 &lt;strong&gt;4%&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;建议&lt;/strong&gt;：如果你在更复杂的工业现场发现干扰很大，可以将这个值调高到 &lt;code&gt;0.2f&lt;/code&gt; 或 &lt;code&gt;0.3f&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;关于零点偏置电压和斜率&#34;&gt;关于零点偏置电压和斜率
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;如果零点偏置电压和斜率，被校准得偏离初始值非常大，会出现什么现象&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在 CEMS（烟气在线监测系统）的运维中，如果校准参数（零点和斜率）偏离初始值过大，通常意味着&lt;strong&gt;系统正在失去“测量能力”&lt;/strong&gt;。这种现象在工业上被称为“&lt;strong&gt;量程压缩&lt;/strong&gt;”或“&lt;strong&gt;分辨率退化&lt;/strong&gt;”。我们可以把这种情况形象地比喻成“老花镜”失效了。&lt;/p&gt;
&lt;h4 id=&#34;1-如果零点偏置电压偏离过大&#34;&gt;1. 如果“零点偏置电压”偏离过大
&lt;/h4&gt;&lt;p&gt;假设原本零点是 $0.6V$，现在被校准到了 $2.0V$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;现象 A：有效量程变窄（Range Compression）
&lt;ul&gt;
&lt;li&gt;STM32 的 ADC 最高只能测到 $3.3V$。如果零点占用了 $2.0V$，那么留给实际信号的范围就只剩下 $3.3V - 2.0V = 1.3V$。&lt;strong&gt;原本你可以用 $2.4V$ 的跨度来表现 $1.6,MPa$，现在只能用一半的电压范围来表现，测量精度直接减半&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;现象 B：提前出现“削顶”
&lt;ul&gt;
&lt;li&gt;当压力还没达到满量程时，ADC 已经读到了 $4095$（满位）。在 VOFA+ 上你会看到压力曲线在还没到顶时就变成了一条平平的直线，数据丢了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-如果斜率-k偏离过大&#34;&gt;2. 如果“斜率 $k$”偏离过大
&lt;/h4&gt;&lt;p&gt;斜率 $k$ 本质上是一个“放大倍数”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;情况一：$k$ 变得特别大（高增益）
&lt;ul&gt;
&lt;li&gt;现象：系统变得&lt;strong&gt;极其敏感且神经质&lt;/strong&gt;。哪怕 ADC 只有 1 个数值的微小跳动，乘以巨大的 $k$ 之后，显示的压力值都会在 VOFA+ 上剧烈抖动。&lt;/li&gt;
&lt;li&gt;本质：&lt;strong&gt;你正在放大噪声&lt;/strong&gt;。&lt;strong&gt;这种情况通常说明传感器已经“衰减”得很厉害了，给出的信号极其微弱，你不得不拼命放大它&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;情况二：$k$ 变得特别小（低增益）
&lt;ul&gt;
&lt;li&gt;现象：系统变得&lt;strong&gt;迟钝&lt;/strong&gt;。无论你如何调节电位器，压力数值几乎不动，或者变化非常缓慢。&lt;/li&gt;
&lt;li&gt;本质：这通常发生在误操作标定时，或者传感器发生了“短路”性质的故障。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;cems-工业实战中的判定逻辑&#34;&gt;CEMS 工业实战中的判定逻辑
&lt;/h4&gt;&lt;p&gt;在专业的 CEMS 仪表中，我们不会任由参数无限偏离。我们会设置“标定限值（Calibration Limits）”**：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;工业逻辑示例：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果 &lt;code&gt;zero_offset_volt&lt;/code&gt; 偏离初始值超过 $\pm 20%$。&lt;/li&gt;
&lt;li&gt;或者 &lt;code&gt;slope_k&lt;/code&gt; 偏离初始值超过 $\pm 30%$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结果&lt;/strong&gt;：单片机直接报错 &lt;strong&gt;“Calibration Error”&lt;/strong&gt;，并拒绝更新参数。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;为什么要这样做？因为参数偏离这么大，说明不是简单的漂移，而是硬件出问题了：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;传感器探头脏了（需要清洗）。&lt;/li&gt;
&lt;li&gt;气路漏气了（标气没通进去）。&lt;/li&gt;
&lt;li&gt;传感器彻底老化（需要更换）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;你的代码可以增加的高级感&#34;&gt;你的代码可以增加的“高级感”
&lt;/h4&gt;&lt;p&gt;你可以给你的代码加一个小小的“安全锁”，防止校准出荒唐的数据：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.8f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 检查有效跨度是否在合理范围内
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 报错：量程偏差过大，维持旧斜率不变
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Calibration Failed: Sensor Out of Range!&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;校零函数和满量程校准函数&#34;&gt;校零函数和满量程校准函数
&lt;/h3&gt;&lt;h4 id=&#34;1-校零函数-zero-calibration&#34;&gt;1. 校零函数 (Zero Calibration)
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;核心逻辑：截距修正 (Offset Correction)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在传感器没有任何压力（或通入零点标准气）时，记录当前的输出。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;核心公式：$$V_{zero} = V_{current_filtered}$$&lt;/li&gt;
&lt;li&gt;代码动作：
&lt;ol&gt;
&lt;li&gt;确保系统处于“零状态”（如通入纯氮气）。&lt;/li&gt;
&lt;li&gt;读取经过滤波后的稳定电压值。&lt;/li&gt;
&lt;li&gt;将该值覆盖保存到 &lt;code&gt;zero_offset_volt&lt;/code&gt; 变量中。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;物理意义&lt;/strong&gt;：告诉单片机：“不管电路漂移到了多少伏，从这一刻起，这个电压就代表 0 MPa。”&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-满量程校准函数-span-calibration&#34;&gt;2. 满量程校准函数 (Span Calibration)
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;核心逻辑：增益/斜率修正 (Gain/Slope Correction)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在传感器承受标准满量程压力（如 1.6MPa）时，调整输出的放大倍数。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;核心公式：$$Slope_K = \frac{P_{nominal}}{V_{full} - V_{zero}}$$
(其中 $P_{nominal}$ 是你预设的标准值，如 1.6)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;代码动作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;确保系统处于“满量程状态”（如通入 1.6MPa 压力）。&lt;/li&gt;
&lt;li&gt;计算当前的有效压差：&lt;code&gt;v_diff = V_current - V_zero&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;安全检查：判断 &lt;code&gt;v_diff&lt;/code&gt; 是否足够大（防止除以 0 或误操作）。&lt;/li&gt;
&lt;li&gt;计算并更新斜率 &lt;code&gt;slope_k&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;物理意义&lt;/strong&gt;：告诉单片机：“&lt;strong&gt;现在压力是 1.6，电压差是这么大，请计算出每一伏电压代表多少 MPa&lt;/strong&gt;。”&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-25-保存数据到FLASH</title>
        <link>https://teaize.github.io/p/zzz-25-%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0flash/</link>
        <pubDate>Sun, 21 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-25-%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0flash/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-23-零点校准]]、[[ZZZ-24-满量程校准]]。想一想，好不容易通过标准物质（例如标准压力）将传感器的零点和满量程校准好，如果断电这些珍贵的校准系数丢了怎么办？这就需要单片机能够保存（并且断电不丢失）数据&lt;/p&gt;
&lt;p&gt;STM32 的内部 FLASH 就像是电脑的硬盘，断电后数据不会丢失。我们将把校准得到的 &lt;code&gt;zero_offset_volt&lt;/code&gt; 和 &lt;code&gt;slope_k&lt;/code&gt; 存入 FLASH 的最后一段空间。&lt;/p&gt;
&lt;h3 id=&#34;1-flash-存储的核心规则必读&#34;&gt;1. FLASH 存储的核心规则（必读）
&lt;/h3&gt;&lt;p&gt;在操作之前，你需要记住 STM32 FLASH 的三个“脾气”：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;先擦除再写入：FLASH 的位只能从 &lt;code&gt;1&lt;/code&gt; 变成 &lt;code&gt;0&lt;/code&gt;。擦除操作会将整个“页”（Page）恢复为全 &lt;code&gt;1&lt;/code&gt;（即 &lt;code&gt;0xFF&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;以“页”为单位：STM32F103 通常每页是 &lt;strong&gt;1KB&lt;/strong&gt; 或 &lt;strong&gt;2KB&lt;/strong&gt;。即使你只改一个字，也得擦除整一页。&lt;/li&gt;
&lt;li&gt;读写保护：写入前要“解锁”（Unlock），写完要“上锁”（Lock）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;2-确定存储位置&#34;&gt;2. 确定存储位置
&lt;/h3&gt;&lt;p&gt;我们要把数据存在 FLASH 的&lt;strong&gt;末尾&lt;/strong&gt;，避免覆盖掉你写的程序代码。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;假设：你用的是 STM32F103C8T6（64KB FLASH）。&lt;/li&gt;
&lt;li&gt;最后一页地址：&lt;code&gt;0x0800FC00&lt;/code&gt;（第 63 页）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-实战代码读写函数库&#34;&gt;3. 实战代码：读写函数库
&lt;/h3&gt;&lt;p&gt;你可以将以下代码直接加入到 &lt;code&gt;main.c&lt;/code&gt; 的 &lt;code&gt;USER CODE BEGIN 0&lt;/code&gt; 区域。&lt;/p&gt;
&lt;h4 id=&#34;a-写入函数保存参数&#34;&gt;A. 写入函数（保存参数）
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define FLASH_USER_START_ADDR   0x0800FC00   &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 最后一页地址
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Save_Params_To_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 使用指针强转，把 float 变成 uint32_t 存入数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 解锁
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 1. 擦除最后一页
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;FLASH_EraseInitTypeDef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PageError&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TypeErase&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_TYPEERASE_PAGES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PageAddress&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NbPages&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASHEx_Erase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PageError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 2. 写入数据
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Program&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_TYPEPROGRAM_WORD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Program&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_TYPEPROGRAM_WORD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 上锁
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;b-读取函数开机加载&#34;&gt;B. 读取函数（开机加载）
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Load_Params_From_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_zero&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__IO&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_slope&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__IO&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 如果 FLASH 是空的（0xFFFFFFFF），则不加载，维持默认值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_zero&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xFFFFFFFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;4-如何整合到你的系统中&#34;&gt;4. 如何整合到你的系统中？
&lt;/h3&gt;&lt;h4 id=&#34;第一步开机自动读取&#34;&gt;第一步：开机自动读取
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main&lt;/code&gt; 函数的 &lt;code&gt;while(1)&lt;/code&gt; 之前调用，确保一上电就拿到了上次校准的值。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;Load_Params_From_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第二步校准成功后自动保存&#34;&gt;第二步：校准成功后自动保存
&lt;/h4&gt;&lt;p&gt;在你之前的按键校准逻辑里，确认校准成功后，顺手存一下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 在零点校准成功后的位置
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;Save_Params_To_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 同步保存到 FLASH
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 在满量程校准成功后的位置
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;Save_Params_To_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 同步保存到 FLASH
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;关机前
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221213735885.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221213735885.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;


关机重启后：
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221213906876.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251221213906876.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;5-为什么这样做很专业&#34;&gt;5. 为什么这样做很“专业”？
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;用户体验&lt;/strong&gt;：在 CEMS 站房里，设备可能会因为停电或检修重启。如果没有 FLASH 存储，运维人员每次开机都得重新通标准气体校准，那是极其痛苦的。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据安全&lt;/strong&gt;：通过 &lt;code&gt;0xFFFFFFFF&lt;/code&gt; 的判断，你保证了新芯片第一次运行时不会加载乱码，而是使用代码里的默认值。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;完整代码&#34;&gt;完整代码
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END Includes */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define SAMPLES 10  					&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 每个通道采样 10 次
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define CHANNELS 2 						&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 共 2 个通道
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 长度为 20 的数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// --- 核心标定参数 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.6f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;c1&#34;&gt;// 满量程标定时的标准压力值 (MPa)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;150.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;// 采样电阻 150 欧
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.15f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;                &lt;span class=&#34;c1&#34;&gt;// 一阶滞后滤波系数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// --- 标定状态变量 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.60f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;c1&#34;&gt;// 默认零点电压 (4mA 对应 0.6V)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.6f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.60f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 默认斜率
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.60f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;              &lt;span class=&#34;c1&#34;&gt;// 滤波后的电压变量
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibration_flag&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;c1&#34;&gt;// 标定标志位
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END PV */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 0 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__io_putchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_UART_Transmit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huart1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HAL_MAX_DELAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 写入函数（保存参数）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define FLASH_USER_START_ADDR   0x0800FC00   &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 最后一页地址
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Save_Params_To_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 使用指针强转，把 float 变成 uint32_t 存入数组
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 解锁
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 1. 擦除最后一页
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;FLASH_EraseInitTypeDef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PageError&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TypeErase&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_TYPEERASE_PAGES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PageAddress&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NbPages&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASHEx_Erase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EraseInitStruct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PageError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 2. 写入数据
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Program&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_TYPEPROGRAM_WORD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Program&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_TYPEPROGRAM_WORD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_to_save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_FLASH_Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 上锁
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 读取函数（开机加载）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Load_Params_From_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_zero&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__IO&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_slope&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__IO&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FLASH_USER_START_ADDR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 如果 FLASH 是空的（0xFFFFFFFF），则不加载，维持默认值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_zero&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xFFFFFFFF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_slope&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 0 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 为了精准，建议先进行 ADC 校准（F1系列特有�?
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_ADCEx_Calibration_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 核心命令：启�? ADC + DMA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 参数：ADC句柄，存储的目标地址，要搬运的数据个�?
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 开机加载校准数据
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;Load_Params_From_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nf&#34;&gt;HAL_ADC_Start_DMA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hadc1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;83
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 1. 信号采集与双重滤波 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adc_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANNELS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 原始电压计算 (基于 3.3V 理论值，若需更准可换回 VREFINT 公式)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAMPLES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;4095.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 一阶滞后滤波
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_volt_A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter_volt_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 2. 零点校准逻辑 (PB0) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 初步去抖
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 记录当前电压为新零点
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;c1&#34;&gt;// 亮灯反馈
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_WritePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_SET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;c1&#34;&gt;// 在零点校准成功后的位置
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;nf&#34;&gt;Save_Params_To_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 同步保存到 FLASH
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 等待松开
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 3. 满量程校准逻辑 (PB1) ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;c1&#34;&gt;// 核心逻辑：斜率 k = 标准压力 / (当前满量程电压 - 零点电压)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.1f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 安全检查：确保满位电压确实大于零点电压
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;c1&#34;&gt;// 在满量程校准成功后的位置
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_NOMINAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v_diff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;nf&#34;&gt;Save_Params_To_Flash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 同步保存到 FLASH
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;c1&#34;&gt;// 成功后快闪两次灯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_TogglePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 4. 最终工业参数换算 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 计算电流 (mA)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R_SAMPLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 计算校准后的压力
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;volt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 负数截断保护
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// --- 5. VOFA+ 数据输出 ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 通道说明：1.电流(mA), 2.校准后压力(MPa), 3.零点偏置电压(V), 4.当前斜率k
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%.2f,%.3f,%.3f,%.4f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;current_mA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;calibrated_pressure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;zero_offset_volt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;slope_k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 10Hz 刷新率，适合观察
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>HJ 212 协议</title>
        <link>https://teaize.github.io/p/hj-212-%E5%8D%8F%E8%AE%AE/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/hj-212-%E5%8D%8F%E8%AE%AE/</guid>
        <description>&lt;p&gt;在 CEMS 领域，HJ 212 协议《污染物在线监控（监测）系统数据传输标准》为环保界的“普通话”。它不仅是一个通讯标准，更是国家环保监管的“神经系统”。&lt;/p&gt;
&lt;h2 id=&#34;为什么要颁布-hj-212&#34;&gt;为什么要颁布 HJ 212
&lt;/h2&gt;&lt;p&gt;在 HJ 212 颁布之前，环保监测行业处于“战国时代”：A 厂家的分析仪说“德语”，B 厂家的数采仪说“法语”，而省环保厅的平台只能听懂“英语”。&lt;/p&gt;
&lt;h3 id=&#34;统一接口消除信息孤岛&#34;&gt;统一接口，消除“信息孤岛”
&lt;/h3&gt;&lt;p&gt;国家颁布 HJ 212 的核心目的就是&lt;strong&gt;标准化&lt;/strong&gt;。它规定了所有监测设备（水、气、声、土）在向环保局汇报数据时，必须&lt;strong&gt;使用统一的报文格式&lt;/strong&gt;。这样，无论企业用哪种品牌的分析仪，监管部门都能实时读取。&lt;/p&gt;
&lt;h3 id=&#34;监管透明化防篡改&#34;&gt;监管透明化（防篡改）
&lt;/h3&gt;&lt;p&gt;以前的数据传输是单向且简单的。HJ 212 引入了&lt;strong&gt;数据状态标志位&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例如：如果企业正在维护设备，数据必须打上“D”（校验）标记。&lt;/li&gt;
&lt;li&gt;如果没有这个标准，企业可能会把测试时的“零点数据”混成真实的排放数据上报，导致监管失灵。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;支撑非现场执法&#34;&gt;支撑“非现场执法”
&lt;/h3&gt;&lt;p&gt;HJ 212 的演进（特别是从 2005 版到 2017 版）增加了大量的&lt;strong&gt;反向控制指令&lt;/strong&gt;。这让监管从“只能看”变成了“可以动”。环保局不需要进厂，就能远程启动一次核查。&lt;/p&gt;
&lt;h2 id=&#34;反向控制反控&#34;&gt;反向控制（反控）
&lt;/h2&gt;&lt;p&gt;环保局的监控平台通过网络向企业端的数据采集传输仪（数采仪）发送特定的指令，再由数采仪指挥质控仪动作，让现场的质控仪立即开始“盲样考核”，这背后的核心技术就是反向控制。&lt;/p&gt;
&lt;h3 id=&#34;1-协议基础&#34;&gt;1. 协议基础
&lt;/h3&gt;&lt;p&gt;这种操作必须遵循统一的“语言”，目前国内最通用的协议是 &lt;strong&gt;发送特定的指令，再由数采仪指挥&lt;/strong&gt;（也就是上面说的 HJ 212 协议）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;平台发送一个“质控指令码”。&lt;/li&gt;
&lt;li&gt;质控仪识别代码后，自动开启电磁阀、启动配气泵。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-工作流程&#34;&gt;2. 工作流程
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;发送特定的指令，再由数采仪指挥 平台下达“开始二氧化硫 50mg/m³ 盲样核查”指令。&lt;/li&gt;
&lt;li&gt;HJ 212 协议 质控仪接收指令，内部配气模块将标气稀释至目标浓度。&lt;/li&gt;
&lt;li&gt;指令下发： 质控仪控制切断烟气采样，将质控气送入分析仪。&lt;/li&gt;
&lt;li&gt;自动配气： 分析仪测出的数据通过数采仪传回平台。&lt;/li&gt;
&lt;li&gt;管路切换： 平台自动计算误差（例如：目标 50，实测 52，误差 4%），判断是否合格。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;关键环节&#34;&gt;关键环节
&lt;/h3&gt;&lt;p&gt;远程操作质控仪并不仅仅是“通气”那么简单，它涉及以下四个关键要素：&lt;/p&gt;
&lt;h4 id=&#34;1-指令的安全性与唯一性&#34;&gt;1. 指令的安全性与唯一性
&lt;/h4&gt;&lt;p&gt;为了防止黑客攻击或误操作，反控指令通常带有&lt;strong&gt;时间戳&lt;/strong&gt;和&lt;strong&gt;唯一流水号&lt;/strong&gt;。只有经过授权的账号（如省/市环保局）才能发起。&lt;/p&gt;
&lt;h4 id=&#34;2-状态标识打标&#34;&gt;2. 状态标识（打标）
&lt;/h4&gt;&lt;p&gt;这是规范（如 HJ 75）中非常重要的一点。当质控仪开始工作时，CEMS 的数据状态必须从“正常”切换为“质控/校准”状态。&lt;/p&gt;
&lt;p&gt;目的是防止这期间通入的高浓度标气被当做真实的排放数据，从而导致企业因“数据超标”被冤枉罚款。&lt;/p&gt;
&lt;h4 id=&#34;3-盲样逻辑&#34;&gt;3. “盲样”逻辑
&lt;/h4&gt;&lt;p&gt;质控仪最强大的地方在于，它对企业是“盲”的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;企业运维人员不知道监管部门什么时候会点下指令。&lt;/li&gt;
&lt;li&gt;质控仪内部的标气底数（真实浓度）只有监管端掌握，现场人员无法提前修改结果。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-气路响应时间&#34;&gt;4. 气路响应时间
&lt;/h4&gt;&lt;p&gt;技术规范要求远程指令下达后，系统必须在规定时间内完成响应。如果管路太长或配气太慢，导致数据迟迟不达标，会被判定为“设备故障”或“干预监测”。&lt;/p&gt;
&lt;h3 id=&#34;为什么要做这种远程操作&#34;&gt;为什么要做这种“远程操作”
&lt;/h3&gt;&lt;p&gt;过去，环保监管主要靠“现场突击检查”，但这存在几个弊端：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;成本高： 执法人员跑断腿也跑不完所有工厂。&lt;/li&gt;
&lt;li&gt;易穿帮： 检查人员进厂门时，企业可能有时间做手脚。&lt;/li&gt;
&lt;li&gt;频率低： 一年查一次，平时准不准全靠自觉。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;有了远程反控质控仪后： 监管变成了**“全时段抽测”。环保局可以凌晨 3 点发起核查，如果此时质控仪数据异常，系统会自动锁定证据。&lt;/p&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;p&gt;远程反控质控仪标志着环保监管从“人防”转到了“技防”&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;涉及维度&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;关键内容&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;通讯协议&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;HJ 212 及其扩展协议&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;硬件链路&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;云端平台 $\rightarrow$ 数采仪 $\rightarrow$ 质控仪 $\rightarrow$ 分析仪&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;逻辑保护&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;自动剔除校准期间的异常数据（打标标记）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;法律效力&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;远程核查结果可直接作为行政处罚的依据或线索&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>STM32入门学习大纲</title>
        <link>https://teaize.github.io/p/stm32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E5%A4%A7%E7%BA%B2/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/stm32%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E5%A4%A7%E7%BA%B2/</guid>
        <description>&lt;p&gt;学习 STM32 是进入嵌入式开发的里程碑。对于初学者来说，最大的挑战往往在于 “东西太多，不知道从哪儿下手”。&lt;/p&gt;
&lt;h2 id=&#34;第一阶段必备基础知识&#34;&gt;第一阶段：必备基础知识
&lt;/h2&gt;&lt;p&gt;在写第一行 STM32 代码前，这些基础决定了你能走多远。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;学习内容&lt;/th&gt;
          &lt;th&gt;要求程度&lt;/th&gt;
          &lt;th&gt;核心重点&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;C 语言高级语法&lt;/td&gt;
          &lt;td&gt;重点掌握&lt;/td&gt;
          &lt;td&gt;指针（重点）、结构体、枚举、位运算（&amp;amp;, |, ~）、回调函数。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;硬件基础&lt;/td&gt;
          &lt;td&gt;了解&lt;/td&gt;
          &lt;td&gt;电平概念（TTL/CMOS）、上拉/下拉电阻、推挽/开漏输出、数字/模拟信号。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;开发环境搭建&lt;/td&gt;
          &lt;td&gt;掌握&lt;/td&gt;
          &lt;td&gt;安装 Keil MDK 或 STM32CubeIDE，掌握烧录工具（ST-Link/DAP）的使用。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;第二阶段内核与系统架构&#34;&gt;第二阶段：内核与系统架构
&lt;/h2&gt;&lt;p&gt;不要深钻手册里的数千页寄存器，但要明白芯片是怎么跑起来的。&lt;/p&gt;
&lt;h3 id=&#34;1-核心架构了解即可&#34;&gt;1. 核心架构（了解即可）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Cortex-M 内核：知道它和 51 单片机的区别（32 位 vs 8 位）。&lt;/li&gt;
&lt;li&gt;存储器映射：知道代码存在 Flash，变量存在 SRAM。&lt;/li&gt;
&lt;li&gt;启动过程：了解从 Reset 到 &lt;code&gt;main&lt;/code&gt; 函数经历了什么。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-时钟树重点理解&#34;&gt;2. 时钟树（重点理解）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;重点掌握：STM32 的外设必须开启时钟才能工作。&lt;/li&gt;
&lt;li&gt;了解：HSE（外部高速时钟）、LSE、PLL（倍频器）的关系。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;第三阶段核心外设必须死磕&#34;&gt;第三阶段：核心外设（必须死磕）
&lt;/h2&gt;&lt;p&gt;这是 STM32 开发的“基本功”，90% 的项目都离不开这些。&lt;/p&gt;
&lt;h3 id=&#34;1-gpio通用输入输出&#34;&gt;1. GPIO（通用输入输出）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;重点掌握：输入（按键扫描、外部中断）、输出（控制 LED、蜂鸣器）。&lt;/li&gt;
&lt;li&gt;重点掌握：推挽输出与开漏输出的区别。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-中断系统nvic&#34;&gt;2. 中断系统（NVIC）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;重点掌握：中断优先级的概念（抢占优先级、响应优先级）。&lt;/li&gt;
&lt;li&gt;重点掌握：编写中断服务函数（ISR）的注意事项（快进快出）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-定时器timer&#34;&gt;3. 定时器（Timer）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;重点掌握：定时中断（精准定时）。&lt;/li&gt;
&lt;li&gt;重点掌握：PWM 输出（控制电机转速、LED 亮度）。&lt;/li&gt;
&lt;li&gt;了解：输入捕获（测频率）、编码器模式。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-串口通信uartusart&#34;&gt;4. 串口通信（UART/USART）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;重点掌握：波特率、校验位、停止位。&lt;/li&gt;
&lt;li&gt;重点掌握：使用串口打印 &lt;code&gt;printf&lt;/code&gt; 调试信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;第四阶段进阶与通信协议&#34;&gt;第四阶段：进阶与通信协议
&lt;/h2&gt;&lt;p&gt;当你能控制灯和电机后，需要让芯片与外部世界交互。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;模块&lt;/th&gt;
          &lt;th&gt;要求程度&lt;/th&gt;
          &lt;th&gt;关键点&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;ADC（模数转换）&lt;/td&gt;
          &lt;td&gt;重点掌握&lt;/td&gt;
          &lt;td&gt;将传感器的模拟电压转为数字量。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;I2C 通信&lt;/td&gt;
          &lt;td&gt;掌握&lt;/td&gt;
          &lt;td&gt;读写常见的 OLED 屏幕或 EEPROM。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;SPI 通信&lt;/td&gt;
          &lt;td&gt;掌握&lt;/td&gt;
          &lt;td&gt;驱动读写 SD 卡或外部 Flash（如 W25Q128）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DMA（直接存储器访问）&lt;/td&gt;
          &lt;td&gt;理解/掌握&lt;/td&gt;
          &lt;td&gt;非常重要。让数据搬运不占用 CPU 资源，提升系统效率。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;看门狗（IWDG/WWDG）&lt;/td&gt;
          &lt;td&gt;掌握&lt;/td&gt;
          &lt;td&gt;防止程序“跑飞”或死机。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;避坑指南与建议&#34;&gt;避坑指南与建议
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;关于库的选择：
&lt;ul&gt;
&lt;li&gt;HAL 库：新手首选。配合 STM32CubeMX 图形化配置工具，上手极快，是目前的行业主流。&lt;/li&gt;
&lt;li&gt;标准库：较老，但有助于理解底层逻辑。如果你是学生或想考研/比赛，可能会接触到。&lt;/li&gt;
&lt;li&gt;寄存器：初学者不要直接写寄存器，效率极低且易受挫。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;不要只看书/视频：
&lt;ul&gt;
&lt;li&gt;嵌入式是“手感”科学。每学一个外设，必须在开发板上实现功能（比如：学了 PWM，就必须亲手做一个呼吸灯）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;学会看手册：
&lt;ul&gt;
&lt;li&gt;不要求背下来，但要学会通过搜索关键字查找《参考手册》（RM）和《数据手册》（DS）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-01-STM32和51单片机的区别</title>
        <link>https://teaize.github.io/p/zzz-01-stm32%E5%92%8C51%E5%8D%95%E7%89%87%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-01-stm32%E5%92%8C51%E5%8D%95%E7%89%87%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB/</guid>
        <description>&lt;p&gt;我们可以把单片机想象成一个处理数字的工厂，内核就是这个工厂的核心加工车间&lt;/p&gt;
&lt;h2 id=&#34;1-位的差别从窄马路到高速公路&#34;&gt;1. “位”的差别：从窄马路到高速公路
&lt;/h2&gt;&lt;p&gt;这是最直观的区别。&lt;strong&gt;所谓的 8 位和 32 位，指的是 CPU 一次能处理的数据宽度&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;51 单片机（8 位）： 就像一条单行道。它一次只能处理 $2^8 = 256$ 以内的数字。如果你想算一个很大的数字（比如 100,000），CPU 必须把这个数字拆成好几段，分好几次才能算完，效率很低。&lt;/li&gt;
&lt;li&gt;Cortex-M（32 位）： 就像一条 32 车道的高速公路。它一次能处理高达 $2^{32} \approx 42.9亿$ 以内的数字。绝大多数复杂的数学运算、坐标计算、甚至解析一段复杂的协议，它一次就能搞定。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-寻址空间从小作坊到大城市&#34;&gt;2. 寻址空间：从“小作坊”到“大城市”
&lt;/h2&gt;&lt;p&gt;CPU 需要通过地址来找内存（RAM）和程序（Flash）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;51 单片机： 它的“视力”有限，寻址范围通常只有 $2^{16} = 64KB$。这就好比一个只有几条街的小镇，你能盖的房子（存储的代码）非常有限。&lt;/li&gt;
&lt;li&gt;Cortex-M： 它的寻址范围理论上高达 $2^{32} = 4GB$。这意味着它可以连接巨大的存储器，运行非常复杂的算法，甚至挂载一个小型的图形操作系统。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-处理效率主频与流水线&#34;&gt;3. 处理效率：主频与流水线
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;主频（速度）： 51 单片机通常运行在 12MHz 左右，且执行一条指令往往需要多个时钟周期。
&lt;ul&gt;
&lt;li&gt;STM32（Cortex-M）主频通常在 72MHz、168MHz 甚至更高，且采用了指令流水线技术，很多指令可以在一个时钟周期内完成。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;架构：
&lt;ul&gt;
&lt;li&gt;51 采用的是比较老的 CISC（复杂指令集）思想；&lt;/li&gt;
&lt;li&gt;Cortex-M 采用的是 RISC（精简指令集） 架构，并使用了 Harvard（哈佛）结构（程序和数据有独立的路径），让取指令和算数据可以同时进行，互不干扰。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;4-外设与寄存器的复杂度&#34;&gt;4. 外设与寄存器的复杂度
&lt;/h2&gt;&lt;p&gt;这是初学者最容易感到“压力”的地方：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;特性&lt;/th&gt;
          &lt;th&gt;51 单片机&lt;/th&gt;
          &lt;th&gt;STM32 (Cortex-M)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;IO 口控制&lt;/td&gt;
          &lt;td&gt;简单：&lt;code&gt;P1 = 0x01;&lt;/code&gt; 即可点灯。&lt;/td&gt;
          &lt;td&gt;复杂：需要先开时钟、配置模式、再写数据。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;寄存器数量&lt;/td&gt;
          &lt;td&gt;几十个，看一遍手册就能背下来。&lt;/td&gt;
          &lt;td&gt;几百上千个，没人能背下来，必须靠库函数。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;功能模块&lt;/td&gt;
          &lt;td&gt;基本只有串口、定时器、ADC（有的还没有）。&lt;/td&gt;
          &lt;td&gt;拥有 DMA、硬件 CRC、USB、CAN、硬件加密等。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;总结为什么要学-32-位&#34;&gt;总结：为什么要学 32 位
&lt;/h2&gt;&lt;p&gt;如果你的项目只是点亮一个灯，或者做一个简单的温控器，51 绰绰有余。但如果你要：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;做复杂的计算（如无人机姿态解算、音频处理）。&lt;/li&gt;
&lt;li&gt;驱动彩色屏幕（需要大量内存缓存图片）。&lt;/li&gt;
&lt;li&gt;多任务并行（同时处理传感器、串口、显示屏、按键）。&lt;/li&gt;
&lt;li&gt;低功耗要求（STM32 有极细致的功耗管理）。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Cortex-M (STM32) 它更强大、更高效、也更符合现代工业的要求。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-02-Flash和SRAM</title>
        <link>https://teaize.github.io/p/zzz-02-flash%E5%92%8Csram/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-02-flash%E5%92%8Csram/</guid>
        <description>&lt;p&gt;理解了 Flash 和 SRAM，你就理解了单片机运行时的“数据流向”，我们继续用“工厂”来做比喻&lt;/p&gt;
&lt;h3 id=&#34;1-形象比喻仓库-vs-办公桌&#34;&gt;1. 形象比喻：仓库 vs. 办公桌
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Flash（&lt;strong&gt;闪存&lt;/strong&gt;）：像是一个巨大的“仓库”或“说明书珍藏馆”。
&lt;ul&gt;
&lt;li&gt;里面存放的是固定的、不常变动的东西。比如你写的代码逻辑、出厂预设的固定数据。&lt;/li&gt;
&lt;li&gt;特点： 停电了，里面的东西不会丢。但是，往里放东西（烧录代码）比较慢。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SRAM（&lt;strong&gt;静态随机存取存储器&lt;/strong&gt;）：像是一张“办公桌”或“黑板”。
&lt;ul&gt;
&lt;li&gt;它是 CPU 正在干活的地方。存放的是正在变动的、临时的数据。比如程序运行时的变量 &lt;code&gt;i&lt;/code&gt;、传感器读到的实时温度。&lt;/li&gt;
&lt;li&gt;特点： 办公效率极高（读写飞快），但一停电（或复位），黑板上的字就全擦掉了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-它们分别存什么&#34;&gt;2. 它们分别存什么
&lt;/h3&gt;&lt;p&gt;在 STM32 的开发中，你的程序会被拆成不同的部分分别存放：&lt;/p&gt;
&lt;h4 id=&#34;flash-存的是只读内容&#34;&gt;Flash 存的是“只读”内容：
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;指令代码：你写的 &lt;code&gt;if…else&lt;/code&gt;、&lt;code&gt;while(1)&lt;/code&gt; 编译后变成的机器码。&lt;/li&gt;
&lt;li&gt;常量 (const)：比如你在代码里定义的 &lt;code&gt;const int a = 100;&lt;/code&gt;。因为它是常量，不需要在运行时修改，所以直接存在 Flash 里省空间。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;sram-存的是读写内容&#34;&gt;SRAM 存的是“读写”内容：
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;全局变量：程序运行过程中需要一直记录的数据。&lt;/li&gt;
&lt;li&gt;局部变量：函数内部临时定义的变量。&lt;/li&gt;
&lt;li&gt;堆栈 (Stack/Heap)：函数嵌套调用时的现场保存、或者你动态申请的内存。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-什么是存储器映射&#34;&gt;3. 什么是“存储器映射”
&lt;/h3&gt;&lt;p&gt;这是初学者最容易听懵的词，其实它非常简单。&lt;/p&gt;
&lt;p&gt;STM32 的内核（Cortex-M）是一个 32 位的 CPU，它的“视力”范围是 $2^{32}$ 个地址（即 $0x0000 0000$ 到 $0xFFFF FFFF$）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;存储器映射，就是给这些硬件设备分配“门牌号”&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Flash 的门牌号：通常从 &lt;code&gt;0x0800 0000&lt;/code&gt; 开始。当 CPU 想读代码时，它就去这个地址段找。&lt;/li&gt;
&lt;li&gt;SRAM 的门牌号：通常从 &lt;code&gt;0x2000 0000&lt;/code&gt; 开始。当 CPU 想改变量时，它就去这个地址段找。&lt;/li&gt;
&lt;li&gt;外设（寄存器）的门牌号：比如 GPIO、定时器，它们的控制开关也被映射到了特定的地址（通常从 &lt;code&gt;0x4000 0000&lt;/code&gt; 开始）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结论： &lt;strong&gt;对 CPU 来说，无论是读 Flash、写 SRAM，还是控制 LED 灯，本质上都只是在不同的地址（门牌号）上读写数据&lt;/strong&gt;。这就是“万物皆地址”。&lt;/p&gt;
&lt;h3 id=&#34;4-核心区别对比表&#34;&gt;4. 核心区别对比表
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;特性&lt;/th&gt;
          &lt;th&gt;Flash (闪存)&lt;/th&gt;
          &lt;th&gt;SRAM (内存)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;存放内容&lt;/td&gt;
          &lt;td&gt;程序代码 (Code)、常量 (RO-data)&lt;/td&gt;
          &lt;td&gt;变量 (RW-data)、堆栈&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;断电数据&lt;/td&gt;
          &lt;td&gt;保存&lt;/td&gt;
          &lt;td&gt;丢失&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;读写速度&lt;/td&gt;
          &lt;td&gt;较慢（所以有时需要等待周期）&lt;/td&gt;
          &lt;td&gt;极快&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;擦写寿命&lt;/td&gt;
          &lt;td&gt;有次数限制（约 10 万次）&lt;/td&gt;
          &lt;td&gt;无限制&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;起始地址&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;0x0800 0000&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;0x2000 0000&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    CPU[Cortex-M 内核] -- 访问地址 --&gt; Bus[4GB 总线地址空间]

    subgraph &#34;0x0000 0000 - 0xFFFF FFFF (总视野)&#34;
        Bus --&gt; Flash_Space[&#34;【Flash 区】&lt;br/&gt;起始: 0x0800 0000&#34;]
        Bus --&gt; SRAM_Space[&#34;【SRAM 区】&lt;br/&gt;起始: 0x2000 0000&#34;]
        Bus --&gt; Peripheral_Space[&#34;【外设寄存器区】&lt;br/&gt;起始: 0x4000 0000&#34;]
    end

    subgraph &#34;Flash (仓库: 掉电不丢失)&#34;
        Flash_Space --&gt; Code[指令代码 .text]
        Flash_Space --&gt; RO_Data[只读常量 const]
    end

    subgraph &#34;SRAM (办公桌: 掉电丢失)&#34;
        SRAM_Space --&gt; RW_Data[全局变量/静态变量]
        SRAM_Space --&gt; Stack_Heap[堆栈: 函数局部变量]
    end

    subgraph &#34;Peripherals (功能按钮)&#34;
        Peripheral_Space --&gt; GPIO[GPIO 控制器]
        Peripheral_Space --&gt; UART[串口/定时器等]
    end

    style CPU fill:#f96,stroke:#333,stroke-width:2px
    style Flash_Space fill:#bbf,stroke:#333
    style SRAM_Space fill:#dfd,stroke:#333
    style Peripheral_Space fill:#fff4dd,stroke:#333
&lt;/div&gt;
&lt;p&gt;在图的最上方，&lt;strong&gt;CPU 不直接管硬件的名字&lt;/strong&gt;。它只管发指令：“去 &lt;code&gt;0x0800 0000&lt;/code&gt; 取个东西”或者“往 &lt;code&gt;0x2000 0000&lt;/code&gt; 写个数字”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果地址落在 &lt;strong&gt;Flash&lt;/strong&gt; 范围，它就读到了代码。&lt;/li&gt;
&lt;li&gt;如果地址落在 &lt;strong&gt;SRAM&lt;/strong&gt; 范围，它就访问了变量。&lt;/li&gt;
&lt;li&gt;如果地址落在 &lt;strong&gt;外设（Peripherals）&lt;/strong&gt; 范围，它就控制了硬件（比如点亮 LED）。
&lt;ul&gt;
&lt;li&gt;你会发现，控制 GPIO 引脚的寄存器也有地址。这就是为什么在底层驱动里，我们可以通过指针操作来点灯： &lt;code&gt;*(uint32_t *)0x4001080C = 0x00000001; // 假设这是控制灯的地址&lt;/code&gt; 这就是 STM32 编程的底层逻辑。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-03-关于寄存器</title>
        <link>https://teaize.github.io/p/zzz-03-%E5%85%B3%E4%BA%8E%E5%AF%84%E5%AD%98%E5%99%A8/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-03-%E5%85%B3%E4%BA%8E%E5%AF%84%E5%AD%98%E5%99%A8/</guid>
        <description>&lt;p&gt;“控制硬件”的本质就是“读写寄存器”。我们可以把 STM32 想象成一个巨大的控制中心，而寄存器（Register）就是控制中心面板上密密麻麻的旋钮和开关。&lt;/p&gt;
&lt;h3 id=&#34;1-什么是寄存器&#34;&gt;1. 什么是寄存器
&lt;/h3&gt;&lt;p&gt;从物理上看，寄存器就是一小块极速存储单元，通常是 32 位（因为 STM32 是 32 位机），每一位（Bit）就是一个开关。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;它的位置： 它们就在外设（如 GPIO、定时器、串口）的内部。&lt;/li&gt;
&lt;li&gt;它的门牌号： 就像 [[ZZZ-02-Flash和SRAM]] 中写的，每个寄存器都有一个唯一的内存地址。&lt;/li&gt;
&lt;li&gt;它的作用：
&lt;ul&gt;
&lt;li&gt;配置寄存器： 像“设置菜单”。比如：设置这个引脚是做输入还是输出？&lt;/li&gt;
&lt;li&gt;数据寄存器： 像“数据通道”。比如：我想让引脚输出高电平，就往这里写 1。&lt;/li&gt;
&lt;li&gt;状态寄存器： 像“仪表盘”。比如：串口收到数据了吗？看看这个寄存器的某一位是不是变成了 1。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;案例说明&#34;&gt;案例说明
&lt;/h3&gt;&lt;p&gt;当你执行 &lt;code&gt;*(uint32_t *)0x4001080C = 0x01;&lt;/code&gt; 时，发生了以下神奇的事情：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;软件层面： 你把内存地址 &lt;code&gt;0x4001080C&lt;/code&gt; 对应的那个 32 位“小盒子”里的第 0 位改成了 &lt;code&gt;1&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;硬件逻辑层面： 这个寄存器物理上连接着一堆逻辑电路（锁存器、MOS 管等）。硬件电路检测到寄存器这一位变成了 &lt;code&gt;1&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;电气层面： 内部的 MOS 管导通，将芯片内部的 VDD（通常是 3.3V） 电源连接到那个物理引脚（Pin）上。&lt;/li&gt;
&lt;li&gt;结果： 引脚上出现了 3.3V 的电压，也就是我们说的“高电平”。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;所以，你控制的是寄存器里的“逻辑电平（0 和 1）”，硬件电路根据你的逻辑，输出真实的“物理电平（0V 和 3.3V）”。&lt;/p&gt;
&lt;h3 id=&#34;寄存器编程-vs-库函数编程&#34;&gt;寄存器编程 vs. 库函数编程
&lt;/h3&gt;&lt;p&gt;虽然底层全是寄存器，但现在的开发者很少直接写 &lt;code&gt;0x4001080C&lt;/code&gt; 这种魔术数字了。&lt;/p&gt;
&lt;h4 id=&#34;方式-a寄存器操作硬核&#34;&gt;方式 A：寄存器操作（硬核）
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GPIOA-&amp;gt;ODR |= (1 &amp;lt;&amp;lt; 0); // 将 GPIOA 的数据寄存器第 0 位置 1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;优点： 速度极快，代码体积最小。&lt;/li&gt;
&lt;li&gt;缺点： 极难阅读，翻手册翻到头秃。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;方式-bhal-库操作主流&#34;&gt;方式 B：HAL 库操作（主流）
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HAL_GPIO_WritePin(GPIOA, GPIO_PIN_0, GPIO_PIN_SET); // 设置 PA0 为高电平
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;优点： 像人类语言，好理解，换个芯片也好移植。&lt;/li&gt;
&lt;li&gt;本质： &lt;code&gt;HAL_GPIO_WritePin&lt;/code&gt; 这个函数的内部，最终还是去操作了那几个寄存器地址。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;引脚（Pin）： 工厂的出货口。&lt;/li&gt;
&lt;li&gt;寄存器（Register）： 控制出货口的开关闸门。&lt;/li&gt;
&lt;li&gt;地址（Address）： 找到那个闸门的唯一路径。&lt;/li&gt;
&lt;li&gt;库函数（Library）： 开关的操作手册和自动机械臂。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;进阶思考&#34;&gt;进阶思考
&lt;/h3&gt;&lt;p&gt;既然一切都是寄存器，那么“串口发送数据”是怎么回事呢？ 其实就是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;检查“状态寄存器”，看上一个字发完没。&lt;/li&gt;
&lt;li&gt;如果发完了，把你要发的字符丢进“数据寄存器”。&lt;/li&gt;
&lt;li&gt;芯片内部的硬件电路会自动把这个寄存器里的 8 位数据变成一串高低电平，从引脚“嗖”地射出去。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-04-STM32启动过程</title>
        <link>https://teaize.github.io/p/zzz-04-stm32%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-04-stm32%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/</guid>
        <description>&lt;p&gt;实际上，在 &lt;code&gt;main()&lt;/code&gt; 出现之前，单片机已经默默做了很多“脏活累活”。我们可以把这个过程想象成工厂开工前的准备流程&lt;/p&gt;
&lt;h3 id=&#34;1-启动过程全景图&#34;&gt;1. 启动过程全景图
&lt;/h3&gt;&lt;p&gt;当单片机掉电后再上电，或者你按下 Reset（复位） 键时，芯片内部会发生以下连锁反应：&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  sequenceDiagram
    participant HW as 硬件 (CPU)
    participant Flash as Flash (0x08000000)
    participant Startup as 启动文件 (.s)
    participant System as SystemInit 函数
    participant Main as main() 函数

    HW-&gt;&gt;Flash: 1. 读取栈顶指针 (MSP)
    HW-&gt;&gt;Flash: 2. 读取复位向量 (Reset Vector)
    Flash-&gt;&gt;Startup: 3. 跳转到复位程序入口
    Startup-&gt;&gt;System: 4. 执行时钟初始化
    System-&gt;&gt;Startup: 初始化完成
    Startup-&gt;&gt;Main: 5. 跳转到用户代码
&lt;/div&gt;
&lt;h3 id=&#34;2-详细步骤拆解&#34;&gt;2. 详细步骤拆解
&lt;/h3&gt;&lt;h4 id=&#34;第一步找地图和办公桌&#34;&gt;第一步：找“地图”和“办公桌”
&lt;/h4&gt;&lt;p&gt;当复位信号产生，CPU 会雷打不动地去 Flash 的起始地址（0x0800 0000） 寻找两块最重要的数据：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;栈顶指针 (MSP)：告诉 CPU 办公桌（SRAM）的顶端在哪里，方便以后存放临时变量。&lt;/li&gt;
&lt;li&gt;复位向量 (Reset Vector)：这其实是一个地址，指向“第一行程序”在 Flash 里的位置。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;第二步进入汇编世界启动文件&#34;&gt;第二步：进入汇编世界（启动文件）
&lt;/h4&gt;&lt;p&gt;你可能在工程里见过一个叫 &lt;code&gt;startup_stm32xxxx.s&lt;/code&gt; 的文件，这就是启动文件。它是用汇编语言写的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为什么用汇编？ 因为此时 C 语言的环境（比如变量、堆栈）还没搭好，只能用最原始的汇编指令。&lt;/li&gt;
&lt;li&gt;这个文件的任务是：定义中断向量表。它告诉 CPU：如果发生了复位去哪、发生了中断去哪。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第三步初始化心跳systeminit&#34;&gt;第三步：初始化“心跳”（SystemInit）
&lt;/h4&gt;&lt;p&gt;在进入 &lt;code&gt;main&lt;/code&gt; 之前，启动文件会先调用一个 C 函数叫 &lt;code&gt;SystemInit()&lt;/code&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;任务：配置外部晶振，把芯片的频率从低速（刚启动时通常很慢）提升到正常工作频率（比如 72MHz）。&lt;/li&gt;
&lt;li&gt;这就是为什么你的程序一跑起来就是全速的。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第四步搬运数据数据初始化&#34;&gt;第四步：搬运数据（数据初始化）
&lt;/h4&gt;&lt;p&gt;前面 [[ZZZ-02-Flash和SRAM]] 中说到：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;代码在 Flash。&lt;/li&gt;
&lt;li&gt;变量在 SRAM。 如果你写了 &lt;code&gt;int a = 10;&lt;/code&gt;，这个“10”在断电时是存在 Flash 里的。 在这一步，启动代码会把 Flash 里的初始值“搬”到 SRAM 的变量地址里。这样等你进入 &lt;code&gt;main&lt;/code&gt; 的时候，变量 &lt;code&gt;a&lt;/code&gt; 已经变成 &lt;code&gt;10&lt;/code&gt; 了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第五步跳转到-main&#34;&gt;第五步：跳转到 &lt;code&gt;main&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;所有环境都搭好了，“办公桌”清理干净了，“时钟”也准了。启动文件最后执行一条跳转指令： &lt;code&gt;BL main&lt;/code&gt; 至此，你熟悉的 C 语言世界大幕开启！&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;阶段&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;发生位置&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;主要任务&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;硬件阶段&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;CPU 内核&lt;/td&gt;
          &lt;td&gt;获取栈顶地址和首条指令地址&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;软件阶段 (汇编)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;startup_xxx.s&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;配置中断向量表，初始化堆栈&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;系统初始化&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;system_stm32xxx.c&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;设置系统时钟 (RCC)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;数据搬运&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;库代码&lt;/td&gt;
          &lt;td&gt;将 Flash 中的变量初始值拷贝到 SRAM&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;应用阶段&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;main.c&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;执行你写的代码&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;为什么要了解这个&#34;&gt;为什么要了解这个
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;调试死机：如果你的程序还没进 &lt;code&gt;main&lt;/code&gt; 就挂了，你得知道要去启动文件或者 &lt;code&gt;SystemInit&lt;/code&gt; 里找原因。&lt;/li&gt;
&lt;li&gt;理解中断：中断向量表就在启动文件里。如果你想深入底层，这是必经之路。&lt;/li&gt;
&lt;li&gt;节省空间：理解了数据搬运，你就会明白为什么全局变量如果不初始化会占空间，以及如何优化内存。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-05-时钟树</title>
        <link>https://teaize.github.io/p/zzz-05-%E6%97%B6%E9%92%9F%E6%A0%91/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-05-%E6%97%B6%E9%92%9F%E6%A0%91/</guid>
        <description>&lt;h3 id=&#34;时钟树的功能车间里的传动轴&#34;&gt;时钟树的功能：车间里的“传动轴”
&lt;/h3&gt;&lt;p&gt;想象 STM32 是一个巨大的自动化工厂，里面有几百个加工车间（外设，比如 GPIO 是控制灯的车间，USART 是通信车间）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主时钟（HCLK/SYSCLK）：是工厂里的大发动机。&lt;/li&gt;
&lt;li&gt;外设时钟：是从大发动机连接到各个车间的传动皮带。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;STM32 的设计逻辑是： 为了极度省电，工厂默认所有的传动皮带都是拆掉的。也就是说，虽然大发动机（主频）在转，但动力传不到具体车间里。如果你想让 GPIO 车间工作，你必须先手动“合上电闸”或者“挂上皮带”。&lt;/p&gt;
&lt;h3 id=&#34;为什么要搞得这么麻烦核心逻辑低功耗&#34;&gt;为什么要搞得这么麻烦？（核心逻辑：低功耗）
&lt;/h3&gt;&lt;p&gt;51 单片机默认时钟是全开的，简单但费电。 STM32 作为高性能芯片，集成了非常多的外设。如果这些外设的时钟全部默认开启：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;功耗爆炸：即使你没用这些外设，数字电路在时钟驱动下也会不断产生翻转电流，导致芯片发烫，电池瞬间没电。&lt;/li&gt;
&lt;li&gt;电磁干扰：无用的高频信号会产生不必要的干扰。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;所以，STM32 遵循“按需分配”原则：你不用的东西，我不给供能。&lt;/p&gt;
&lt;h3 id=&#34;3-时钟树动力是怎么传导的&#34;&gt;3. 时钟树：动力是怎么传导的？
&lt;/h3&gt;&lt;p&gt;时钟的源头有很多，就像工厂可以由自备发电机供电，也可以由电网供电。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;HSE (高速外部时钟)：通常是电路板上那个金属外壳的晶振（比如 8MHz）。它最准。&lt;/li&gt;
&lt;li&gt;HSI (高速内部时钟)：芯片内部自带的，虽然没那么准，但能应急。&lt;/li&gt;
&lt;li&gt;PLL (锁相环/倍频器)：这是最神奇的地方。它能把 8MHz 的微弱动力，像加了涡轮增压一样，翻好几倍变成 72MHz 或 168MHz。&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    %% 时钟源部分
    subgraph Sources [1.时钟源-水源]
        HSE[HSE 外部高速晶振&lt;br/&gt;通常 8MHz]
        HSI[HSI 内部高速时钟&lt;br/&gt;约 8MHz, 不够准]
        LSE[LSE 外部低速晶振&lt;br/&gt;32.768kHz, 给RTC用]
        LSI[LSI 内部低速时钟&lt;br/&gt;40kHz, 给看门狗用]
    end

    %% 倍频部分
    subgraph Processing [2.倍频与切换-水处理]
        PLLMux{时钟源选择}
        PLL[PLL 锁相环&lt;br/&gt;倍频器]
        SYS_Mux{系统时钟选择}
        
        HSE --&gt; PLLMux
        HSI --&gt; PLLMux
        PLLMux --&gt; PLL
        PLL --&gt;|x9| SYS_Mux
        HSE --&gt; SYS_Mux
    end

    %% 总线分发部分
    subgraph Bus [3.总线预分频-水管]
        SYSCLK((SYSCLK 系统时钟&lt;br/&gt;通常 72MHz))
        AHB_Pre[AHB 预分频器]
        APB1_Pre[APB1 低速预分频器&lt;br/&gt;最高 36MHz]
        APB2_Pre[APB2 高速预分频器&lt;br/&gt;最高 72MHz]

        SYS_Mux --&gt; SYSCLK
        SYSCLK --&gt; AHB_Pre
        AHB_Pre --&gt; APB1_Pre
        AHB_Pre --&gt; APB2_Pre
    end

    %% 外设部分
    subgraph Peripherals [4.外设-水龙头]
        AHB_Pre --&gt; DMA[DMA / 复位控制器]
        
        APB1_Pre --&gt; TIM2[Timer 2,3,4]
        APB1_Pre --&gt; UART2[UART 2,3]
        APB1_Pre --&gt; I2C[I2C 1,2]

        APB2_Pre --&gt; GPIO[GPIO A, B, C...]
        APB2_Pre --&gt; UART1[UART 1]
        APB2_Pre --&gt; ADC[ADC 1,2]
        APB2_Pre --&gt; SPI1[SPI 1]
    end

    %% 样式美化
    style SYSCLK fill:#f96,stroke:#333,stroke-width:2px
    style PLL fill:#fcf,stroke:#333
    style Sources fill:#e1f5fe,stroke:#01579b
    style Peripherals fill:#fff9c4,stroke:#fbc02d
&lt;/div&gt;
&lt;h4 id=&#34;为什么要有这么多时钟源&#34;&gt;为什么要有这么多时钟源
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;HSE (High-Speed External)：你的开发板上那个金属的小疙瘩（晶振）。它是最准的，做串口通信、USB 等&lt;strong&gt;对时间敏感的任务&lt;/strong&gt;必须用它。&lt;/li&gt;
&lt;li&gt;HSI (High-Speed Internal)：&lt;strong&gt;芯片内置的电阻电容震荡产生&lt;/strong&gt;。优点是启动快、不用钱，缺点是受温度影响大，会“跑偏”。&lt;/li&gt;
&lt;li&gt;LSE/LSI：就像家里的闹钟电池，功率极低，专门给 RTC（实时时钟/万年历） 或 看门狗（防止程序死机） 这种需要 24 小时待命的模块用。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;不同的总线apb1-与-apb2&#34;&gt;不同的总线（APB1 与 APB2）
&lt;/h4&gt;&lt;p&gt;这是初学者最容易搞混的地方：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;APB2 (高速总线)：通常运行在 72MHz。它连接的是最重要的外设，比如 GPIO（控制灯、按键快不快全靠它）、UART1、ADC。&lt;/li&gt;
&lt;li&gt;APB1 (低速总线)：&lt;strong&gt;为了节能&lt;/strong&gt;，它的上限通常只有 36MHz。挂载的是一些没必要跑那么快的模块，比如一般的定时器、I2C 通信等。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1、这里可能会产生疑问，为什么将 I2C 和 UART 挂在到 APB1 低速总线上，我们先来看看所谓的“低速”总线 APB1&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;APB1 总线频率：通常是 &lt;strong&gt;$36\text{ MHz}$&lt;/strong&gt;（即每秒钟翻转 36,000,000 次）。&lt;/li&gt;
&lt;li&gt;UART 常用速率：$115200\text{ bps}$（约 &lt;strong&gt;$0.1\text{ MHz}$&lt;/strong&gt;）。&lt;/li&gt;
&lt;li&gt;I2C 常用速率：标准模式 $100\text{ kbps}$，快速模式 $400\text{ kbps}$（约 &lt;strong&gt;$0.4\text{ MHz}$&lt;/strong&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结论：即使是所谓的“低速”总线 APB1（$36\text{ MHz}$），它的速度也是 I2C 和 UART 物理传输速率的 &lt;strong&gt;几十倍甚至几百倍&lt;/strong&gt;。 对于这些外设来说，APB1 提供的带宽已经绰绰有余了。把它们挂在 $72\text{ MHz}$ 的 APB2 上，完全是浪费。&lt;/p&gt;
&lt;p&gt;2、你可能会问：既然 UART 都不需要高速，那 GPIO 为什么要高速？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GPIO（通用输入输出）：有时候我们需要用 GPIO 模拟一些非常复杂的协议，或者输出极高频率的脉冲（比如驱动高速功率管）。如果 GPIO 总线慢，输出的波形就会“抖动”或者变圆，无法精准控制。&lt;/li&gt;
&lt;li&gt;ADC（模数转换）：ADC 需要在极短的时间内对模拟电压进行采样。&lt;strong&gt;采样频率越高，还原的信号越准，这必须依靠高速时钟支持&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;TIM1/TIM8：这些是高级定时器，用于控制电机的精准补差。如果时钟不够快，控制精度就会下降。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;3、一个有趣的例外：UART1&lt;/p&gt;
&lt;p&gt;如果你仔细看时钟树，你会发现 &lt;strong&gt;USART1 往往是挂在 APB2（高速）上的&lt;/strong&gt;，而 USART2, 3 挂在 APB1 上。这是为什么呢？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;启动与刷机：&lt;strong&gt;STM32 的串口下载（Bootloader）通常默认使用 USART1&lt;/strong&gt;。为了保证在各种复杂情况下都能快速、可靠地通信，官方把它放在了高速总线上。&lt;/li&gt;
&lt;li&gt;最高上限：如果你真的需要极限的串口波特率（比如几兆比特每秒），USART1 能够提供比其他串口更高的上限。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;pll倍频器是核心魔术师&#34;&gt;PLL（倍频器）是核心魔术师
&lt;/h4&gt;&lt;p&gt;如果你外接了一个 8MHz 的晶振，但你希望芯片跑在 72MHz。怎么办？ PLL 就是干这个的。它能把输入的 8MHz “乘”上一个倍数（比如 9 倍），得到 72MHz。&lt;/p&gt;
&lt;h3 id=&#34;重点理解总线层级&#34;&gt;重点理解：总线层级
&lt;/h3&gt;&lt;p&gt;在学习时钟树时，你会看到两个重要的“分发器”，它们叫 APB 总线：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;APB1：低速总线（最高通常 36MHz 或 42MHz）。连接的是比较慢的外设（如串口 UART2、普通定时器）。&lt;/li&gt;
&lt;li&gt;APB2：高速总线（最高通常 72MHz 或 84MHz）。连接的是重要的、需要快的模块（如 GPIO、串口 UART1、高级定时器）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;记住这个知识点： 当你在查手册开启时钟时，一定要看清楚你的外设是挂在 APB1 还是 APB2 下。挂错了总线，时钟函数就调错了。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-06-STM32点灯</title>
        <link>https://teaize.github.io/p/zzz-06-stm32%E7%82%B9%E7%81%AF/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-06-stm32%E7%82%B9%E7%81%AF/</guid>
        <description>&lt;p&gt;这里使用的是 ST-Link 和最小开发板。这种连接方式叫做 &lt;strong&gt;SWD (Serial Wire Debug)&lt;/strong&gt; 接口。相比于串口下载，它不仅速度快，最重要的是支持&lt;strong&gt;在线调试&lt;/strong&gt;（可以实时查看变量、打断点让程序停下）。&lt;/p&gt;
&lt;h3 id=&#34;接线对照表&#34;&gt;接线对照表
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ST-Link 使用到的引脚：&lt;del&gt;7、9、19、20&lt;/del&gt;(尝试这四个引脚，CubeIDE 下载程序时找不到单片机)
&lt;ul&gt;
&lt;li&gt;使用引脚 1、20、7、8；并且通过数据线单独给单片机供电&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220151519265.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220151519265.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph LR
    subgraph ST_Link [ST-Link V2 下载器]
        P1[3.3V]
        P2[GND]
        P3[SWCLK]
        P4[SWDIO]
    end

    subgraph STM32_Board [STM32 最小系统板]
        M1[3.3V]
        M2[GND]
        M3[SWCLK]
        M4[SWIO]
    end

    P1 --- M1
    P2 --- M2
    P3 --- M3
    P4 --- M4

    style ST_Link fill:#f5f5f5,stroke:#333
    style STM32_Board fill:#fff9c4,stroke:#fbc02d
&lt;/div&gt;
&lt;h3 id=&#34;连接后的关键步骤&#34;&gt;连接后的关键步骤
&lt;/h3&gt;&lt;p&gt;接好线后，你还需要在电脑端的软件（以 Keil MDK 为例）中进行设置，否则还是识别不到芯片：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;插上 ST-Link：电脑识别到 ST-Link 驱动。&lt;/li&gt;
&lt;li&gt;打开 Keil 工程：
&lt;ul&gt;
&lt;li&gt;点击魔术棒图标 (&lt;strong&gt;Options for Target&lt;/strong&gt;)。&lt;/li&gt;
&lt;li&gt;切换到 &lt;strong&gt;Debug&lt;/strong&gt; 选项卡。&lt;/li&gt;
&lt;li&gt;在右侧下拉框选择 &lt;strong&gt;ST-Link Debugger&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220152131869.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220152131869.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;进入 Settings 设置 (关键)：
&lt;ul&gt;
&lt;li&gt;点击旁边的 &lt;strong&gt;Settings&lt;/strong&gt; 按钮。&lt;/li&gt;
&lt;li&gt;在 &lt;strong&gt;Port&lt;/strong&gt; 下拉框中，务必将 &lt;code&gt;JTAG&lt;/code&gt; 改为 &lt;strong&gt;&lt;code&gt;SW&lt;/code&gt;&lt;/strong&gt;（因为你只接了两根信号线）。&lt;/li&gt;
&lt;li&gt;如果连接成功，右侧的 &lt;strong&gt;SW Device&lt;/strong&gt; 框里会出现一串十六进制代码（IDCODE），这说明已经成功识别到了你的 STM32 芯片。&lt;/li&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251220152242.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251220152242.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;关于-boot-跳线帽的设置&#34;&gt;关于 BOOT 跳线帽的设置
&lt;/h3&gt;&lt;p&gt;在使用 ST-Link 下载时，开发板上的黄色跳线帽（BOOT0 和 BOOT1）通常应该这样设置：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BOOT0 = 0（跳线帽靠近 GND 一端）&lt;/li&gt;
&lt;li&gt;BOOT1 = 0（跳线帽靠近 GND 一端） 这种模式下，程序下载后按一下复位键就能直接从 Flash 运行，最方便。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220152521016.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220152521016.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;工程配置&#34;&gt;工程配置
&lt;/h2&gt;&lt;p&gt;STM32 的 C 代码需要一个“容器”（即工程环境）。如果你只把代码写在一个记事本里，编译器是不知道如何处理硬件底层的&lt;/p&gt;
&lt;h3 id=&#34;为什么需要工程配置&#34;&gt;为什么需要“工程配置”
&lt;/h3&gt;&lt;p&gt;在 51 单片机里，你可能只需要一个 &lt;code&gt;.c&lt;/code&gt; 文件就能跑。但在 STM32 里，一个完整的工程必须包含以下四个核心板块：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;启动文件 (&lt;code&gt;startup_stm32xxx.s&lt;/code&gt;)：我们之前讲过的“工厂开工流程”，它是汇编代码。&lt;/li&gt;
&lt;li&gt;CMSIS 库文件：这是 ARM 公司提供的，用来让内核（Cortex-M）认识寄存器地址的。&lt;/li&gt;
&lt;li&gt;HAL/标准库驱动：这是 ST 官方提供的库，让你能用 &lt;code&gt;HAL_GPIO_WritePin&lt;/code&gt; 这种函数。&lt;/li&gt;
&lt;li&gt;你的代码 (&lt;code&gt;main.c&lt;/code&gt;)：你写的逻辑。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;好消息是：现在的开发者通常不需要手动配置这些，这里我们使用 &lt;strong&gt;STM32CubeIDE&lt;/strong&gt;。只需要鼠标点几下，它就会自动为你生成一个配置好的工程容器。&lt;/p&gt;
&lt;h3 id=&#34;完整操作步骤&#34;&gt;完整操作步骤
&lt;/h3&gt;&lt;h4 id=&#34;第一步新建工程&#34;&gt;第一步：新建工程
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;打开 STM32CubeIDE，点击 &lt;strong&gt;File -&amp;gt; New -&amp;gt; STM32 Project&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在 &lt;strong&gt;Commercial Part Number&lt;/strong&gt; 框输入你的芯片型号（如 &lt;code&gt;STM32F103C8T6&lt;/code&gt;），选中后点击 &lt;strong&gt;Next&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;给项目起个名字（如 &lt;code&gt;Blinky_LED&lt;/code&gt;），点击 &lt;strong&gt;Finish&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;![[Pasted image 20251220153919.png]]&lt;/p&gt;
&lt;h4 id=&#34;第二步图形化配置-ioc-文件&#34;&gt;第二步：图形化配置 (ioc 文件)
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;在弹出的芯片引脚图上，找到 &lt;strong&gt;PC13&lt;/strong&gt; 引脚，左键点击它，选择 &lt;strong&gt;GPIO_Output&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;（可选）在左侧菜单 &lt;strong&gt;System Core -&amp;gt; GPIO&lt;/strong&gt; 里，点击 PC13，可以给它起个别名（User Label），比如 &lt;code&gt;MY_LED&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;配置时钟&lt;/strong&gt;：点击上方的 &lt;strong&gt;Clock Configuration&lt;/strong&gt; 选项卡。通常默认即可，或者在 &lt;code&gt;HCLK&lt;/code&gt; 框输入 &lt;code&gt;72&lt;/code&gt; 然后按回车，IDE 会自动帮你算好倍频。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;生成代码&lt;/strong&gt;：直接按键盘 &lt;strong&gt;Ctrl + S&lt;/strong&gt; 保存，弹窗问是否生成代码，选 &lt;strong&gt;Yes&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220154159371.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220154159371.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;第三步开启外部高速晶振可选&#34;&gt;第三步：开启外部高速晶振（可选）
&lt;/h4&gt;&lt;p&gt;注意：在 STM32F1 系列中，如果使用内部时钟（HSI），倍频后最高只能达到 64MHz。要达到标准的 72MHz，你必须开启板子上的那个金属晶振。按照下面步骤可开启开发板上的金属晶振：&lt;/p&gt;
&lt;p&gt;1、开启 HSE 硬件开关&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;回到 STM32CubeIDE 的 &lt;strong&gt;Pinout &amp;amp; Configuration&lt;/strong&gt;（引脚配置）界面。&lt;/li&gt;
&lt;li&gt;在左侧菜单栏找到 &lt;strong&gt;System Core&lt;/strong&gt;（系统核心）。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;RCC&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在右侧的 &lt;strong&gt;High Speed Clock (HSE)&lt;/strong&gt; 下拉菜单中，选择 &lt;strong&gt;Crystal/Ceramic Resonator&lt;/strong&gt;（晶体/陶瓷谐振器）。
&lt;ul&gt;
&lt;li&gt;此时你会发现芯片引脚图上的 PD0 和 PD1 变绿了，这说明它们现在连接到了外部晶振。&lt;/li&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220154801274.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220154801274.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2、在时钟树中切换路径&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;切换到上方的 &lt;strong&gt;Clock Configuration&lt;/strong&gt;（时钟配置）选项卡。&lt;/li&gt;
&lt;li&gt;找到 &lt;strong&gt;PLL Source Mux&lt;/strong&gt;（锁相环来源选择器）这个选择框，把点选挪到 &lt;strong&gt;HSE&lt;/strong&gt; 上。&lt;/li&gt;
&lt;li&gt;确保 &lt;strong&gt;PLLMul&lt;/strong&gt;（倍频系数）被设置为 &lt;strong&gt;X 9&lt;/strong&gt;（因为 $8\text{MHz} \times 9 = 72\text{MHz}$）。&lt;/li&gt;
&lt;li&gt;在 &lt;strong&gt;System Clock Mux&lt;/strong&gt;（系统时钟选择器）中，选择 &lt;strong&gt;PLLCLK&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键点&lt;/strong&gt;：观察 &lt;strong&gt;APB1 Prescaler&lt;/strong&gt;，确保它的分频系数是 &lt;strong&gt;/2&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;原因：我们在“总线”那一节讲过，APB1 最高只能跑 36MHz。如果系统时钟是 72MHz，这里必须 2 分频。

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220155013204.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220155013204.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;第四步编写完整代码&#34;&gt;第四步：编写完整代码
&lt;/h4&gt;&lt;p&gt;代码生成后，打开左侧项目资源管理器里的 &lt;strong&gt;Core -&amp;gt; Src -&amp;gt; main.c&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;⚠️ 注意：&lt;/strong&gt; 在 CubeIDE 中，你必须把代码写在 &lt;code&gt;/* USER CODE BEGIN … */&lt;/code&gt; 和 &lt;code&gt;/* USER CODE END … */&lt;/code&gt; 之间。否则，下次你修改配置重新生成代码时，你的代码会被&lt;strong&gt;无情覆盖&lt;/strong&gt;！&lt;/p&gt;
&lt;p&gt;找到 &lt;code&gt;main&lt;/code&gt; 函数里的 &lt;code&gt;while(1)&lt;/code&gt;，填入以下代码：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* Infinite loop */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 翻转 PC13 的电平
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 如果你之前起了别名 MY_LED，这里也可以写 MY_LED_GPIO_Port, MY_LED_Pin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_TogglePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 延时 500 毫秒
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 3 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 3 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220155522595.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220155522595.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;第五步配置调试口&#34;&gt;第五步：配置调试口
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;打开你的工程里的 &lt;strong&gt;&lt;code&gt;.ioc&lt;/code&gt;&lt;/strong&gt; 文件。&lt;/li&gt;
&lt;li&gt;在左侧菜单栏找到 &lt;strong&gt;System Core&lt;/strong&gt; -&amp;gt; &lt;strong&gt;SYS&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在右侧的 &lt;strong&gt;Debug&lt;/strong&gt; 下拉菜单中，选择 &lt;strong&gt;Serial Wire&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;选完后，你应该能看到引脚图上的 PA13 和 PA14 变绿了，并标注了 SWDIO 和 SWCLK。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;保存并重新生成代码&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220180739819.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220180739819.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;编译下载与运行&#34;&gt;编译、下载与运行
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;编译&lt;/strong&gt;：点击工具栏上的 &lt;strong&gt;“小锤子”图标 (Build)&lt;/strong&gt;。查看下方 Console 窗口，显示 &lt;code&gt;0 errors, 0 warnings&lt;/code&gt; 即成功。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;设置下载器&lt;/strong&gt;：如果是第一次运行，点击 &lt;strong&gt;Run -&amp;gt; Run Configurations…&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;在 &lt;strong&gt;Debugger&lt;/strong&gt; 选项卡里，确保使用的是 &lt;strong&gt;ST-LINK (ST-LINK GDB server)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;确保 &lt;strong&gt;Interface&lt;/strong&gt; 选的是 &lt;strong&gt;SWD&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;运行&lt;/strong&gt;：点击工具栏上的 &lt;strong&gt;“绿色右箭头”图标 (Run)&lt;/strong&gt;。IDE 会自动把程序烧录进开发板。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220160035387.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220160035387.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;升级 ST-LINK 固件&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;点击 IDE 菜单 &lt;strong&gt;Help -&amp;gt; ST-LINK Firmware Update&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;Open in update mode&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;Upgrade&lt;/strong&gt; 升级固件。

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220161411019.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220161411019.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;小结你的第一个工程长什么样&#34;&gt;小结：你的第一个工程长什么样
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;文件夹/文件&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;作用&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Drivers/CMSIS&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;内核核心文件（不用动）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Drivers/STM32F1xx_HAL_Driver&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;HAL 库源码，即 &lt;code&gt;HAL_GPIO_xxx&lt;/code&gt; 等函数的定义&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Core/Src/main.c&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;你的主战场&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Core/Src/stm32f1xx_it.c&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;处理中断函数的地方&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Project_Name.ioc&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;可视化配置的源文件，双击它能重新改引脚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>ZZZ-07-推挽输出与开漏输出</title>
        <link>https://teaize.github.io/p/zzz-07-%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%E4%B8%8E%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-07-%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%E4%B8%8E%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA/</guid>
        <description>&lt;p&gt;在 STM32CubeIDE 配置 GPIO 时，你会看到 &lt;code&gt;Output Push-Pull&lt;/code&gt;（推挽）和 &lt;code&gt;Output Open-Drain&lt;/code&gt;（开漏）两个选项。理解它们的区别，决定了你能不能正确驱动外部设备。&lt;/p&gt;
&lt;h3 id=&#34;1-推挽输出-push-pull--全能型驱动&#34;&gt;1. 推挽输出 (Push-Pull) —— “全能型驱动”
&lt;/h3&gt;&lt;p&gt;这是最常用的模式，之前的 [[ZZZ-06-STM32点灯]] 用的就是它。&lt;/p&gt;
&lt;h4 id=&#34;内部结构&#34;&gt;内部结构：
&lt;/h4&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220182149374.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220182149374.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;想象引脚内部有两个“开关”(如上图“输出控制”后端的两个 MOS 管)：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个是连接到 VCC (3.3V) 的开关（P-MOS 管）。&lt;/li&gt;
&lt;li&gt;一个是连接到 GND (0V) 的开关（N-MOS 管）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;工作原理&#34;&gt;工作原理：
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;输出高电平时：上面的开关接通，下面的断开。引脚被强力“推”向 3.3V。此时引脚有很强的电流输出能力。&lt;/li&gt;
&lt;li&gt;输出低电平时：上面的开关断开，下面的接通。引脚被强力“拉”向 GND。此时引脚有很强的吸入电流能力。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;特点&#34;&gt;特点：
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;双向都有力：无论是输出高还是低，电平都很稳定。&lt;/li&gt;
&lt;li&gt;速度快：电平切换非常迅速，适合高速信号。&lt;/li&gt;
&lt;li&gt;最常见：驱动 LED、驱动蜂鸣器、SPI 通信等，绝大多数情况都选它。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;2-开漏输出-open-drain--有底气没脾气&#34;&gt;2. 开漏输出 (Open-Drain) —— “有底气，没脾气”
&lt;/h3&gt;&lt;p&gt;这个模式比较特殊，如果你选了它却没接“上拉电阻”，你会发现引脚输出高电平时没电压。&lt;/p&gt;
&lt;h4 id=&#34;内部结构-1&#34;&gt;内部结构：
&lt;/h4&gt;&lt;p&gt;引脚内部只有连接到 GND 的开关（N-MOS 管），没有连接到 VCC 的开关。&lt;/p&gt;
&lt;h4 id=&#34;工作原理-1&#34;&gt;工作原理：
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;输出低电平时：开关接通，引脚被拉到 GND。这没问题。&lt;/li&gt;
&lt;li&gt;输出高电平时：开关断开。由于上面没有连接 VCC 的开关，此时引脚处于浮空状态（高阻态）。就像一根断掉的电线，它自己无法产生电压。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;必须搭配上拉电阻&#34;&gt;必须搭配：上拉电阻
&lt;/h4&gt;&lt;p&gt;为了让开漏模式能输出高电平，你必须在引脚外部接一个电阻连到电源（VCC）。这样，当内部开关断开时，外部电阻会把引脚“拉”上去。&lt;/p&gt;
&lt;h4 id=&#34;特点与神奇用途&#34;&gt;特点与神奇用途：
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;线与逻辑（Wired-AND）：&lt;strong&gt;多个开漏引脚连在一起，只要有一个输出低，整条线就是低&lt;/strong&gt;。这是 I2C 总线 必须使用开漏的原因。&lt;/li&gt;
&lt;li&gt;电平转换：STM32 是 3.3V 器件，但如果你想驱动一个 5V 的逻辑电路。你可以把开漏引脚通过电阻连到 5V 电源上。开关断开时，引脚就会被拉到 5V（前提是该引脚标有 &lt;code&gt;FT&lt;/code&gt;，即容忍 5V）。&lt;/li&gt;
&lt;li&gt;防止短路：多个推挽输出连在一起如果电平不一会烧芯片，开漏则不会。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;直观对比表&#34;&gt;直观对比表
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;特性&lt;/th&gt;
          &lt;th&gt;推挽输出 (Push-Pull)&lt;/th&gt;
          &lt;th&gt;开漏输出 (Open-Drain)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;输出高电平&lt;/td&gt;
          &lt;td&gt;直接输出 VCC (3.3V)&lt;/td&gt;
          &lt;td&gt;高阻态 (需外接上拉电阻才有电压)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;输出低电平&lt;/td&gt;
          &lt;td&gt;直接输出 GND (0V)&lt;/td&gt;
          &lt;td&gt;直接输出 GND (0V)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;驱动能力&lt;/td&gt;
          &lt;td&gt;强 (双向)&lt;/td&gt;
          &lt;td&gt;弱 (高电平靠电阻，低电平靠芯片)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;主要用途&lt;/td&gt;
          &lt;td&gt;LED、普通 IO 控制、SPI、PWM&lt;/td&gt;
          &lt;td&gt;I2C 通信、电平转换、多机通信&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;比喻&lt;/td&gt;
          &lt;td&gt;既能推水，又能抽水的水泵&lt;/td&gt;
          &lt;td&gt;只能抽水（排水）的水龙头&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;推挽输出就像是一个双向推拉门，你既可以用力把它推开（高电平），也可以用力把它拉关（低电平）。&lt;/li&gt;
&lt;li&gt;开漏输出就像是一个单向弹簧门。你自己只能用力把它拉关（输出低），但你想开门（输出高）时，你自己没法推，只能靠门背后的弹簧（上拉电阻）把它拽回去。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;什么时候该选什么&#34;&gt;什么时候该选什么？
&lt;/h3&gt;&lt;p&gt;在 STM32CubeIDE 配置时：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果你只是点灯、控制继电器、驱动电机驱动模块：闭眼选 Push-Pull。&lt;/li&gt;
&lt;li&gt;如果你在学习 I2C 协议（比如驱动 OLED 屏幕或传感器）：必须选 Open-Drain。&lt;/li&gt;
&lt;li&gt;如果你发现选了输出，灯却不亮或者电压很诡异：检查一下是不是误选成了 Open-Drain 且没接上拉电阻。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-08-GPIO输入</title>
        <link>https://teaize.github.io/p/zzz-08-gpio%E8%BE%93%E5%85%A5/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-08-gpio%E8%BE%93%E5%85%A5/</guid>
        <description>&lt;p&gt;学习 GPIO 输入 是迈向“人机交互”的关键一步。现在我们将以 PA0 引脚连接按键，PC13 引脚控制 LED 为例。学习两种最常用的方法：轮询扫描（Polling） 和 外部中断（EXTI）&lt;/p&gt;
&lt;h3 id=&#34;准备工作硬件连接&#34;&gt;准备工作：硬件连接
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;LED: 最小开发板自带，连接在 PC13（低电平点亮）。&lt;/li&gt;
&lt;li&gt;按键: 找一个轻触按键。
&lt;ul&gt;
&lt;li&gt;一端连接到 PA0。&lt;/li&gt;
&lt;li&gt;另一端连接到 GND。&lt;/li&gt;
&lt;li&gt;原理：平时 PA0 是高电平，按键按下时 PA0 变成低电平。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;实验一轮询扫描button-scanning&#34;&gt;实验一：轮询扫描（Button Scanning）
&lt;/h3&gt;&lt;p&gt;这种方法就像警察“查岗”，在 &lt;code&gt;while(1)&lt;/code&gt; 循环里不断地看 PA0 的状态。&lt;/p&gt;
&lt;h4 id=&#34;1-cubeide-配置-ioc-文件&#34;&gt;1. CubeIDE 配置 (ioc 文件)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;PC13: 保持 &lt;code&gt;GPIO_Output&lt;/code&gt;【最小开发板上的灯，低电平点亮】&lt;/li&gt;
&lt;li&gt;PA0: 设置为 &lt;code&gt;GPIO_Input&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;关键配置 (GPIO 选项卡)：
&lt;ul&gt;
&lt;li&gt;点击 PA0，将 GPIO Pull-up/Pull-down 设置为 Pull-up（上拉）【PA0 默认为高电平，当按键按下时，将 PA0 拉低到 GND】&lt;/li&gt;
&lt;li&gt;原因：这样当按键没按下时，内部电阻会把 PA0 稳定在 3.3V（高电平），防止引脚“浮空”导致电平乱跳。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-代码实现&#34;&gt;2. 代码实现
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main.c&lt;/code&gt; 的 &lt;code&gt;while(1)&lt;/code&gt; 中编写：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// 1. 读取 PA0 的电平状态
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 如果读到低电平（按键按下）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 2. 软件消抖：按键是机械结构，按下时会产生几毫秒的杂波
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 3. 再次确认是否按下
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 4. 执行动作：翻转 LED
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_TogglePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// 5. 等待按键松开（死循环直到变回高电平），防止长按导致灯疯狂闪烁
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;HAL_GPIO_ReadPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_RESET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220203757285.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220203757285.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;实验二外部中断exti&#34;&gt;实验二：外部中断（EXTI）
&lt;/h3&gt;&lt;p&gt;轮询扫描很占 CPU 资源。中断 则像“报警器”：CPU 平时去干别的事，按键一按下，硬件自动触发一个信号通知 CPU 来处理。&lt;/p&gt;
&lt;h4 id=&#34;1-cubeide-配置-ioc-文件-1&#34;&gt;1. CubeIDE 配置 (ioc 文件)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;PA0: 修改为 &lt;code&gt;GPIO_EXTI0&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;GPIO 设置:
&lt;ul&gt;
&lt;li&gt;GPIO mode: 选择 External Interrupt Mode with Falling edge trigger（下降沿触发，即电平从 1 变 0 的瞬间触发）。&lt;/li&gt;
&lt;li&gt;GPIO Pull-up/Pull-down: 保持 Pull-up。&lt;/li&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220204223209.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220204223209.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;NVIC 设置 (最重要！):
&lt;ul&gt;
&lt;li&gt;点击左侧 System Core -&amp;gt; NVIC。&lt;/li&gt;
&lt;li&gt;勾选 EXTI line0 interrupt 后面的 Enabled 框。如果不勾，中断永远不会发生！&lt;/li&gt;
&lt;li&gt;![[Pasted image 20251220204306.png]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;为什么勾选 &lt;strong&gt;EXTI line 0&lt;/strong&gt;？
“EXTI line 0” 其实是 STM32 中断分配机制中的一个“频道”。STM32 的 GPIO 引脚非常多（PA0&lt;del&gt;PA15, PB0&lt;/del&gt;PB15…），但&lt;strong&gt;中断线（Line）资源是有限的&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对应关系：引脚的编号决定了它属于哪条线。
&lt;ul&gt;
&lt;li&gt;PA0, PB0, PC0, PD0 … 全部连接到 EXTI Line 0。&lt;/li&gt;
&lt;li&gt;PA1, PB1, PC1, PD1 … 全部连接到 EXTI Line 1。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;排他性（重要）：虽然 PA0 和 PB0 都能连到 Line 0，但&lt;strong&gt;同一时刻 Line 0 只能选择其中一个引脚&lt;/strong&gt;。你不能同时把 PA0 和 PB0 都设为中断。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;2-代码实现-1&#34;&gt;2. 代码实现
&lt;/h4&gt;&lt;p&gt;中断不需要写在 &lt;code&gt;while(1)&lt;/code&gt; 里。HAL 库会自动调用一个名为“回调函数”的地方。你只需要在 &lt;code&gt;main.c&lt;/code&gt; 的末尾（&lt;code&gt;USER CODE BEGIN 4&lt;/code&gt; 之后）加上这个函数：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 当 PA0 触发中断时，系统会自动跳到这个函数执行
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_EXTI_Callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO_Pin&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 确保是 PA0 产生的中断
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 翻转 LED
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_TogglePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;对比&#34;&gt;对比
&lt;/h3&gt;&lt;p&gt;两种方法的深度对比&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;特性&lt;/th&gt;
          &lt;th&gt;轮询扫描 (Polling)&lt;/th&gt;
          &lt;th&gt;外部中断 (EXTI)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;CPU 占用&lt;/td&gt;
          &lt;td&gt;高（一直在跑判断语句）&lt;/td&gt;
          &lt;td&gt;极低（平时 CPU 可以休眠）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;实时性&lt;/td&gt;
          &lt;td&gt;取决于 &lt;code&gt;while&lt;/code&gt; 循环里其他代码的长短&lt;/td&gt;
          &lt;td&gt;极高（信号一到立刻响应）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;消抖处理&lt;/td&gt;
          &lt;td&gt;简单（用 &lt;code&gt;HAL_Delay&lt;/code&gt;）&lt;/td&gt;
          &lt;td&gt;复杂（中断里不建议用 Delay，通常用定时器）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;适用场景&lt;/td&gt;
          &lt;td&gt;简单按键、对实时性要求不高&lt;/td&gt;
          &lt;td&gt;紧急停止、脉冲计数、低功耗唤醒&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;常见坑点避坑指南&#34;&gt;常见坑点（避坑指南）
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;忘记开 NVIC 中断开关：这是 EXTI 实验失败的 90% 原因&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;中断里加了很长的延时：&lt;strong&gt;中断服务函数要求“快进快出”&lt;/strong&gt;，如果在里面写 &lt;code&gt;HAL_Delay(1000)&lt;/code&gt;，系统可能会卡死或错过其他重要任务。&lt;/li&gt;
&lt;li&gt;引脚悬空：如果不配置内部上拉（Pull-up），你的灯可能会因为你手指靠近板子而自己乱闪。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;扩展资料常见中断类型&#34;&gt;扩展资料：常见中断类型
&lt;/h3&gt;&lt;p&gt;STM32 的中断分为三大类：&lt;strong&gt;系统异常&lt;/strong&gt;、&lt;strong&gt;外部中断 (EXTI)&lt;/strong&gt; 和 &lt;strong&gt;外设中断&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;a-系统异常-system-exceptions&#34;&gt;A. 系统异常 (System Exceptions)
&lt;/h4&gt;&lt;p&gt;这些是内核自带的，优先级极高，通常用于处理“紧急事故”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reset: 复位中断。&lt;/li&gt;
&lt;li&gt;HardFault: 硬故障（程序崩溃、访问非法内存）。&lt;/li&gt;
&lt;li&gt;SysTick: 系统滴答定时器（HAL_Delay 的基础）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;b-外部中断-exti&#34;&gt;B. 外部中断 (EXTI)
&lt;/h4&gt;&lt;p&gt;主要处理引脚的电平变化。&lt;strong&gt;Line 0 到 Line 15&lt;/strong&gt;: 对应 GPIO 的 16 个引脚编号。&lt;/p&gt;
&lt;h4 id=&#34;c-外设中断-peripheral-interrupts&#34;&gt;C. 外设中断 (Peripheral Interrupts)
&lt;/h4&gt;&lt;p&gt;每个功能模块都有自己的“报警器”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TIM (Timer): 定时器时间到、捕获到信号。&lt;/li&gt;
&lt;li&gt;UART/USART: 收到数据了、数据发完了。&lt;/li&gt;
&lt;li&gt;ADC: 模数转换完成了。&lt;/li&gt;
&lt;li&gt;DMA: 大批量数据搬运完了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;中断结构树图&#34;&gt;中断结构树图
&lt;/h4&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    subgraph &#34;中断源 (Interrupt Sources)&#34;
        subgraph &#34;外部中断 EXTI&#34;
            EXTI0[EXTI Line 0&lt;br/&gt;PA0/PB0/PC0...]
            EXTI1[EXTI Line 1&lt;br/&gt;PA1/PB1/PC1...]
            EXTIn[EXTI Line 10-15]
        end
        
        subgraph &#34;通信外设&#34;
            UART[UART1/2&lt;br/&gt;接收完成/发送空]
            I2C[I2C/SPI&lt;br/&gt;传输错误/完成]
        end
        
        subgraph &#34;定时与控制&#34;
            TIM[TIM1/2/3/4&lt;br/&gt;更新/比较/捕获]
            ADC[ADC&lt;br/&gt;转换结束]
        end
        
        subgraph &#34;系统异常 (内核)&#34;
            SysTick[SysTick&lt;br/&gt;1ms 节拍]
            Fault[HardFault&lt;br/&gt;系统崩溃]
        end
    end

    EXTI0 --&gt; NVIC
    EXTI1 --&gt; NVIC
    EXTIn --&gt; NVIC
    UART --&gt; NVIC
    I2C --&gt; NVIC
    TIM --&gt; NVIC
    ADC --&gt; NVIC
    SysTick --&gt; NVIC
    Fault --&gt; NVIC

    subgraph &#34;NVIC (分诊台)&#34;
        NVIC{NVIC 控制器&lt;br/&gt;判断优先级/屏蔽}
    end

    NVIC --&gt;|打断当前任务| CPU[Cortex-M3 内核]
    
    style CPU fill:#f96,stroke:#333,stroke-width:2px
    style NVIC fill:#bbf,stroke:#333
&lt;/div&gt;
&lt;h4 id=&#34;常见的-exti-线路拼车现象&#34;&gt;常见的 EXTI 线路“拼车”现象
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;STM32F103C8T6&lt;/code&gt; 中，为了节省硬件资源，有些中断线路是&lt;strong&gt;合并&lt;/strong&gt;在一起的。你在 CubeIDE 的 NVIC 列表里会发现：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;EXTI0, EXTI1, EXTI2, EXTI3, EXTI4：这 5 条线是&lt;strong&gt;独立&lt;/strong&gt;的，每个都有自己的中断服务函数。&lt;/li&gt;
&lt;li&gt;EXTI9_5_IRQHandler：Line 5 到 Line 9 的中断&lt;strong&gt;共享&lt;/strong&gt;这一个函数。&lt;/li&gt;
&lt;li&gt;EXTI15_10_IRQHandler：Line 10 到 Line 15 的中断&lt;strong&gt;共享&lt;/strong&gt;这一个函数。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这意味着：如果 PA10 和 PA11 都开启了中断，它们会跳进同一个函数。你需要在这个函数里通过 &lt;code&gt;if&lt;/code&gt; 语句判断到底是哪条线触发的。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-09-NVIC中断</title>
        <link>https://teaize.github.io/p/zzz-09-nvic%E4%B8%AD%E6%96%AD/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-09-nvic%E4%B8%AD%E6%96%AD/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-08-GPIO输入]]，重点学习“实验二：外部中断（EXTI）”中的内容&lt;/p&gt;
&lt;h3 id=&#34;核心概念什么是-nvic&#34;&gt;核心概念：什么是 NVIC
&lt;/h3&gt;&lt;p&gt;NVIC 是 Cortex-M 内核里的一个&lt;strong&gt;硬件模块&lt;/strong&gt;，专门负责管理所有的中断。如果把 CPU 比作正在工作的医生，中断就是闯进诊室的病人，而 NVIC 就是分诊台的护士。在 CubeIDE 中，最让你困惑的可能就是 Priority（优先级）。&lt;/p&gt;
&lt;h3 id=&#34;抢占优先级-vs-子优先级最核心的区别&#34;&gt;抢占优先级 vs 子优先级（最核心的区别）
&lt;/h3&gt;&lt;p&gt;STM32 的中断优先级分为两个维度：&lt;/p&gt;
&lt;h4 id=&#34;抢占优先级-preemption-priority--插队权&#34;&gt;抢占优先级 (Preemption Priority) —— “插队权”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;动作： 正在处理中断 A 时，中断 B 来了。如果 B 的抢占优先级比 A 高，CPU 会立刻放下手头的 A，去处理 B。等 B 处理完，再回来接着处理 A。&lt;/li&gt;
&lt;li&gt;本质： 这种现象叫 “中断嵌套”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;子优先级-sub-priority--排队权&#34;&gt;子优先级 (Sub Priority) —— “排队权”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;动作： 如果中断 A 和中断 B 的抢占优先级一样，且它们同时发生了。&lt;/li&gt;
&lt;li&gt;本质： 这时 CPU 不会发生嵌套，而是看谁的子优先级高，谁就先被处理。如果其中一个已经在运行了，另一个只能乖乖在门口等着，不能进去“插队”。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;数字越小，优先级越高（0 是最高优先级）。&lt;/li&gt;
&lt;li&gt;只有抢占优先级不同，才能发生“嵌套”（插队）。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;优先级分组-priority-grouping&#34;&gt;优先级分组 (Priority Grouping)
&lt;/h3&gt;&lt;p&gt;在 CubeIDE 的 NVIC 设置里，你会看到一个 Priority Group 的选项。这是因为 STM32 分给优先级的“总位数”是有限的（通常是 4 位，即 $2^4=16$ 级）。&lt;/p&gt;
&lt;p&gt;你可以决定这 4 位如何分配给“抢占”和“子”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Group 4 (4 bits for preemption, 0 for sub)：有 16 级抢占优先级，没有子优先级（常用，最简单）。&lt;/li&gt;
&lt;li&gt;Group 2 (2 bits for preemption, 2 for sub)：有 4 级抢占（0-3），4 级子（0-3）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;建议： 初学者直接选 Group 4 或者默认设置即可，没必要搞得太复杂。
![[Pasted image 20251220205142.png]]&lt;/p&gt;
&lt;h3 id=&#34;cubeide-配置界面里的关键项&#34;&gt;CubeIDE 配置界面里的关键项
&lt;/h3&gt;&lt;p&gt;当你点开 &lt;code&gt;System Core&lt;/code&gt; -&amp;gt; &lt;code&gt;NVIC&lt;/code&gt; 时，你会看到这几列：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Enabled：打勾，硬件才会把中断信号传给内核。&lt;/li&gt;
&lt;li&gt;Preemption Priority：设置抢占优先级。&lt;/li&gt;
&lt;li&gt;Sub Priority：设置子优先级。&lt;/li&gt;
&lt;li&gt;Uses FreeRTOS functions：如果以后学习操作系统（RTOS），这里会提醒哪些中断可以调用系统 API。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;中断背后的潜规则-best-practices&#34;&gt;中断背后的“潜规则” (Best Practices)
&lt;/h3&gt;&lt;p&gt;在实际开发中，有三条铁律一定要遵守：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;快进快出：中断服务函数（ISR）就像急诊室，不能在里面“睡觉”（严禁使用 &lt;code&gt;HAL_Delay()&lt;/code&gt;）。如果里面写了耗时很长的循环，整个系统会卡死。&lt;/li&gt;
&lt;li&gt;不要在中断里打印：&lt;code&gt;printf&lt;/code&gt; 非常慢。如果你想看中断触发没，翻转个 LED 或者设置一个标志位（Flag）是最好的选择。&lt;/li&gt;
&lt;li&gt;变量要加 &lt;code&gt;volatile&lt;/code&gt;：如果你在中断里修改了一个全局变量，而 &lt;code&gt;main&lt;/code&gt; 函数里要用到它，定义变量时请写成： &lt;code&gt;volatile uint8_t flag = 0;&lt;/code&gt; 这告诉编译器：这个变量随时可能被“天外来客”（中断）修改，不要自作聪明去优化它。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;回调函数-callback-的真相&#34;&gt;回调函数 (Callback) 的真相
&lt;/h3&gt;&lt;p&gt;你在代码里写的 &lt;code&gt;HAL_GPIO_EXTI_Callback&lt;/code&gt; 并不是真正的中断入口。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;硬件层面：触发 -&amp;gt; 查找 向量表 (Vector Table) -&amp;gt; 跳转到汇编定义的 &lt;code&gt;EXTI0_IRQHandler&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;HAL 库层面：&lt;code&gt;EXTI0_IRQHandler&lt;/code&gt; 调用 &lt;code&gt;HAL_GPIO_EXTI_IRQHandler&lt;/code&gt;（处理清除中断标志位等脏活），最后才调用你写的那个 &lt;code&gt;Callback&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;好处：你不需要管底层如何清除标志位，只需要关心你的业务逻辑。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;扩展资料如何找到中断入口&#34;&gt;扩展资料：如何找到中断入口
&lt;/h3&gt;&lt;h4 id=&#34;第一条路查看户口本启动文件&#34;&gt;第一条路：查看“户口本”（启动文件）
&lt;/h4&gt;&lt;p&gt;所有中断函数的“官方真名”都刻在芯片的&lt;strong&gt;启动文件&lt;/strong&gt;里。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在 STM32CubeIDE 的左侧目录找到：&lt;code&gt;Core -&amp;gt; Startup -&amp;gt; startup_stm32f103c8tx.s&lt;/code&gt;（这是一个汇编文件）。&lt;/li&gt;
&lt;li&gt;打开它，向下拉，你会看到一张巨大的表，全是类似 &lt;code&gt;XXXX_IRQHandler&lt;/code&gt; 的名字。&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;这就是真名： 无论什么中断，它的底层函数名一定叫 &lt;strong&gt;&lt;code&gt;[外设名]_IRQHandler&lt;/code&gt;&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例如：&lt;code&gt;EXTI0_IRQHandler&lt;/code&gt;、&lt;code&gt;TIM2_IRQHandler&lt;/code&gt;、&lt;code&gt;USART1_IRQHandler&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220211117113.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220211117113.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;第二条路查看值班表-stm32f1xx_itc&#34;&gt;第二条路：查看“值班表” (&lt;code&gt;stm32f1xx_it.c&lt;/code&gt;)
&lt;/h4&gt;&lt;p&gt;当你用 STM32CubeMX 配置并生成代码后，IDE 会自动为你准备一个专门存放中断函数的文件。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;打开：&lt;code&gt;Core -&amp;gt; Src -&amp;gt; stm32f1xx_it.c&lt;/code&gt;（it 代表 Interrupt）。&lt;/li&gt;
&lt;li&gt;这里面已经写好了你开启的那些中断函数。比如你开了外部中断 0，你就能在这里找到：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;![[Pasted image 20251220211210.png]]&lt;/p&gt;
&lt;h4 id=&#34;第三条路hal-库的回调函数callback-推荐用法&#34;&gt;第三条路：HAL 库的“回调函数”（Callback）—— 推荐用法
&lt;/h4&gt;&lt;p&gt;虽然 &lt;code&gt;EXTI0_IRQHandler&lt;/code&gt; 是真正的入口，但 HAL 库为了方便我们编写业务逻辑，设计了一套“回调机制”。&lt;/p&gt;
&lt;p&gt;重点理解这个流程（以按键中断为例）：&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    A[硬件触发中断] --&gt; B[查找启动文件向量表]
    B --&gt; C[&#34;真实入口: EXTI0_IRQHandler&lt;br/&gt;(在 stm32f1xx_it.c 中)&#34;]
    C --&gt; D[&#34;HAL库通用处理: HAL_GPIO_EXTI_IRQHandler&lt;br/&gt;(负责清除标志位等杂活)&#34;]
    D --&gt; E[&#34;开发者重写的函数: HAL_GPIO_EXTI_Callback&lt;br/&gt;(你在 main.c 里写的业务代码)&#34;]

    style E fill:#f96,stroke:#333
&lt;/div&gt;
&lt;h4 id=&#34;怎么知道回调函数叫什么&#34;&gt;怎么知道回调函数叫什么
&lt;/h4&gt;&lt;p&gt;回调函数的名字是&lt;strong&gt;固定&lt;/strong&gt;的。你可以在对应的 HAL 库驱动文件（&lt;code&gt;.h&lt;/code&gt;）里找到它们。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;中断类型&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;回调函数名 (你直接在 main.c 里重写即可)&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;外部中断&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;定时器中断&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;串口接收完成&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;实战技巧如何快速瞬移到函数名&#34;&gt;实战技巧：如何快速“瞬移”到函数名？
&lt;/h4&gt;&lt;p&gt;如果你在代码里看到了 &lt;code&gt;HAL_GPIO_EXTI_IRQHandler&lt;/code&gt;，想知道它最后会调用哪个回调函数，你可以：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;按住 Ctrl 键&lt;/strong&gt;，鼠标左键点击这个函数名，跳转进源码。&lt;/li&gt;
&lt;li&gt;在源码里继续向下翻，你会看到一个被标注为 &lt;strong&gt;&lt;code&gt;__weak&lt;/code&gt;&lt;/strong&gt; 的函数定义。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;__weak&lt;/code&gt;（虚函数）&lt;/strong&gt; 就是你要找的名字！你在自己的代码里写一个一模一样的函数，编译器就会优先用你写的，而忽略这个“弱”的。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220213548126.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220213548126.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;小结&#34;&gt;小结
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;物理入口&lt;/strong&gt;：名字必带 &lt;code&gt;_IRQHandler&lt;/code&gt;，在 &lt;code&gt;stm32f1xx_it.c&lt;/code&gt; 中。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;逻辑入口&lt;/strong&gt;：名字必带 &lt;code&gt;_Callback&lt;/code&gt;，是你写具体逻辑的地方。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;作为初学者，你只需要在 &lt;code&gt;main.c&lt;/code&gt; 的末尾，把官方那个带 &lt;code&gt;__weak&lt;/code&gt; 的回调函数复制过来，去掉 &lt;code&gt;__weak&lt;/code&gt; 关键字，然后往里面填你的逻辑（比如点灯）就行了。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ZZZ-10-定时器中断</title>
        <link>https://teaize.github.io/p/zzz-10-%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%AD%E6%96%AD/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-10-%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%AD%E6%96%AD/</guid>
        <description>&lt;p&gt;如果说 GPIO 是单片机的“手脚”，中断是“神经反射”，那么定时器（Timer）就是单片机的“脉搏”。在 51 单片机里，配置定时器需要去算初值、写寄存器。而在 STM32 中，虽然寄存器更多，但有了 &lt;strong&gt;CubeIDE&lt;/strong&gt;，我们只需要掌握一个&lt;strong&gt;核心公式&lt;/strong&gt;就能实现极其精准的定时。&lt;/p&gt;
&lt;h3 id=&#34;1-形象比喻定时器到底是怎么工作的&#34;&gt;1. 形象比喻：定时器到底是怎么工作的
&lt;/h3&gt;&lt;p&gt;你可以把定时器想象成一个“自动数数的小学生”**：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;时钟源（Clock Source）&lt;/strong&gt;：老师敲黑板的速度（比如每秒敲 72,000,000 下）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;预分频器（PSC, Prescaler）&lt;/strong&gt;：小学生觉得老师敲得太快了，数不过来，于是规定“老师敲 7200 下，我才记 1 个数”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;计数器（Counter）&lt;/strong&gt;：小学生手里的小本子，每记满一个数就加 1。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动重装载寄存器（ARR, Auto-Reload Register）&lt;/strong&gt;：老师规定的“目标数”。比如数到 10000，就举手报告（触发中断），然后擦掉本子从 0 重新数。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;核心公式必须死记硬背它是定时器的灵魂&#34;&gt;核心公式（必须死记硬背，它是定时器的灵魂）
&lt;/h3&gt;&lt;p&gt;你想定多长时间，全靠这个公式：&lt;/p&gt;
&lt;p&gt;$$定时时间 (秒) = \frac{(PSC + 1) \times (ARR + 1)}{定时器输入频率 (Hz)}$$&lt;/p&gt;
&lt;p&gt;对于 STM32F103C8T6，如果你的时钟树配置为 &lt;strong&gt;72MHz&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果你想要 &lt;strong&gt;1 秒&lt;/strong&gt;（1Hz）触发一次中断：
&lt;ul&gt;
&lt;li&gt;我们将 &lt;strong&gt;预分频器 PSC&lt;/strong&gt; 设为 &lt;strong&gt;7199&lt;/strong&gt;（即 $7200 - 1$）。&lt;/li&gt;
&lt;li&gt;我们将 &lt;strong&gt;自动重装载寄存器 ARR&lt;/strong&gt; 设为 &lt;strong&gt;9999&lt;/strong&gt;（即 $10000 - 1$）。&lt;/li&gt;
&lt;li&gt;计算：$\frac{7200 \times 10000}{72,000,000} = 1\text{ 秒}$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;为什么都要 -1？ 因为计数器是从 0 开始数的。数 10 个数，实际上是 0 到 9。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;3-stm32cubeide-配置步骤&#34;&gt;3. STM32CubeIDE 配置步骤
&lt;/h3&gt;&lt;p&gt;我们以 &lt;strong&gt;TIM2&lt;/strong&gt;（通用定时器）为例：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;开启定时器：
&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;.ioc&lt;/code&gt; 文件左侧找到 Timers -&amp;gt; TIM2。&lt;/li&gt;
&lt;li&gt;Combined Channels 不用管，将 Clock Source 设为 Internal Clock（内部时钟）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;设置参数：
&lt;ul&gt;
&lt;li&gt;Prescaler (PSC): 输入 &lt;code&gt;7199&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;Counter Period (ARR): 输入 &lt;code&gt;9999&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;其他默认即可（向上计数模式）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;开启中断 (NVIC)：
&lt;ul&gt;
&lt;li&gt;点击上方的 NVIC Settings 选项卡。&lt;/li&gt;
&lt;li&gt;勾选 TIM2 global interrupt 后面的 Enabled。（不勾这个，定时器只会数数，不会通知 CPU）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;生成代码：按 &lt;code&gt;Ctrl + S&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220221250104.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220221250104.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;4-编写代码开启与回调&#34;&gt;4. 编写代码（开启与回调）
&lt;/h3&gt;&lt;p&gt;定时器配置完后，默认是关闭的，你需要手动在代码里给它“上发条”。&lt;/p&gt;
&lt;h4 id=&#34;第一步启动定时器中断&#34;&gt;第一步：启动定时器中断
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main.c&lt;/code&gt; 的 &lt;code&gt;MX_GPIO_Init()&lt;/code&gt; 之后，&lt;code&gt;while(1)&lt;/code&gt; 之前，加入这行代码：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_TIM_Base_Start_IT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 以中断模式启动 TIM2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;第二步编写回调函数&#34;&gt;第二步：编写回调函数
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main.c&lt;/code&gt; 下方的 &lt;code&gt;USER CODE BEGIN 4&lt;/code&gt; 区域，写下我们要执行的动作：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 定时器溢出（时间到）时，会自动调用这个函数
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;HAL_TIM_PeriodElapsedCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TIM_HandleTypeDef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Instance&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 确认是 TIM2 触发的
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 要执行的代码
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;HAL_GPIO_TogglePin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO_PIN_13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 翻转 LED 灯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;5-定时中断-vs-hal_delay&#34;&gt;5. 定时中断 vs HAL_Delay()
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;特性&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;HAL_Delay()&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;定时器中断&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;原理&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;阻塞式（CPU 在死等，啥也干不了）&lt;/td&gt;
          &lt;td&gt;非阻塞式（CPU 平时干别的，时间到才去处理）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;精度&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;较低（会被其他任务干扰）&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;极高&lt;/strong&gt;（硬件自动计数，不受软件干扰）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;用途&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;简单的、不重要的等待&lt;/td&gt;
          &lt;td&gt;精准采样、控制电机速度、多任务并行&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;6-进阶如果你想要-1-毫秒定一次时&#34;&gt;6. 进阶：如果你想要 1 毫秒定一次时
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;输入频率 = 72,000,000 Hz&lt;/li&gt;
&lt;li&gt;目标时间 = 0.001 s&lt;/li&gt;
&lt;li&gt;设置：PSC = &lt;strong&gt;71&lt;/strong&gt; ($72-1$)，ARR = &lt;strong&gt;999&lt;/strong&gt; ($1000-1$)。&lt;/li&gt;
&lt;li&gt;计算：$\frac{72 \times 1000}{72,000,000} = 0.001\text{ 秒}$。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;常见避坑指南&#34;&gt;常见避坑指南
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;忘记加 &lt;code&gt;_IT&lt;/code&gt;：如果是调用 &lt;code&gt;HAL_TIM_Base_Start()&lt;/code&gt;，定时器会跑，但不会进中断函数。必须用 &lt;code&gt;HAL_TIM_Base_Start_IT()&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;公式没减 1：虽然不减 1 也能跑，但时间会差那么一点点。在追求极致精准的工业控制中，这 1 个周期的误差很重要。&lt;/li&gt;
&lt;li&gt;中断里代码太长：如果你的定时器是 1ms 触发一次，但你在中断函数里执行了需要 2ms 才能跑完的代码，系统就会彻底乱套。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-11-CubeIDE篇</title>
        <link>https://teaize.github.io/p/zzz-11-cubeide%E7%AF%87/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-11-cubeide%E7%AF%87/</guid>
        <description>&lt;h2 id=&#34;中文乱码&#34;&gt;中文乱码
&lt;/h2&gt;&lt;h3 id=&#34;第一步设置-ide-全局编码为-utf-8&#34;&gt;第一步：设置 IDE 全局编码为 UTF-8
&lt;/h3&gt;&lt;p&gt;为了与国际接轨并减少跨平台问题，建议统一使用 &lt;strong&gt;UTF-8&lt;/strong&gt;。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在菜单栏点击 &lt;strong&gt;Window -&amp;gt; Preferences&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;展开 &lt;strong&gt;General -&amp;gt; Workspace&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在右侧最下方的 &lt;strong&gt;Text file encoding&lt;/strong&gt; 中，选择 &lt;strong&gt;Other: UTF-8&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;点击 &lt;strong&gt;Apply and Close&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220225819001.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220225819001.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;第二步修改编译器选项核心步骤&#34;&gt;第二步：修改编译器选项（核心步骤）
&lt;/h3&gt;&lt;p&gt;即使编辑器设置好了，编译器（GCC）在处理代码中的中文常量时，仍可能出现识别问题。我们需要手动告诉编译器如何处理中文。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在你的工程项目上 &lt;strong&gt;右键 -&amp;gt; Properties&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;进入 &lt;strong&gt;C/C++ Build -&amp;gt; Settings&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在右侧找到 &lt;strong&gt;Tool Settings&lt;/strong&gt; 选项卡，点击 &lt;strong&gt;MCU GCC Compiler -&amp;gt; Miscellaneous&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在 &lt;strong&gt;Other flags&lt;/strong&gt; 输入框的最末尾，添加以下指令（注意前面有个空格）： &lt;code&gt;-finput-charset=UTF-8 -fexec-charset=GBK&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;指令含义&lt;/strong&gt;：告诉编译器，我的输入文件（源码）是 &lt;strong&gt;UTF-8&lt;/strong&gt;，但生成的执行程序（发给串口的）请使用 &lt;strong&gt;GBK&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;注：这样设置后，大多数 Windows 串口助手（默认 GBK）就能直接显示正常中文了。

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220230036429.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220230036429.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;进阶如果还是乱码文件级别转换&#34;&gt;进阶：如果还是乱码？（文件级别转换）
&lt;/h3&gt;&lt;p&gt;有时候你之前的代码已经是用某种编码保存的，修改全局设置后，旧代码里的中文会变乱码。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在具体的 &lt;code&gt;.c&lt;/code&gt; 或 &lt;code&gt;.h&lt;/code&gt; 文件上 &lt;strong&gt;右键 -&amp;gt; Properties&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;在 &lt;strong&gt;Resource&lt;/strong&gt; 标签页修改 &lt;strong&gt;Text file encoding&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;如果已经乱码了，你可以先用记事本打开，另存为 UTF-8 编码，再粘回到 IDE 中。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ZZZ-12-定时器</title>
        <link>https://teaize.github.io/p/zzz-12-%E5%AE%9A%E6%97%B6%E5%99%A8/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-12-%E5%AE%9A%E6%97%B6%E5%99%A8/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-10-定时器中断]]，学习定时器。我们可以把 STM32 的定时器资源想象成一个**“大型工厂的动力系统”，里面有不同等级的“发动机”和多条“传动轴”&lt;/p&gt;
&lt;h3 id=&#34;1-定时器的等级制度-classification&#34;&gt;1. 定时器的等级制度 (Classification)
&lt;/h3&gt;&lt;p&gt;在 STM32F103C8T6 中，并不是所有的定时器都一样。它们被分为三个等级：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;等级&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;编号&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;特色功能&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;形象比喻&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;高级定时器&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;TIM1&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;带死区控制、互补输出（专为电机驱动设计）。&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;全能大 BOSS&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;通用定时器&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;TIM2, 3, 4&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;具备定时、PWM、输入捕获、编码器接口。&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;工厂主力中层&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;基本定时器&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;(C8T6 没有)&lt;/td&gt;
          &lt;td&gt;仅有最基本的定时功能，通常给 DAC 触发用。&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;纯体力临时工&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;2-定时器的内部结构图-mermaid&#34;&gt;2. 定时器的内部结构图 (Mermaid)
&lt;/h3&gt;&lt;p&gt;为了让你看懂什么是 &lt;strong&gt;Channel（通道）&lt;/strong&gt;，我们先看一个定时器的内部逻辑。你可以把通道看作是定时器伸向外部引脚的“手臂”。&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    Clock[内部时钟 CK_INT&lt;br/&gt;72MHz] --&gt; PSC[预分频器 Prescaler&lt;br/&gt;降速]
    PSC --&gt; CNT[计数器 Counter&lt;br/&gt;数数]
    CNT --- ARR[自动重装载寄存器&lt;br/&gt;目标数值]
    
    subgraph &#34;定时器核心 (产生时间基准)&#34;
        PSC
        CNT
        ARR
    end

    CNT --&gt; Comparator[比较器/捕获逻辑]
    
    subgraph &#34;Channels (外部交互的手臂)&#34;
        Comparator --&gt; CH1[Channel 1&lt;br/&gt;PA0]
        Comparator --&gt; CH2[Channel 2&lt;br/&gt;PA1]
        Comparator --&gt; CH3[Channel 3&lt;br/&gt;PA2]
        Comparator --&gt; CH4[Channel 4&lt;br/&gt;PA3]
    end

    ARR --&gt; Interrupt[定时更新中断]
&lt;/div&gt;
&lt;h3 id=&#34;3-什么是-channel通道&#34;&gt;3. 什么是 Channel（通道）
&lt;/h3&gt;&lt;p&gt;一个定时器（如 TIM2）只有一个计数器（CNT）在不断数数。但是，它有 4 个独立的&lt;strong&gt;通道&lt;/strong&gt;。 这些通道共享同一个“数数进度”，但可以执行不同的任务：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;输出比较 (Output Compare)：
&lt;ul&gt;
&lt;li&gt;原理：我设定一个值（CCR），当计数器数到这个值时，让引脚电平翻转。&lt;/li&gt;
&lt;li&gt;用途：&lt;strong&gt;PWM 输出&lt;/strong&gt;（控制灯亮度、舵机角度）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;输入捕获 (Input Capture)：
&lt;ul&gt;
&lt;li&gt;原理：外部引脚电平一变，我立刻记下当前计数器数到哪了。&lt;/li&gt;
&lt;li&gt;用途：&lt;strong&gt;测量脉冲宽度&lt;/strong&gt;、频率测量（比如测转速）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;单脉冲模式：
&lt;ul&gt;
&lt;li&gt;用途：像延迟开关一样，触发后出一颗脉冲。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;通道背后的秘密武器ccr-寄存器&#34;&gt;通道背后的“秘密武器”：CCR 寄存器
&lt;/h4&gt;&lt;p&gt;为什么同一个计数器（CNT）能让不同的通道输出不同的信号？因为每个通道都配了一个属于自己的“挡位设置”，叫做 CCR（Capture/Compare Register，捕获/比较寄存器）。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;组件&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;角色&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;谁拥有它？&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;决定了什么？&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;CNT (计数器)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;跑步的秒表&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;整个定时器&lt;/strong&gt;共有&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;频率&lt;/strong&gt;（跑一圈要多久）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ARR (重装载值)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;跑道的终点&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;整个定时器&lt;/strong&gt;共有&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;周期&lt;/strong&gt;（什么时候回头重新跑）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;CCR (比较值)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;跑道上的记号&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;每个通道&lt;/strong&gt;独立拥有&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;占空比&lt;/strong&gt;（跑到哪个位置触发动作）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;4-为什么会有多个-channel&#34;&gt;4. 为什么会有多个 Channel
&lt;/h3&gt;&lt;p&gt;比喻 1：教室里的那口大钟（一个节奏，多个事件）
想象一间教室，墙上只有一个大钟（这就是 &lt;strong&gt;Counter 计数器&lt;/strong&gt;）。全班同学都看着这口钟。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;大钟：从 0 分数到 60 分，然后循环。&lt;/li&gt;
&lt;li&gt;通道 1：老师规定，数到 45 分时，铃声响起，大家去休息。&lt;/li&gt;
&lt;li&gt;通道 2：校长规定，数到 60 分时，广播响起，大家去吃饭。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;为什么要这么设计？&lt;/strong&gt; 因为大家需要&lt;strong&gt;同步&lt;/strong&gt;。如果每个事件都专门配一口钟，万一有的钟快一点，有的钟慢一点，学校的作息就乱套了。在单片机里，这能保证多个引脚的动作在时间线上是&lt;strong&gt;完全对齐&lt;/strong&gt;的。&lt;/p&gt;
&lt;p&gt;作为一个初学者，先理解这两点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;省资源&lt;/strong&gt;：STM32 的定时器数量是有限的（只有几个）。如果控制 4 个灯都要开 4 个定时器，那芯片很快就不够用了。有了通道，1 个定时器就能管 4 个灯。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;同节奏&lt;/strong&gt;：当你需要多个引脚协同工作（比如驱动三相电机、多路舵机、全彩 RGB 灯）时，多个通道能保证它们永远不会“各跑各的”。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;5-在-cubeide-中配置时的重点&#34;&gt;5. 在 CubeIDE 中配置时的重点
&lt;/h3&gt;&lt;p&gt;当你点开 &lt;code&gt;TIM2&lt;/code&gt; 的配置：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Clock Source: 选 &lt;code&gt;Internal Clock&lt;/code&gt;，就是让它开始走字。&lt;/li&gt;
&lt;li&gt;Channel 1~4:
&lt;ul&gt;
&lt;li&gt;如果你想做呼吸灯或控制舵机，选择 &lt;strong&gt;&lt;code&gt;PWM Generation CHx&lt;/code&gt;&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;选完后，你会发现芯片引脚图上某个引脚（比如 PA0）变绿了，这说明该引脚被分配给了这个通道。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ZZZ-13-呼吸灯</title>
        <link>https://teaize.github.io/p/zzz-13-%E5%91%BC%E5%90%B8%E7%81%AF/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/zzz-13-%E5%91%BC%E5%90%B8%E7%81%AF/</guid>
        <description>&lt;p&gt;本篇继 [[ZZZ-12-定时器]] 和 [[ZZZ-10-定时器中断]]。&lt;/p&gt;
&lt;p&gt;由于 STM32F103C8T6 最小系统板上的 &lt;strong&gt;PC13（板载 LED）&lt;/strong&gt; 并不直接支持定时器的硬件 PWM 输出通道，我们在 &lt;strong&gt;PA0&lt;/strong&gt; 引脚上通过一个电阻接一个 LED（或者直接用杜邦线接一个 LED 到 PA0 和 GND 之间）&lt;/p&gt;
&lt;h3 id=&#34;第一步stm32cubeide-图形化配置-ioc&#34;&gt;第一步：STM32CubeIDE 图形化配置 (.ioc)
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;选择定时器：在左侧树状菜单点击 &lt;strong&gt;Timers -&amp;gt; TIM2&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;设置时钟源：将 &lt;strong&gt;Clock Source&lt;/strong&gt; 设置为 &lt;strong&gt;Internal Clock&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;启用 PWM 通道：将 &lt;strong&gt;Channel 1&lt;/strong&gt; 设置为 &lt;strong&gt;PWM Generation CH1&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;此时你会发现引脚图上的 &lt;strong&gt;PA0&lt;/strong&gt; 变绿了，标注为 &lt;code&gt;TIM2_CH1&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;配置参数（关键公式计算）：
&lt;ul&gt;
&lt;li&gt;假设你的系统时钟（HCLK）是 &lt;strong&gt;72MHz&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;我们要产生一个 &lt;strong&gt;1kHz&lt;/strong&gt; 的 PWM 波（这个频率肉眼看不出闪烁，且调节丝滑）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Prescaler (PSC)&lt;/strong&gt;：输入 &lt;code&gt;71&lt;/code&gt;（即 $72-1$）。此时频率变为 $72MHz / 72 = 1MHz$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Counter Period (ARR)&lt;/strong&gt;：输入 &lt;code&gt;999&lt;/code&gt;（即 $1000-1$）。此时频率变为 $1MHz / 1000 = 1kHz$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pulse (初始占空比)&lt;/strong&gt;：先设为 &lt;code&gt;0&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;生成代码：按 &lt;code&gt;Ctrl + S&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220233339573.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251220233339573.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;第二步编写呼吸灯逻辑-mainc&#34;&gt;第二步：编写呼吸灯逻辑 (main.c)
&lt;/h3&gt;&lt;p&gt;我们需要在 &lt;code&gt;while(1)&lt;/code&gt; 中不断修改 &lt;strong&gt;CCR&lt;/strong&gt;（捕获/比较寄存器）的值，这个值决定了占空比，也就是灯的亮度。&lt;/p&gt;
&lt;h4 id=&#34;1-启动-pwm&#34;&gt;1. 启动 PWM
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;main&lt;/code&gt; 函数的 &lt;code&gt;MX_TIM2_Init()&lt;/code&gt; 之后，&lt;code&gt;while(1)&lt;/code&gt; 之前，加入启动命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 启动 TIM2 的通道 1 输出 PWM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HAL_TIM_PWM_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM_CHANNEL_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE END 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;2-实现呼吸逻辑&#34;&gt;2. 实现呼吸逻辑
&lt;/h4&gt;&lt;p&gt;在 &lt;code&gt;while(1)&lt;/code&gt; 循环中，写一个循环让亮度增加，再写一个循环让亮度减小：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* USER CODE BEGIN WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pwm_value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// 亮度值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;direction&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 1: 变亮, 0: 变暗
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 改变亮度值
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;direction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;pwm_value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pwm_value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;direction&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 达到最大 ARR 值，开始变暗
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;pwm_value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pwm_value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;direction&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 达到最小，开始变亮
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 关键函数：修改 TIM2 通道 1 的比较值 (CCR)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;__HAL_TIM_SET_COMPARE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM_CHANNEL_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pwm_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 稍微延时，否则变色太快肉眼看不清
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_Delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* USER CODE END WHILE */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这段代码本质上是一个&lt;strong&gt;状态机&lt;/strong&gt;，它在做“折返运动”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;if (direction)&lt;/code&gt;&lt;/strong&gt;：这代表“正在变亮”阶段。
&lt;ul&gt;
&lt;li&gt;当 &lt;code&gt;pwm_value&lt;/code&gt; 一路增加到 &lt;code&gt;1000&lt;/code&gt;（撞到了天花板），说明已经最亮了，没法再亮了。&lt;/li&gt;
&lt;li&gt;于是执行 &lt;code&gt;direction = 0;&lt;/code&gt;。这相当于下令：“好了，掉头，开始往回走（变暗）”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;else&lt;/code&gt;&lt;/strong&gt;：这代表“正在变暗”阶段。
&lt;ul&gt;
&lt;li&gt;当 &lt;code&gt;pwm_value&lt;/code&gt; 一路减小到 &lt;code&gt;0&lt;/code&gt;（撞到了地板），说明已经全灭了，没法更暗了。&lt;/li&gt;
&lt;li&gt;于是执行 &lt;code&gt;direction = 1;&lt;/code&gt;。这相当于下令：“好了，掉头，开始往回走（变亮）”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;为什么频率（Frequency）要设为 1000Hz：人眼在观察快速闪烁的物体时，如果闪烁频率超过 &lt;strong&gt;50Hz ~ 60Hz&lt;/strong&gt;，大脑就会认为这个光是连续的。就像手机屏幕刷新率，动画看起来越丝滑。频率设置为 1000，对于人眼来说就“绝对平滑了”；&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;第三步代码深度解析&#34;&gt;第三步：代码深度解析
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;__HAL_TIM_SET_COMPARE(&amp;amp;htim2, TIM_CHANNEL_1, pwm_value)&lt;/code&gt;&lt;/strong&gt;： 这个宏直接操作的是 &lt;code&gt;TIM2-&amp;gt;CCR1&lt;/code&gt; 寄存器。
&lt;ul&gt;
&lt;li&gt;当 &lt;code&gt;pwm_value&lt;/code&gt; 为 &lt;strong&gt;0&lt;/strong&gt; 时：占空比为 0%，灯全灭。&lt;/li&gt;
&lt;li&gt;当 &lt;code&gt;pwm_value&lt;/code&gt; 为 &lt;strong&gt;500&lt;/strong&gt; 时：占空比为 50%，灯半亮。&lt;/li&gt;
&lt;li&gt;当 &lt;code&gt;pwm_value&lt;/code&gt; 为 &lt;strong&gt;999&lt;/strong&gt; 时：占空比为 100%，灯全亮。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;为什么是 1ms 延时？&lt;/strong&gt; 如果去掉 &lt;code&gt;HAL_Delay(1)&lt;/code&gt;，CPU 运行速度极快，灯会在微秒级的时间内完成呼吸，你的肉眼看起来灯只是一直微亮。1ms 的延时能让整个呼吸周期大约在 2 秒左右（0 到 1000 再到 0，共 2000 次操作）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;假如调整了-arr&#34;&gt;假如调整了 ARR
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;假设在 CubeIDE 的 &lt;code&gt;.ioc&lt;/code&gt; 文件里，把 &lt;strong&gt;Counter Period (ARR)&lt;/strong&gt; 从 &lt;code&gt;999&lt;/code&gt; 改成 &lt;strong&gt;&lt;code&gt;499&lt;/code&gt;&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;生成代码。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;如果不改代码&lt;/strong&gt;：你会发现灯的亮度变化不对了。因为 &lt;code&gt;pwm_value&lt;/code&gt; 会加到 1000，而定时器数到 499 就回头了。这意味着 &lt;code&gt;pwm_value&lt;/code&gt; 在 500 到 1000 这段时间里，灯始终是 100% 亮度，呼吸感会变得“很肉”（亮很久才开始变暗）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;修正方法&lt;/strong&gt;：你必须把代码里的 &lt;code&gt;1000&lt;/code&gt; 也改成 &lt;code&gt;500&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;结构图解&#34;&gt;结构图解
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;电平
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; ^
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; |      ______          ______          ______
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; |     |      |        |      |        |      |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; |_____|      |________|      |________|      |________&amp;gt; 时间
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &amp;lt;---- 一个周期 (ARR 决定) ----&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &amp;lt;-亮-&amp;gt; (CCR/pwm_value 决定)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;ARR 就像是“分母”，固定了总长度。&lt;/li&gt;
&lt;li&gt;CCR (pwm_value) 就像是“分子”，决定了高电平占多大比例。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;__HAL_TIM_SET_COMPARE&lt;/code&gt;&lt;/strong&gt; 的作用是：修改 &lt;strong&gt;CCR&lt;/strong&gt; 寄存器的值。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;硬件动作&lt;/strong&gt;：每秒钟进行几千万次 &lt;code&gt;CNT vs CCR&lt;/code&gt; 的比较，根据结果决定引脚是 0 还是 1。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;你的任务&lt;/strong&gt;：确保 &lt;code&gt;pwm_value&lt;/code&gt; 在 &lt;code&gt;0&lt;/code&gt; 到 &lt;code&gt;ARR&lt;/code&gt; 之间变化，从而实现从 0% 到 100% 的亮度调节。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>为什么测CO</title>
        <link>https://teaize.github.io/p/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B5%8Bco/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B5%8Bco/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;在一些 CEMS 中，为什么有些现场，除了测 NO 和 SO2，有的还需要测 CO&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;先说结论，是否需要测 CO，主要取决于：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这个排口是不是被当成&lt;strong&gt;燃烧过程的监管对象&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;这个排口有没有&lt;strong&gt;燃烧效率或不完全燃烧的监管要求&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;当地环保规范或批复里，&lt;strong&gt;有没有把 CO 列为强制监测因子&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;从co-本身代表什么来理解&#34;&gt;从“CO 本身代表什么”来理解
&lt;/h3&gt;&lt;p&gt;1、SO₂、NOx 在 CEMS 里的角色&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SO₂：代表硫污染物排放&lt;/li&gt;
&lt;li&gt;NOx：代表氮氧化物排放
这两个是&lt;strong&gt;典型的大气污染物总量控制因子&lt;/strong&gt;。换句话说：你排了多少，它本身就是监管目标&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2、CO 的角色完全不一样&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CO 不是典型的“总量污染控制因子”&lt;/li&gt;
&lt;li&gt;CO 更多是一个&lt;strong&gt;过程指标&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;它本质上在回答一个问题：“你这个燃烧，是不是烧干净了？”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通俗地讲：SO₂、NOx 是“结果”，而 CO 是“过程质量”&lt;/p&gt;
&lt;h3 id=&#34;为什么有些现场需要测-co&#34;&gt;为什么有些现场需要测 CO
&lt;/h3&gt;&lt;p&gt;1、燃烧过程合规性要求高的场合&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;生活垃圾焚烧行业（GB 18485）： 这是最典型的例子。垃圾焚烧炉必须实时监测 $CO$，因为它不仅是污染物，更是衡量焚烧是否彻底、炉温是否达标的关键指标。&lt;/li&gt;
&lt;li&gt;危险废物处置： 类似于垃圾焚烧，对燃烧稳定性要求极高。&lt;/li&gt;
&lt;li&gt;医废焚烧&lt;/li&gt;
&lt;li&gt;某些热处理炉、焚烧炉&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;在这些场合：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CO 是判断&lt;strong&gt;是否充分燃烧&lt;/strong&gt;的核心指标&lt;/li&gt;
&lt;li&gt;CO 高，说明：
&lt;ul&gt;
&lt;li&gt;温度不够&lt;/li&gt;
&lt;li&gt;混合不好&lt;/li&gt;
&lt;li&gt;停留时间不足&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;环保更担心的是：“你是不是在低温、半燃不燃的状态下偷排有害物”&lt;/li&gt;
&lt;li&gt;所以监管逻辑是：CO 不合格 → 你燃烧过程不合规 → 即使 SO₂、NOx 还好，也可能不认&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;2、CO 作为工艺运行的“仪表盘”（燃烧优化）&lt;/p&gt;
&lt;p&gt;即使环保局不强制要求，很多厂长也希望测 $CO$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;判断燃烧效率：&lt;/strong&gt; $CO$ 是燃料&lt;strong&gt;不完全燃烧&lt;/strong&gt;的直接产物。
&lt;ul&gt;
&lt;li&gt;如果 $CO$ 突然升高，说明炉膛内氧气不足或燃料与空气混合不均匀。&lt;/li&gt;
&lt;li&gt;通过监测 $CO$，锅炉司炉工可以调整&lt;strong&gt;过剩空气系数&lt;/strong&gt;。如果空气给多了，虽然 $CO$ 低了，但热量损失大且 $NO_x$ 会升高；如果空气给少了，$CO$ 就会飙升。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;节能降耗：&lt;/strong&gt; 维持在一个极低水平的 $CO$ 排放，意味着燃料利用率达到了最佳平衡点。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;3、用于解释 NOx、SO₂ 异常的“辅助证据”&lt;/p&gt;
&lt;p&gt;在一些精细监管现场：NOx 忽高忽低、SO₂ 稀释后稳定性不好&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CO 可以帮助判断：
&lt;ul&gt;
&lt;li&gt;是工况真的变了&lt;/li&gt;
&lt;li&gt;还是稀释、采样、燃烧状态出了问题&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;从环保或运维角度：
&lt;ul&gt;
&lt;li&gt;CO = 工况“健康度指示灯”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么有些现场完全不需要-co&#34;&gt;为什么有些现场“完全不需要 CO”
&lt;/h3&gt;&lt;p&gt;1、不是燃烧源，或燃烧不是监管重点&lt;/p&gt;
&lt;p&gt;比如：化工尾气、工艺废气、脱硫脱硝后排放&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这些场合：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;排放的 SO₂、NOx 主要来自工艺&lt;/li&gt;
&lt;li&gt;CO 与工艺合规性关联弱&lt;/li&gt;
&lt;li&gt;即使有 CO，也没有明确管理意义&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;2、监管目标是“排多少”，不是“怎么烧”&lt;/p&gt;
&lt;p&gt;对很多锅炉、电站，监管核心是：SO₂、NOx、颗粒物是否达标。CO 对总量考核意义不大。毕竟多测一个 CO ≈ 多一套系统 + 多一堆维护风险 —&amp;gt; 没有明确要求，就不会上&lt;/p&gt;
</description>
        </item>
        <item>
        <title>质控仪</title>
        <link>https://teaize.github.io/p/%E8%B4%A8%E6%8E%A7%E4%BB%AA/</link>
        <pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%B4%A8%E6%8E%A7%E4%BB%AA/</guid>
        <description>&lt;p&gt;在 CEMS（烟气排放连续监测系统）中，&lt;strong&gt;质控仪&lt;/strong&gt;（也常被称为“远程质控装置”或“自动校验装置”）是一种用于&lt;strong&gt;监督和验证分析仪准确性&lt;/strong&gt;的辅助系统&lt;/p&gt;
&lt;h3 id=&#34;质控仪是什么&#34;&gt;质控仪是什么
&lt;/h3&gt;&lt;p&gt;质控仪通常由&lt;strong&gt;标准气体组、精密配气模块、控制回路&lt;/strong&gt;以及&lt;strong&gt;通信模块&lt;/strong&gt;组成。它并不是直接用来测量烟气的，而是通过向 CEMS 系统注入已知浓度的“标准气体”，来对比 CEMS 的读数是否与标气浓度一致。&lt;/p&gt;
&lt;h3 id=&#34;主要用于什么&#34;&gt;主要用于什么
&lt;/h3&gt;&lt;h4 id=&#34;1-自动校准与校验保证准确性&#34;&gt;1. 自动校准与校验（保证准确性）
&lt;/h4&gt;&lt;p&gt;CEMS 传感器在长期运行中会产生“漂移”。质控仪可以按照预设程序（如每天一次或每周一次），自动切换阀门，将标气送入分析仪。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;零点校准：&lt;/strong&gt; 通入高纯氮气，检查仪表是否显示为“0”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;量程校准：&lt;/strong&gt; 通入已知高浓度的标气，检查仪表读数是否准确。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-远程抽检与防作弊合规监管&#34;&gt;2. 远程抽检与防作弊（合规监管）
&lt;/h4&gt;&lt;p&gt;这是近年来环保监管最看重的功能。环保局可以通过远程平台发送指令，让现场的质控仪立即开始“盲样考核”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;远程触发： 监管人员在办公室点点鼠标，现场质控仪就自动放气。&lt;/li&gt;
&lt;li&gt;数据比对： 质控仪记录放出的气是多少浓度，然后实时比对 CEMS 上传的数据。如果两者对不上，就说明数据可能存在偏差或人为干预。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-线性度测试&#34;&gt;3. 线性度测试
&lt;/h4&gt;&lt;p&gt;通过内置的配气系统，质控仪可以将一种高浓度标气稀释成多个不同梯度（如 20%、50%、80% 量程），一次性测试分析仪在不同浓度下的反应是否呈线性，从而判断传感器是否老化失效。&lt;/p&gt;
&lt;h3 id=&#34;质控仪与配气仪的区别&#34;&gt;质控仪与配气仪的区别
&lt;/h3&gt;&lt;p&gt;简单来说：&lt;strong&gt;配气仪是“工具”，而质控仪是“成套系统”&lt;/strong&gt;。它们的关系就像“发动机”与“整车”的区别&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;配气仪 (Gas Dilutor)： 是一个纯粹的&lt;strong&gt;精密仪器&lt;/strong&gt;。它的任务只有一个：通过高精度的质量流量控制器（MFC），把高浓度的瓶装标气用氮气精确稀释成你想要的任何浓度（比如把 $1000ppm$ 稀释成 $20ppm$）。&lt;/li&gt;
&lt;li&gt;质控仪 (QC Unit/System)： 是一个&lt;strong&gt;监管终端&lt;/strong&gt;。它集成了配气仪，但还多了“大脑”（控制器）和“嘴巴”（通信模块）。它负责接收环保局的指令，自动控制配气仪工作，并将结果上报。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在以前，运维人员提着一台&lt;strong&gt;便携式配气仪&lt;/strong&gt;去现场校准就行了。但现在国家推行&lt;strong&gt;远程非现场监管&lt;/strong&gt;，区别就显现出来了：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;盲样考核：&lt;/strong&gt; 环保局想知道你的 CEMS 准不准，不需要派人去，直接给&lt;strong&gt;质控仪&lt;/strong&gt;发信号。质控仪自动稀释出一瓶“未知浓度”的气体送入 CEMS，CEMS 的读数传回平台。如果误差大，平台自动报警。这种&lt;strong&gt;远程闭环&lt;/strong&gt;是配气仪单独做不到的。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;减少标气瓶数量：&lt;/strong&gt; 质控仪内置配气功能后，企业只需要买一两瓶高浓度标气，就能配出覆盖零点到满量程的各个点位。这符合 &lt;strong&gt;HJ 75/76&lt;/strong&gt; 规范中对多点线性检查的要求，既省钱又符合规范。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;核心技术规范hj-75--hj-76&#34;&gt;核心技术规范：HJ 75 &amp;amp; HJ 76
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;HJ 76-2017《固定污染源烟气排放连续监测系统技术要求及检测方法》
&lt;ul&gt;
&lt;li&gt;关注点： 质控仪硬件的“合格证”。&lt;/li&gt;
&lt;li&gt;要求： 质控仪必须能够精准控制气体流量，且具有自动配气功能的装置需要经过严格的&lt;strong&gt;线性误差&lt;/strong&gt;检测。它规定了标准气体的精度（通常要求二级标物以上）以及设备在极端环境下的稳定性。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;HJ 75-2017《固定污染源烟气排放连续监测技术规范》
&lt;ul&gt;
&lt;li&gt;关注点： 质控仪该怎么“干活”。&lt;/li&gt;
&lt;li&gt;强制动作：
&lt;ul&gt;
&lt;li&gt;24 小时零点/量程漂移检查： 质控仪需每日定时自动通入零气和标气。&lt;/li&gt;
&lt;li&gt;7 天漂移校准： 如果 7 天内漂移超过规定值（如 $2.5% F.S.$），质控仪必须介入校准。&lt;/li&gt;
&lt;li&gt;全系统校准： 规范强调校准应尽可能覆盖全管路（从探头到分析仪）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;关键性能指标&#34;&gt;关键性能指标
&lt;/h3&gt;&lt;p&gt;在技术验收（依据 HJ 75）时，质控仪配合 CEMS 必须达到以下硬指标：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;检测项目&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;规范要求 (HJ 75/76)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;质控仪的作用&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;示值误差&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;标气浓度的 $\pm 5%$ 以内&lt;/td&gt;
          &lt;td&gt;验证配气精度&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;系统响应时间&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;通常 $\le 200$ 秒&lt;/td&gt;
          &lt;td&gt;考核气路切换速度&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;24h 漂移&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$\le \pm 2.5% F.S.$&lt;/td&gt;
          &lt;td&gt;每日自动执行零点/量程检查&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;线性误差&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;相关系数 $r \ge 0.999$&lt;/td&gt;
          &lt;td&gt;通过多点配气验证传感器线性&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;专家提醒2024-2025-监管新动向&#34;&gt;专家提醒：2024-2025 监管新动向
&lt;/h3&gt;&lt;p&gt;目前国家正逐步推行“数智化运维”（如 HJ 1387 等新标准体系），对质控仪提出了更高要求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自动预警： 当质控仪发现连续 3 天漂移趋势一致时，需主动推送“维护提醒”。&lt;/li&gt;
&lt;li&gt;低浓度挑战： 针对超低排放企业（如 SO₂ 常年在 $10mg/m^3$ 以下），质控仪的配气精度要求从传统的“百分比”升级到了更精细的“绝对误差”控制。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Mermaid流程图</title>
        <link>https://teaize.github.io/p/mermaid%E6%B5%81%E7%A8%8B%E5%9B%BE/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/mermaid%E6%B5%81%E7%A8%8B%E5%9B%BE/</guid>
        <description>&lt;h3 id=&#34;核心语法形状决定意义&#34;&gt;核心语法：形状决定意义
&lt;/h3&gt;&lt;p&gt;在工程图纸里，形状是有严格规定的。Mermaid 通过括号来控制形状&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;矩形 &lt;code&gt;[]&lt;/code&gt;&lt;/strong&gt;：表示&lt;strong&gt;过程/步骤&lt;/strong&gt; (Process)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;菱形 &lt;code&gt;{}&lt;/code&gt;&lt;/strong&gt;：表示&lt;strong&gt;判断/决策&lt;/strong&gt; (Decision)。这是故障排查的核心。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;圆角 &lt;code&gt;()&lt;/code&gt;&lt;/strong&gt;：表示&lt;strong&gt;开始/结束&lt;/strong&gt; (Start/End)。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;布局方向td-还是-lr&#34;&gt;布局方向：TD 还是 LR
&lt;/h3&gt;&lt;p&gt;写在第一行。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;flowchart TD&lt;/code&gt; (Top-Down)：从上到下。适合画决策树、层级结构。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;flowchart LR&lt;/code&gt; (Left-Right)：从左到右。适合画工艺流向（比如 气路流程：进气 -&amp;gt; 过滤 -&amp;gt; 分析 -&amp;gt; 排空）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;连线技巧&#34;&gt;连线技巧
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;普通箭头：&lt;code&gt;--&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;带文字的箭头：&lt;code&gt;-- 文字 --&amp;gt;&lt;/code&gt; 或者 &lt;code&gt;--&amp;gt;|文字|&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;在做判断题时很有用： &lt;code&gt;A -- Yes --&amp;gt; B&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;graph TD
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Start[故障现象: 读数异常] --&amp;gt; Q1{光强是否正常?}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Q1 -- No (过低/波动) --&amp;gt; A1[查光学部件]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    A1 --&amp;gt; A1_1[换光源灯泡]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    A1 --&amp;gt; A1_2[擦拭气室镜片]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    A1 --&amp;gt; A1_3[检查光纤连接]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Q1 -- Yes (光强很好) --&amp;gt; Q2{通零气回零吗?}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Q2 -- No (零点高) --&amp;gt; A2[查气路污染]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    A2 --&amp;gt; A2_1[清洗气室]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    A2 --&amp;gt; A2_2[检查温控是否漂移]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Q2 -- Yes (零点正常) --&amp;gt; Q3{通标气准吗?}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Q3 -- No (偏低/慢) --&amp;gt; A3[查采样系统]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    A3 --&amp;gt; A3_1[查泵流速/漏气]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    A3 --&amp;gt; A3_2[换滤芯/电磁阀]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Q3 -- Yes --&amp;gt; End[仪器没坏&amp;lt;br&amp;gt;是工况变了/DAS传输问题]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    Start[故障现象: 读数异常] --&gt; Q1{光强是否正常?}
    
    Q1 -- No (过低/波动) --&gt; A1[查光学部件]
    A1 --&gt; A1_1[换光源灯泡]
    A1 --&gt; A1_2[擦拭气室镜片]
    A1 --&gt; A1_3[检查光纤连接]
    
    Q1 -- Yes (光强很好) --&gt; Q2{通零气回零吗?}
    
    Q2 -- No (零点高) --&gt; A2[查气路污染]
    A2 --&gt; A2_1[清洗气室]
    A2 --&gt; A2_2[检查温控是否漂移]
    
    Q2 -- Yes (零点正常) --&gt; Q3{通标气准吗?}
    
    Q3 -- No (偏低/慢) --&gt; A3[查采样系统]
    A3 --&gt; A3_1[查泵流速/漏气]
    A3 --&gt; A3_2[换滤芯/电磁阀]
    
    Q3 -- Yes --&gt; End[仪器没坏&lt;br&gt;是工况变了/DAS传输问题]
&lt;/div&gt;
&lt;h3 id=&#34;避坑指南&#34;&gt;避坑指南
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;坑 1：菱形括号里不能有特殊字符
&lt;ul&gt;
&lt;li&gt;错误：&lt;code&gt;Q1{光强 &amp;gt; 50%?}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;原因：&lt;code&gt;?&lt;/code&gt; 和 &lt;code&gt;%&lt;/code&gt; 等符号有时会破坏语法。&lt;/li&gt;
&lt;li&gt;解决：像之前一样，用双引号包起来。 &lt;code&gt;Q1{&amp;quot;光强 &amp;gt; 50%?&amp;quot;}&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;坑 2：节点 ID 重复
&lt;ul&gt;
&lt;li&gt;如果你写 &lt;code&gt;A[检查] --&amp;gt; B[维修] --&amp;gt; A[检查]&lt;/code&gt;，这表示流程回到了最初的起点（形成了闭环）。&lt;/li&gt;
&lt;li&gt;如果你只是想表达另一个“检查”步骤，不要用同一个 ID &lt;code&gt;A&lt;/code&gt;，要用 &lt;code&gt;A2&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;坑 3：混淆 &lt;code&gt;graph&lt;/code&gt; 和 &lt;code&gt;flowchart&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;你可能会看到有人写 &lt;code&gt;graph TD&lt;/code&gt;，有人写 &lt;code&gt;flowchart TD&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;建议：尽量使用 &lt;code&gt;flowchart&lt;/code&gt;。它是新版渲染器，支持更多花样（比如子图 subgraph），而且连线更圆滑，不像 &lt;code&gt;graph&lt;/code&gt; 那么生硬。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;flowchart LR
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    %% 1. 定义样式：让图更好看
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    classDef process fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    classDef valve fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    %% 2. 采样部分
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    subgraph Sampling [采样端]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Probe(采样探头) --&amp;gt; Filter1[初级过滤]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Filter1 --&amp;gt; HeatLine[伴热管线 120℃]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    %% 3. 预处理部分
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    subgraph Conditioning [预处理柜]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        HeatLine --&amp;gt; Pump((采样泵))
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Pump --&amp;gt; Cooler[冷凝除水]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Cooler --&amp;gt; Filter2[精细过滤]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    %% 4. 分析部分
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    subgraph Analyzer [分析仪]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Filter2 --&amp;gt; Valve{切换阀}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Valve -- 样气 --&amp;gt; Chamber[测量气室]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Valve -- 标气 --&amp;gt; Chamber
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Chamber --&amp;gt; Outlet(废气排放)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    %% 5. 外部标气
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Cyl[标气瓶] -.-&amp;gt; Valve
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    %% 应用样式
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    class Filter1,Filter2,Cooler,Chamber process;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    class Valve valve;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;mermaid&#34;&gt;
  flowchart LR
    %% 1. 定义样式：让图更好看
    classDef process fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef valve fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;

    %% 2. 采样部分
    subgraph Sampling [采样端]
        Probe(采样探头) --&gt; Filter1[初级过滤]
        Filter1 --&gt; HeatLine[伴热管线 120℃]
    end

    %% 3. 预处理部分
    subgraph Conditioning [预处理柜]
        HeatLine --&gt; Pump((采样泵))
        Pump --&gt; Cooler[冷凝除水]
        Cooler --&gt; Filter2[精细过滤]
    end

    %% 4. 分析部分
    subgraph Analyzer [分析仪]
        Filter2 --&gt; Valve{切换阀}
        Valve -- 样气 --&gt; Chamber[测量气室]
        Valve -- 标气 --&gt; Chamber
        Chamber --&gt; Outlet(废气排放)
    end
    
    %% 5. 外部标气
    Cyl[标气瓶] -.-&gt; Valve

    %% 应用样式
    class Filter1,Filter2,Cooler,Chamber process;
    class Valve valve;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;subgraph&lt;/code&gt;&lt;/strong&gt;：把图分成了“采样端”、“预处理”、“分析仪”三块，逻辑非常清晰。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-.-&amp;gt;&lt;/code&gt;&lt;/strong&gt;：虚线箭头，表示标气不是一直通的，是间歇的。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;classDef&lt;/code&gt;&lt;/strong&gt;：这是进阶玩法，给不同的部件上色（比如过滤器是蓝色，阀门是黄色），看起来很专业。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Mermaid时序图</title>
        <link>https://teaize.github.io/p/mermaid%E6%97%B6%E5%BA%8F%E5%9B%BE/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/mermaid%E6%97%B6%E5%BA%8F%E5%9B%BE/</guid>
        <description>&lt;p&gt;本篇继 [[Mermaid思维导图]]、[[Mermaid状态图]]，学习 Mermaid 时序图&lt;/p&gt;
&lt;h3 id=&#34;核心语法谁跟谁说话&#34;&gt;核心语法：谁跟谁说话
&lt;/h3&gt;&lt;p&gt;时序图的代码就像写剧本。基本句式： &lt;code&gt;A-&amp;gt;&amp;gt;B: 你好啊&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;participant&lt;/code&gt;：定义演员。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt;：实线箭头（发指令）。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--&amp;gt;&amp;gt;&lt;/code&gt;：虚线箭头（回消息）。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sequenceDiagram
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    participant DAS as 🖥️工控机
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    participant CEMS as ⚙️分析仪
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    DAS-&amp;gt;&amp;gt;CEMS: 1. 现在的浓度是多少？(Modbus请求)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    CEMS--&amp;gt;&amp;gt;DAS: 2. 是 35.5 mg/m3 (返回数据)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;进阶语法加个背景色-loop--alt&#34;&gt;进阶语法：加个背景色 (Loop / Alt)
&lt;/h3&gt;&lt;p&gt;只有对话太单调，有时候需要表示“循环”或者“特殊情况”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;loop … end&lt;/code&gt;：表示一直做某事。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;alt … else … end&lt;/code&gt;：表示“如果…否则…” (Alternative)。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sequenceDiagram
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    participant P as 采样泵
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    participant S as 传感器
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    loop 每秒一次
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        P-&amp;gt;&amp;gt;S: 抽气
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        S--&amp;gt;&amp;gt;S: 读取光强
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    alt 光强太低
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        S-&amp;gt;&amp;gt;P: 报警！停止抽气！
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    else 光强正常
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        S-&amp;gt;&amp;gt;P: 继续工作
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    end
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;mermaid&#34;&gt;
  sequenceDiagram
    participant P as 采样泵
    participant S as 传感器

    loop 每秒一次
        P-&gt;&gt;S: 抽气
        S--&gt;&gt;S: 读取光强
    end
    
    alt 光强太低
        S-&gt;&gt;P: 报警！停止抽气！
    else 光强正常
        S-&gt;&gt;P: 继续工作
    end
&lt;/div&gt;
&lt;h3 id=&#34;避坑指南&#34;&gt;避坑指南
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;箭头方向：
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; 是发出去（实线），&lt;code&gt;--&amp;gt;&amp;gt;&lt;/code&gt; 是回话（虚线）。&lt;/li&gt;
&lt;li&gt;千万别写成 &lt;code&gt;--&amp;gt;&lt;/code&gt;（这是流程图的写法），虽然有时候能混过去，但在时序图里不规范。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;别名 (as) 很重要：
&lt;ul&gt;
&lt;li&gt;如果名字太长（比如“脱硝出口 CEMS 分析仪主控板”），一定要用 &lt;code&gt;participant A as …&lt;/code&gt; 这种写法，否则后面的代码会写得你想哭。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;顺序决定站位：
&lt;ul&gt;
&lt;li&gt;代码里谁先出现（&lt;code&gt;participant&lt;/code&gt; 定义的顺序），图上谁就站在左边。通常我们把“发起者”（比如电脑）放在最左边。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;遇到什么问题？&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;用什么图？&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;核心思考&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;代码关键词&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;我要拆解结构&lt;/strong&gt;&lt;br&gt;(如：这台机器由什么组成？)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;Mindmap&lt;/strong&gt;&lt;br&gt;(思维导图)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;分类&lt;/strong&gt;&lt;br&gt;(包含关系)&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;mindmap&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;我要理清状态&lt;/strong&gt;&lt;br&gt;(如：故障了怎么恢复？)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;StateDiagram&lt;/strong&gt;&lt;br&gt;(状态图)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;变化&lt;/strong&gt;&lt;br&gt;(从 A 变 B)&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;stateDiagram-v2&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;我要搞懂通讯&lt;/strong&gt;&lt;br&gt;(如：软件怎么控制硬件？)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;Sequence&lt;/strong&gt;&lt;br&gt;(时序图)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;时间&lt;/strong&gt;&lt;br&gt;(谁先谁后)&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;sequenceDiagram&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>Mermaid思维导图</title>
        <link>https://teaize.github.io/p/mermaid%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/mermaid%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</guid>
        <description>&lt;h3 id=&#34;示例代码&#34;&gt;示例代码
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mindmap
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  root((CEMS仪表&amp;lt;br/&amp;gt;学习笔记))
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    核心部件
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      分析仪[气体分析仪]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      采样探头
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    常见问题
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      电压波动_±10%
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      管路堵塞_泄漏
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    关键概念
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      FRU))现场可更换((
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      鲁棒性
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;mermaid&#34;&gt;
  mindmap
  root((CEMS仪表&lt;br/&gt;学习笔记))
    核心部件
      分析仪[气体分析仪]
      采样探头
    常见问题
      电压波动_±10%
      管路堵塞_泄漏
    关键概念
      FRU))现场可更换((
      鲁棒性
&lt;/div&gt;
&lt;h3 id=&#34;核心语法要素&#34;&gt;核心语法要素
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;层级全靠缩进管， 空格必须引号包， 换行记得写 br， 括号决定形状好。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;骨架：全靠“缩进”。不需要写箭头 &lt;code&gt;--&amp;gt;&lt;/code&gt;，只需要用空格（通常是 2 个或 4 个空格）来表示层级关系
&lt;ul&gt;
&lt;li&gt;第一行写 &lt;code&gt;mindmap&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;第二行顶格写的是 根节点。&lt;/li&gt;
&lt;li&gt;后面缩进的都是 子节点。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;形状：括号决定长相
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;[]&lt;/code&gt; 方形&lt;/li&gt;
&lt;li&gt;&lt;code&gt;()&lt;/code&gt; 圆角（默认）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;(())&lt;/code&gt; 圆形&lt;/li&gt;
&lt;li&gt;&lt;code&gt;))&lt;/code&gt; 类似云朵/爆炸形（适合强调）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;{{}}&lt;/code&gt; 六边形&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;图标：画龙点睛
&lt;ul&gt;
&lt;li&gt;语法是：&lt;code&gt;::icon(图标代码)&lt;/code&gt;，例如 &lt;code&gt;::icon(fa fa-plug)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;依赖软件环境，不一定能显示出来&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;避坑指南&#34;&gt;避坑指南
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;坑 1：文字里有“空格”或“标点”，如果你的节点文字里有空格、括号、标点，必须用&lt;strong&gt;英文双引号&lt;/strong&gt; &lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt; 把文字包起来
&lt;ul&gt;
&lt;li&gt;❌ 错误写法：&lt;code&gt;供电电压 (220V)&lt;/code&gt; （括号和空格会破坏代码结构）&lt;/li&gt;
&lt;li&gt;✅ 正确写法：&lt;code&gt;&amp;quot;供电电压 (220V)&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;坑 2：缩进不一致
&lt;ul&gt;
&lt;li&gt;不要混用 &lt;code&gt;Tab&lt;/code&gt; 键和 &lt;code&gt;空格&lt;/code&gt; 键。&lt;/li&gt;
&lt;li&gt;建议全用空格（比如每次按 2 下空格）。如果上一行缩进了 2 格，下一行同级节点必须也是 2 格，不能是 3 格。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;坑 3：换行要用 &lt;code&gt;&amp;lt;br/&amp;gt;&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;✅ 正确：&lt;code&gt;&amp;quot;分析仪&amp;lt;br/&amp;gt;供电测试&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Mermaid状态图</title>
        <link>https://teaize.github.io/p/mermaid%E7%8A%B6%E6%80%81%E5%9B%BE/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/mermaid%E7%8A%B6%E6%80%81%E5%9B%BE/</guid>
        <description>&lt;h3 id=&#34;示例代码&#34;&gt;示例代码
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;stateDiagram-v2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    [*] --&amp;gt; 正常运行(Measure)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    state &amp;#34;正常运行 (Measure)&amp;#34; as Measure {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        [*] --&amp;gt; 采样中
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        采样中 --&amp;gt; 数据处理
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        数据处理 --&amp;gt; 采样中
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    state &amp;#34;故障状态 (Fault)&amp;#34; as Fault {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        [*] --&amp;gt; 诊断中
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        诊断中 --&amp;gt; 锁定输出: 保护下游
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        锁定输出 --&amp;gt; 等待维修
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    state &amp;#34;维修模式 (Maintenance)&amp;#34; as Maint {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        [*] --&amp;gt; 识别FRU
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        识别FRU --&amp;gt; 更换模块: 拔插操作
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        更换模块 --&amp;gt; 自动自检: 握手通信
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        自动自检 --&amp;gt; [*]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    %% 状态流转逻辑
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Measure --&amp;gt; Fault: 监测到光强过低 (光源老化)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Fault --&amp;gt; Maint: 运维人员到达，切换至维修模式
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    note right of Maint
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        这里体现 FRU 的优势：
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        不需要焊接，不需要示波器
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        换完自动握手
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    end note
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Maint --&amp;gt; Measure: 自检通过，系统复位
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;mermaid&#34;&gt;
  stateDiagram-v2
    [*] --&gt; 正常运行(Measure)

    state &#34;正常运行 (Measure)&#34; as Measure {
        [*] --&gt; 采样中
        采样中 --&gt; 数据处理
        数据处理 --&gt; 采样中
    }

    state &#34;故障状态 (Fault)&#34; as Fault {
        [*] --&gt; 诊断中
        诊断中 --&gt; 锁定输出: 保护下游
        锁定输出 --&gt; 等待维修
    }

    state &#34;维修模式 (Maintenance)&#34; as Maint {
        [*] --&gt; 识别FRU
        识别FRU --&gt; 更换模块: 拔插操作
        更换模块 --&gt; 自动自检: 握手通信
        自动自检 --&gt; [*]
    }

    %% 状态流转逻辑
    Measure --&gt; Fault: 监测到光强过低 (光源老化)
    
    Fault --&gt; Maint: 运维人员到达，切换至维修模式
    note right of Maint
        这里体现 FRU 的优势：
        不需要焊接，不需要示波器
        换完自动握手
    end note

    Maint --&gt; Measure: 自检通过，系统复位
&lt;/div&gt;
&lt;h3 id=&#34;核心语法要素&#34;&gt;核心语法要素
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;开头结尾画只眼 &lt;code&gt;[*]&lt;/code&gt;，&lt;/strong&gt; &lt;strong&gt;箭头必须两横线 &lt;code&gt;--&amp;gt;&lt;/code&gt;，&lt;/strong&gt; &lt;strong&gt;名字太长用别名 &lt;code&gt;as&lt;/code&gt;，&lt;/strong&gt; &lt;strong&gt;条件说明加冒号 &lt;code&gt;:&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;起点与终点：&lt;code&gt;[*]&lt;/code&gt;，这是状态图的标志性符号
&lt;ul&gt;
&lt;li&gt;放在开头：表示“系统启动”。&lt;/li&gt;
&lt;li&gt;放在结尾：表示“系统关机”或“流程结束”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;流转箭头：&lt;code&gt;--&amp;gt;&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;注意！Mermaid 的状态图箭头必须是 &lt;strong&gt;两个横杠&lt;/strong&gt; &lt;code&gt;--&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;状态描述：冒号 &lt;code&gt;:&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;如果你想解释“为什么”会从 A 变成 B，就在箭头后面加冒号&lt;/li&gt;
&lt;li&gt;格式：&lt;code&gt;状态A --&amp;gt; 状态B : 触发条件&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;别名法
&lt;ul&gt;
&lt;li&gt;给状态起个简单的英文代号（ID），然后在引号里写复杂的中文名字&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;语法：&lt;/strong&gt; &lt;code&gt;state &amp;quot;复杂的中文名字&amp;quot; as ID&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;避坑指南&#34;&gt;避坑指南
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;坑 1：方向没控制好，状态图默认是从上到下（Top-Bottom），如果流程很长，图会变得巨长无比
&lt;ul&gt;
&lt;li&gt;解决： 在第一行加上 &lt;code&gt;direction LR&lt;/code&gt; (Left to Right)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;坑 2：忘记闭环
&lt;ul&gt;
&lt;li&gt;状态图最怕“死胡同”。比如：状态到了“故障”，然后就没下文了。&lt;/li&gt;
&lt;li&gt;逻辑检查： 故障修好了去哪？要画一条线指回“正常”或指像“结束 &lt;code&gt;[*]&lt;/code&gt;”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;坑 1：箭头少画一横
&lt;ul&gt;
&lt;li&gt;❌ 错误：&lt;code&gt;A -&amp;gt; B&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;✅ 正确：&lt;code&gt;A --&amp;gt; B&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>关于加热棒</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E5%8A%A0%E7%83%AD%E6%A3%92/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E5%8A%A0%E7%83%AD%E6%A3%92/</guid>
        <description>&lt;p&gt;分析仪当中的控温部件，大都都使用加热棒来加热控温，为什么：&lt;/p&gt;
&lt;h3 id=&#34;为什么首选加热棒cartridge-heater&#34;&gt;为什么首选“加热棒”（Cartridge Heater）？
&lt;/h3&gt;&lt;p&gt;相比于加热丝（云母绕线）、加热片（硅胶加热板）或者陶瓷加热器，加热棒在精密仪器中有三大核心优势：&lt;/p&gt;
&lt;h4 id=&#34;1-极高的功率密度与传热效率&#34;&gt;1. 极高的“功率密度”与“传热效率”
&lt;/h4&gt;&lt;p&gt;CEMS 的核心部件（如采样探头腔体、NOx 转换炉、分析仪气室）通常是不锈钢或铝合金材质的&lt;strong&gt;金属块&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传热方式： 加热棒是专门为模具加热设计的。它插入一个紧配合的金属孔中，通过&lt;strong&gt;接触导热&lt;/strong&gt;直接把热量传递给金属块。&lt;/li&gt;
&lt;li&gt;优势： 这种方式&lt;strong&gt;热损耗极小，升温速度极快&lt;/strong&gt;。一根手指大小的加热棒可以轻松做到 200W~500W 的功率。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-完美的-fru现场可更换设计&#34;&gt;2. 完美的 FRU（现场可更换）设计
&lt;/h4&gt;&lt;p&gt;还记得之前我们讨论的 [[现场可更换单元]] 吗？加热棒是完美的 FRU 代表。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;维修场景： 如果加热元件烧了。
&lt;ul&gt;
&lt;li&gt;如果是加热丝： 你得把保温层拆掉，重新绕线，还要涂抹耐高温胶，现场根本做不了。&lt;/li&gt;
&lt;li&gt;如果是加热棒：拔出来 -&amp;gt; 插进去 -&amp;gt; 拧紧定位螺丝。全过程 5 分钟。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;结构标准化： 它的直径通常是标准的（如 6.5mm, 8mm, 10mm, 1/4 inch），非常容易找到备件。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-铠装结构安全耐用&#34;&gt;3. 铠装结构，安全耐用
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;密封性： CEMS 现场环境恶劣（有腐蚀性气体、有水汽）。加热棒外部是&lt;strong&gt;304/316L 不锈钢管&lt;/strong&gt;，内部填充压实的&lt;strong&gt;氧化镁 (MgO)&lt;/strong&gt; 粉末绝缘。这使得它不怕氧化、不怕轻微腐蚀，而且&lt;strong&gt;绝缘性能&lt;/strong&gt;比裸露的加热丝好太多。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么大家都用德国-hotset&#34;&gt;为什么大家都用德国 Hotset
&lt;/h3&gt;&lt;p&gt;Hotset 在工业加热领域的地位，有点像汽车界的“博世”或“BBA”，尽管国产加热棒价格只有 Hotset 的 1/5 甚至 1/10，但主流 CEMS 厂家在核心部位依然不敢省这个钱。原因在于 CEMS 的特殊工况：&lt;/p&gt;
&lt;h4 id=&#34;1-吸潮导致的绝缘崩溃&#34;&gt;1. “吸潮”导致的绝缘崩溃
&lt;/h4&gt;&lt;p&gt;这是国产低端加热棒的死穴。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;现象： CEMS 有时候会停机检修几天，或者发货运输途中遇到高湿环境。劣质加热棒内部的氧化镁粉不纯，会&lt;strong&gt;吸潮&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;后果： 再次上电瞬间，因为内部受潮，绝缘电阻下降，直接导致漏电跳闸。&lt;/li&gt;
&lt;li&gt;Hotset 优势： 他们的密封工艺（Swaged-in）和氧化镁纯度极高，防潮性能极好。这对于需要常年稳定运行的 CEMS 至关重要。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-公差控制-h7-tolerance&#34;&gt;2. 公差控制 (H7 Tolerance)
&lt;/h4&gt;&lt;p&gt;加热棒的寿命，一半取决于它自己，&lt;strong&gt;另一半取决于它和孔的配合&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原理： &lt;strong&gt;加热棒产生的热量必须瞬间导出去&lt;/strong&gt;。如果加热棒直径做小了（比如标准 10mm，它做成了 9.8mm），中间有了 0.2mm 的空气隙。&lt;/li&gt;
&lt;li&gt;后果： 空气是热的不良导体。热量导不出去，热量就会积聚在加热棒内部，导致内部温度瞬间飙升到 1000℃ 以上，电阻丝直接熔断。&lt;/li&gt;
&lt;li&gt;Hotset 优势： 他们的直径公差控制得极其精准（通常是负公差，配合 H7 的孔），保证插进去刚刚好，没有空气隙，寿命自然长。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251219223339949.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251219223339949.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;![[Pasted image 20251219223406.png]]&lt;/p&gt;
&lt;h4 id=&#34;3-内部热分布均匀&#34;&gt;3. 内部热分布均匀
&lt;/h4&gt;&lt;p&gt;在 NOx 转换炉中，我们需要温度极其均匀（例如维持在 350℃±2℃）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;劣质加热棒可能“头热尾冷”或者“中间局部过热”。&lt;/li&gt;
&lt;li&gt;Hotset 可以定制&lt;strong&gt;功率分布&lt;/strong&gt;，保证整根棒表面温度一致，这对化学反应效率（转化率）至关重要。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;注意事项&#34;&gt;注意事项
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;千万别干烧： 加热棒必须完全插入金属孔里才能通电。如果你把它拿在空气中通电测试，它会&lt;strong&gt;因为散热不掉而烧红&lt;/strong&gt;、炸裂。&lt;/li&gt;
&lt;li&gt;防卡死： 加热棒在高温下工作久了，容易和金属孔锈死在一起，拔不出来。有经验的工程师在安装新棒时，会在表面涂一层&lt;strong&gt;二硫化钼&lt;/strong&gt;或&lt;strong&gt;高温防卡剂&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>适用性检测</title>
        <link>https://teaize.github.io/p/%E9%80%82%E7%94%A8%E6%80%A7%E6%A3%80%E6%B5%8B/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E9%80%82%E7%94%A8%E6%80%A7%E6%A3%80%E6%B5%8B/</guid>
        <description>&lt;p&gt;在 HJ 76-2017 固定污染源烟气（SO2、NOX、颗粒物）排放连续监测系统技术要求及检测方法 标准中，要求进行，要求进行“供电电压变化的影响”等的测试，这实际上是属于&lt;strong&gt;型式核准&lt;/strong&gt;（Type Approval）或者&lt;strong&gt;适用性检测&lt;/strong&gt;的一部分&lt;/p&gt;
&lt;p&gt;这里以“供电电压变化的影响”为例，为了验证仪器在恶劣的工业现场供电环境下，是否还能保持数据的准确性&lt;/p&gt;
&lt;h3 id=&#34;一-为什么要这么做&#34;&gt;一、 为什么要这么做
&lt;/h3&gt;&lt;p&gt;分析仪器（CEMS）通常安装在电厂、化工厂、水泥厂等工业现场。这些环境的供电系统与实验室完全不同，进行电压变化测试主要基于以下三个原因：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;模拟工业现场的“脏电”环境
&lt;ul&gt;
&lt;li&gt;电压波动是常态： 工业现场通常会有大型电机、变频器、压缩机等大功率设备的频繁启停。这会导致电网电压瞬间跌落（Sags）或浪涌（Swells）&lt;/li&gt;
&lt;li&gt;测试目的： 确保当现场电压在 $220V \pm 10%$（即 198V~242V）范围内波动时，仪器依然能给出准确读数，而不是直接报警、死机或者读数漂移&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;考验仪器内部电源（PSU）的“线性调整率”
&lt;ul&gt;
&lt;li&gt;绝大多数现代分析仪内部都有开关电源（SMPS），将 220V AC 转变为 24V、12V、5V DC。理想情况下无论输入是 190V 还是 240V，输出都应该是稳定的 DC 电压。&lt;/li&gt;
&lt;li&gt;测试目的： 验证仪器内部电源模块的线性调整率 (Line Regulation) 是否合格&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;保护核心敏感器件
&lt;ul&gt;
&lt;li&gt;分析仪中有几个部件对电压极其敏感，如果内部稳压做不好，直接影响测量值，例如光源、探测器、温控系统等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以“供电电压变化的影响”为例，这其实是一个全球通用的仪器性能指标，不过在不同的认证体系下，称呼和具体要求略有不同&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;欧盟（EU）：EN 15267-3 (最严格)&lt;/li&gt;
&lt;li&gt;美国（US EPA）：40 CFR Part 60/75&lt;/li&gt;
&lt;li&gt;日本（JIS）：JIS B 7981 / 7982&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;鲁棒性设计&#34;&gt;鲁棒性设计
&lt;/h3&gt;&lt;p&gt;除了“供电电压变化的影响”之外，还包括进样流量、环境温度、振动、电压波动等等对输出的影响。从工程设计层面上考虑，这其实是鲁棒性设计的一种体现&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;含义： “鲁棒”是英文 Robust 的音译，原意是强壮、结实。在控制理论和系统工程中，它指的是&lt;strong&gt;一个系统在面临内部结构的不确定性或外部环境的干扰时，仍能保持其性能（如稳定性、准确性）维持在可接受范围内的能力。&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;你的例子：
&lt;ul&gt;
&lt;li&gt;理想的仪器：读数 = f(气体浓度)。&lt;/li&gt;
&lt;li&gt;实际的仪器：读数 = f(气体浓度，&lt;strong&gt;电压&lt;/strong&gt;，&lt;strong&gt;温度&lt;/strong&gt;，&lt;strong&gt;流量&lt;/strong&gt;，&lt;strong&gt;振动&lt;/strong&gt;…)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;思维核心：&lt;/strong&gt; 我们无法消除环境中的电压波动或温度变化（无法消除干扰源），但我们可以通过设计，使得系统对这些变化**“不敏感”**（Insensitive）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;通俗比喻：&lt;/strong&gt; 一个身体素质好的人（鲁棒性强），不管是下雨（电压低）、刮风（流量变）、还是气温骤降（环境温度变），他都能照常跑步，速度不会变慢。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>系统思维</title>
        <link>https://teaize.github.io/p/%E7%B3%BB%E7%BB%9F%E6%80%9D%E7%BB%B4/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%B3%BB%E7%BB%9F%E6%80%9D%E7%BB%B4/</guid>
        <description>&lt;p&gt;考虑三个维度：系统稳定性、测量纯度、架构设计&lt;/p&gt;
&lt;h3 id=&#34;第一维度关于稳--系统的生存能力&#34;&gt;第一维度：关于“稳” —— 系统的生存能力
&lt;/h3&gt;&lt;p&gt;这一层的概念和“鲁棒性”最接近，关注系统在极端或故障条件下的表现。&lt;/p&gt;
&lt;h4 id=&#34;冗余-redundancy&#34;&gt;冗余 (Redundancy)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 为了提高可靠性，故意多配置一套组件。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;热备（Hot Standby）： 比如工控机双硬盘备份，或者采样泵“一用一备”。一旦主泵坏了，备用泵 0 秒自动切入，数据不中断。&lt;/li&gt;
&lt;li&gt;架构思考： 用空间（多余的硬件）换时间（无故障运行时间）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;容错-fault-tolerance&#34;&gt;容错 (Fault Tolerance)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 当系统出现部分故障时，仍能继续运行（哪怕性能降级），而不会直接死机或崩溃。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;伴热管线某一段温度传感器坏了，系统不应该直接停机，而是应该报警并根据历史电流估算温度，维持基本的防冷凝功能，直到维修人员到达。&lt;/li&gt;
&lt;li&gt;架构思考： 承认故障是不可避免的，重点在于故障隔离和降级运行。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;失效安全-failsafe&#34;&gt;失效安全 (Failsafe)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 如果系统彻底坏了，它必须处于一个“安全”的状态，不能造成更大的破坏。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;如果探头反吹电磁阀突然断电（失效），阀门必须设计成自动关闭（常闭型），防止压缩空气无限制吹入烟道，或者防止烟气倒灌进仪表柜。&lt;/li&gt;
&lt;li&gt;架构思考： 设计的底线思维，考虑“死法”是否安全。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第二维度关于准--数据的纯净度&#34;&gt;第二维度：关于“准” —— 数据的纯净度
&lt;/h3&gt;&lt;p&gt;这一层的概念关注如何从干扰中提取真实信号，是对抗“影响量”的具体手段。&lt;/p&gt;
&lt;h4 id=&#34;补偿-compensation&#34;&gt;补偿 (Compensation)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 既然无法消除干扰（温度、压力变化），那就通过算法把偏差“算回来”。这是对抗灵敏度的核心手段。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;P/T 补偿： 测量气体浓度时，必须同时测温度 (T) 和压力 (P)，通过公式 $C_{std} = C_{meas} \times \frac{P}{P_0} \times \frac{T_0}{T}$ 把工况浓度折算成标况浓度。&lt;/li&gt;
&lt;li&gt;交叉干扰补偿： 比如测 CO 时，水蒸气 (H2O) 会有干扰。通过同时测 H2O 含量，在 CO 读数中减去水的贡献值。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;迟滞-hysteresis&#34;&gt;迟滞 (Hysteresis)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 输入量从小变大，和从大变小，经过同一个点时，读数不一样。也就是系统的“记忆效应”。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;吸附效应： 测 NH3（氨逃逸）或 HCl 时最明显。通气校准时读数上去很快，停止通气后读数下来很慢（管路吸附了气体）。如果迟滞太大，说明采样系统管壁材料选型错误（如没用特氟龙或不锈钢钝化）。&lt;/li&gt;
&lt;li&gt;架构思考： 系统对历史状态的依赖程度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;信噪比-snr---signal-to-noise-ratio&#34;&gt;信噪比 (SNR - Signal-to-Noise Ratio)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 有用的信号（S）与无用的背景噪声（N）的比值。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;在超低排放（如 SO2 &amp;lt; 35mg/m3）监测中，最大的敌人不是非线性，而是噪声。如果电压波动导致光源闪烁，就会产生噪声。&lt;/li&gt;
&lt;li&gt;架构思考： 提高精度的两条路：要么增强信号（更强的激光、更长的光程），要么压制噪声（滤波算法、硬件屏蔽）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三维度关于结构--系统的组织方式&#34;&gt;第三维度：关于“结构” —— 系统的组织方式
&lt;/h3&gt;&lt;p&gt;这一层的概念决定了仪器好不好用、好不好修。&lt;/p&gt;
&lt;h4 id=&#34;模块化-modularity&#34;&gt;模块化 (Modularity)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 将系统拆分成独立的、功能单一的积木块，通过标准接口连接。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;好的 CEMS 分析仪，光源、气室、检测器、电路板都是独立的模块。&lt;/li&gt;
&lt;li&gt;优点： 现场维修不需要懂原理，坏哪块换哪块（FRU - Field Replaceable Unit）。&lt;/li&gt;
&lt;li&gt;架构思考： 高内聚，低耦合。让电压波动的影响只局限在电源模块，不要蔓延到信号处理模块。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;溯源性-traceability&#34;&gt;溯源性 (Traceability)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 你的测量结果，必须能通过一条不间断的链条，追溯到国家基准或国际基准。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;为什么要做标气校准？因为标气是标准物质（CRM）。&lt;/li&gt;
&lt;li&gt;链条： 现场仪器 -&amp;gt; 标气 -&amp;gt; 国家一级标准物质 -&amp;gt; 国际单位制 (SI)。&lt;/li&gt;
&lt;li&gt;架构思考： 数据的“血统证明”。没有溯源性的数据，在法律上是无效的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;可用性-availability--data-capture-rate&#34;&gt;可用性 (Availability / Data Capture Rate)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;含义： 系统处于可工作状态的时间比例。&lt;/li&gt;
&lt;li&gt;CEMS 应用：
&lt;ul&gt;
&lt;li&gt;环保法规要求 CEMS 的数据捕获率必须 $\ge 95%$。&lt;/li&gt;
&lt;li&gt;这意味着你每天 calibration（校准）、backflush（反吹）、maintenance（维护）的时间加起来不能超过 1.2 小时。&lt;/li&gt;
&lt;li&gt;架构思考： 设计不仅要考虑“准”，还要考虑“效率”。能不能一边测一边校准？反吹能不能更快？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  mindmap
  root((CEMS仪器&lt;br/&gt;核心工程指标))
    系统生存能力&lt;br/&gt;(Reliability)
      鲁棒性 (Robustness)
        ::icon(fa fa-shield-alt)
        电压适应性
        环境适应性
      冗余 (Redundancy)
        ::icon(fa fa-clone)
        双泵设计
        热备机
      失效安全 (Failsafe)
        ::icon(fa fa-exclamation-triangle)
        断电自动关阀
        故障报警
    数据测量质量&lt;br/&gt;(Metrology)
      准确性 (Accuracy)
        ::icon(fa fa-bullseye)
        信噪比 (SNR)
        线性度
      干扰消除
        ::icon(fa fa-filter)
        交叉干扰补偿
        温度/压力补偿
      溯源性 (Traceability)
        ::icon(fa fa-link)
        标气校准
    系统架构设计&lt;br/&gt;(Architecture)
      模块化 (Modularity)
        ::icon(fa fa-cubes)
        独立气室
        易更换部件(FRU)
      可用性 (Availability)
        ::icon(fa fa-clock)
        高数据捕获率
        低维护频次
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;面对环境干扰（如电压、温度）： 我们追求 鲁棒性 (Robustness)。&lt;/li&gt;
&lt;li&gt;面对内部误差（如漂移、干扰）： 我们利用 补偿 (Compensation) 和 校准 (Calibration)。&lt;/li&gt;
&lt;li&gt;面对硬件故障（如泵坏、断电）： 我们依赖 冗余 (Redundancy) 和 失效安全 (Failsafe)。&lt;/li&gt;
&lt;li&gt;面对系统维护（如维修、升级）： 我们强调 模块化 (Modularity)。&lt;/li&gt;
&lt;li&gt;面对法律合规（如环保数据）： 我们保证 溯源性 (Traceability) 和 可用性 (Availability)&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>现场可更换单元</title>
        <link>https://teaize.github.io/p/%E7%8E%B0%E5%9C%BA%E5%8F%AF%E6%9B%B4%E6%8D%A2%E5%8D%95%E5%85%83/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%8E%B0%E5%9C%BA%E5%8F%AF%E6%9B%B4%E6%8D%A2%E5%8D%95%E5%85%83/</guid>
        <description>&lt;p&gt;本篇继 [[系统思维]]，学习 FRU (Field Replaceable Unit) 现场可更换单元&lt;/p&gt;
&lt;h3 id=&#34;什么是-fru&#34;&gt;什么是 FRU
&lt;/h3&gt;&lt;p&gt;简单来说，FRU 是指在不把整机拉回工厂的情况下，维修人员可以在现场通过“拔下来、插上去”的方式，快速修复设备故障的最小部件。&lt;/p&gt;
&lt;h3 id=&#34;为什么要设计-fru&#34;&gt;为什么要设计 FRU
&lt;/h3&gt;&lt;p&gt;在 CEMS 领域，FRU 的设计逻辑是为了解决“维修时效性”和“人员技能落差”之间的矛盾。&lt;/p&gt;
&lt;p&gt;场景模拟：假设大雪天的凌晨 2 点，电厂的 CEMS 分析仪坏了，主板上的一颗电容爆了。运维人员爬到了烟囱下的监测小屋。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;没有 FRU 的设计： 运维人员需要带上电烙铁、焊锡、万用表。他需要懂电路原理，找到那个坏掉的电容，在光线昏暗、手冻得发抖的情况下，把坏电容焊下来，换个新的上去。
&lt;ul&gt;
&lt;li&gt;结果：维修失败率极高，耗时几小时，甚至损坏电路板其他部分。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;有 FRU 的设计： 运维人员只需要判断：“哦，是主控板坏了。” 他不需要知道板子上哪个元件坏了，他只需要拧下 4 颗螺丝，拔掉排线，把整块主控板（这就是一个 FRU） 换下来，换上一块新的，插好线，上电，故障排除。
&lt;ul&gt;
&lt;li&gt;结果： 维修耗时 10 分钟，不需要懂电路原理，只要会拧螺丝。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cems-中常见的-fru-例子&#34;&gt;CEMS 中常见的 FRU 例子
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;FRU 类型&lt;/th&gt;
          &lt;th&gt;具体部件例子&lt;/th&gt;
          &lt;th&gt;维修动作&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;电子类&lt;/td&gt;
          &lt;td&gt;PCB 主板、电源模块&lt;/td&gt;
          &lt;td&gt;拔插接插件、拧螺丝。严禁现场焊接。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;机械类&lt;/td&gt;
          &lt;td&gt;采样泵组件&lt;/td&gt;
          &lt;td&gt;当泵膜破裂时，通常更换整个泵头或泵体，而不是去修泵里的连杆。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;光学类&lt;/td&gt;
          &lt;td&gt;光源组件&lt;/td&gt;
          &lt;td&gt;氙灯或紫外灯通常预装在一个带有定位销的底座上。更换时不需要重新调光路，插进去就是准的。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;传感器类&lt;/td&gt;
          &lt;td&gt;氧电池、湿度传感器&lt;/td&gt;
          &lt;td&gt;也是标准的 FRU，通常设计为旋转卡扣式或直插式。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;消耗品类&lt;/td&gt;
          &lt;td&gt;滤芯、蠕动泵管&lt;/td&gt;
          &lt;td&gt;这是最高频更换的 FRU。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;一个优秀的-fru-必须具备的特征&#34;&gt;一个优秀的 FRU 必须具备的特征
&lt;/h3&gt;&lt;p&gt;如果你正在参与研发，或者你在选型仪器，你要看它的 FRU 设计好不好，主要看这三点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;免焊接、&lt;strong&gt;免特殊工具&lt;/strong&gt; (Tool-free / Min-tools)： 连接必须用端子排、航空插头、排线。如果要动用电烙铁，它就不叫 FRU。&lt;/li&gt;
&lt;li&gt;防呆设计 (Fool-proof)：
&lt;ul&gt;
&lt;li&gt;比如： 电源接口和信号接口大小不一样，防止插反。&lt;/li&gt;
&lt;li&gt;比如： 带有导向销，插反了根本推不进去。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;最小化校准 (Minimal Calibration)：
&lt;ul&gt;
&lt;li&gt;最好的 FRU 换上去就能用。&lt;/li&gt;
&lt;li&gt;次好的： 换上去后，做一个简单的零点/量程校准（Zero/Span）即可。&lt;/li&gt;
&lt;li&gt;差的设计： 换了一个模块，需要用示波器重新调波形，这在现场是不可接受的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;拓展知识-sru-vs-fru&#34;&gt;拓展知识 SRU vs FRU
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;FRU (Field Replaceable Unit - 现场可更换): 在现场换下来的板子（坏板），运维人员带回公司。&lt;/li&gt;
&lt;li&gt;SRU (Shop Replaceable Unit - 车间可更换): 带回公司的坏板，由工程师在维修车间里进行检测，发现是板子上的一个芯片坏了。这个芯片就是 SRU。工程师把芯片换好，这块板子就修好了，又变成了一个好用的 FRU，放入备件库。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>型式核准</title>
        <link>https://teaize.github.io/p/%E5%9E%8B%E5%BC%8F%E6%A0%B8%E5%87%86/</link>
        <pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%9E%8B%E5%BC%8F%E6%A0%B8%E5%87%86/</guid>
        <description>&lt;p&gt;&lt;strong&gt;型式核准&lt;/strong&gt;（Pattern Approval / Type Approval），全称为&lt;strong&gt;计量器具型式批准&lt;/strong&gt;，在行业内通常简称为 &lt;strong&gt;CPA&lt;/strong&gt; (China Pattern Approval)。&lt;/p&gt;
&lt;h3 id=&#34;1-核心定义&#34;&gt;1. 核心定义
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;型式核准是中国政府对计量器具的一种行政许可（牌照）制度&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;通俗理解： 就像汽车上市前必须通过“碰撞测试”并拿到工信部的准入许可一样，你的 CEMS 分析仪在市场上销售之前，必须先证明这款机器“设计是合理的”、“测得是准的”、“长期是稳定的”。&lt;/li&gt;
&lt;li&gt;法律依据： 《中华人民共和国计量法》。凡是列入《实施强制管理的计量器具目录》的产品，只要在中国境内制造、销售、进口，都必须取得型式批准证书。&lt;/li&gt;
&lt;li&gt;标志： 拿到证书后，&lt;strong&gt;仪器铭牌上会印有一个 CPA 标志（一个圆圈里面包着 CPA 三个字母）&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-它测什么&#34;&gt;2. 它测什么
&lt;/h3&gt;&lt;p&gt;型式核准的核心环节叫&lt;strong&gt;型式评价（Pattern Evaluation）&lt;/strong&gt;。这不仅是测一下精度，而是对仪器进行“全身体检”和“极限压力测试”。&lt;/p&gt;
&lt;p&gt;型式评价通常包含：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;计量性能： 准确度、重复性、线性误差、响应时间等。&lt;/li&gt;
&lt;li&gt;环境适应性：
&lt;ul&gt;
&lt;li&gt;电压波动： 220V $\pm 10%$（正如你刚才关注的）。&lt;/li&gt;
&lt;li&gt;温度影响： 在高温（如 40℃）和低温（如 5℃）下，仪器还能准吗？&lt;/li&gt;
&lt;li&gt;绝缘强度： 打高压电会不会击穿？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;抗干扰能力： 电磁兼容（EMC）测试，比如抗静电、抗雷击浪涌、抗射频干扰。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;cems-领域的双重门槛cpa-vs-ccep&#34;&gt;CEMS 领域的“双重门槛”：CPA vs CCEP
&lt;/h3&gt;&lt;p&gt;做 CEMS 的人经常混淆这两个概念，因为它们都要做测试，而且很多测试项目（如电压影响）是重合的。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;比较维度&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;CPA (型式核准)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;CCEP (环保产品认证)&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;全称&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;计量器具型式批准证书&lt;/td&gt;
          &lt;td&gt;中国环境保护产品认证证书&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;主管部门&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;市场监督管理局&lt;/strong&gt; (计量口)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;中环协&lt;/strong&gt; (环保口)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;依据标准&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;计量检定规程 (如 JJG 968)&lt;/td&gt;
          &lt;td&gt;环保标准 (如 &lt;strong&gt;HJ 76&lt;/strong&gt;)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;性质&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;强制性行政许可&lt;/strong&gt; (法律底线)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;自愿性产品认证&lt;/strong&gt; (市场门槛)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;地位&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;准生证&lt;/strong&gt;：没它不能生产销售&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;通行证&lt;/strong&gt;：没它几乎投不了标&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;关注点&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;量值溯源&lt;/strong&gt;：机器本身准不准&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;适用性&lt;/strong&gt;：系统在现场好不好用&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;型式核准就是国家确认你这款仪器“基因优良、抗造耐用”的官方证明。在 HJ 76 里看到的那些看似苛刻的电压、温度测试，其实就是为了通过这个核准而设立的硬性指标&lt;/p&gt;
</description>
        </item>
        <item>
        <title>流量计校准算法</title>
        <link>https://teaize.github.io/p/%E6%B5%81%E9%87%8F%E8%AE%A1%E6%A0%A1%E5%87%86%E7%AE%97%E6%B3%95/</link>
        <pubDate>Thu, 18 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%B5%81%E9%87%8F%E8%AE%A1%E6%A0%A1%E5%87%86%E7%AE%97%E6%B3%95/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;例如我有一个未校准过的流量计和一个校准过的流量计，通过通讯，让未校准过的流量计输出 500ml 气体，当然真是输出可能并非 500ml。此时校准过的流量计显示 480ml，那么可以未这个未校准过的流量计提供一个参考值。依此类推，500ml、1000ml、2500ml 等等这些点校准过的流量计都给出一个参考值。然后通过这些点位的参考值，可以给未校准过的流量计计算出校准系数。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这是工业仪表（特别是 &lt;strong&gt;MFC 质量流量控制器&lt;/strong&gt; 或 &lt;strong&gt;气体稀释仪/配气仪&lt;/strong&gt;）中非常标准的“多点标定” (Multi-point Calibration) 或 “线性化” (Linearization) 过程。这个过程通常分为三个步骤：&lt;strong&gt;数据采集&lt;/strong&gt;、&lt;strong&gt;模型拟合&lt;/strong&gt;、&lt;strong&gt;校准应用&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;第一步数据模型定义&#34;&gt;第一步：数据模型定义
&lt;/h3&gt;&lt;p&gt;我们定义两组数据序列：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;$X$ (未校准/原始值)&lt;/strong&gt;：你下发的设定值（Setpoint）或者仪表原始读数。
&lt;ul&gt;
&lt;li&gt;例如：$500, 1000, 2500$ mL/min&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$Y$ (参考值/标准值)&lt;/strong&gt;：标准流量计测得的真实值。
&lt;ul&gt;
&lt;li&gt;例如：$480, 990, 2480$ mL/min&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我们的目标是找到一个函数 $f(x)$，使得 $Y \approx f(X)$。之后在实际使用时，如果读到了 $X$，我们就用 $f(X)$ 计算出真实的 $Y$；或者如果你想输出真实的 $Y$，你需要反算出应该设定的 $X$。&lt;/p&gt;
&lt;h3 id=&#34;第二步常用的三种算法实现&#34;&gt;第二步：常用的三种算法实现
&lt;/h3&gt;&lt;p&gt;根据精度的要求和微处理器的计算能力，通常有以下三种方案：&lt;/p&gt;
&lt;h4 id=&#34;方案一分段线性插值法--最常用最稳健&#34;&gt;方案一：分段线性插值法 —— 最常用、最稳健
&lt;/h4&gt;&lt;p&gt;这是在嵌入式底层（如 STM32, GD32）中最常见的做法。它不追求一条完美的曲线，而是把相邻的两个校准点连成直线。&lt;/p&gt;
&lt;p&gt;原理：假设当前流量处于两个校准点之间：$(x_i, y_i)$ 和 $(x_{i+1}, y_{i+1})$。对于任意一个输入 $x$（在 $x_i$ 和 $x_{i+1}$ 之间），校准后的值 $y$ 计算公式为：$$y = y_i + (x - x_i) \cdot \frac{y_{i+1} - y_i}{x_{i+1} - x_i}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优点：计算简单，CPU 负担小，不会出现高阶多项式拟合在端点处的“龙格现象”（震荡）。
&lt;ul&gt;
&lt;li&gt;龙格现象 (Runge&amp;rsquo;s Phenomenon) ：当你试图用&lt;strong&gt;过高阶数&lt;/strong&gt;的多项式去完美穿过每一个校准点时，虽然曲线在这些点上是准的，但在&lt;strong&gt;头尾两端&lt;/strong&gt;（边缘区域），曲线会发生剧烈的、完全不符合逻辑的&lt;strong&gt;震荡&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：在点与点之间是直线的，如果传感器非线性极强，需要更密集的校准点。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;方案二最小二乘法多项式拟合--精度更高&#34;&gt;方案二：最小二乘法多项式拟合 —— 精度更高
&lt;/h4&gt;&lt;p&gt;如果你希望曲线更平滑，且校准点较多（例如 5-10 个点），可以使用多项式拟合。通常 2 次（抛物线） 或 &lt;strong&gt;3 次（S 型）&lt;/strong&gt; 多项式就足够了。&lt;/p&gt;
&lt;p&gt;原理：假设校准方程为：$$y = ax^2 + bx + c$$
通过最小二乘法算法（Least Squares），输入所有的 $(X, Y)$ 点对，计算出系数 $a, b, c$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优点：全局平滑，&lt;strong&gt;对热式流量计这种非线性传感器效果很好&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;缺点：算法较复杂（涉及到矩阵运算），&lt;strong&gt;且如果校准点有误（坏点），会影响全局精度&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251218193659.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251218193659.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;如果存在坏点，例如输入 950 的时候输入成 95 了，拟合出来的直线会影响全局精度&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251218194428.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251218194428.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;方案三查表法-look-up-table&#34;&gt;方案三：查表法 (Look-up Table)
&lt;/h4&gt;&lt;p&gt;这是方案一的简化版。如果不计算插值，而是建立一个巨大的数组（例如把 0-5000ml 分成 5000 个点），直接查表。但这太占内存，通常配合方案一使用。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>温度的陷阱</title>
        <link>https://teaize.github.io/p/%E6%B8%A9%E5%BA%A6%E7%9A%84%E9%99%B7%E9%98%B1/</link>
        <pubDate>Thu, 18 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%B8%A9%E5%BA%A6%E7%9A%84%E9%99%B7%E9%98%B1/</guid>
        <description>&lt;h3 id=&#34;场景温度的陷阱&#34;&gt;场景：温度的陷阱
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;背景：为了追求紧凑，把分析仪设计得很小。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主探测器 (PMT)：不得不安装在气室旁边，而气室为了防止结露，加热到了 43℃。&lt;/li&gt;
&lt;li&gt;参考检测器 (PD)：安装在光源室旁边，虽然有风扇，但因为靠近灯泡，环境温度约为 35℃。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;故障现象：仪器在冬天开机预热时，前 30 分钟读数剧烈漂移。虽然光源已经稳定了，但读数还在变。&lt;/p&gt;
&lt;p&gt;问题：我们在做 $\frac{Signal}{Reference}$ 补偿时，默认的前提是：两个探测器对光的响应系数（Sensitivity） 是常数。在这个场景中，温度这个变量是如何破坏“共模抑制”的？（即：当环境温度变化时，PMT 和 PD 是“同甘共苦”的吗？）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在实际运维中，等待预热（Warm-up）是解决大多数温度漂移问题的标准操作流程（SOP）。几乎所有的精密分析仪说明书都会写：“开机后请预热 30-60 分钟，待读数稳定后再进行校准。&lt;/p&gt;
&lt;p&gt;但是，如果从设计的角度来看，这个设计是不及格的。因为“预热”只能解决“开机”那一瞬间的剧烈变化，却解决不了“环境变化”带来的长期漂移。在这个“温度陷阱”场景中，隐藏着两个&lt;strong&gt;连预热都救不了的致命物理缺陷&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;缺陷一温度系数的非对称性&#34;&gt;缺陷一：温度系数的“非对称性”
&lt;/h3&gt;&lt;p&gt;我们在做 $\frac{\text{主信号}}{\text{参考信号}}$ 补偿时，有一个极其重要的默认假设：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;假设：当温度变化时，主探测器 (PMT) 和 参考检测器 (PD) 的性能变化是步调一致的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;但在该场景中，这个假设彻底崩塌了：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;物理特性的差异：
&lt;ul&gt;
&lt;li&gt;主探测器 (PMT)： 它是真空电子管。温度每升高，它的暗电流 (Dark Current) 会指数级上升（底噪变大），同时其增益 (Gain) 也会发生漂移（通常是灵敏度下降）。&lt;/li&gt;
&lt;li&gt;参考检测器 (PD)： 它是硅半导体。它的温度特性完全不同，对温度不那么敏感，且漂移曲线与 PMT 完全不一样。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;后果：即使机器预热好了，如果机箱内的温度从 $35^\circ\text{C}$ 变成了 $36^\circ\text{C}$（比如空调坏了）：
&lt;ul&gt;
&lt;li&gt;PMT 的信号可能漂移了 -1.0%。&lt;/li&gt;
&lt;li&gt;PD 的信号可能只漂移了 +0.1%。&lt;/li&gt;
&lt;li&gt;补偿结果： $\frac{99}{100.1} \neq 1$。&lt;/li&gt;
&lt;li&gt;结论： 补偿算法不仅没能消除误差，反而因为两者的“步调不一致”，让漂移变得不可预测。这就是&lt;strong&gt;共模抑制失败&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;缺陷二温差梯度的动态变化&#34;&gt;缺陷二：温差梯度的“动态变化”
&lt;/h3&gt;&lt;p&gt;你认为预热后温度就“定死”了吗？并没有。&lt;/p&gt;
&lt;p&gt;在场景三中，我特意设定了：PMT 在加热的气室旁 ($43^\circ\text{C}$)，PD 在灯泡旁 ($35^\circ\text{C}$)。这里存在一个 $8^\circ\text{C}$ 的温差 ($\Delta T$)。关键在于：这个 $\Delta T$ 是不稳定的！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;夏天中午： 环境温度 $30^\circ\text{C}$。风扇疯狂转。灯泡旁的 PD 可能被吹得比较凉，而气室旁的 PMT 因为有保温棉，温度没怎么降。$\Delta T$ 变大了。&lt;/li&gt;
&lt;li&gt;冬天深夜： 环境温度 $5^\circ\text{C}$。风扇转得慢。灯泡的热量散不出去，PD 变热了。$\Delta T$ 变小了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;只要 $\Delta T$ 在变，哪怕预热了一万年，这两个探测器的工作点就永远对不上。参考信号就失去了“基准”的意义。&lt;/p&gt;
&lt;h3 id=&#34;解决方案&#34;&gt;解决方案
&lt;/h3&gt;&lt;p&gt;工程师通常会采用以下三种手段来填这个坑：&lt;/p&gt;
&lt;h4 id=&#34;1-恒温控制--最笨但最有效&#34;&gt;1. 恒温控制 —— 最笨但最有效
&lt;/h4&gt;&lt;p&gt;不要让 PMT 和 PD 处于不同的温度环境。设计： 把整个光学盒（包括 PMT、PD、气室、灯）全部包在一个保温盒子里，统一加热到 $50^\circ\text{C}$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不管外面是夏天还是冬天，盒子里永远是 $50^\circ\text{C}$。&lt;/li&gt;
&lt;li&gt;这样，所有的温度漂移都被物理锁死为 0。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-半导体制冷-tec-cooling--针对-pmt&#34;&gt;2. 半导体制冷 (TEC Cooling) —— 针对 PMT
&lt;/h4&gt;&lt;p&gt;既然 PMT 最怕热，那就给它装一个“私人空调”。
设计：在 PMT 后面贴一个 Peltier (TEC) 制冷片，强制把它冷却并恒定在 $10^\circ\text{C}$。这样可以把 PMT 的噪声压到极低，且不再受环境影响。&lt;/p&gt;
&lt;h4 id=&#34;3-软件温度补偿--省钱的做法&#34;&gt;3. 软件温度补偿 —— 省钱的做法
&lt;/h4&gt;&lt;p&gt;如果在硬件上没法恒温，那就通过大量实验数据来拟合。&lt;/p&gt;
&lt;p&gt;算法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 PMT 旁边装一个温度传感器 $T_1$。&lt;/li&gt;
&lt;li&gt;在 PD 旁边装一个温度传感器 $T_2$。&lt;/li&gt;
&lt;li&gt;在软件里写死公式：$\text{最终结果} = \frac{S}{R} \times f(T_1) \times g(T_2)$。&lt;/li&gt;
&lt;li&gt;让 CPU 实时计算并抵消温度带来的增益变化。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>线性传感器与非线性传感器</title>
        <link>https://teaize.github.io/p/%E7%BA%BF%E6%80%A7%E4%BC%A0%E6%84%9F%E5%99%A8%E4%B8%8E%E9%9D%9E%E7%BA%BF%E6%80%A7%E4%BC%A0%E6%84%9F%E5%99%A8/</link>
        <pubDate>Thu, 18 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%BA%BF%E6%80%A7%E4%BC%A0%E6%84%9F%E5%99%A8%E4%B8%8E%E9%9D%9E%E7%BA%BF%E6%80%A7%E4%BC%A0%E6%84%9F%E5%99%A8/</guid>
        <description>&lt;p&gt;本篇继 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E6%B0%A7%E5%8C%96%E9%94%86%E6%B0%A7%E4%BC%A0%E6%84%9F%E5%99%A8/#%E4%BC%A0%E6%84%9F%E5%99%A8%E7%BA%BF%E6%80%A7%E5%85%B3%E7%B3%BB&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;氧化锆氧传感器&lt;/a&gt;、&lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E6%B5%81%E9%87%8F%E8%AE%A1%E6%A0%A1%E5%87%86%E7%AE%97%E6%B3%95/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;流量计校准算法&lt;/a&gt; 和 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E4%B8%80%E6%AC%A1%E5%A4%9A%E9%A1%B9%E5%BC%8F%E6%8B%9F%E5%90%88/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;一次多项式拟合&lt;/a&gt; 后，通过这三篇的学习，了解到在仪器仪表算法设计（例如校准算法）的核心逻辑上，&lt;strong&gt;物理现象&lt;/strong&gt;与&lt;strong&gt;数学模型&lt;/strong&gt;需要对应。&lt;/p&gt;
&lt;p&gt;为了更深入地理解这个概念，我们可以把这三个参数（$c, b, a$）【最小二乘法多项式，$y = ax^2 + bx + c$】想象成控制一条曲线形状的三个“物理旋钮”：&lt;/p&gt;
&lt;h3 id=&#34;1-线性传感器两个独立的物理旋钮-b-和-k&#34;&gt;1. 线性传感器：两个独立的物理旋钮 ($b$ 和 $k$)
&lt;/h3&gt;&lt;p&gt;对于大多数分析仪（如 $\text{SO}_2$, $\text{NO}_x$）或压力/温度变送器，理想情况下它们是线性的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;旋钮 1：截距 $b$ (Zero / Offset)
&lt;ul&gt;
&lt;li&gt;物理含义：&lt;strong&gt;零点漂移&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;物理来源：背景噪声、暗电流、零气不纯、温度引起的基线波动。&lt;/li&gt;
&lt;li&gt;数学作用：&lt;strong&gt;平移 (Translation)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;操作：把整条线向上或向下移动，不改变倾斜角度。&lt;/li&gt;
&lt;li&gt;校准：通零气，修改 $b$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;旋钮 2：斜率 $k$ (Span / Gain)
&lt;ul&gt;
&lt;li&gt;物理含义：&lt;strong&gt;灵敏度漂移&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;物理来源：光源老化（能量减弱）、检测器效率下降、光路受污染、气体室透镜变脏。&lt;/li&gt;
&lt;li&gt;数学作用：&lt;strong&gt;旋转 (Rotation)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;操作：以零点为轴心，把线的尾巴抬高或按低。&lt;/li&gt;
&lt;li&gt;校准：通标气，修改 $k$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;结论&lt;/strong&gt;：因为这两个物理过程（比如“背景噪声大”和“灯泡变暗”）通常是不相关的，所以我们可以分别独立校准零点和量程。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2-非线性传感器增加了第三个旋钮-a&#34;&gt;2. 非线性传感器：增加了第三个旋钮 ($a$)
&lt;/h3&gt;&lt;p&gt;对于热式流量计（MFC）、NDIR（非分光红外）气体传感器、热电偶等，&lt;strong&gt;物理定律本身决定了它们不是直的&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;此时我们引入二次项：$y = ax^2 + bx + c$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;旋钮 3：曲率系数 $a$ (Linearity / Curvature)
&lt;ul&gt;
&lt;li&gt;物理含义：&lt;strong&gt;非线性程度&lt;/strong&gt;（弯曲的厉害程度）。&lt;/li&gt;
&lt;li&gt;物理来源：
&lt;ul&gt;
&lt;li&gt;热式流量计：King&amp;rsquo;s Law 中的指数效应（散热速率随流量增加而变慢）。&lt;/li&gt;
&lt;li&gt;光学传感器：Beer-Lambert Law 在高浓度下的“吸光度饱和”效应（光被吸光了，浓度再高信号也变不了多少）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;数学作用：&lt;strong&gt;弯曲 (Bending)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;操作：控制曲线是开口向上（像碗）还是开口向下（像拱桥），以及弯得有多急。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-为什么非线性传感器需要最小二乘法多项式拟合&#34;&gt;3. 为什么非线性传感器需要“最小二乘法多项式拟合”？
&lt;/h3&gt;&lt;p&gt;这就回到了你提到的点：&lt;strong&gt;因为这时候，$b$ 和 $k$ 已经不够用了&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;如果你强行用直尺（线性方程）去量一个弯曲的彩虹（非线性数据）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;你调整 $b$（平移直尺），中间碰到了，两头翘起来。&lt;/li&gt;
&lt;li&gt;你调整 $k$（旋转直尺），头尾碰到了，中间空了一大块。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;只有引入 $ax^2$（多项式拟合），你手里的“直尺”变成了一根“软尺”，你才能把它弯曲，完美贴合传感器真实的物理曲线。&lt;/p&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;数学参数&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;几何动作&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;对应物理概念&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;典型故障原因&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;适用算法&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;$b$ (常数项)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;↕️ 上下平移&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;零点 (Zero)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;电子噪声、温度漂移&lt;/td&gt;
          &lt;td&gt;简单的加减法 / 线性回归&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;$k$ (一次项)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;🔄 旋转角度&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;量程/灵敏度 (Span)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;光源老化、探头污染&lt;/td&gt;
          &lt;td&gt;比例运算 / 线性回归&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;$a$ (二次项)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;⤵️ 弯曲程度&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;线性度 (Linearity)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;物理原理饱和、散热非线性&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;最小二乘法多项式拟合&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;所以说，算法的选择，本质上是对物理现象复杂度的妥协与匹配&lt;/p&gt;
</description>
        </item>
        <item>
        <title>一次多项式拟合</title>
        <link>https://teaize.github.io/p/%E4%B8%80%E6%AC%A1%E5%A4%9A%E9%A1%B9%E5%BC%8F%E6%8B%9F%E5%90%88/</link>
        <pubDate>Thu, 18 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%B8%80%E6%AC%A1%E5%A4%9A%E9%A1%B9%E5%BC%8F%E6%8B%9F%E5%90%88/</guid>
        <description>&lt;p&gt;本篇继 [[流量计校准实现过程]]，这里学习&lt;strong&gt;一次多项式拟合&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;工业分析仪中常见的“零点校准”和“量程（满度）校准”，本质上就是只有两个样本点的“一次多项式拟合”（线性回归）。&lt;/p&gt;
&lt;p&gt;数学上，这就是在解一个二元一次方程组，求出直线方程 $y = kx + b$ 中的两个参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$b$ (截距/Offset)：对应 零点 (Zero)。&lt;/li&gt;
&lt;li&gt;$k$ (斜率/Slope)：对应 量程/灵敏度 (Span/Sensitivity)。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不过，虽然数学本质一样，但在&lt;strong&gt;工程实现&lt;/strong&gt;和&lt;strong&gt;操作逻辑&lt;/strong&gt;上，普通的“零点/量程校准”和标准的“最小二乘法”有一点微妙的区别。我来为你拆解一下：&lt;/p&gt;
&lt;h3 id=&#34;1-数学本质确定解-vs-统计解&#34;&gt;1. 数学本质：确定解 vs. 统计解
&lt;/h3&gt;&lt;h4 id=&#34;场景-a两点校准zero--span-钉钉子&#34;&gt;场景 A：两点校准（Zero &amp;amp; Span）—— “钉钉子”
&lt;/h4&gt;&lt;p&gt;这是大多数分析仪（如 CEMS 中的 $\text{SO}_2, \text{NO}_x$ 分析仪）的做法。因为只有两个点（零气点、标气点），两点确定一条直线。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;步骤 1（通零气）： 输入 $x=0$，测得 $y_{raw}$。
&lt;ul&gt;
&lt;li&gt;直接算出截距 $b = 0 - y_{raw}$（或者将当前的读数强行置为 0）。&lt;/li&gt;
&lt;li&gt;这就像把直线的起点用钉子钉死在原点。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;步骤 2（通标气）： 输入 $x=Span$，测得 $y_{raw}$。
&lt;ul&gt;
&lt;li&gt;基于确定的 $b$，算出斜率 $k$。&lt;/li&gt;
&lt;li&gt;这就像以零点为轴心，旋转这根线，直到它穿过标气点。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结论：这是一个代数计算过程，算出来的线必须完美经过这两个点。误差为 0（在校准那一刻）。&lt;/p&gt;
&lt;h4 id=&#34;场景-b最小二乘法least-squares-找平衡&#34;&gt;场景 B：最小二乘法（Least Squares）—— “找平衡”
&lt;/h4&gt;&lt;p&gt;这是你在配气仪或高精度流量计中用的方法（点数 $N &amp;gt; 2$）。如果你通了零气、20% 浓度、50% 浓度、80% 浓度、100% 浓度。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;直线可能&lt;strong&gt;不会&lt;/strong&gt;完美穿过零点，也不会完美穿过 100% 点。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;它是一条“妥协”的线，试图让所有点的综合误差最小&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么工业分析仪偏爱零点--量程而不是多点拟合&#34;&gt;为什么工业分析仪偏爱“零点 + 量程”而不是“多点拟合”
&lt;/h3&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251218211422881.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251218211422881.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;既然多点拟合更准，为什么像西门子、赛默飞这些分析仪平时维护只做 Zero/Span？&lt;/p&gt;
&lt;h4 id=&#34;原因一漂移的物理意义不同&#34;&gt;原因一：漂移的物理意义不同
&lt;/h4&gt;&lt;p&gt;在传感器领域，误差通常&lt;strong&gt;来源于两个独立的物理现象&lt;/strong&gt;，正好对应 $b$ 和 $k$：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;零点漂移 (Zero Drift) $\rightarrow b$ 的变化
&lt;ul&gt;
&lt;li&gt;物理原因：电子元器件的热噪声、光电倍增管（PMT）的暗电流、背景光的干扰。&lt;/li&gt;
&lt;li&gt;特点：它是一个叠加在所有读数上的固定值。&lt;/li&gt;
&lt;li&gt;对策：只要每天通一次零气，把这个“底色”扣掉就行。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;量程漂移 (Span Drift) $\rightarrow k$ 的变化
&lt;ul&gt;
&lt;li&gt;物理原因：紫外灯老化光强减弱、气体室镜片脏了、检测器灵敏度下降。&lt;/li&gt;
&lt;li&gt;特点：它影响的是变化的比例。&lt;/li&gt;
&lt;li&gt;对策：通入高浓度标气，重新计算放大倍数。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;因为这两种漂移的机理不同，所以在仪表软件里，通常允许&lt;strong&gt;独立校准&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你可以只做零点校准（修正 $b$），而不动斜率 $k$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;这在最小二乘法里很难做到，因为一旦重新拟合，$k$ 和 $b$ 通常都会变&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;原因二法规与成本&#34;&gt;原因二：法规与成本
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;成本：做多点线性化（Linearization）需要购买不同浓度的标气，或者使用昂贵的配气仪。&lt;/li&gt;
&lt;li&gt;法规：如果每天都要做 5 点校准，运维人员会疯掉，标气成本也受不了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;模型的选择&#34;&gt;模型的选择
&lt;/h3&gt;&lt;p&gt;如上所说，在常见的线性传感器领域，误差通常来源于两个独立的物理现象，正好对应 $b$ 和 $k$。对于非线性传感器，可能就需要选择二次多项式拟合（如 [[流量计校准实现过程]] 中所说的&lt;strong&gt;最小二乘法多项式拟合&lt;/strong&gt;）&lt;/p&gt;
&lt;h4 id=&#34;1物理原理金氏定律&#34;&gt;1、物理原理：金氏定律
&lt;/h4&gt;&lt;p&gt;热式流量计的核心原理是测量气体带走热量的速度。描述这一物理过程的经典公式是 &lt;strong&gt;King&amp;rsquo;s Law（金氏定律）&lt;/strong&gt;：$$P = I^2 R = A + B \cdot (Q)^n$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$P$：加热功率（对应传感器的输出电压或电桥电压 $V$）。&lt;/li&gt;
&lt;li&gt;$Q$：质量流量。&lt;/li&gt;
&lt;li&gt;$n$：指数常数，通常在 0.4 ~ 0.5 之间。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;这意味着什么？&lt;/strong&gt; 这意味着传感器输出的电压 $V$ 和流量 $Q$ 之间，&lt;strong&gt;根本不是直线关系&lt;/strong&gt;，而是一个类似于 “根号曲线” 或 “对数曲线” 的关系。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在小流量区：散热极快，电压变化非常剧烈（灵敏度极高，曲线很陡）。&lt;/li&gt;
&lt;li&gt;在大流量区：散热趋于饱和，电压变化变慢（灵敏度下降，曲线变平缓）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果你强行用一条直线（一次方程）去拟合这种“前陡后平”的物理曲线，误差会非常大——要么小流量测不准，要么大流量偏差巨大。&lt;/p&gt;
&lt;h4 id=&#34;2数学特性泰勒级数展开&#34;&gt;2、数学特性：泰勒级数展开
&lt;/h4&gt;&lt;p&gt;虽然 King&amp;rsquo;s Law 是指数关系，但在数学上，&lt;strong&gt;任何光滑的非线性函数，都可以在局部范围内展开成多项式（泰勒级数）&lt;/strong&gt;。$$f(x) \approx a_0 + a_1x + a_2x^2 + a_3x^3 + \dots$$
对于热式流量计这种单调变化（不回头、不震荡）的曲线，&lt;strong&gt;二次（$x^2$）或三次（$x^3$）多项式&lt;/strong&gt; 恰好能完美地模拟由于指数 $n$ 带来的弯曲度。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;二次项 ($ax^2$)：提供了曲线的“弯曲方向”，让拟合线能顺着金氏定律的趋势“弯”过去。&lt;/li&gt;
&lt;li&gt;最小二乘法：能够在这个弯曲的过程中，让所有标定点的整体误差（均方差）最小，自动平衡高低流量段的偏差。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3工程需求宽量程比-high-turndown-ratio&#34;&gt;3、工程需求：宽量程比 (High Turndown Ratio)
&lt;/h4&gt;&lt;p&gt;热式流量计的一个显著优点是&lt;strong&gt;量程比极宽&lt;/strong&gt;，通常能达到 &lt;strong&gt;100:1&lt;/strong&gt; 甚至更高（例如能测 5000 mL/min，也能测 50 mL/min）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;线性拟合的死穴：在 100:1 的宽量程下，直线完全无法兼顾首尾。&lt;/li&gt;
&lt;li&gt;多项式拟合的优势：
&lt;ul&gt;
&lt;li&gt;它允许&lt;strong&gt;变斜率&lt;/strong&gt;（Variable Slope）。&lt;/li&gt;
&lt;li&gt;在低端，多项式的切线斜率大，匹配高灵敏度。&lt;/li&gt;
&lt;li&gt;在高端，多项式的切线斜率小，匹配饱和区。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>变量解耦</title>
        <link>https://teaize.github.io/p/%E5%8F%98%E9%87%8F%E8%A7%A3%E8%80%A6/</link>
        <pubDate>Wed, 17 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8F%98%E9%87%8F%E8%A7%A3%E8%80%A6/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;紫外荧光当中，为了检测荧光灯老化，通常也会设计一个参考检测器，通过这个检测器，消除荧光灯老化的影响。那么这个检测器放在&lt;strong&gt;气室末端&lt;/strong&gt;是否合适？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;变量解耦&#34;&gt;变量解耦
&lt;/h2&gt;&lt;p&gt;分析仪的读数关系如下所示
$$\text{最终读数} \propto \frac{\text{主 PMT 信号 (Sample)}}{\text{参考检测器信号 (Reference)}}$$&lt;/p&gt;
&lt;p&gt;将参考检测器放在气室末端看起来没什么问题。但仔细想想：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参考检测器的作用？监测荧光灯老化，进行补偿，这点没问题&lt;/li&gt;
&lt;li&gt;但是如果通入一定浓度气体，尽管荧光灯没老化，进入参考检测器的信号是不是也变弱了（被吸收了），也就是说参考检测器信号又和浓度扯上了关系&lt;/li&gt;
&lt;li&gt;这就出现一个问题：我们最终的目的是求解浓度，但是求解方程式的另一端又引入了一个和浓度相关的变量&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;更具体一点来说&lt;/strong&gt;，荧光检测的基本物理公式是：&lt;/p&gt;
&lt;p&gt;$$S = I_0 \times C \times k$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$S$：探测器测到的信号（结果）&lt;/li&gt;
&lt;li&gt;$I_0$：光的强度（干扰变量，不稳定的）&lt;/li&gt;
&lt;li&gt;$C$：气体浓度（目标变量，我们要测的）&lt;/li&gt;
&lt;li&gt;$k$：常数&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目标是求出 $C$$$C = \frac{S}{I_0 \times k}$$
核心思想就在这里： 为了解出 $C$，必须获得一个纯净的 $I_0$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这个 $I_0$ 必须包含光源所有的不稳定因素（老化、温度漂移、瞬时抖动）。&lt;/li&gt;
&lt;li&gt;但这个 $I_0$ &lt;strong&gt;绝对不能包含&lt;/strong&gt; $C$（气体浓度）的信息。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果将参考检测器放在气室后：$I_{ref} = I_0 - \text{被气体吸收的光}$。 这里的信号里混进了气体浓度 $C$。光强和浓度这两个变量纠缠在了一起。 如果在公式里除以这个 $I_{ref}$，你是除不干净的，甚至会引入非线性误差。&lt;/p&gt;
&lt;p&gt;所以要&lt;strong&gt;变量解耦&lt;/strong&gt;，要剔除气体浓度对参考检测器的影响，也就是说，将检测器放在不包含样气通道的位置上，避开“气体”的干扰。&lt;/p&gt;
&lt;h2 id=&#34;选择什么位置&#34;&gt;选择什么位置
&lt;/h2&gt;&lt;p&gt;我们先来看一看光路中有哪些东西会“老化”。如果位置选错了，补偿就会失效。&lt;/p&gt;
&lt;h3 id=&#34;包含滤光片的老化&#34;&gt;包含“滤光片”的老化
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;如果不放在滤光片之后： 假设你把参考检测器直接放在灯泡旁边。
&lt;ul&gt;
&lt;li&gt;灯泡亮度的衰减你监测到了。&lt;/li&gt;
&lt;li&gt;但是，紫外线是非常猛烈的，长时间照射下，激发滤光片 也会老化（变浑浊、透过率下降，俗称“由于紫外线导致的途变/Solarization”）。&lt;/li&gt;
&lt;li&gt;后果： 参考检测器觉得“光还挺亮”（因为灯没坏），但实际上透过滤光片后打到气体上的光已经很弱了。补偿算法会认为光强没变，导致测量结果偏低。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;只有放在滤光片之后，参考检测器看到的才是真正用于激发气体的有效光强。&lt;/p&gt;
&lt;h3 id=&#34;避开气体的干扰&#34;&gt;避开“气体”的干扰
&lt;/h3&gt;&lt;p&gt;如上所说，需要变量解耦。推荐位置：激发滤光片之后，气室之前。&lt;/p&gt;
&lt;p&gt;通过安装一片 &lt;strong&gt;分束镜 (Beam Splitter)&lt;/strong&gt; 或者 &lt;strong&gt;石英导光片&lt;/strong&gt;，将经过滤光后的紫外光截取一小部分（例如 5% - 10%）反射给参考检测器，剩下的 90% 继续射入气室。&lt;/p&gt;
&lt;p&gt;$$\text{紫外灯} \rightarrow \text{聚光透镜} \rightarrow \textbf{激发滤光片} \rightarrow \color{red}{\textbf{分束镜}} \rightarrow \text{气室入口窗}$$&lt;/p&gt;
&lt;p&gt;在此处（红色位置）发生分流：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;主光路 (90%)： 直射入气室 $\rightarrow$ 激发 $SO_2$ $\rightarrow$ 产生荧光 $\rightarrow$ 主光电倍增管 (PMT)&lt;/li&gt;
&lt;li&gt;参考光路 (10%)： 反射/折射 $\rightarrow$ 参考光电二极管（也就是参考检测器）&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;场景假设&#34;&gt;场景假设
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;假设参考检测器安装在了气室之后&lt;/strong&gt;，并且分析仪的线性很好。在通入 400ppb 标气的时候进行了校准。那通入 50ppb（也就是比之前校准的气体浓度更低）的标气，分析仪的示数会更低还是更高？&lt;/p&gt;
&lt;p&gt;结论：分析仪示数会偏低&lt;/p&gt;
&lt;h4 id=&#34;设定校准点-400ppb-的状态&#34;&gt;设定校准点 (400ppb) 的状态
&lt;/h4&gt;&lt;p&gt;当通入 400ppb 进行校准时，气体浓度较高，对光的吸收 (Absorption) 较多。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理事实： 400ppb 的气体挡住了一部分光，导致到达末端的参考检测器的光变暗了。&lt;/li&gt;
&lt;li&gt;仪器记忆： 仪器在这个时刻按下了“快照”。它记录下：
&lt;ul&gt;
&lt;li&gt;主信号 = $S_{400}$ (高)&lt;/li&gt;
&lt;li&gt;参考信号 = $R_{400}$ (&lt;strong&gt;较弱&lt;/strong&gt;，因为被吸光了)&lt;/li&gt;
&lt;li&gt;仪器计算出一个系数 $K$，让读数强行等于 400。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;切换到测量点-50ppb-的状态&#34;&gt;切换到测量点 (50ppb) 的状态
&lt;/h4&gt;&lt;p&gt;现在通入 50ppb 的气体。浓度变低了，气体变“透明”了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理事实： 气体对光的吸收大幅减少。&lt;/li&gt;
&lt;li&gt;参考检测器的反应： 因为挡路的气体分子少了，透过去的光多了。所以&lt;strong&gt;参考信号 $R_{50}$ 会比校准时的 $R_{400}$ 更强（变大）&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$读数 = K \times \frac{\text{主信号 (正常变小)}}{\text{参考信号 (反而变大)}}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;分子（主信号）：因为浓度从 400 降到 50，正常按比例下降。&lt;/li&gt;
&lt;li&gt;分母（参考信号）：因为透光率增加，数值&lt;strong&gt;变大&lt;/strong&gt;了。&lt;/li&gt;
&lt;li&gt;K 不变，400ppb 校准过后，K 就不变了&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也就是说，当浓度 $C$ 下降时 $\downarrow$：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;气体吸收减少 $\downarrow$。&lt;/li&gt;
&lt;li&gt;导致 $I_{ref}$ 上升 $\uparrow$（这就是我们说的耦合，参考信号里混进了反向的浓度信息）。&lt;/li&gt;
&lt;li&gt;因为 $I_{ref}$ 在分母上，分母上升，导致最终结果下降 $\downarrow$。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终的结果是：浓度越低，它越压低读数；浓度越高，它越抬高读数，给系统带来非线性误差&lt;/p&gt;
</description>
        </item>
        <item>
        <title>固态继电器</title>
        <link>https://teaize.github.io/p/%E5%9B%BA%E6%80%81%E7%BB%A7%E7%94%B5%E5%99%A8/</link>
        <pubDate>Wed, 17 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%9B%BA%E6%80%81%E7%BB%A7%E7%94%B5%E5%99%A8/</guid>
        <description>&lt;p&gt;这里主要学习一下固态继电器使用的注意事项&lt;/p&gt;
&lt;p&gt;固态继电器（Solid State Relay, &lt;strong&gt;SSR&lt;/strong&gt;）在 CEMS 机柜里绝对是“劳模”级别的存在，特别是在伴热管线控制、转换炉加热、冷凝器制冷片控制这些需要 &lt;strong&gt;PID 精确控温&lt;/strong&gt;（频繁开关）的场合。机械继电器如果像它那样每秒开关一次，两天触点就烧废了&lt;/p&gt;
&lt;p&gt;但它不像机械继电器那样“皮实”，它更像是一个娇气的半导体&lt;/p&gt;
&lt;h3 id=&#34;第一大坑发热&#34;&gt;第一大坑：发热
&lt;/h3&gt;&lt;p&gt;这是 SSR 90% 的死因。很多人以为继电器就是个开关，不需要消耗能量。错！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原理： SSR 的内部不是金属触点，而是可控硅（Triac）或 MOS 管。当电流流过它时，它会&lt;strong&gt;有大约 1.2V ~ 1.6V 的电压降&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;算笔账：
&lt;ul&gt;
&lt;li&gt;假设你控制一条 50 米的伴热管，电流是 10A。&lt;/li&gt;
&lt;li&gt;SSR 产生的热量 $P = U \times I = 1.5V \times 10A = \mathbf{15W}$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;后果：
&lt;ul&gt;
&lt;li&gt;别小看 15W。在一个密闭的 CEMS 机柜里，如果没有散热片，这 15W 的热量会让 SSR 自身温度在几分钟内飙升到 100°C 以上。&lt;/li&gt;
&lt;li&gt;一旦超过结温（通常 125°C），SSR 瞬间击穿损坏（通常是永久导通，加热棒狂烧不止）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;避坑指南：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;必须加散热片： &lt;strong&gt;电流超过 5A，就必须把 SSR 锁在铝制散热片上&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;涂硅脂： SSR 底部和散热片之间，&lt;strong&gt;必须涂导热硅脂&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;通风： 散热片的齿要顺着风道，不能被线槽挡死。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第二大坑漏电流-leakage-current&#34;&gt;第二大坑：漏电流 (Leakage Current)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;现象：
&lt;ul&gt;
&lt;li&gt;SSR 输入端明明已经断电（指示灯灭了）。你拿着万用表去量 SSR 的输出端（负载端），竟然测到了 &lt;strong&gt;220V 电压&lt;/strong&gt;！&lt;/li&gt;
&lt;li&gt;或者，如果你接的是一个很小的指示灯，那个灯竟然在“关”的时候还发着微弱的“鬼火”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;原因：
&lt;ul&gt;
&lt;li&gt;半导体器件没有绝对的绝缘。SSR 内部通常并联了一个 &lt;strong&gt;RC 阻容吸收回路&lt;/strong&gt;（为了保护它不被浪涌打死）。&lt;/li&gt;
&lt;li&gt;这个回路在关断时，依然会有 mA 级别 的漏电流流过。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;避坑指南：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;别被万用表骗了： 万用表内阻很高，测出的 220V 是“虚电”。只要接上负载（比如加热棒），电压立马归零。&lt;/li&gt;
&lt;li&gt;触电警告： 千万不要以为 SSR 关了就安全了而去摸接线柱！ 那个漏电流虽然小，但电压是实打实的，会电人。维修时必须拉下空气开关。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第三大坑短路就是秒杀&#34;&gt;第三大坑：短路就是“秒杀”
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;机械继电器： 如果负载短路了，机械继电器可能只是触点粘连，或者还能扛个几秒钟等空开跳闸。&lt;/li&gt;
&lt;li&gt;SSR： 它是半导体。&lt;strong&gt;它比保险丝烧得还快。&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;如果加热棒内部短路，巨大的电流涌过来，普通的空气开关（断路器）还没来得及跳闸（需要几十毫秒），SSR 内部的可控硅在 &lt;strong&gt;1 毫秒&lt;/strong&gt; 内就已经炸了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;避坑指南：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;普通空开保护不了 SSR。&lt;/li&gt;
&lt;li&gt;如果你这路负载极其昂贵或易短路，必须串联“快速熔断器” (Fast Blow Fuse / 半导体保护熔断器)。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第四大坑选型选错了过零还是随机&#34;&gt;第四大坑：选型选错了“过零”还是“随机”
&lt;/h3&gt;&lt;p&gt;在 CEMS 里，我们通常控制的是加热棒（电阻负载）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;过零触发型 (Zero-Crossing)：
&lt;ul&gt;
&lt;li&gt;原理： 你给信号让它开，它不会马上开，而是等到交流电的正弦波&lt;strong&gt;走到 0V 那个点&lt;/strong&gt;时才导通。
&lt;ul&gt;
&lt;li&gt;因为它是在 0V 时接通的，所以没有冲击，没有火花，没有噪音&lt;/li&gt;
&lt;li&gt;代价是它会有延迟。最长需要等待半个周期（在 50Hz 电网下，最多延迟 10 毫秒）。但对于加热棒来说，10 毫秒完全可以忽略不计。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;优点： 干扰极小。不会对电网产生高频噪声，不会干扰你灵敏的弱电信号。&lt;/li&gt;
&lt;li&gt;CEMS 必选： 控制伴热管、加热炉，&lt;strong&gt;必须选过零型&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;随机触发型 (Random Turn-on)：
&lt;ul&gt;
&lt;li&gt;原理： 给信号立马导通，不管电压在哪。&lt;/li&gt;
&lt;li&gt;缺点： 会产生巨大的电磁干扰。&lt;/li&gt;
&lt;li&gt;用途： 只有在控制感性负载（如电机、调节光亮度）时才偶尔用到。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;p&gt;当你设计或维护 CEMS 里的 SSR 回路时，脑子里过一遍这张检查清单：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;摸温度：&lt;/strong&gt; 设备运行半小时后，去摸一下 SSR 的散热片。如果烫手不敢摸（&amp;gt;60°C），说明散热不够，赶紧换大散热片或加风扇。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;留余量：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;电阻负载（加热棒）：按 &lt;strong&gt;2 倍&lt;/strong&gt; 选型。比如负载 10A，选 25A 的 SSR。&lt;/li&gt;
&lt;li&gt;感性负载（电机/泵）：按 &lt;strong&gt;6-10 倍&lt;/strong&gt; 选型。电机启动电流大，SSR 极易被秒杀。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;看接线：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;输入端 ： 通常是 3-32V DC。注意&lt;strong&gt;正负极&lt;/strong&gt;别接反（虽然大多有保护，但接反了不工作）。&lt;/li&gt;
&lt;li&gt;输出端： 控制交流电时，不分正负，但千万别把 220V 接到输入端去了，那是瞬间放烟花。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>信噪比-激发光与荧光</title>
        <link>https://teaize.github.io/p/%E4%BF%A1%E5%99%AA%E6%AF%94-%E6%BF%80%E5%8F%91%E5%85%89%E4%B8%8E%E8%8D%A7%E5%85%89/</link>
        <pubDate>Wed, 17 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BF%A1%E5%99%AA%E6%AF%94-%E6%BF%80%E5%8F%91%E5%85%89%E4%B8%8E%E8%8D%A7%E5%85%89/</guid>
        <description>&lt;p&gt;这里以二氧化硫紫外荧光分析仪为例。气室中存在两类光：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;激发光 (Excitation Light) —— 从灯泡射出来的紫外光（如 214nm），强度极大&lt;/li&gt;
&lt;li&gt;荧光信号 (Fluorescence Signal) —— 气体分子发出的光（如 330nm），强度极弱，是我们真正想看的&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;光陷阱light-trapbeam-dump&#34;&gt;光陷阱（Light Trap/Beam Dump）
&lt;/h3&gt;&lt;p&gt;光陷阱是给“激发光”准备的，它通常位于光源的正对面。&lt;/p&gt;
&lt;p&gt;目的尽可能多的吸收掉激发光，减少激发光的反射。激发光穿过气体后，剩下的光依然非常强。如果直接打在平坦的壁上反射回来，会形成巨大的&lt;strong&gt;杂散光背景&lt;/strong&gt;。所以，必须在一个深深的黑洞（通常设计成牛角状，叫 Rayleigh Horn）里把它“吞噬”掉，不让它弹回来。&lt;/p&gt;
&lt;p&gt;这个吃光的结构，在光学工程里有一个非常经典的名字，叫 &lt;strong&gt;伍德号角 (Wood&amp;rsquo;s Horn)&lt;/strong&gt;，有时也叫 &lt;strong&gt;瑞利号角 (Rayleigh Horn)&lt;/strong&gt;，它是一个是一个&lt;strong&gt;弯曲的、渐细的牛角状结构&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251217101922.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251217101922.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;荧光信号&#34;&gt;荧光信号
&lt;/h3&gt;&lt;p&gt;现在面临的问题是，如何处理荧光信号。&lt;/p&gt;
&lt;p&gt;这里需要有一个基本概念：荧光现象是&lt;strong&gt;各向同性&lt;/strong&gt;的（Isotropic），当一个 $SO_2$ 分子被激发后，它发出的荧光（光子）是朝&lt;strong&gt;四面八方&lt;/strong&gt;随机发射的，但通常探测器（PMT）只安装在气室的一侧。&lt;/p&gt;
&lt;p&gt;有两种策略：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;探测器只吸收直接的光，不吸收经过反射的荧光&lt;/li&gt;
&lt;li&gt;探测器也吸收反射的荧光&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;探测器只吸收直接的光&#34;&gt;探测器只吸收直接的光
&lt;/h4&gt;&lt;p&gt;也就是全黑设计&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;设计： 气室内部全部做&lt;strong&gt;发黑处理&lt;/strong&gt;（阳极氧化黑或黑色特氟龙），且设计有复杂的光阑（Baffles）和光陷阱。&lt;/li&gt;
&lt;li&gt;原理：
&lt;ul&gt;
&lt;li&gt;任何打到墙壁上的光（无论是激发光还是荧光），统统吸收掉。&lt;/li&gt;
&lt;li&gt;探测器&lt;strong&gt;只接收&lt;/strong&gt;气体分子直接飞向探测器的那部分荧光。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;优点： 背景噪声（Noise）极低，零点非常稳。&lt;/li&gt;
&lt;li&gt;缺点： 信号强度（Signal）很弱，灵敏度低。&lt;/li&gt;
&lt;li&gt;应用： 适合量程较大（ppm 级），或者光源功率非常强（如激光/强氙灯）的场合。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;探测器也吸收反射的荧光&#34;&gt;探测器也吸收反射的荧光
&lt;/h4&gt;&lt;p&gt;这里也有两种处理方法：镜面反射 OR 漫反射&lt;/p&gt;
&lt;p&gt;这里是用的漫反射，为什么？为了&lt;strong&gt;消除光斑不均匀&lt;/strong&gt;的影响&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;均匀化：&lt;/strong&gt; 镜面反射会形成特定的光路，如果在某个角度恰好有一束强光反射进探测器，可能会导致局部饱和或对震动敏感。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;积分效应：&lt;/strong&gt; 漫反射材料（PTFE）会让光线在内部经历多次无序散射，&lt;strong&gt;相当于把整个气室变成了一个均匀发光的“灯泡”&lt;/strong&gt;。这样，无论气体分子在气室的哪个角落发光，被探测器收集到的概率都比较接近。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;就像在漆黑的楼道里，用手机打开手电筒照着楼梯（局部强亮光），和用手机手电筒照着楼道天花板的白色墙壁（漫反射，整个楼道都变亮了）&lt;/p&gt;
&lt;p&gt;那这里就用到高反设计&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;设计： 气室侧壁用 &lt;strong&gt;烧结 PTFE&lt;/strong&gt;（白色），但在光源对面依然保留&lt;strong&gt;黑色光陷阱&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;原理：
&lt;ul&gt;
&lt;li&gt;对激发光： 用光陷阱吸收（必须要杀掉，不能乱反射）。&lt;/li&gt;
&lt;li&gt;对荧光： 侧壁不仅不吸收，反而把背离探测器飞的荧光“弹”回来，赶进探测器。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;优点： 信号强度暴增（通常能提高 5-10 倍），适合做痕量分析（ppb 级）。&lt;/li&gt;
&lt;li&gt;缺点： 制造工艺难，如果光陷阱没设计好，反射壁会把杂散光也放大了。&lt;/li&gt;
&lt;li&gt;应用： 现代高端环保监测（如 Thermo 43i, Teledyne T100）的主流方案，因为环保要求越来越严，需要测很低浓度的 $SO_2$。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;信噪比最大化&#34;&gt;信噪比最大化
&lt;/h3&gt;&lt;p&gt;激发光和荧光信号这种巨大的能量差异，决定了我们必须采用两套截然不同的策略：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;激发光 (Excitation) = &lt;strong&gt;“强干扰”&lt;/strong&gt; (是噪音源，考虑杂散光抑制)，“斩尽杀绝”&lt;/li&gt;
&lt;li&gt;荧光信号 (Fluorescence) = &lt;strong&gt;“弱信号”&lt;/strong&gt; (是有效数据，考虑光收集效率)，“颗粒归仓”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;很多初学者设计仪器时，往往只关注“怎么让信号更强”（加大光源功率），却忽略了“怎么让背景更黑”。
高水平设计的特征是： 与其把光源功率加大 10 倍（导致杂散光也大 10 倍，信噪比没变，还增加了热量），不如把光陷阱做得更深一点，或者把滤光片选得更好一点。&lt;/p&gt;
&lt;p&gt;只要把背景噪声压下去，哪怕信号很弱，也能测得非常准。这就是为什么在痕量分析（ppb 级）中，光陷阱的设计比光源的选择更体现水平。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>关于金属镀层</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E9%87%91%E5%B1%9E%E9%95%80%E5%B1%82/</link>
        <pubDate>Tue, 16 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E9%87%91%E5%B1%9E%E9%95%80%E5%B1%82/</guid>
        <description>&lt;p&gt;在 CEMS 和气体分析仪领域，气室通常形状复杂，且直接接触腐蚀性气体（如 $SO_2$, $NO_x$, $HCl$），因此对镀层的要求远高于普通机械零件&lt;/p&gt;
&lt;p&gt;为了让新手对镀层建立概念，接下来从&lt;strong&gt;为什么要镀、镀什么（工艺）、镀多厚（参数）以及如何向供应商提需求 ER}如何向供应商提需求&lt;/strong&gt;这四个维度来拆解&lt;/p&gt;
&lt;h3 id=&#34;核心概念为什么气室要镀层&#34;&gt;核心概念：为什么气室要镀层
&lt;/h3&gt;&lt;p&gt;普通的铝合金或不锈钢在特定环境下是不够用的。镀层的目的主要有三个：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;防腐蚀&lt;/strong&gt;： 样气中往往含有水分和酸性气体（$H_2SO_4$, $HNO_3$）。铝合金气室一旦腐蚀，产生的盐类粉末会污染镜片，导致漂移。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;惰性化/防吸附&lt;/strong&gt;： 金属表面在微观上是粗糙多孔的，容易“抓”住气体分子（吸附）。这会导致测量响应变慢（拖尾）。镀层可以填平微孔，使表面更光滑、更惰性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;光学反射率&lt;/strong&gt;： 对于红外（NDIR）或紫外（UV）分析仪，气室内壁往往充当光路的一部分。镀金或抛光镀镍可以提高光通量，提升信噪比。&lt;/li&gt;
&lt;li&gt;除了反射光线，有的镀层的作用是用来吸收散射光（例如紫外荧光 $SO_2$）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;关键工艺电镀-vs-化学镀&#34;&gt;关键工艺：电镀 vs. 化学镀
&lt;/h3&gt;&lt;p&gt;这是初学者最容易混淆的概念。对于分析仪气室，90% 的情况使用的是“化学镀镍”，而不是“电镀镍”。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;特性&lt;/th&gt;
          &lt;th&gt;电镀镍 (Electro-plating)&lt;/th&gt;
          &lt;th&gt;化学镀镍 (Electroless Nickel / ENP)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;原理&lt;/td&gt;
          &lt;td&gt;依靠电流沉积金属。&lt;/td&gt;
          &lt;td&gt;依靠化学还原反应沉积金属（自催化）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;形状适应性&lt;/td&gt;
          &lt;td&gt;差。 电流有“尖端效应”，&lt;strong&gt;导致棱角处镀层厚，深孔/内腔（如气室内部）根本镀不上&lt;/strong&gt;（法拉第笼效应）。&lt;/td&gt;
          &lt;td&gt;极好。 只要药水能流到的地方，镀层就一样厚。&lt;strong&gt;非常适合形状复杂的气室&lt;/strong&gt;。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;硬度与耐磨&lt;/td&gt;
          &lt;td&gt;较软。&lt;/td&gt;
          &lt;td&gt;硬度高，耐磨性好。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;分析仪应用&lt;/td&gt;
          &lt;td&gt;仅用于外壳、接插件。&lt;/td&gt;
          &lt;td&gt;气室、流路块、阀体的首选工艺。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;以后提到气室镀镍，请默认指代 化学镀镍，特别是 高磷化学镍（High-Phosphorus EN）。&lt;/p&gt;
&lt;h3 id=&#34;参数概念镀多厚thickness&#34;&gt;参数概念：镀多厚？（Thickness）
&lt;/h3&gt;&lt;p&gt;镀层厚度通常以 &lt;strong&gt;微米 ($\mu m$)&lt;/strong&gt; 为单位。厚度不是越厚越好，太厚会导致尺寸超差（螺纹拧不进）或镀层内应力过大导致开裂。&lt;/p&gt;
&lt;p&gt;在仪器仪表行业，常见的标准如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$3 - 5 \mu m$ (装饰/防变色)：
&lt;ul&gt;
&lt;li&gt;用于：仅为了铝材不氧化，或者外观好看。&lt;/li&gt;
&lt;li&gt;分析仪应用：很少用于内部流路。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;$10 - 15 \mu m$ (中等防腐 - 行业标准)：
&lt;ul&gt;
&lt;li&gt;用于：大多数常规气体分析仪气室（如测量 $CO$, $CO_2$）。&lt;/li&gt;
&lt;li&gt;特点：能保证镀层无针孔（Pore-free），起到良好的物理隔离作用。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;$20 - 30 \mu m$ (高防腐/耐磨)：
&lt;ul&gt;
&lt;li&gt;用于：测量腐蚀性气体（如高浓度 $SO_2$, $HCl$）或有机械摩擦的部件。&lt;/li&gt;
&lt;li&gt;注意：做到这个厚度需要控制公差，设计时要预留余量。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;除了镍还有什么&#34;&gt;除了镍，还有什么？
&lt;/h3&gt;&lt;p&gt;除了化学镀镍，在高端分析仪中还会遇到以下两种“镀层”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;镀金（Gold Plating）：
&lt;ul&gt;
&lt;li&gt;应用： 红外气体分析仪（NDIR）的反射气室。&lt;/li&gt;
&lt;li&gt;作用： &lt;strong&gt;金对红外线的反射率极高&lt;/strong&gt;，且化学性质极其稳定（不与任何酸反应）。&lt;/li&gt;
&lt;li&gt;工艺： &lt;strong&gt;通常先镀一层镍做底，再镀一层极薄的金&lt;/strong&gt;（Flash Gold）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;钝化涂层（如 SilcoNert / Sulfinert）：
&lt;ul&gt;
&lt;li&gt;应用： 微量/痕量硫化物分析（如 ppb 级别的 $H_2S$）。&lt;/li&gt;
&lt;li&gt;本质： 这不是传统的“镀”，而是化学气相沉积（CVD）的一层&lt;strong&gt;非晶硅&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;作用： 极度的化学惰性，防止硫化物被吸附。如果您的分析仪响应时间慢，往往就是因为没有做这个处理。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;如何向供应商提技术要求&#34;&gt;如何向供应商提技术要求
&lt;/h3&gt;&lt;p&gt;如果您需要发图纸给加工厂，不能只写“表面镀镍”。为了显得专业并保证质量，可这样标注：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;表面处理&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;化学镀镍&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;材料&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;高磷镍&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;High&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Phosphorus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;——&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;注&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;高磷耐腐蚀最好&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;且无磁性&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;厚度&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt; \&lt;span class=&#34;n&#34;&gt;mu&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;附着力&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;满足&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ASTM&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B571&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;热震实验要求&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;不脱皮&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;不起泡&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;后处理&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;需进行热处理&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;烘烤&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;以去氢脆&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;外观&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;气室内部光亮&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;无肉眼可见的麻点&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;漏镀&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;扩展资料&#34;&gt;扩展资料
&lt;/h3&gt;&lt;p&gt;如上所说，金对红外线的反射率极高（反射率&amp;gt;98%），但在紫外波段（尤其是 &amp;lt;400nm），金的反射率会断崖式下跌（像吸收体一样），不仅浪费光能，还会发热。&lt;/p&gt;
&lt;p&gt;那在紫外波段，推荐如何做呢：&lt;/p&gt;
&lt;h4 id=&#34;功能需求漫反射&#34;&gt;功能需求：漫反射
&lt;/h4&gt;&lt;p&gt;例如紫外荧光法（UV Fluorescence）测 $SO_2$ 的气室。推荐工艺： &lt;strong&gt;烧结 PTFE 内衬 或 涂层 (如 Spectralon 类材料)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;注意：这里有两种处理思路：【1】高反设计：白色 PTFE 内衬，让 PMT 收集到尽可能多的荧光信号；【2】全黑设计：打到墙壁上的光都统统吸收掉。这里讲的是高反设计【1】&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原理：
&lt;ul&gt;
&lt;li&gt;在荧光分析中，我们不是要光“折射”，而是要光在气室里“均匀散射”，让探测器收集到尽可能多的荧光信号。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;性能：
&lt;ul&gt;
&lt;li&gt;高纯度的烧结 PTFE （白色）在紫外波段的漫反射率可以达到 95% - 99%，远高于任何金属镀层。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;化学优势：
&lt;ul&gt;
&lt;li&gt;PTFE（特氟龙）本身就是“塑料王”，对 $SO_2, H_2S$ 等腐蚀性气体完全免疫，且不吸附，是 $SO_2$ 痕量分析的终极解决方案。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;功能需求镜面反射&#34;&gt;功能需求：镜面反射
&lt;/h4&gt;&lt;p&gt;适用场景： 需要光线像打在镜子上一样反射（如 NDUV 的反射镜、长光程池的端镜）。 推荐工艺： 真空蒸发镀铝 + 氟化镁 (MgF2) 保护膜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为什么是铝？
&lt;ul&gt;
&lt;li&gt;铝是全波段的“万金油”，它是唯一在 紫外 ($200 - 400 nm$) 到红外都有极高反射率（&amp;gt;90%）的金属。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;为什么要加 MgF2？
&lt;ul&gt;
&lt;li&gt;铝极易氧化，&lt;strong&gt;氧化铝在紫外区的吸收很大&lt;/strong&gt;。必须在镀铝后立刻镀一层极薄的氟化镁 ($MgF_2$)。它不仅防氧化，还能在紫外区起到“增透/增反”的光学干涉作用，把紫外反射率拉高到 90% 以上。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点：
&lt;ul&gt;
&lt;li&gt;这种镀层通常是在光学玻璃上做的，耐腐蚀性不如实体金属强。如果是直接接触高腐蚀性样气，通常会把反射镜做在密封窗片（Window）的后面，不让它直接接触气体。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;总结建议表&#34;&gt;总结建议表
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;分析仪类型&lt;/th&gt;
          &lt;th&gt;波段&lt;/th&gt;
          &lt;th&gt;气室/部件功能&lt;/th&gt;
          &lt;th&gt;绝对禁止&lt;/th&gt;
          &lt;th&gt;推荐工艺&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;红外 (NDIR)&lt;/td&gt;
          &lt;td&gt;IR&lt;/td&gt;
          &lt;td&gt;反射光线&lt;/td&gt;
          &lt;td&gt;阳极氧化铝 (吸红外)&lt;/td&gt;
          &lt;td&gt;镀金 (Gold Plating)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;紫外 (NDUV)&lt;/td&gt;
          &lt;td&gt;UV&lt;/td&gt;
          &lt;td&gt;镜面反射光路&lt;/td&gt;
          &lt;td&gt;镀金、镀银&lt;/td&gt;
          &lt;td&gt;镀铝 + $MgF_2$&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;紫外荧光 ($SO_2$)&lt;/td&gt;
          &lt;td&gt;UV&lt;/td&gt;
          &lt;td&gt;收集散射光信号&lt;/td&gt;
          &lt;td&gt;黑色阳极氧化&lt;/td&gt;
          &lt;td&gt;PTFE (烧结/涂层)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;通用流路&lt;/td&gt;
          &lt;td&gt;-&lt;/td&gt;
          &lt;td&gt;仅传输气体，防腐&lt;/td&gt;
          &lt;td&gt;普通电镀镍&lt;/td&gt;
          &lt;td&gt;高磷化学镍 / 硅钝化&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>恒流源与恒压源</title>
        <link>https://teaize.github.io/p/%E6%81%92%E6%B5%81%E6%BA%90%E4%B8%8E%E6%81%92%E5%8E%8B%E6%BA%90/</link>
        <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%81%92%E6%B5%81%E6%BA%90%E4%B8%8E%E6%81%92%E5%8E%8B%E6%BA%90/</guid>
        <description>&lt;p&gt;弄懂&lt;strong&gt;恒压源 (Constant Voltage, CV)&lt;/strong&gt; 和 &lt;strong&gt;恒流源 (Constant Current, CC)&lt;/strong&gt;，是从“只会接线”进阶到“能设计系统”的关键一步。&lt;/p&gt;
&lt;p&gt;其实，我们生活中接触的 99% 的电源都是恒压源，而恒流源通常隐藏在设备内部，专门服务于特定的器件。&lt;/p&gt;
&lt;h2 id=&#34;一-恒压源-cv生活中最熟悉的老朋友&#34;&gt;一、 恒压源 (CV)：生活中最熟悉的“老朋友”
&lt;/h2&gt;&lt;h3 id=&#34;1-它的性格&#34;&gt;1. 它的性格
&lt;/h3&gt;&lt;p&gt;“不管你怎么用水，我的水压永远不变。”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;定义：无论负载电阻 ($R$) 怎么变，输出端的&lt;strong&gt;电压 ($U$) 保持不变&lt;/strong&gt;，电流 ($I$) 随负载需求自动变化。&lt;/li&gt;
&lt;li&gt;公式：$U = \text{Const}$，$I = U / R$。&lt;/li&gt;
&lt;li&gt;例子：你家墙上的 &lt;strong&gt;220V 插座&lt;/strong&gt;、手机充电器 &lt;strong&gt;5V&lt;/strong&gt;、干电池 &lt;strong&gt;1.5V&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-水流比方&#34;&gt;2. 水流比方
&lt;/h3&gt;&lt;p&gt;想象一个巨大的水库（恒压源）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你接一根细管子（大电阻），水流很小。&lt;/li&gt;
&lt;li&gt;你接一根粗管子（小电阻），水流很大。&lt;/li&gt;
&lt;li&gt;核心：不管你接什么管子，水库的水位高度（电压）是不会变的。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-应用场景&#34;&gt;3. 应用场景
&lt;/h3&gt;&lt;p&gt;几乎所有给芯片供电的场合。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;单片机 (MCU)：必须稳定在 3.3V 或 5V，电压高了烧芯片，低了不工作。&lt;/li&gt;
&lt;li&gt;电机：通常用恒压供电（速度通过 PWM 斩波来调，而不是直接调源电压）。&lt;/li&gt;
&lt;li&gt;逻辑电路：TTL、CMOS 电平都需要稳定的电压轨。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;二-恒流源-cc专治坏脾气的专家&#34;&gt;二、 恒流源 (CC)：专治“坏脾气”的专家
&lt;/h2&gt;&lt;h3 id=&#34;1-它的性格-1&#34;&gt;1. 它的性格
&lt;/h3&gt;&lt;p&gt;“不管路有多难走，我必须保证每秒钟流过去的水量一样多。”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;定义：无论负载电阻 ($R$) 怎么变，输出端的&lt;strong&gt;电流 ($I$) 保持不变&lt;/strong&gt;，为了维持这个电流，电压 ($U$) 会自动调整。&lt;/li&gt;
&lt;li&gt;公式：$I = \text{Const}$，$U = I \times R$。&lt;/li&gt;
&lt;li&gt;反直觉点：如果负载电阻 $R$ 变大，为了维持 $I$ 不变，恒流源必须&lt;strong&gt;拼命提高电压&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-水流比方-1&#34;&gt;2. 水流比方
&lt;/h3&gt;&lt;p&gt;想象一个针筒注射器，有一个机械臂以恒定的速度推活塞。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果针头很粗（阻力小），推起来很轻松（电压低）。&lt;/li&gt;
&lt;li&gt;如果针头堵住了（阻力大），机械臂会用力推，甚至把针筒压爆（电压飙升），只为了保证药液流出的速度不变。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-为什么需要它核心应用场景&#34;&gt;3. 为什么需要它？（核心应用场景）
&lt;/h3&gt;&lt;p&gt;恒流源通常用于驱动那些&lt;strong&gt;对电流敏感&lt;/strong&gt;，或者&lt;strong&gt;自身电阻会剧烈变化&lt;/strong&gt;的器件。&lt;/p&gt;
&lt;h4 id=&#34;场景-a驱动-led-发光二极管--最经典的应用&#34;&gt;场景 A：驱动 LED (发光二极管) —— 最经典的应用
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原因：LED 的亮度直接取决于电流，而不是电压。&lt;/li&gt;
&lt;li&gt;风险：LED 是非线性器件。电压只要升高一点点（比如从 3.0V 到 3.2V），电流可能会翻倍！&lt;strong&gt;如果用恒压源驱动，随着 LED 发热，它的导通电压会下降，电流会进一步暴增，导致 “热失控” 烧毁&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;解决：必须用恒流源。不管 LED 热了还是冷了，我都只给它 &lt;strong&gt;20mA&lt;/strong&gt;，它就永远安全且亮度恒定。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例如二氧化硫紫外荧光分析仪当中，荧光灯&lt;strong&gt;锌（Zn）灯&lt;/strong&gt;就是使用的恒流源。这类气体放电灯和 LED 一样，具有“负阻特性”或极陡峭的伏安特性。如果电压稍微升高一点点，电流就会暴增。&lt;/p&gt;
&lt;h4 id=&#34;场景-b锂电池充电-cc-cv-模式&#34;&gt;场景 B：锂电池充电 (CC-CV 模式)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原因：当电池电量耗尽（比如 3.0V）时，如果你直接用 4.2V 的恒压源去充，压差太大 ($4.2 - 3.0 = 1.2V$)，电池内阻又极小，瞬间电流会巨大无比，电池会爆炸。&lt;/li&gt;
&lt;li&gt;解决：
&lt;ol&gt;
&lt;li&gt;第一阶段 (CC)：先用恒流（比如 1A）慢慢充，此时电池电压会慢慢上升。&lt;/li&gt;
&lt;li&gt;第二阶段 (CV)：等电池电压快到了（比如 4.15V），再切换成&lt;strong&gt;恒压&lt;/strong&gt;充，直到电流慢慢降为 0。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;场景-c工业-4-20ma-传感器-cems-系统里全是这个&#34;&gt;场景 C：工业 4-20mA 传感器 (CEMS 系统里全是这个)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原因：工厂里的线缆可能长达几百米，导线本身有电阻。如果传输电压信号，到了终点电压就衰减了（$U_{end} = U_{source} - I \times R_{wire}$）。&lt;/li&gt;
&lt;li&gt;解决：传输&lt;strong&gt;电流信号&lt;/strong&gt;。因为串联回路里，&lt;strong&gt;电流处处相等&lt;/strong&gt;！不管导线是 10 米 还是 1000 米，恒流源发出的 4mA，到了接收端依然是 4mA。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;三总结&#34;&gt;三、总结
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;恒压源 (CV)：你是芯片、电机，你需要稳定的环境，我给你&lt;strong&gt;稳压&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;恒流源 (CC)：你是&lt;strong&gt;LED、电池、远程传感器&lt;/strong&gt;，你对电流敏感，或者由于电阻不稳定，我给你&lt;strong&gt;稳流&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在实际的&lt;strong&gt;实验室直流电源&lt;/strong&gt;上，通常都有 &lt;code&gt;CV&lt;/code&gt; 和 &lt;code&gt;CC&lt;/code&gt; 两个灯。当你设置好电压（比如 5V）和限流（比如 1A）后：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;负载小，它是 5V 恒压源（CV 灯亮）。&lt;/li&gt;
&lt;li&gt;负载短路或太大，它自动变成 1A 恒流源（CC 灯亮），保护电路不烧毁。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>PMOS防反接电路设计</title>
        <link>https://teaize.github.io/p/pmos%E9%98%B2%E5%8F%8D%E6%8E%A5%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1/</link>
        <pubDate>Sun, 14 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/pmos%E9%98%B2%E5%8F%8D%E6%8E%A5%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1/</guid>
        <description>&lt;p&gt;普通的二极管防反接虽然简单，但有一个致命弱点：&lt;strong&gt;压降&lt;/strong&gt;（约 0.7V）。 如果你是电池供电，这 0.7V 的损耗太心疼了；如果是大电流（比如 5A），发热就是 $0.7V \times 5A = 3.5W$，甚至需要加散热片。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PMOS 防反接电路&lt;/strong&gt; 就是为了解决这个问题而生的，它能做到&lt;strong&gt;近乎零压降&lt;/strong&gt;的保护。&lt;/p&gt;
&lt;h3 id=&#34;1-核心原理图注意这里反直觉&#34;&gt;1. 核心原理图（注意这里反直觉！）
&lt;/h3&gt;&lt;p&gt;这是 PMOS 防反接最容易搞错的地方：它的接法和普通开关电路是“反”的（开关电源接法时，S 级接在电源端，这里是 D 级接在电源端）。在防反接电路中，我们&lt;strong&gt;利用了 PMOS 内部自带的 体二极管（Body Diode） 来辅助启动&lt;/strong&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输入正极&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Vin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;                                &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输出&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Vout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                                           &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;+------------------+&lt;/span&gt;     &lt;span class=&#34;o&#34;&gt;+------------------+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                  &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;     &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                  &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;              &lt;span class=&#34;n&#34;&gt;D&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;漏极&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;S&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;源极&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;+---------+&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;PMOS&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Q1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;+---------+&lt;/span&gt;                &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                     &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;G&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;栅极&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                     &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                     &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;+--------+&lt;/span&gt;                     &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                              &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;           &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;电阻&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;             &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                              &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GND&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;                            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                                           &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输入地&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GND&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;----------------------------------&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输出地&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GND&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;关键连接点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入电源 接 漏极 (Drain, D)。&lt;/li&gt;
&lt;li&gt;负载/输出 接 源极 (Source, S)。&lt;/li&gt;
&lt;li&gt;栅极 (Gate, G) 通过电阻接 地 (GND)。&lt;/li&gt;
&lt;li&gt;体二极管方向：从 D 指向 S（正向）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-工作原理详解&#34;&gt;2. 工作原理详解
&lt;/h3&gt;&lt;p&gt;让我们把时间拆解成微秒级，看看上电瞬间发生了什么：&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214112154710.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214112154710.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;a-正确连接时正常工作&#34;&gt;A. 正确连接时（正常工作）
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;第一阶段：体二极管导通
刚插上电池时，PMOS 还没醒。电流顺着 PMOS 内部的 体二极管（从 D 到 S）流向负载。
&lt;ul&gt;
&lt;li&gt;此时输出电压 $V_{out} \approx V_{in} - 0.7V$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键点&lt;/strong&gt;：因为 $S$ 极有了电压（比如 11.3V），而 $G$ 极被电阻拉到了 GND（0V）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第二阶段：MOS 管开启
&lt;ul&gt;
&lt;li&gt;此时，$V_{GS} = V_G - V_S = 0V - 11.3V = -11.3V$。&lt;/li&gt;
&lt;li&gt;因为 $V_{GS}$ 变成了负值，且绝对值远大于开启阈值（$V_{th}$，通常是 -2V 左右），PMOS &lt;strong&gt;完全导通&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第三阶段：低损耗运行
&lt;ul&gt;
&lt;li&gt;一旦 PMOS 导通，电流就会选择走 “低阻抗通道”（$R_{DS(on)}$，比如 $0.01\Omega$）（也就相当于将直接 PMOS 直接短路了），而不走那条拥挤的体二极管通道。&lt;/li&gt;
&lt;li&gt;结果：压降变得极小。$V_{drop} = I \times R_{DS(on)} = 5A \times 0.01\Omega = 0.05V$。&lt;/li&gt;
&lt;li&gt;对比二极管的 0.7V，这简直是完美的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;b-反接时保护生效&#34;&gt;B. 反接时（保护生效）
&lt;/h4&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214114142324.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214114142324.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;输入变成了负压（或者地接正，正接地）。&lt;/li&gt;
&lt;li&gt;体二极管处于反向截止状态，电流过不去。&lt;/li&gt;
&lt;li&gt;$V_{GS}$ 状态：由于 $D$ 极电位低，$S$ 极没电，$G$ 极通过电阻接地。栅极和源极之间没有建立起足够的负压差（甚至 $P$），PMOS 保持 关断 (OFF)。&lt;/li&gt;
&lt;li&gt;结果：电路完全切断，保护了后级电路。&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输入端&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Vin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;                              &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输出端&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Vout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;接了电池负极&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;                        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;期望是&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                                       &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;D&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;漏极&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;                       &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;S&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;源极&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;+---------------------------------------+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;体二极管&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Body&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Diode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;      &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;__&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;截止&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;                 &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;        &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;   \  &lt;span class=&#34;o&#34;&gt;&amp;lt;--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;也就是&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;D指向S&lt;/span&gt;       &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;       &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_____&lt;/span&gt;\     &lt;span class=&#34;n&#34;&gt;但此时&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;D是负压&lt;/span&gt;      &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;S是0V&lt;/span&gt;               &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;所以二极管不通&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;!&lt;/span&gt;     &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                                       &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;MOS沟道&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Channel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;         &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;__&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;关闭&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;                 &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;        \   &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;lt;--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Vgs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;         \ &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;       &lt;span class=&#34;n&#34;&gt;不够开启电压&lt;/span&gt;         &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;+----------+----------------------------+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;G&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;栅极&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;          &lt;span class=&#34;o&#34;&gt;+-------+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                  &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                 &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;电阻&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                  &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;                  &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输入端&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GND&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;------------+----------------&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;输出端&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GND&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;接了电池正极&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;为什么它能“防反接”？（两道关卡）&lt;/p&gt;
&lt;h4 id=&#34;第一关体二极管被反向截止&#34;&gt;第一关：体二极管被“反向截止”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;结构：PMOS 的体二极管方向是 &lt;strong&gt;D $\rightarrow$ S&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;现状：
&lt;ul&gt;
&lt;li&gt;D 极（漏极）：接了 -12V。&lt;/li&gt;
&lt;li&gt;S 极（源极）：接了负载（0V）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;判定：二极管的阳极（D）电压 小于 阴极（S）电压。&lt;/li&gt;
&lt;li&gt;结果：二极管处于&lt;strong&gt;反向偏置&lt;/strong&gt;状态，路不通！电流没法通过二极管流过去。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第二关mos-管沟道打不开&#34;&gt;第二关：MOS 管沟道“打不开”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;开启条件：PMOS 需要 $V_{GS} &amp;lt; V_{th}$ (比如 -2V) 才能导通。即 G 极电压要比 S 极电压低很多。&lt;/li&gt;
&lt;li&gt;现状：
&lt;ul&gt;
&lt;li&gt;G 极（栅极）：通过电阻 R 接到了输入 GND（也就是电池正极，0V）。所以 $V_G = 0V$。&lt;/li&gt;
&lt;li&gt;S 极（源极）：因为二极管不通，负载没电，所以 $V_S \approx 0V$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;判定：$$V_{GS} = V_G - V_S \approx 0V - 0V = 0V$$&lt;/li&gt;
&lt;li&gt;结果：$V_{GS}$ 是 0，完全没达到开启阈值。MOS 管处于&lt;strong&gt;关断 (Cut-off)&lt;/strong&gt; 状态，沟道也是断的。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;注意事项&#34;&gt;注意事项
&lt;/h2&gt;&lt;h3 id=&#34;栅极耐压保护必加-zener-齐纳二极管&#34;&gt;栅极耐压保护（必加 Zener 齐纳二极管）
&lt;/h3&gt;&lt;p&gt;如果你的输入电压是 &lt;strong&gt;24V&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;正常导通时，$V_{GS} \approx -24V$。&lt;/li&gt;
&lt;li&gt;危险：绝大多数 PMOS 的栅极只能承受 $\pm 20V$。这一上电，MOS 管的栅极就击穿了。&lt;/li&gt;
&lt;li&gt;对策：必须在 G 和 S 之间并联一个 &lt;strong&gt;10V~15V 的稳压二极管&lt;/strong&gt;，并在 G 极回路串联一个限流电阻。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214120842268.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214120842268.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;核心要点总结：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;【反常规接法】：输入电源接 D，负载接 S。（利用体二极管辅助启动，导通后走低阻沟道）。&lt;/li&gt;
&lt;li&gt;【R1 (100k) 关门弹簧】：跨在 G-S 间。没电时把 G 和 S 拉平，保证 MOS 管死死关住，不误导通。&lt;/li&gt;
&lt;li&gt;【R2 (10k) 保镖电阻】：串在 G-GND 间。当输入电压过高（如 24V），稳压管动作时，R2 负责承担多余电压，限制电流，防止稳压管烧毁。&lt;/li&gt;
&lt;li&gt;【Z1 稳压管】：防止 Vgs 超过 20V 把 MOS 栅极击穿。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>PMOS开关电源设计</title>
        <link>https://teaize.github.io/p/pmos%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E8%AE%BE%E8%AE%A1/</link>
        <pubDate>Sun, 14 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/pmos%E5%BC%80%E5%85%B3%E7%94%B5%E6%BA%90%E8%AE%BE%E8%AE%A1/</guid>
        <description>&lt;p&gt;在 P-MOS 作为一个&lt;strong&gt;高边开关（High-Side Switch）&lt;/strong&gt;（即放在电源和负载之间）时，栅极（G）和源极（S）之间并联的那个电阻 $R_{GS}$，通常被称为“上拉电阻”或“泄放电阻”**。&lt;/p&gt;
&lt;h3 id=&#34;一-g-s-之间电阻-r_gs-的作用&#34;&gt;一、 G-S 之间电阻 ($R_{GS}$) 的作用
&lt;/h3&gt;&lt;h4 id=&#34;1-确保默认关断状态防误触&#34;&gt;1. 确保默认“关断”状态（防误触）
&lt;/h4&gt;&lt;p&gt;这是最根本的原因。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原理：P-MOS 是 &lt;strong&gt;$V_{GS} &amp;lt; 0$&lt;/strong&gt;（即栅极电压低于源极电压）时导通。要让它关断，必须使 &lt;strong&gt;$V_G = V_S$&lt;/strong&gt;（即 $V_{GS} = 0$）。&lt;/li&gt;
&lt;li&gt;危险场景：当驱动 P-MOS 的控制信号（比如单片机引脚或前级三极管）处于 高阻态（High-Z）（例如单片机刚上电复位、还没初始化时），栅极是&lt;strong&gt;悬空&lt;/strong&gt;的。&lt;/li&gt;
&lt;li&gt;后果：MOS 管的栅极极其灵敏，悬空的栅极会感应周围的静电或干扰，导致 $V_G$ 飘忽不定。如果 $V_G$ 碰巧飘得比 $V_S$ 低，P-MOS 就会&lt;strong&gt;意外导通&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;想象一下，你一上电，还没控制呢，电机就狂转，或者设备就误动作了，这是非常危险的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;电阻的作用：$R_{GS}$ 像一根强力的弹簧，把栅极电位强行“拉”到和源极（电源电压）一样高。&lt;strong&gt;只要你没给控制信号，它就死死地锁在“关断”状态&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-积存电荷的泄放通道&#34;&gt;2. 积存电荷的“泄放通道”
&lt;/h4&gt;&lt;p&gt;MOS 管的栅极&lt;strong&gt;寄生电容&lt;/strong&gt;（$C_{GS}$）很大。当你撤销驱动信号想关断它时，栅极里存的电荷需要流走，电压才能升上去。&lt;/p&gt;
&lt;p&gt;$R_{GS}$ 提供了一条物理通道，帮助电荷泄放，加快关断速度（虽然在大电流驱动电路中，主要靠驱动器吸走电荷，但这个电阻提供了最后的保障）。&lt;/p&gt;
&lt;h2 id=&#34;二驱动电平匹配问题最常见&#34;&gt;二、驱动电平匹配问题（最常见！）
&lt;/h2&gt;&lt;p&gt;新手最容易犯的错：&lt;strong&gt;用 3.3V/5V 单片机直接驱动 12V/24V 电源上的 P-MOS。&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;错误做法：P-MOS 源极接 12V，栅极直接接单片机 IO 口。&lt;/li&gt;
&lt;li&gt;后果：
&lt;ul&gt;
&lt;li&gt;单片机输出低电平（0V）：$V_{GS} = 0 - 12 = -12V$，P-MOS 导通。（正常）&lt;/li&gt;
&lt;li&gt;单片机输出高电平（3.3V）：$V_{GS} = 3.3 - 12 = -8.7V$，P-MOS 还是导通的！（因为 $V_{GS}$ 依然小于阈值电压）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;无法关断：&lt;strong&gt;你根本关不掉这个开关&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;正确做法：必须加一个 NPN 三极管 或 N-MOS 作为“前级驱动”来进行电平转换。利用小管子拉低 P-MOS 的栅极，关断时靠 $R_{GS}$ 拉高。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214105741416.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214105741416.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;三栅极耐压保护v_gsmax-限制&#34;&gt;三、栅极耐压保护（$V_{GS(max)}$ 限制）
&lt;/h2&gt;&lt;p&gt;MOS 管的栅极非常脆弱，绝缘层很薄。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数据手册：大多数 P-MOS 的 $V_{GS}$ 最大承受电压是 &lt;strong&gt;$\pm 20V$&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;危险：如果你的电源电压是 24V 或 48V。
&lt;ul&gt;
&lt;li&gt;当你把栅极拉到地（0V）导通时，$V_{GS} = 0 - 24 = -24V$。&lt;/li&gt;
&lt;li&gt;结果：栅极氧化层瞬间击穿，P-MOS 永久损坏（短路）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;对策：
&lt;ol&gt;
&lt;li&gt;电阻分压：不要直接拉到地，利用两个电阻分压，让栅极电压只下降一半（比如 12V）。&lt;/li&gt;
&lt;li&gt;稳压二极管：在 G 和 S 之间并联一个 10V~15V 的稳压二极管（Zener），强行限制 $V_{GS}$ 的幅度。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;p&gt;一个标准的 P-MOS 开关电路通常长这样：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;电源 $\rightarrow$ S 极。&lt;/li&gt;
&lt;li&gt;$R_{GS}$ (10k-100k) $\rightarrow$ 跨接在 G 和 S 之间（负责默认关断）。&lt;/li&gt;
&lt;li&gt;$R_{limit}$ (限流电阻) $\rightarrow$ 串联在 G 极回路中。&lt;/li&gt;
&lt;li&gt;稳压二极管 $\rightarrow$ 并联在 G-S 之间（如果电源 &amp;gt; 20V）。&lt;/li&gt;
&lt;li&gt;控制端 $\rightarrow$ 使用 NPN 三极管拉低栅极，而不是 MCU 直驱。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>PMT信号</title>
        <link>https://teaize.github.io/p/pmt%E4%BF%A1%E5%8F%B7/</link>
        <pubDate>Sun, 14 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/pmt%E4%BF%A1%E5%8F%B7/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;问题：质控仪输出固定 NO 浓度的气体，对于仪表 A，流速是一个值；对于仪表 B，流速是另一个值，那 PMT 产生的信号强度是一样的，还是根据流速不同是不一样的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;PMT 产生的原始信号强度（光子数/电流值），本质上是和单位时间内进入反应室的 &lt;strong&gt;NO 分子总数&lt;/strong&gt;（Mass Flow Rate / 质量流量）有关。&lt;/p&gt;
&lt;h2 id=&#34;原理剖析&#34;&gt;原理剖析
&lt;/h2&gt;&lt;p&gt;我们要看化学发光反应的微观过程：
$$NO + O_3 \rightarrow NO_2^* + O_2$$
$$NO_2^* \rightarrow NO_2 + h\nu \text{ (光子)}$$&lt;/p&gt;
&lt;p&gt;在这个反应室里，有一个关键的前提条件：&lt;strong&gt;臭氧 ($O_3$) 是过量的&lt;/strong&gt;。这意味着，每一个进入反应室的 $NO$ 分子，都会被“抓住”并发生反应，产生一个光子（理想情况下）。&lt;/p&gt;
&lt;p&gt;PMT 是一个&lt;strong&gt;计数器&lt;/strong&gt;，它统计的是“每秒钟有多少个光子打在我的脸上”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;浓度 (Concentration, C)： 比如 200 ppb，意思是每 10 亿个气体分子里有 200 个 NO。这只是一个“比例”。&lt;/li&gt;
&lt;li&gt;流速 (Flow Rate, Q)： 比如 1 L/min，意思是每分钟有多少气体跑进来。&lt;/li&gt;
&lt;li&gt;PMT 信号 (Signal, I)：
$$I \propto \text{每秒反应掉的 NO 分子数}$$
$$I \propto \text{浓度 (C)} \times \text{流速 (Q)}$$&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;为什么流速对-cems-如此重要&#34;&gt;为什么流速对 CEMS 如此重要？
&lt;/h2&gt;&lt;p&gt;这也解释了为什么化学发光法分析仪对&lt;strong&gt;流量控制&lt;/strong&gt;和&lt;strong&gt;压力控制&lt;/strong&gt;要求极高。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;限流孔 (Critical Orifice) 的作用：&lt;/strong&gt; 你会发现每一台 NO 分析仪的反应室入口前，都有一个极小的孔（宝石喷嘴或玻璃毛细管）。 它的作用就是&lt;strong&gt;锁死流速&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;如果这个孔脏了、堵了，流速变小了。&lt;/li&gt;
&lt;li&gt;后果： 即使标气浓度没变，进入反应室的 NO 分子数少了，PMT 信号就会变弱，导致读数偏低。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;反应室压力 (Chamber Pressure) 的影响：&lt;/strong&gt; 通常反应室是负压的。如果真空泵衰减，负压变小（压力升高）。
&lt;ul&gt;
&lt;li&gt;一方面：气体密度变大，单位体积分子数变多（信号变大）。&lt;/li&gt;
&lt;li&gt;另一方面：猝灭效应 (Quenching) 增强（光子被撞没了，信号变小）。&lt;/li&gt;
&lt;li&gt;这之间有个复杂的平衡，但总之，&lt;strong&gt;流速和压力的波动都会直接改变 PMT 的原始信号。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;引入泵的因素&#34;&gt;引入泵的因素
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在现场中，经常会发现有的泵接了两台分析仪（用于给分析仪提供动力）。在这种情况下校准了仪器；然后过了一段时间，泵只接一台分析仪，只给一台分析仪提供动力，此时再通同样浓度的标气，分析仪显示的示数却不同了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;核心原因泵的特性曲线&#34;&gt;核心原因：泵的“特性曲线”
&lt;/h3&gt;&lt;p&gt;所有的泵（无论是隔膜泵、旋片泵还是活塞泵），其输出能力都不是恒定的。它们都遵循一条&lt;strong&gt;P-Q 曲线（压力 - 流量曲线）&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;双机模式（接两台）：
&lt;ul&gt;
&lt;li&gt;泵同时拖两个负载。&lt;strong&gt;此时管路总阻力较小（因为是并联）&lt;/strong&gt;，但需要的总流量大。&lt;/li&gt;
&lt;li&gt;泵工作在 &lt;strong&gt;“低真空度（或低压力）、大流量”&lt;/strong&gt; 的状态。&lt;/li&gt;
&lt;li&gt;假设此时供给每台仪器的有效压力差是 $\Delta P_1$，对应的流速是 $Q_1$。&lt;/li&gt;
&lt;li&gt;你在这个状态下进行了校准，告诉分析仪：“当流速是 $Q_1$ 时，这个电流对应 200 ppm。”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;单机模式（接一台）：
&lt;ul&gt;
&lt;li&gt;你拔掉了一台，堵死了那个接口。&lt;/li&gt;
&lt;li&gt;泵的负载突然变轻了（或者说气路阻力特性变了）。&lt;/li&gt;
&lt;li&gt;根据泵的曲线，当流量需求减半时，泵能够提供的&lt;strong&gt;真空度（或压力）会显著升高&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;此时，剩余那台仪器面临的压力差变成了 $\Delta P_2$（且 $|\Delta P_2| &amp;gt; |\Delta P_1|$）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;后果： 压力差变大，导致流过这台仪器的实际气体流速 $Q_2$ 变大了&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;深度细节临界流-critical-flow-的失效&#34;&gt;深度细节：临界流 (Critical Flow) 的失效
&lt;/h3&gt;&lt;p&gt;你可能会问：&lt;strong&gt;“分析仪内部不是有限流孔吗？它不是应该能锁住流速吗？”&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;理论上，只要真空度达到一定阈值（比如 -40 kPa 以下），气体通过小孔的速度就会达到声速，此时流速应该恒定，不再随真空度的加深而增加。这就是“临界流”原理。但现实中为什么还会变？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;“伪”临界流：
&lt;ul&gt;
&lt;li&gt;在接两台仪器时，泵可能比较吃力，真空度可能只有 -35 kPa。此时并未完全达到临界流条件。流速依然受压力波动影响很大。&lt;/li&gt;
&lt;li&gt;当变成一台时，真空度瞬间抽到 -60 kPa，进入了真临界流，或者流速进一步提升。从“非饱和”到“饱和”，流速肯定变了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;压力侧的影响（如果泵在前端）：
&lt;ul&gt;
&lt;li&gt;如果你的泵是用来推气（正压输送）的，那就更明显了。&lt;/li&gt;
&lt;li&gt;少了一路泄压，所有的压力都灌进剩下那一路，流速必然暴涨，读数必然飙升。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;反应室压力的变化：
&lt;ul&gt;
&lt;li&gt;抽力变大，不仅影响流速，还会让反应室内部的绝对压力降低。
&lt;ul&gt;
&lt;li&gt;压力低 $\to$ 分子密度低 $\to$ 读数偏低。&lt;/li&gt;
&lt;li&gt;流速快 $\to$ 分子总数多 $\to$ 读数偏高。&lt;/li&gt;
&lt;li&gt;这两个效应会“打架”，但通常流速的影响占主导。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;解决方案与建议&#34;&gt;解决方案与建议
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;下策（凑合用）：
&lt;ul&gt;
&lt;li&gt;保持现在的“单机模式”。&lt;/li&gt;
&lt;li&gt;立刻重新校准。&lt;/li&gt;
&lt;li&gt;让仪器重新记住现在这个新流速下的电流对应关系。&lt;/li&gt;
&lt;li&gt;隐患：如果哪天你又把另一台接回来了，读数又会不准。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;中策（欺骗泵）：
&lt;ul&gt;
&lt;li&gt;如果不接第二台仪器，可以在那个空出来的接口上接一个一个针阀，调节它的开度，人为制造一个“假负载”漏气。【&lt;strong&gt;或者接一个同样大小的限流孔更省事&lt;/strong&gt;】&lt;/li&gt;
&lt;li&gt;调整针阀，直到真空表读数恢复到接两台仪器时的水平。&lt;/li&gt;
&lt;li&gt;这样可以维持原有的流速平衡。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;上策（系统设计）：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;一机一泵。 这种并联共用动力源的设计，本身就是 CEMS 里的大忌&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;因为一旦一台仪器管路堵塞或断开，会直接通过压力耦合影响另一台仪器的读数。为了省一个泵的钱，牺牲了整个系统的可靠性，得不偿失。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>比较器颤振问题</title>
        <link>https://teaize.github.io/p/%E6%AF%94%E8%BE%83%E5%99%A8%E9%A2%A4%E6%8C%AF%E9%97%AE%E9%A2%98/</link>
        <pubDate>Sun, 14 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%AF%94%E8%BE%83%E5%99%A8%E9%A2%A4%E6%8C%AF%E9%97%AE%E9%A2%98/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;在使用比较器时，可能会遇到颤振的问题，通常的做法是在比较器的输出端接一个电阻到他的同相输入端，给他的输入端一个正反馈，这样就可以避免颤振问题。
—&amp;gt; 简单来说，这就一个人拿不定主意时，请求另一个人帮忙做决定，然后通过这个人的反馈后，就更加坚信了自己该如何做选择了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在工程上有一个响亮的名字，施密特触发器 (Schmitt Trigger)，或者叫 带迟滞功能的比较器 (Comparator with Hysteresis)&lt;/p&gt;
&lt;h3 id=&#34;1-为什么要加没有电阻时的纠结&#34;&gt;1. 为什么要加？（没有电阻时的“纠结”）
&lt;/h3&gt;&lt;p&gt;想象一下，你设定了一个 2.5V 的基准电压（门槛），去检测一个传感器的电压。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;问题：现实中的信号总是有噪声的（毛刺）。当输入信号刚好慢慢爬升到 &lt;strong&gt;2.5V&lt;/strong&gt; 附近时，可能上一微秒是 2.501V（高），下一微秒因为干扰变成了 2.499V（低），再下一微秒又变成 2.501V。&lt;/li&gt;
&lt;li&gt;后果：比较器非常灵敏，它会忠实地跟着跳变。&lt;strong&gt;结果输出端就会在“高”和“低”之间疯狂切换（颤振）&lt;/strong&gt;。如果后面接的是继电器，继电器会“哒哒哒”乱响直到烧坏；如果是单片机，可能会计数错误。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-加了电阻后发生了什么迟滞效应&#34;&gt;2. 加了电阻后发生了什么？（迟滞效应）
&lt;/h3&gt;&lt;p&gt;当你把 &lt;strong&gt;输出端&lt;/strong&gt; 通过一个电阻接回 &lt;strong&gt;同相输入端 (+)&lt;/strong&gt; 时，奇迹发生了：&lt;strong&gt;门槛（阈值）变了，而且是会动的！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这就是 &lt;strong&gt;正反馈&lt;/strong&gt; 的核心机制：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;当输出是高电平时&lt;/strong&gt;：输出的高电压通过电阻“拉高”了同相输入端的基准电压。
&lt;ul&gt;
&lt;li&gt;潜台词：“想让我变低？你得把电压降得&lt;strong&gt;更低&lt;/strong&gt;才行。”（比如门槛从 2.5V 变成了 2.6V）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;当输出是低电平时&lt;/strong&gt;：输出的低电压通过电阻“拉低”了同相输入端的基准电压。
&lt;ul&gt;
&lt;li&gt;潜台词：“想让我变高？你得把电压升得&lt;strong&gt;更高&lt;/strong&gt;才行。”（比如门槛从 2.5V 变成了 2.4V）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-一个生活的例子空调最经典的迟滞&#34;&gt;3. 一个生活的例子：空调（最经典的迟滞）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;没有迟滞（傻瓜模式）： 设定 25 度。气温 25.01 度 -&amp;gt; 开机；气温 24.99 度 -&amp;gt; 关机。
&lt;ul&gt;
&lt;li&gt;结果：空调压缩机一秒钟开关十次，立马报废。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;有迟滞（正反馈模式）： 设定 25 度。
&lt;ul&gt;
&lt;li&gt;制冷时：一口气降到 23 度（下门槛）才停机。&lt;/li&gt;
&lt;li&gt;升温时：一直等到热到 27 度（上门槛）才重新启动。&lt;/li&gt;
&lt;li&gt;结果：中间的 23~27 度 是“安全区”，在这个区域里怎么波动，空调都不动作，这就消除了“颤振”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-硬件设计细节&#34;&gt;4. 硬件设计细节
&lt;/h3&gt;&lt;p&gt;在电路图中，通常涉及两个电阻：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;输入电阻 ($R_1$)&lt;/strong&gt;：连接基准电压（Vref 也就是参考电压）和同相输入端。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;反馈电阻 ($R_f$)&lt;/strong&gt;：连接输出端和同相输入端（就是你说的那个电阻）。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这两个电阻组成了&lt;strong&gt;分压器&lt;/strong&gt;，决定了“迟滞电压”（Hysteresis Band）有多宽。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$R_f$ 越&lt;strong&gt;小&lt;/strong&gt;，反馈越强，迟滞窗口越&lt;strong&gt;宽&lt;/strong&gt;（抗干扰越强，但灵敏度下降）。&lt;/li&gt;
&lt;li&gt;$R_f$ 越&lt;strong&gt;大&lt;/strong&gt;，反馈越弱，迟滞窗口越&lt;strong&gt;窄&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214155434328.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214155434328.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;手段：引入正反馈（输出接电阻回同相输入端）。&lt;/li&gt;
&lt;li&gt;目的：制造迟滞（Hysteresis）。&lt;/li&gt;
&lt;li&gt;效果：消除因噪声引起的输出颤振。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>运放输入失调电压</title>
        <link>https://teaize.github.io/p/%E8%BF%90%E6%94%BE%E8%BE%93%E5%85%A5%E5%A4%B1%E8%B0%83%E7%94%B5%E5%8E%8B/</link>
        <pubDate>Sun, 14 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%BF%90%E6%94%BE%E8%BE%93%E5%85%A5%E5%A4%B1%E8%B0%83%E7%94%B5%E5%8E%8B/</guid>
        <description>&lt;p&gt;在电流低端检测电路中，如果检测很小的电流，输入失调电压 ($V_{os}$) 往往是决定测量精度的“头号杀手”&lt;/p&gt;
&lt;h2 id=&#34;关于-v_os&#34;&gt;关于 $V_{os}$
&lt;/h2&gt;&lt;h3 id=&#34;什么是-v_os-input-offset-voltage&#34;&gt;什么是 $V_{os}$ (Input Offset Voltage)
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;定义（书本版）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;当运放的两个输入端（+ 和 -）完全接地（电位相同）时，理论上输出应该是 0V。但实际上，输出端总会有一个非零电压。为了让输出强行变成 0V，你必须在输入端反向加上的那个微小补偿电压，就是 $V_{os}$。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;工程师的直观理解（模型版）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;你可以&lt;strong&gt;把 $V_{os}$ 想象成运放内部自带了一个捣乱的干电池&lt;/strong&gt;，它串联在运放的输入端。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;即使外部没有信号，这个“内部电池”也会一直产生电压。&lt;/li&gt;
&lt;li&gt;运放分不清哪个是你要测的信号，哪个是这个电池的电压，它会把它们加在一起放大。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么在电流检测中它很致命&#34;&gt;为什么在“电流检测”中它很致命？
&lt;/h3&gt;&lt;p&gt;在低端检测中，我们通过测量采样电阻（$R_{sense}$）上的压降来算电流。&lt;/p&gt;
&lt;p&gt;$$V_{sense} = I \times R_{sense}$$&lt;/p&gt;
&lt;p&gt;悲剧的场景推演：假设你要测 10mA 的小电流，为了减小功耗，你选了 0.1Ω 的电阻。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;有效信号：$V_{signal} = 0.01A \times 0.1\Omega = 1mV$。&lt;/li&gt;
&lt;li&gt;运放误差：假设你用了一个普通的运放（比如 LM358），它的 $V_{os}$ 大约是 &lt;strong&gt;2mV&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;结果：
&lt;ul&gt;
&lt;li&gt;运放看到的总输入 = $1mV \text{ (信号)} + 2mV \text{ (误差)} = 3mV$。&lt;/li&gt;
&lt;li&gt;误差高达 200%！ 你根本分不清这是电流产生的，还是运放自己产生的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这就是为什么对于小电流检测，$V_{os}$ 必须被严肃对待。&lt;/p&gt;
&lt;h3 id=&#34;如何处理这个问题&#34;&gt;如何处理这个问题？
&lt;/h3&gt;&lt;h4 id=&#34;1--钞能力--法--选用低失调运放最推荐&#34;&gt;1. &amp;quot; 钞能力 &amp;quot; 法 —— 选用低失调运放（最推荐）
&lt;/h4&gt;&lt;p&gt;既然普通运放不行，那就换好的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;普通运放 (General Purpose)：如 LM358。$V_{os} \approx 3mV$。（此时不能用）&lt;/li&gt;
&lt;li&gt;精密运放 (Precision)：如 OP07。$V_{os} \approx 75\mu V$。&lt;/li&gt;
&lt;li&gt;零漂移/斩波运放 (Zero-Drift / Chopper)：这是终极武器。
&lt;ul&gt;
&lt;li&gt;如 ADA4528, OPA333, SGM8953（国产）。&lt;/li&gt;
&lt;li&gt;它们的 $V_{os}$ 可以低至 1\mu V 甚至更低。&lt;/li&gt;
&lt;li&gt;原理：这种运放内部有一个自动校准电路，每秒钟自动校准几千次，把 $V_{os}$ &amp;quot; 切碎 &amp;quot; 并扔掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;建议&lt;/strong&gt;：在电流检测电路中，直接选用 Zero-Drift (斩波) 运放是性价比最高的解决方案，省去了复杂的校准工作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;2--大力出奇迹--法--增大采样电阻-r_sense&#34;&gt;2. &amp;quot; 大力出奇迹 &amp;quot; 法 —— 增大采样电阻 ($R_{sense}$)
&lt;/h4&gt;&lt;p&gt;如果不想换贵的运放，那就想办法把信号变大。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;做法：把 0.1Ω 的电阻换成 1Ω。&lt;/li&gt;
&lt;li&gt;效果：10mA 电流产生的压降变成了 10mV。&lt;/li&gt;
&lt;li&gt;对比：此时 2mV 的 $V_{os}$ 带来的误差从 200% 降到了 20%。&lt;/li&gt;
&lt;li&gt;代价：功耗增加，发热增加。满量程大电流流过时，电阻可能会烧烫，且压降过大可能影响负载供电。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3--软件补丁--法--软件校准-calibration&#34;&gt;3. &amp;quot; 软件补丁 &amp;quot; 法 —— 软件校准 (Calibration)
&lt;/h4&gt;&lt;p&gt;如果你必须用便宜的运放，也没法增大电阻，那就靠单片机来补。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;做法：
&lt;ol&gt;
&lt;li&gt;出厂归零（去皮）：在电流为 0 时，读取 ADC 的数值（这个值就是 $V_{os}$ 放大后的结果）。&lt;/li&gt;
&lt;li&gt;存储：把这个偏差值存在 EEPROM 里。&lt;/li&gt;
&lt;li&gt;运算：每次测量时，&lt;code&gt;实际结果 = 读取结果 - 偏差值&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;缺点：$V_{os}$ 是会随&lt;strong&gt;温度&lt;/strong&gt;漂移的（温漂）。你在 25°C 校准了，到了 60°C，偏差值变了，测量又不准了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;非理想特性&#34;&gt;非理想特性
&lt;/h2&gt;&lt;p&gt;实际上，理想元件不存在，真实元件总带点“毛病”。这也是为什么精密仪器即使什么都不测，开机也得先“归零（Zeroing）”或“校准（Calibration）”的原因&lt;/p&gt;
&lt;h3 id=&#34;第一类明明没给输入它却有输出--零点偏置-zero-offset&#34;&gt;第一类：明明没给输入，它却有输出 —— “零点偏置” (Zero Offset)
&lt;/h3&gt;&lt;p&gt;这和运放的 $V_{os}$ 是一模一样的亲兄弟。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;传感器（重灾区）
&lt;ul&gt;
&lt;li&gt;现象：你买一个电子秤（压力传感器），上面什么都没放，它却显示 &lt;code&gt;0.05g&lt;/code&gt;。你买一个陀螺仪，放在桌上纹丝不动，读数却显示它在以 &lt;code&gt;0.1度/秒&lt;/code&gt; 的速度旋转。&lt;/li&gt;
&lt;li&gt;术语：&lt;strong&gt;零点漂移 (Zero Offset / Zero Drift)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;原因：传感器内部的微机械结构（MEMS）或惠斯通电桥不可能做得完全对称。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ADC（模数转换器）
&lt;ul&gt;
&lt;li&gt;现象：你把 ADC 的输入端短路接到地（0V），你期望读出来的数字是 &lt;code&gt;0000&lt;/code&gt;，但实际读出来可能是 &lt;code&gt;0003&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;术语：&lt;strong&gt;失调误差 (Offset Error)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;原因：ADC 内部比较器的不匹配。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第二类明明关断了它却在偷偷导电--漏电流-leakage&#34;&gt;第二类：明明关断了，它却在偷偷导电 —— “漏电流” (Leakage)
&lt;/h3&gt;&lt;p&gt;理想情况下，断开就是断开，电阻无穷大。但现实中，没有绝对的绝缘。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;二极管 / 三极管 / MOS 管
&lt;ul&gt;
&lt;li&gt;现象：你把二极管反接截止了，理应没有电流。但实际上，总会有微安（uA）甚至纳安（nA）级的电流偷偷流过去。高温下这个电流还会翻倍。&lt;/li&gt;
&lt;li&gt;术语：&lt;strong&gt;反向漏电流 ($I_R$)&lt;/strong&gt; 或 &lt;strong&gt;关断漏电流 ($I_{DSS}$)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;影响：这就是为什么电池供电的设备，关机放一年电池也会没电。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;电容
&lt;ul&gt;
&lt;li&gt;现象：你给电容充饱了电，拔掉电源放在那儿。理论上电荷应该永远存着，但过几天它就没电了。&lt;/li&gt;
&lt;li&gt;术语：&lt;strong&gt;自放电&lt;/strong&gt; 或 &lt;strong&gt;绝缘电阻 (Insulation Resistance)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;本质：电容内部相当于并联了一个很大的电阻（几百兆欧），一直在偷偷放电。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第三类明明没通电它却在吵闹--热噪声-thermal-noise&#34;&gt;第三类：明明没通电，它却在“吵闹” —— “热噪声” (Thermal Noise)
&lt;/h3&gt;&lt;p&gt;这个最神奇，属于物理定律层面的“偏置”。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;电阻
&lt;ul&gt;
&lt;li&gt;现象：拿一个电阻放在桌子上，两头接上示波器（假设示波器精度无限高），你会发现电阻两端竟然有微小的电压波形在乱跳！哪怕你根本没给它通电。&lt;/li&gt;
&lt;li&gt;术语：&lt;strong&gt;约翰逊噪声 (Johnson Noise)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;原因：只要温度高于绝对零度，电阻内部的电子就会做热运动，这种无规则运动就产生了电压噪声。&lt;/li&gt;
&lt;li&gt;影响：这是精密信号测量的物理极限，你永远无法消除，只能通过降温（比如液氮冷却）来减小。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;工程师的应对哲学&#34;&gt;工程师的应对哲学
&lt;/h3&gt;&lt;p&gt;既然这种“自带偏置”无法避免（因为是制造工艺和物理定律决定的），工程师们是怎么解决的呢？通常有三板斧：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;硬件上“差分” (Differential)：
&lt;ul&gt;
&lt;li&gt;既然大家都有偏置，那我就用两路一样的电路。假设都有 +0.1V 的误差，那我用 $A - B$，误差就相减抵消了。这是差分放大电路的核心思想。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;软件上“校准” (Calibration)：
&lt;ul&gt;
&lt;li&gt;出厂校准：生产时先测出这个误差（比如 +2mV），写进芯片里。以后每次读数都自动减去 2mV。&lt;/li&gt;
&lt;li&gt;上电自校准：现在的万用表、电子秤，开机时都会自检一下零点，把你说的那个“自带偏置”当成当前的“0”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;工艺上“配对” (Matching)：
&lt;ul&gt;
&lt;li&gt;在芯片制造时，如果需要两个电阻一样，就把它们画得挨得很近，形状一模一样。虽然它们都不准，但它们“不准的程度”是一样的，这样在电路里也能用。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>运放虚短和虚断</title>
        <link>https://teaize.github.io/p/%E8%BF%90%E6%94%BE%E8%99%9A%E7%9F%AD%E5%92%8C%E8%99%9A%E6%96%AD/</link>
        <pubDate>Sun, 14 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%BF%90%E6%94%BE%E8%99%9A%E7%9F%AD%E5%92%8C%E8%99%9A%E6%96%AD/</guid>
        <description>&lt;p&gt;这两个概念并不是物理上真的发生了短路或断路，而是基于运放的&lt;strong&gt;理想特性&lt;/strong&gt;推导出来的“等效状态”。&lt;/p&gt;
&lt;h2 id=&#34;前置条件必须是负反馈&#34;&gt;前置条件：必须是“负反馈”
&lt;/h2&gt;&lt;p&gt;在讲之前，必须强调一个&lt;strong&gt;绝对前提&lt;/strong&gt;： &lt;strong&gt;“虚短”原则只存在于运放工作在线性区（即接了负反馈）的时候。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果运放是开环工作（做比较器），或者接了正反馈（做触发器），那么“虚短”是不成立的！&lt;/p&gt;
&lt;h2 id=&#34;虚短-virtual-short&#34;&gt;虚短 (Virtual Short)
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;一句话解释：&lt;/strong&gt; 两个输入端的电压相等，就像它们被短路了一样，但其实没连在一起。&lt;/p&gt;
&lt;h3 id=&#34;1-现象&#34;&gt;1. 现象
&lt;/h3&gt;&lt;p&gt;即：同相输入端电压 = 反相输入端电压。$$V_+ = V_-$$&lt;/p&gt;
&lt;h3 id=&#34;2-为什么会有这个现象&#34;&gt;2. 为什么会有这个现象？
&lt;/h3&gt;&lt;p&gt;这得益于运放的&lt;strong&gt;开环增益 ($A_{vo}$) 无穷大&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;公式：$V_{out} = A_{vo} \times (V_+ - V_-)$&lt;/li&gt;
&lt;li&gt;推导：$(V_+ - V_-) = V_{out} / A_{vo}$&lt;/li&gt;
&lt;li&gt;现实：运放的开环增益通常在 10 万 到 100 万倍以上。&lt;/li&gt;
&lt;li&gt;结论：即使输出 $V_{out}$ 是 10V，输入端的压差 $(V_+ - V_-)$ 也只有 $10V / 100,000 = 0.0001V$。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;工程视角&lt;/strong&gt;：0.0001V 对于我们来说就是 0。所以我们认为 $V_+$ 和 $V_-$ 的电位是死死咬合在一起的。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;比喻&lt;/strong&gt;：想象运放是一个超级灵敏的平衡大师（负反馈机制）。只要 $V_-$ 比 $V_+$ 低那么一丁点，输出端就会疯狂输出高电压，通过反馈电阻把 $V_-$ 拉高，直到 $V_-$ 和 $V_+$ 持平。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;从物理本质看为什么-v_--会自动等于-v_&#34;&gt;从物理本质看为什么 $V_-$ 会自动等于 $V_+$？
&lt;/h3&gt;&lt;p&gt;从物理本质和控制过程来看，“虚短”其实是一个动态的、暴力的、实时的自我调节过程，是“负反馈”机制强行制造出来的结果&lt;/p&gt;
&lt;p&gt;以最经典的反相放大器为例，假设 $V_+$ 接地（0V），$V_-$ 还没接地时：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;扰动开始：
&lt;ul&gt;
&lt;li&gt;假设你给输入端来了一个微小的电压，让 $V_-$ 稍微升高了 0.1V（此时 $V_- &amp;gt; V_+$）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;运放察觉：
&lt;ul&gt;
&lt;li&gt;运放内部的差分放大器瞬间察觉到了这个偏差：$V_+ - V_- = -0.1V$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;暴力反应（核心物理过程）：
&lt;ul&gt;
&lt;li&gt;因为运放增益极大（比如 100 万倍），它会想：“该死，反相端竟然高了！我要把输出端狠狠地往下拉！”&lt;/li&gt;
&lt;li&gt;于是输出端 $V_{out}$ 瞬间输出一个巨大的负电压趋势（试图达到 $-0.1V \times 100万 = -100kV$）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;负反馈生效：
&lt;ul&gt;
&lt;li&gt;但是！输出端通过 反馈电阻 $R_f$ 连回了 $V_-$。&lt;/li&gt;
&lt;li&gt;当输出端 $V_{out}$ 猛烈下降时，它通过电阻 $R_f$ 把 $V_-$ 的电位也死命往下拉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;达到平衡：
&lt;ul&gt;
&lt;li&gt;$V_-$ 被拉低了，直到它被拉回到和 $V_+$ 几乎一样的 0V 为止。&lt;/li&gt;
&lt;li&gt;一旦 $V_-$ 降到 0V，运放觉得“没有偏差了”，就不再继续往下拉输出电压了，系统稳定下来。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;物理结论：&lt;/p&gt;
&lt;p&gt;“虚短”的本质，是运放利用巨大的输出能量，通过反馈电阻这条“绳子”，强行把 $V_-$ 拽到了和 $V_+$ 一样的水平线上。只要这根绳子（负反馈）还在，运放就会一直实时调整输出，维持这个平衡。&lt;/p&gt;
&lt;h3 id=&#34;条件&#34;&gt;条件
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;存在负反馈回路【减少 V+ 和 V- 差距的就是负反馈，增大这种差异的就是正反馈】&lt;/li&gt;
&lt;li&gt;Vout 的输出不能饱和&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例如下面这张图，假设运放的电源为 5V，如果 Vin 进来 1V，运放就算饱和输出了，也只能输出到 5V。但是通过反馈回路，V- 最多也只能分压达到 0.5V。反过来，要想 V+=V-，那么运放的输出端就不可能刚好输出饱和，否则 V+ 和 V- 就不能相等了 
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251214170412.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251214170412.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;虚断-virtual-open&#34;&gt;虚断 (Virtual Open)
&lt;/h2&gt;&lt;p&gt;一句话解释： 两个输入端没有电流流进去，就像引脚内部断路了一样。&lt;/p&gt;
&lt;h3 id=&#34;1-现象-1&#34;&gt;1. 现象
&lt;/h3&gt;&lt;p&gt;即：运放的输入引脚不吃电流。$$I_+ = 0, \quad I_- = 0$$&lt;/p&gt;
&lt;p&gt;例如在分析 V- 处的电压时，可以忽略运放对 V- 的影响
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214171836370.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251214171836370.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;2-为什么会有这个现象-1&#34;&gt;2. 为什么会有这个现象？
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;例如下面这张电路图，10M 电阻对于前端的这两个电阻网络来说，加不加它，对于整个电路来说其实没什么影响。那就可以简单认为 10M 这块是一个断路状态

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251214171314.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251214171314.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这得益于运放的&lt;strong&gt;输入阻抗 ($R_{in}$) 无穷大&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;公式：$I = U / R$&lt;/li&gt;
&lt;li&gt;现实：&lt;strong&gt;运放（尤其是 CMOS 工艺的）输入阻抗通常是 兆欧 ($M\Omega$) 甚至 吉欧 ($G\Omega$) 级别的&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;结论：流进引脚的电流通常是纳安 (nA) 甚至皮安 (pA) 级别的。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;工程视角&lt;/strong&gt;：这点电流对电路分流影响极小，我们可以直接忽略，认为电流根本进不去。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;运放的两个输入端就像是&lt;strong&gt;电压表&lt;/strong&gt;的探针，只负责“感知”电压，绝不“消耗”电流。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;工程师经验&#34;&gt;工程师经验
&lt;/h2&gt;&lt;p&gt;在分析任何线性运放电路时，可按这个&lt;strong&gt;三板斧&lt;/strong&gt;流程走&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;先找 $V_+$：看同相端接了什么电压。&lt;/li&gt;
&lt;li&gt;用虚短：强行让 $V_- = V_+$，列出第一个方程。&lt;/li&gt;
&lt;li&gt;用虚断：针对 $V_-$ 节点列写 KCL（基尔霍夫电流定律） —— “流进来的电流 = 流出去的电流”，因为没有电流流进运放肚子。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Hugo渲染Mermaid</title>
        <link>https://teaize.github.io/p/hugo%E6%B8%B2%E6%9F%93mermaid/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/hugo%E6%B8%B2%E6%9F%93mermaid/</guid>
        <description>&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251213143207280.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251213143207280.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;曾经翻网站翻博客找半天的答案，在 Gemini 的加持下，五分钟搞定&lt;/p&gt;
&lt;h3 id=&#34;第一步创建-mermaid-的渲染钩子&#34;&gt;第一步：创建 Mermaid 的渲染钩子
&lt;/h3&gt;&lt;p&gt;这个步骤是为了告诉 Hugo：当遇到语言标记为 &lt;code&gt;mermaid&lt;/code&gt; 的代码块时，不要高亮代码，而是将其包装在一个 &lt;code&gt;div&lt;/code&gt; 中，以便 JavaScript 库进行渲染。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在你的 Hugo 站点根目录下（注意&lt;strong&gt;不是&lt;/strong&gt;在 &lt;code&gt;themes&lt;/code&gt; 目录里），找到或创建 &lt;code&gt;layouts&lt;/code&gt; 文件夹。&lt;/li&gt;
&lt;li&gt;建立如下目录结构和文件： &lt;code&gt;layouts/_default/_markup/render-codeblock-mermaid.html&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;在该文件中粘贴以下代码：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-HTML&#34; data-lang=&#34;HTML&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mermaid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  {{ .Inner | safeHTML }}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{{ .Page.Store.Set &amp;#34;hasMermaid&amp;#34; true }}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;第二步引入-mermaid-javascript-库&#34;&gt;第二步：引入 Mermaid JavaScript 库
&lt;/h3&gt;&lt;p&gt;我们需要将 Mermaid 的核心 JS 脚本注入到页面底部。&lt;code&gt;hugo-theme-stack&lt;/code&gt; 主题预留了自定义页脚文件的位置。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在站点根目录下，创建文件： &lt;code&gt;layouts/partials/footer/custom.html&lt;/code&gt; (如果该文件已存在，直接在里面追加代码即可)&lt;/li&gt;
&lt;li&gt;在该文件中粘贴以下代码：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-HTML&#34; data-lang=&#34;HTML&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{{ if .Page.Store.Get &amp;#34;hasMermaid&amp;#34; }}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;script&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;module&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mermaid&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;mermaid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;initialize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;startOnLoad&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;theme&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;base&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 或者 &amp;#39;default&amp;#39;, &amp;#39;forest&amp;#39;, &amp;#39;neutral&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;securityLevel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;loose&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;script&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{{ end }}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;大功告成！&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Python脚本-本地CSV快速傅里叶变换</title>
        <link>https://teaize.github.io/p/python%E8%84%9A%E6%9C%AC-%E6%9C%AC%E5%9C%B0csv%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/python%E8%84%9A%E6%9C%AC-%E6%9C%AC%E5%9C%B0csv%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/</guid>
        <description>&lt;h3 id=&#34;python-代码&#34;&gt;Python 代码
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;103
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;104
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;105
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;106
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;107
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;108
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;109
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;110
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;111
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;112
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;113
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;114
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;115
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;116
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;117
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;118
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;119
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;120
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;121
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;122
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;123
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;124
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;125
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pandas&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scipy.fft&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fft&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fftfreq&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scipy.signal&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;find_peaks&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 【配置区域】请修改这里的信息&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 文件路径 (注意：Windows路径请用反斜杠 / 或 双斜杠 \\)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;FILE_PATH&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;sensor_data.csv&amp;#39;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 举例: &amp;#39;D:/data/test_01.xlsx&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 你要分析的那一列的表头名称 (Excel第一行的名字)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;COLUMN_NAME&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Voltage&amp;#39;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;# 举例: &amp;#39;NOx_ppm&amp;#39; 或 &amp;#39;AI_01&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 采样率 (Hz): 每秒采集多少个点？&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 警告：这个数字错了，分析出来的频率全都是错的！&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;FS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000.0&lt;/span&gt;                    &lt;span class=&#34;c1&#34;&gt;# 举例: 100Hz, 1000Hz&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 代码逻辑开始&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设置绘图风格和字体&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;font.sans-serif&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SimHei&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;axes.unicode_minus&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;bmh&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 使用一种比较专业的科研绘图风格&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;load_and_analyze&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 1. 读取数据 ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;正在读取文件: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FILE_PATH&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; ...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FILE_PATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endswith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.csv&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read_csv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FILE_PATH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FILE_PATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endswith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.xls&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.xlsx&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read_excel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FILE_PATH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;错误：只支持 .csv 或 .xlsx 格式文件&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 检查列名是否存在&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;COLUMN_NAME&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;columns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;错误：在文件中找不到列名 &amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;COLUMN_NAME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;文件包含的列名有: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;columns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 提取数据并转为 numpy 数组&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# dropna() 是为了防止空值报错&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;data_raw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;COLUMN_NAME&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dropna&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;成功读取 &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_raw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; 个数据点&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;FileNotFoundError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;------------------------------------------------------&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;【没找到文件】: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FILE_PATH&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;为了演示效果，我将自动生成一段带 50Hz 干扰的模拟数据...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;------------------------------------------------------&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 生成模拟数据 (如果没找到文件)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;N_sim&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;t_sim&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;linspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N_sim&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N_sim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 真实信号(2Hz) + 工频干扰(50Hz) + 随机噪声&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;data_raw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t_sim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t_sim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;normal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N_sim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 2. 预处理 (去直流/去偏移) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# FFT 对直流分量(0Hz)非常敏感，如果不减去平均值，0Hz的柱子会通天高，&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 导致你看不清后面的干扰。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data_detrend&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_raw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_raw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 3. 执行 FFT ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_detrend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;yf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fft&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_detrend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;xf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fftfreq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 取前半部分 (正频率)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;x_plot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;xf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;y_plot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 4. 自动抓鬼 (寻找峰值) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 寻找频谱中显著的尖峰 (高度超过最大值的 10%)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;peaks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;find_peaks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;【诊断报告】&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;发现潜在干扰源 (能量Top 5):&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 对峰值按高度排序&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;peak_indices&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;peaks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argsort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peaks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])[::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]][:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;peak_indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;freq_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;amp_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 忽略接近 0Hz 的低频 (那是信号本身)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freq_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;gt; 频率: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;freq_val&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.1f&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; Hz  (强度: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;amp_val&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.4f&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;48&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freq_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;52&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;   [警报] 疑似工频干扰 (电源/接地问题)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;98&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freq_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;102&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;   [警报] 疑似整流纹波 (电源板滤波电容问题)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 5. 绘图 ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;fig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ax1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subplots&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;figsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 图1: 时域 (原始波形)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 为了防止数据量太大卡死，只画前 1000 个点预览&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;preview_N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;time_axis&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preview_N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;time_axis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data_raw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preview_N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;k-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;原始信号波形 (仅显示前 &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preview_N&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; 点)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;时间 (s)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;幅值&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 图2: 频域 (FFT 结果)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 标记出找到的干扰峰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peaks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y_plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peaks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;bx&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;检测到的峰值&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;频谱分析 (FFT Spectrum) - 干扰侦查&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;频率 (Hz)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;干扰强度&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 只显示到奈奎斯特频率&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ax2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tight_layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;load_and_analyze&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这段代码做了三件贴心的事：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;自动识别格式： 支持 &lt;code&gt;.csv&lt;/code&gt; 和 &lt;code&gt;.xlsx&lt;/code&gt; (Excel)。&lt;/li&gt;
&lt;li&gt;自动去直流 (Detrend)： 很多传感器数据有一个固定的电压底数（比如 2.5V），如果不去掉，0Hz 的能量会特别大，把干扰信号淹没。代码会自动把数据“拉平”到 0 基准线。&lt;/li&gt;
&lt;li&gt;自动抓鬼 (Peak Detection)： 不仅画图，还会自动打印出能量最大的前 3 个频率点（告诉你干扰到底是多少 Hz）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;你的准备工作&#34;&gt;你的准备工作
&lt;/h3&gt;&lt;p&gt;你需要知道三个信息：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;文件路径： 你的数据文件放在哪？(例如 &lt;code&gt;D:/data/sensor_log.csv&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;列名： 哪一列是你要分析的数据？(例如 &lt;code&gt;voltage&lt;/code&gt; 或 &lt;code&gt;concentration&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;采样率&lt;/strong&gt; (Fs)： 当时是以什么速度采的？(例如 1 秒 1 个点就是 1Hz，1 秒 100 个点就是 100Hz)。这个必须准，否则算出来的频率是错的。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;程序输出&#34;&gt;程序输出
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;正在读取文件&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cems_fault_data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;csv&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;成功读取&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5000&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;个数据点&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;诊断报告&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;发现潜在干扰源&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;能量Top&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;频率&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.0&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Hz&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;强度&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.4991&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;频率&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;50.0&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Hz&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;强度&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.1984&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;警报&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;疑似工频干扰&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;电源&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;接地问题&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213135552.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213135552.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>补偿原则</title>
        <link>https://teaize.github.io/p/%E8%A1%A5%E5%81%BF%E5%8E%9F%E5%88%99/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%A1%A5%E5%81%BF%E5%8E%9F%E5%88%99/</guid>
        <description>&lt;p&gt;美国 Teledyne API 的 T100U 型二氧化硫分析仪性能优化介绍如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;光学快门与参考探测器：使用光学快门和参考探测器来&lt;strong&gt;补偿光电倍增管的漂移和紫外灯强度的变化&lt;/strong&gt;，确保长期稳定性。&lt;/li&gt;
&lt;li&gt;氢碳干扰抑制器（Kicker）：内置氢碳干扰抑制器，减少氢碳类气体对测量的干扰，提高选择性。&lt;/li&gt;
&lt;li&gt;电子噪声校正：利用紫外光源的亮暗阶段，持续检测和校正电子噪声，增强仪器的稳定性和灵敏度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;这里涉及到仪器设计的核心权衡（Trade-off）：&lt;strong&gt;在“完美精度”与“成本/复杂度”之间寻找平衡点&lt;/strong&gt;。仪器里几乎所有东西都在老化：电阻会漂、电容会漏液、滤光片会霉变、泵膜会变硬等等，如果给每个部件都设计一套“补偿回路”，这台仪器将造价上百万，且极其复杂以至于无法维修。&lt;/p&gt;
&lt;p&gt;那么，&lt;strong&gt;如何决定谁值得被补偿，而谁可以被忽略的呢&lt;/strong&gt;，这主要遵循以下四大判据：&lt;/p&gt;
&lt;h3 id=&#34;判据一处于信号链的最前端吗权重最高&#34;&gt;判据一：处于“信号链的最前端”吗？（权重最高）
&lt;/h3&gt;&lt;p&gt;这是最重要的原则。&lt;strong&gt;误差在源头会被放大，在末端会被缩小。&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;必须要补偿的：光源 (Source) 和 探测器 (Detector)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;理由： 它们处于信号链的&lt;strong&gt;最上游&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;光源（如紫外灯）： 根据比尔定律 $I = I_0 \cdot e^{-kc}$，光源强度 $I_0$ 是公式的基准。如果灯亮暗波动 1%，最终浓度的误差可能就是 10% 甚至更多（取决于吸光度）。&lt;/li&gt;
&lt;li&gt;探测器（如 PMT）： 它是把光变成电的第一步。它的增益（Gain）对温度和高压极其敏感。&lt;/li&gt;
&lt;li&gt;设计： 所以我们看到了&lt;strong&gt;参考探测器&lt;/strong&gt;（补偿灯）、&lt;strong&gt;光学快门&lt;/strong&gt;（补偿 PMT 暗电流）、&lt;strong&gt;温控模块&lt;/strong&gt;（补偿光路变形）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;可以忽略的：后级放大电路的电阻电容
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;理由：&lt;/strong&gt; 主板上的 ADC 前面的运放电阻，虽然也会老化（温漂），但现在的精密电阻温漂只有 10ppm/°C。相对于 PMT 动不动 10% 的漂移，电阻这 0.001% 的误差完全是“大巫见小巫”，可以忽略不计。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;判据二老化是快变量还是慢变量&#34;&gt;判据二：老化是“快变量”还是“慢变量”？
&lt;/h3&gt;&lt;p&gt;我们要看这个老化的时间尺度，是“秒级/分钟级”，还是“月级/年级”。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;必须要补偿的：快变量 (Fast Drift)
&lt;ul&gt;
&lt;li&gt;例子： 温度对半导体激光器 (TDLAS) 波长的影响。&lt;/li&gt;
&lt;li&gt;特征： 只要环境温度变 0.1°C（几秒钟的事），激光波长就跑偏了，测不到气体了。&lt;/li&gt;
&lt;li&gt;设计： 必须上 &lt;strong&gt;TEC (半导体制冷器)&lt;/strong&gt; 进行毫秒级的实时闭环控制补偿。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;可以忽略（交给标定）：慢变量 (Slow Drift)
&lt;ul&gt;
&lt;li&gt;例子： 滤光片 (Optical Filter) 的透光率下降、气路管壁的轻微吸附增加。&lt;/li&gt;
&lt;li&gt;特征： 这种变化是按“月”发生的。&lt;/li&gt;
&lt;li&gt;设计： 不需要做硬件补偿。&lt;/li&gt;
&lt;li&gt;解决方案： &lt;strong&gt;定期校准 (Calibration)&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;为什么让你每周通一次“标气”？其实通标气就是在&lt;strong&gt;软件上&lt;/strong&gt;一次性把这些“慢速老化”的部件误差全补回来（重新计算斜率 $K$ 和截距 $B$）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;判据三是否具有可预测的物理模型&#34;&gt;判据三：是否具有“可预测的物理模型”？
&lt;/h3&gt;&lt;p&gt;如果这个老化是有规律的（遵循物理公式），我们就能用软件（数学）补偿；如果是随机的，就必须加硬件。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;用软件补偿：气体密度受温度/压力的影响
&lt;ul&gt;
&lt;li&gt;原理： 理想气体状态方程 $PV=nRT$。&lt;/li&gt;
&lt;li&gt;设计： 我们不需要把气室做成恒压的（硬件成本高），我们只需要装一个便宜的压力传感器。&lt;/li&gt;
&lt;li&gt;算法： 测到压力变了，直接套公式 $C_{new} = C_{old} \times (P_0/P)$ 算回去就行。这叫 P/T 补偿。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;必须用硬件补偿：PMT 的灵敏度衰减
&lt;ul&gt;
&lt;li&gt;原理： PMT 的衰减是量子层面的，非常玄学，没法写出一个通用的数学公式说“使用了 100 小时衰减 1%”。&lt;/li&gt;
&lt;li&gt;设计： 既然算不出来，就必须加&lt;strong&gt;参考光路&lt;/strong&gt;去实时“盯着”它测。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;判据四成本与寿命的博弈-cost-benefit&#34;&gt;判据四：成本与寿命的博弈 (Cost-Benefit)
&lt;/h3&gt;&lt;p&gt;有些部件老化了，补偿它的成本比换一个新的还贵，那就选择“耗材化”**。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;不补偿，直接换：蠕动泵管、过滤器滤芯
&lt;ul&gt;
&lt;li&gt;泵管老化会导致流量下降。理论上，你可以加一个昂贵的“质量流量计 (MFC)”来实时调节泵的转速以补偿流量。&lt;/li&gt;
&lt;li&gt;决策： 但一个 MFC 要 5000 块，一根泵管才 50 块。&lt;/li&gt;
&lt;li&gt;结果： 还可以用的时候就凑合用（流量波动通常不影响浓度测量原理），用坏了就报警让你换。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;不补偿，直接用：转子流量计
&lt;ul&gt;
&lt;li&gt;玻璃管上的刻度其实会因为脏污而看不清，或者浮子磨损导致读数不准。&lt;/li&gt;
&lt;li&gt;决策： CEMS 对流速要求不高（只要有气就行），所以不需要补偿，只要看到浮子在飘就行。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;总结设计师的补偿决策矩阵&#34;&gt;总结：设计师的“补偿决策矩阵”
&lt;/h3&gt;&lt;p&gt;当审视一台分析仪时，可以按这个逻辑去看：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;部件老化特性&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;影响程度&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;变化速度&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;决策方案&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;典型例子&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;源头、非线性&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;致命 (Fatal)&lt;/td&gt;
          &lt;td&gt;快 (分/秒)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;硬件实时补偿&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;光源参考探测器、PMT 快门、激光器温控&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;物理规律明确&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;显著 (Significant)&lt;/td&gt;
          &lt;td&gt;中 (小时/天)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;软件算法补偿&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;压力补偿、温度补偿 (P/T Comp)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;线性、缓慢&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;一般 (Moderate)&lt;/td&gt;
          &lt;td&gt;慢 (周/月)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;定期标定 (校准)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;滤光片老化、光路积灰、传感器灵敏度漂移&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;机械磨损&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;轻微 (Minor)&lt;/td&gt;
          &lt;td&gt;慢 (月/年)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;定期更换 (维护)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;泵管、密封圈、滤芯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;电路元件&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;极微 (Negligible)&lt;/td&gt;
          &lt;td&gt;极慢 (年)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;忽略&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;电阻电容、PCB 板材&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;所以，&lt;strong&gt;“忽略”并不是真的不管，而是因为它的变化太慢，已经被“每周校准”这个操作给覆盖掉了&lt;/strong&gt;；或者它的变化太快且无规律，被“硬件参考路”给抵消掉了。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>传感器过采样</title>
        <link>https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E8%BF%87%E9%87%87%E6%A0%B7/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E8%BF%87%E9%87%87%E6%A0%B7/</guid>
        <description>&lt;p&gt;通常我们认为：如果你的尺子最小刻度是 1mm，你就绝对读不出 0.1mm 的长度。 但在信号处理里，&lt;strong&gt;我们能！&lt;/strong&gt; 只要你的手“抖”得够均匀。&lt;/p&gt;
&lt;p&gt;这是一个非常反直觉，但却让电子工程师为之着迷的魔法，叫做 “过采样技术” (Oversampling)。&lt;/p&gt;
&lt;h3 id=&#34;一-核心原理为什么平均能增加精度&#34;&gt;一、 核心原理：为什么平均能增加精度？
&lt;/h3&gt;&lt;p&gt;假设你有一个 10 位的 ADC，它的电压测量范围是 0~5V。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;最小刻度 (LSB)： $\approx 5\text{mV}$。&lt;/li&gt;
&lt;li&gt;现状： 只要电压在 3.000V 到 3.004V 之间，ADC 读出来的数永远是 3.000V。你丢失了小数点后的精度。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;1-静态测量失败&#34;&gt;1. 静态测量（失败）
&lt;/h4&gt;&lt;p&gt;如果你测一个 3.002V 的真实信号。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第 1 次测：3.000V&lt;/li&gt;
&lt;li&gt;第 100 次测：3.000V&lt;/li&gt;
&lt;li&gt;平均值： 3.000V。&lt;/li&gt;
&lt;li&gt;结论： 无论你平均多少次，精度没变，还是丢失了 0.002V。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-动态测量过采样成功&#34;&gt;2. 动态测量（过采样成功！）
&lt;/h4&gt;&lt;p&gt;现在，我们在信号上叠加一点&lt;strong&gt;白噪声&lt;/strong&gt;（或者信号本身自带噪声），让信号在 3.002V 上下抖动，抖动幅度大约 5mV。这就意味着，信号有时候会瞬间跳过 &lt;strong&gt;3.0025V&lt;/strong&gt; 这个门槛（ADC 四舍五入的边界）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;真实情况： 信号在抖动，有 40% 的概率跳到了 3.005V 以上（被 ADC 读作 3.005V），有 60% 的概率在下面（被 ADC 读作 3.000V）。&lt;/li&gt;
&lt;li&gt;测量 10 次的结果：
&lt;ul&gt;
&lt;li&gt;3.000, 3.000, 3.005, 3.000, 3.005, 3.000, 3.005, 3.000, 3.000, 3.005&lt;/li&gt;
&lt;li&gt;(6 个 3.000，4 个 3.005)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;算平均值：$$\frac{(6 \times 3.000) + (4 \times 3.005)}{10} = \mathbf{3.002V}$$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;见证奇迹：虽然你的 ADC 每次只能读 3.000 或 3.005，但通过平均，你竟然算出了 3.002V 这个本来读不出来的数值！&lt;/p&gt;
&lt;p&gt;这就是过采样的本质：&lt;strong&gt;利用噪声（抖动），把“看不见的小数位”转化为了“出现的概率”，再通过统计平均把它还原出来&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;二-那个4-倍--1-位的公式是怎么来的&#34;&gt;二、 那个“4 倍 = 1 位”的公式是怎么来的？
&lt;/h3&gt;&lt;p&gt;这里有一个非常漂亮的数学推导（信噪比公式）。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;信号 (Signal) 的累加特性：
&lt;ul&gt;
&lt;li&gt;如果你把 4 个样本相加。信号是同相位的（直流或慢变信号）。&lt;/li&gt;
&lt;li&gt;总信号强度 = $4 \times S$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;噪声 (Noise) 的累加特性：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;白噪声是随机的（不相关）。统计学告诉我们，随机噪声相加，不是线性增加，而是按平方根增加&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;总噪声强度 = $\sqrt{4} \times N = 2 \times N$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;信噪比 (SNR) 的变化：$$\text{新的SNR} = \frac{\text{总信号}}{\text{总噪声}} = \frac{4S}{2N} = 2 \times \frac{S}{N}$$
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;结论：&lt;/strong&gt; 采样次数翻 4 倍，信噪比翻 2 倍。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;位数的含义：
&lt;ul&gt;
&lt;li&gt;在二进制里，翻 2 倍 = 增加 1 位 (1 bit)。&lt;/li&gt;
&lt;li&gt;比如：二进制 &lt;code&gt;11&lt;/code&gt; (3) $\to$ 左移一位/乘 2 $\to$ &lt;code&gt;110&lt;/code&gt; (6)。
最终公式：
想要增加 $w$ 位分辨率，需要的过采样倍数 $f_{os}$ 是：$$f_{os} = 4^w$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;增加 1 位 (分辨率翻倍)： 需要 $4^1 = 4$ 倍采样。&lt;/li&gt;
&lt;li&gt;增加 2 位 (分辨率 x4)： 需要 $4^2 = 16$ 倍采样。&lt;/li&gt;
&lt;li&gt;增加 3 位 (分辨率 x8)： 需要 $4^3 = 64$ 倍采样。&lt;/li&gt;
&lt;li&gt;增加 4 位 (分辨率 x16)： 需要 $4^4 = 256$ 倍采样。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;三-一个必须满足的坑抖动-dithering&#34;&gt;三、 一个必须满足的“坑”：抖动 (Dithering)
&lt;/h3&gt;&lt;p&gt;你可能注意到了，我刚才强调了一个前提：&lt;strong&gt;必须有噪声&lt;/strong&gt;。如果你的信号非常非常干净，就像一潭死水，完全不抖动（或者噪声小于 0.5 LSB）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;那么无论你采多少次，读数永远是固定的。平均值也变不了。&lt;/li&gt;
&lt;li&gt;这时候，过采样失效。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;工程师的骚操作： 在高端仪器设计中，如果信号太干净，我们甚至会&lt;strong&gt;故意人为注入一点白噪声&lt;/strong&gt;（这一步叫 &lt;strong&gt;Dithering / 抖动&lt;/strong&gt;），然后再进行过采样。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一步： 加噪声（把信号弄脏）。&lt;/li&gt;
&lt;li&gt;第二步： 快速采样（捕捉概率）。&lt;/li&gt;
&lt;li&gt;第三步： 求平均（把噪声滤掉，同时提取出高精度信号）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就像为了把地扫干净，先把灰尘扬起来再吸走一样，听起来疯狂，但非常有效。&lt;/p&gt;
&lt;h3 id=&#34;四案例代码&#34;&gt;四、案例代码
&lt;/h3&gt;&lt;p&gt;我们可以用几行 Python 代码来验证这个“4 倍定律”。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 设定真实电压 (这是上帝视角，ADC不知道)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;true_voltage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.14159&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 我们想测出小数点后5位&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;adc_resolution&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.0&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;# ADC只能分辨整数 (0, 1, 2, 3, 4...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 模拟单次测量 (1000次)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 如果没有噪声，np.round(3.14159) 永远是 3.0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;measurements_raw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;round&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;true_voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;单次测量平均值 (无噪声): &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;measurements_raw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 结果: 3.0 (误差巨大)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 模拟过采样 (加入噪声 + 平均)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 增加 4 位分辨率 -&amp;gt; 需要 4^4 = 256 倍过采样&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;n_samples&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;noise_level&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 噪声必须足够跨越量化台阶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 进行 100 组实验&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;results&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 模拟采集 256 个点，每个点都带有随机噪声&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;samples&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;true_voltage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;normal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;noise_level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n_samples&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 模拟 ADC 的量化过程 (强制变成整数)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;digitized_samples&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;round&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;samples&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 过采样核心：求平均&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;avg_result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;digitized_samples&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;results&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;avg_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;过采样(&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_samples&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;倍)测量平均值: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;results&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.4f&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 结果通常是: 3.14xx (非常接近真实值！)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;程序输出&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;单次测量平均值&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;无噪声&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;过采样&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;倍&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;测量平均值&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.1372&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;过采样 (Oversampling) 是用“&lt;strong&gt;时间换精度&lt;/strong&gt;”的策略。&lt;/li&gt;
&lt;li&gt;代价： 你的 ADC 速度要非常快。
&lt;ul&gt;
&lt;li&gt;为了得到 1 个高精度的 10Hz 数据，你可能需要让 ADC 以 2560Hz 的速度狂奔。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;公式： &lt;strong&gt;$4^n$&lt;/strong&gt;。每多采 4 倍，分辨率加 1 位。&lt;/li&gt;
&lt;li&gt;灵魂： &lt;strong&gt;噪声 (Noise)&lt;/strong&gt;。在这里，噪声不是敌人，而是帮我们“撬开”精度大门的助攻手。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;思考&#34;&gt;思考🤔
&lt;/h3&gt;&lt;p&gt;这和前面讲的调制与解调非常的相似&lt;/p&gt;
</description>
        </item>
        <item>
        <title>动手实现控温电路</title>
        <link>https://teaize.github.io/p/%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E6%8E%A7%E6%B8%A9%E7%94%B5%E8%B7%AF/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E6%8E%A7%E6%B8%A9%E7%94%B5%E8%B7%AF/</guid>
        <description>&lt;p&gt;本篇继 [[信号处理之输出控制]] 后，从理论到实战&lt;/p&gt;
&lt;p&gt;应用过程可以分为三步走：&lt;strong&gt;硬件闭环搭建&lt;/strong&gt; $\rightarrow$ &lt;strong&gt;软件核心代码&lt;/strong&gt; $\rightarrow$ &lt;strong&gt;定时调度&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;第一步硬件闭环搭建&#34;&gt;第一步：硬件闭环搭建
&lt;/h3&gt;&lt;p&gt;PID 是一个闭环控制，你的硬件必须形成一个圆。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;感知层 (Input)：PT100 $\to$ STM32
&lt;ul&gt;
&lt;li&gt;难点： PT100 是电阻变化，STM32 的 ADC 只能测电压。而且 PT100 变化很微弱（0.385$\Omega$/°C）。&lt;/li&gt;
&lt;li&gt;方案 A (推荐)： 使用专用芯片 &lt;strong&gt;MAX31865&lt;/strong&gt;。它能直接读 PT100 电阻并通过 SPI 接口告诉 STM32 温度值，精度极高，省去模拟电路设计的麻烦。&lt;/li&gt;
&lt;li&gt;方案 B (省钱)： 电桥电路 + 运算放大器 $\to$ STM32 ADC 引脚。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;执行层 (Output)：STM32 $\to$ 加热棒
&lt;ul&gt;
&lt;li&gt;难点： STM32 的 GPIO 只有 3.3V/20mA，带不动 220V 或 24V 的加热棒。&lt;/li&gt;
&lt;li&gt;方案： 使用 PWM (脉冲宽度调制) 控制。
&lt;ul&gt;
&lt;li&gt;直流加热棒： GPIO $\to$ MOSFET (场效应管) $\to$ 加热棒。&lt;/li&gt;
&lt;li&gt;交流加热棒 (220V)： GPIO $\to$ SSR (固态继电器) $\to$ 加热棒。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;控制原理：比如 PID 算出输出 50%，你就让 PWM 占空比为 50%（通电 0.5 秒，断电 0.5 秒）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第二步软件核心代码&#34;&gt;第二步：软件核心代码
&lt;/h3&gt;&lt;p&gt;这是你最关心的部分。我们需要把 Python 里的类变成 C 语言的结构体和函数。&lt;/p&gt;
&lt;p&gt;这里有一份可以直接用在 STM32 上的标准 PID 代码模板（带抗饱和功能）：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#include &amp;#34;main.h&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;定义&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PID&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;对象结构体&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;---&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;参数&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;调参用&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Kp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;比例系数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;积分系数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Kd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;微分系数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;---&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;限制&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;保护用&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Output_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;最大输出&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;比如&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PWM&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Output_Min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;最小输出&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;比如&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Integral_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;积分限幅&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;抗饱和用&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;---&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;过程变量&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;记忆用&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Target_Temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;目标温度&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Last_Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;上一次的误差&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;算D项用&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;积分累计值&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;算I项用&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PID_Controller&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;初始化函数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PID_Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PID_Controller&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Kp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Ki&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Kd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Output_Max&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;假设&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PWM&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;周期是&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Output_Min&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Max&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;500.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;积分限制在一般量程的一半左右&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Target_Temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Last_Error&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;核心计算函数&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;放在定时器中断里调用&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;当前实测温度&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;应该输出的&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PWM&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;占空比&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PID_Compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PID_Controller&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p_term&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i_term&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d_term&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;计算误差&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Target_Temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;计算&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;项&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;弹簧&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;p_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Kp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;计算&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;项&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;记忆&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;关键&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;带抗饱和逻辑&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;积分限幅&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Clamping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;--&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;i_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Ki&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integral_Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;D&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;计算&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;D&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;项&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;预判&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;d_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Kd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Last_Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Last_Error&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;记住这次误差&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;下次用&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;汇总输出&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d_term&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;输出限幅&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;防止&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PWM&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;溢出&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Output_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Output_Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Output_Min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Output_Min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;第三步定时调度-the-timing&#34;&gt;第三步：定时调度 (The Timing)
&lt;/h3&gt;&lt;p&gt;这是新手最容易忽略的。PID 算法不仅涉及数学，还涉及时间。公式里的积分和微分，都隐含了一个前提：采样周期 ($dt$) 必须是固定的！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;错误做法： 在 &lt;code&gt;main&lt;/code&gt; 函数的 &lt;code&gt;while(1)&lt;/code&gt; 里狂跑 PID。
&lt;ul&gt;
&lt;li&gt;后果： 如果你的程序有时候忙别的（比如处理屏幕显示），循环变慢了，积分项的时间基准就乱了，PID 参数会完全失效。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;正确做法： 使用 STM32 的定时器中断 (Timer Interrupt)。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;实战架构&#34;&gt;实战架构
&lt;/h4&gt;&lt;p&gt;假设我们控制频率为 &lt;strong&gt;10Hz&lt;/strong&gt; (每 100ms 算一次)。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 定义一个全局 PID 对象
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;PID_Controller&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HeaterPID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 主函数初始化
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 初始化硬件：SPI(读温度), TIM(产PWM), TIM(调度中断)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;MX_SPI1_Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;MX_TIM2_Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 用于 PWM 输出
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;MX_TIM3_Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 用于 100ms 中断
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 初始化 PID 参数 (需要调试出来)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;PID_Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HeaterPID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;50.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;10.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;HeaterPID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Target_Temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;315.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 设定目标
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 开启 PWM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_TIM_PWM_Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM_CHANNEL_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 开启调度中断
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;HAL_TIM_Base_Start_IT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 主循环处理低优先级任务：屏幕显示、按键、Modbus通讯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 不要在这里算 PID！
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 定时器中断回调函数 (每 100ms 触发一次)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;HAL_TIM_PeriodElapsedCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TIM_HandleTypeDef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Instance&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 1. 读取传感器 (通过 SPI 读取 MAX31865)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;now_temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;MAX31865_Read_Temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 2. 运算 PID
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pwm_duty&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;PID_Compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HeaterPID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;now_temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// 3. 执行输出 (修改 PWM 寄存器 CCR)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;__HAL_TIM_SET_COMPARE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htim2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TIM_CHANNEL_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pwm_duty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;第四步如何调参-tuning--那个玄学部分&#34;&gt;第四步：如何调参 (Tuning) —— 那个“玄学”部分
&lt;/h3&gt;&lt;p&gt;代码写进去了，但 Kp, Ki, Kd 填多少？这里有一套“傻瓜口诀”，按照顺序来：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;先置零： 把 $K_i$ 和 $K_d$ 设为 0，只留 $K_p$。&lt;/li&gt;
&lt;li&gt;调 P (弹簧)：
&lt;ul&gt;
&lt;li&gt;慢慢加大 $K_p$，直到温度开始在目标值（315°C）附近等幅震荡（像波浪一样不停）。&lt;/li&gt;
&lt;li&gt;此时把 $K_p$ 乘以 0.6，作为最终的 $K_p$。&lt;/li&gt;
&lt;li&gt;现象：温度能快速上去，但还有静差（比如卡在 310°C）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;调 I (推手)：
&lt;ul&gt;
&lt;li&gt;慢慢加大 $K_i$（从小数值开始，如 0.01）。&lt;/li&gt;
&lt;li&gt;观察那 5°C 的静差是不是慢慢消失了。&lt;/li&gt;
&lt;li&gt;注意：如果 $K_i$ 太大，温度会冲过头（超调）然后荡很久。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;调 D (阻尼)：
&lt;ul&gt;
&lt;li&gt;如果你发现温度冲过头比较严重，或者震荡收敛太慢，加一点点 $K_d$。&lt;/li&gt;
&lt;li&gt;一般加热控制中，D 可以很小或者为 0（PI 控制通常就够用了）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;p&gt;要在 STM32 上应用 PID：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;硬件： 买个 MAX31865 读 PT100，用 MOSFET/SSR 驱动加热棒。&lt;/li&gt;
&lt;li&gt;软件： 复制上面的 C 结构体和函数。&lt;/li&gt;
&lt;li&gt;架构： 把 &lt;code&gt;PID_Compute&lt;/code&gt; 扔进 100ms 的定时器中断里，千万别放在 &lt;code&gt;while(1)&lt;/code&gt; 里跑。&lt;/li&gt;
&lt;li&gt;心态： PID 参数不是算出来的，是试出来的。准备好耐心，对着串口打印的波形慢慢调。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>多项式拟合</title>
        <link>https://teaize.github.io/p/%E5%A4%9A%E9%A1%B9%E5%BC%8F%E6%8B%9F%E5%90%88/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%A4%9A%E9%A1%B9%E5%BC%8F%E6%8B%9F%E5%90%88/</guid>
        <description>&lt;p&gt;继上篇 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Fetching Title#qeku&lt;/a&gt; 说到的多项式拟合，这里具体讲讲多项式拟合方法的应用&lt;/p&gt;
&lt;h3 id=&#34;案例&#34;&gt;案例
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 步骤 1: 模拟物理世界 (生成非线性数据)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 假设我们用 7 瓶标气做校准：0, 10, 20... 100 ppm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;true_concentration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;40&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 模拟传感器的物理响应：&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# V = 5 * (1 - e^(-0.015 * C))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 这是一种典型的饱和响应，浓度越高，电压涨得越慢&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;5.0&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 最大电压 (V)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.015&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;true_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 加一点点噪声，模拟真实电路的波动&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;normal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.005&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;原始电压测量值 (V):&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;round&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 步骤 2: 算法核心 (计算线性化系数)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 目标：找到一个多项式 C = f(V)，把电压 V 变回浓度 C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 这里我们选用 3次多项式 (Cubic Fitting)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;degree&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# polyfit(x, y, deg) -&amp;gt; 注意这里 x 是电压(输入), y 是浓度(目标)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;coeffs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;polyfit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;true_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;degree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 生成多项式函数对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;linearization_func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poly1d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;coeffs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;--- 计算出的线性化系数 (存入单片机) ---&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;a (3次项): &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;coeffs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.4f&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;b (2次项): &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;coeffs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.4f&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;c (1次项): &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;coeffs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.4f&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;d (截距):  &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;coeffs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.4f&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 步骤 3: 验证效果 (应用系数)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 把原始的弯曲电压带入公式，看看算出来的浓度是不是直的&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;calculated_concentration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linearization_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;校准后计算浓度 (ppm):&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;round&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;calculated_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;真实标准气浓度 (ppm):&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;true_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 步骤 4: 画图展示&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 图1：拉直前（原始物理响应）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subplot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scatter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;true_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;red&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;实测点&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;true_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;raw_voltage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;线性化前：传感器原始响应 (弯曲)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;真实浓度 (ppm)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;传感器电压 (V)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linestyle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;:&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 图2：拉直后（经过算法处理）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subplot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 画出理想直线&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;k-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;理想直线 (y=x)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 画出校准后的点&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scatter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;true_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calculated_concentration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;marker&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;s&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;算法输出&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;线性化后：最终显示数值 (笔直)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;真实浓度 (ppm)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;屏幕显示浓度 (ppm)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linestyle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;:&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tight_layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;输出结果

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213100107.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213100107.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;原始电压测量值&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;2.000e-03&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;6.960e-01&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.299e+00&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.264e+00&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.966e+00&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.493e+00&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.892e+00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;---&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;计算出的线性化系数&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;存入单片机&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;次项&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.0962&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;次项&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.7772&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;次项&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;15.9618&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;截距&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.2106&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;校准后计算浓度&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ppm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.2&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;10.4&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;19.9&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;39.5&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;60.1&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;80.6&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;99.6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;真实标准气浓度&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ppm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;40&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;60&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;80&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在这段代码中，模拟了一个真实的物理场景：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;物理世界（不完美）： 你的传感器（比如 NDIR 探测器）是&lt;strong&gt;非线性&lt;/strong&gt;的。随着浓度升高，电压增加得越来越慢（出现了饱和效应），这是一条&lt;strong&gt;弯曲&lt;/strong&gt;的线。&lt;/li&gt;
&lt;li&gt;算法世界（修正）： 我们通过多项式拟合，强行算出一组系数。利用这组系数，把那个弯曲的电压信号，反算成了&lt;strong&gt;笔直&lt;/strong&gt;的浓度信号。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;从代码输出中，我们得到了 4 个核心系数（3 次多项式）： &lt;code&gt;[ 1.096, -1.777, 15.962, -0.210 ]&lt;/code&gt;，这意味着，单片机里的公式是这样的：
$$浓度 = 1.096 \times V^3 - 1.777 \times V^2 + 15.962 \times V - 0.210$$&lt;/p&gt;
</description>
        </item>
        <item>
        <title>气路设计</title>
        <link>https://teaize.github.io/p/%E6%B0%94%E8%B7%AF%E8%AE%BE%E8%AE%A1/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%B0%94%E8%B7%AF%E8%AE%BE%E8%AE%A1/</guid>
        <description>&lt;h2 id=&#34;一-核心心法流体不停车-flow-continuity&#34;&gt;一、 核心心法：“流体不停车” (Flow Continuity)
&lt;/h2&gt;&lt;p&gt;新手设计的最大误区是：不用它的时候，就堵住它。 高手设计的核心原则是：&lt;strong&gt;不用它的时候，让它走旁路（Bypass）。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;1-为什么要旁路反面教材&#34;&gt;1. 为什么要旁路？（反面教材）
&lt;/h3&gt;&lt;p&gt;假设你有一根 50 米长的采样管，接在分析仪入口。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;错误设计： 校准时，三通阀切到标气，把采样管堵死（切断）。&lt;/li&gt;
&lt;li&gt;后果：
&lt;ul&gt;
&lt;li&gt;憋压： 采样泵还在工作，管路压力飙升。&lt;/li&gt;
&lt;li&gt;滞后： 采样气在管子里停滞了。等你校准完（比如 10 分钟）切回采样时，你测到的是 10 分钟前 抽上来的“&lt;strong&gt;旧气&lt;/strong&gt;”。你需要花很久把它排空，响应时间极其漫长。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-正确设计快速回路&#34;&gt;2. 正确设计：快速回路
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;动作： 校准时，三通阀把标气切进分析仪，同时把采样气切到“旁路排空口”。&lt;/li&gt;
&lt;li&gt;效果： 采样气一直在流动，一直保持新鲜。切回来的瞬间，你测到的就是当下的实时数据。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;二-两位三通阀的拓扑防乱指南&#34;&gt;二、 两位三通阀的“拓扑防乱指南”
&lt;/h2&gt;&lt;p&gt;当系统里有“零气、标气、反吹、采样”四个功能时，至少需要 3-4 个三通阀。新手很容易把 NO（常开）、NC（常闭）、COM（公共）接乱。这里可以用“倒推法”，&lt;strong&gt;不要从气源顺着画，要从分析仪入口倒着画&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;可以尝试下面两种设计方式&lt;/p&gt;
&lt;h3 id=&#34;级联式主从式设计逻辑&#34;&gt;级联式/主从式设计逻辑
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;V1（主裁判）： 决定大方向，是看“样气”还是看“校准气”。&lt;/li&gt;
&lt;li&gt;V2（副裁判）： 负责给 V1 输送弹药，决定那个“校准气”到底是“零气”还是“标气”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种设计的优点是逻辑层次分明，缺点是如果不加旁路，管路会有死体积。为了符合我们之前讲的“流体不停车”原则，我在图中特意为您加上了采样气的旁路设计。&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    %% --- 样式定义 ---
    classDef sample stroke:#006400,stroke-width:2px;
    classDef zero stroke:#1E90FF,stroke-width:2px;
    classDef span stroke:#FF8C00,stroke-width:2px;
    classDef common stroke:#333,stroke-width:3px;
    classDef bypass stroke:#999,stroke-dasharray: 5 5;

    %% --- 气源定义 ---
    SAMPLE_GAS[&#34;取样探头样气&#34;]
    ZERO_GAS[&#34;零气 (Zero)&#34;]
    SPAN_GAS[&#34;标气 (Span)&#34;]

    %% --- 旁路排空设计 (关键细节) ---
    %% 为了防止V1切到校准时，样气泵被憋死，必须在V1前加三通排空
    T_SAMPLE((&#34;三通&#34;))
    SAMPLE_GAS --&gt; T_SAMPLE
    T_SAMPLE --&#34;旁路排空&lt;br/&gt;(保持流动)&#34;--&gt; NV_S[&#34;针阀 (阻力模拟)&#34;]
    NV_S --&gt; VENT_S[&#34;排空&#34;]:::bypass

    %% --- V2：校准气选择级 (副阀) ---
    %% 逻辑：断电=零气，通电=标气
    V2[&#34;V2 - 校准选择阀&lt;br/&gt;(两位三通)&#34;]
    
    ZERO_GAS --&#34;NO (断电常开)&#34;--&gt; V2
    SPAN_GAS --&#34;NC (通电常闭)&#34;--&gt; V2

    %% --- V1：主功能切换级 (主阀) ---
    %% 逻辑：断电=采样，通电=校准
    V1[&#34;V1 - 测量/校准切换阀&lt;br/&gt;(两位三通)&#34;]

    %% 采样气进 V1 的 NO
    T_SAMPLE --&#34;NO (断电常开)&lt;br/&gt;采样模式&#34;--&gt; V1
    
    %% V2 的出口进 V1 的 NC (级联点)
    V2 --&#34;COM (出口)&lt;br/&gt;输送校准气&#34;--&gt; V1_NC_PORT(((&#34;级联点&lt;br/&gt;V1-NC&#34;)))
    V1_NC_PORT --&gt; V1

    %% --- 分析仪 ---
    V1 --&#34;COM (公共出口)&#34;--&gt; ANALYZER[&#34;分析仪&#34;]:::common

    %% --- 样式应用 ---
    class SAMPLE_GAS,T_SAMPLE,NV_S,VENT_S sample
    class ZERO_GAS zero
    class SPAN_GAS span
    class V1,V2,ANALYZER common
    class NV_S,VENT_S bypass
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;节省阀门接口： 只需要 2 个阀门就能搞定 3 路气。&lt;/li&gt;
&lt;li&gt;故障导向安全： 如果断电（V1 OFF），系统自动回到&lt;strong&gt;测量状态&lt;/strong&gt;。这是环保监测非常喜欢的逻辑（断电不断数）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;缺点（需要注意）：
&lt;ul&gt;
&lt;li&gt;标气置换慢： 当你从“校零”切到“校标”时，V2 到 V1 之间那一段管子里的“旧零气”必须先被吹走，需要一点置换时间（死体积）。&lt;/li&gt;
&lt;li&gt;逻辑耦合： 必须先开 V1，V2 的动作才有效。如果 V1 坏了（卡在 NO），V2 怎么动都没用。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;独立旁路设计&#34;&gt;独立旁路设计
&lt;/h3&gt;&lt;p&gt;所谓的“双两位三通阀组”（独立旁路设计）接法，其实是工业气路设计中用来彻底解决“死体积”和“流体滞后”的标准架构。&lt;/p&gt;
&lt;p&gt;它的核心逻辑不再是“一个阀门切两个气”，而是“&lt;strong&gt;每个气配一个专属的看门阀&lt;/strong&gt;”&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    %% 定义样式
    classDef sample stroke:#2E8B57,stroke-width:2px;
    classDef cal stroke:#1E90FF,stroke-width:2px;
    classDef bypass stroke:#A9A9A9,stroke-dasharray: 5 5;
    classDef analyzer fill:#f9f,stroke:#333,stroke-width:2px;

    %% --- 气源部分 ---
    S_GAS[&#34;取样探头样气&#34;] --&gt; PUMP[&#34;取样泵&#34;]
    CAL_GAS[&#34;标准气体钢瓶&#34;] --&gt; REG[&#34;减压阀&#34;]

    %% --- 阀门组 (核心逻辑) ---
    %% 阀门1：控制采样
    PUMP --&#34;COM (进气)&#34;--&gt; V1[&#34;V1-采样切换阀&lt;br/&gt;两位三通&#34;]
    
    %% 阀门2：控制标气
    REG --&#34;COM (进气)&#34;--&gt; V2[&#34;V2-标气切换阀&lt;br/&gt;两位三通&#34;]

    %% --- 旁路设计 (Bypass) ---
    %% 没通电时走这里 (NO口)
    V1 --&#34;NO (断电常开)&lt;br/&gt;保持流动/不停车&#34;--&gt; NV1[&#34;针阀/毛细管&lt;br/&gt;(模拟阻力)&#34;]
    V2 --&#34;NO (断电常开)&lt;br/&gt;放空/预吹扫&#34;--&gt; NV2[&#34;针阀/毛细管&lt;br/&gt;(模拟阻力)&#34;]
    
    NV1 --&gt; VENT1[&#34;排空/回流总管&#34;]:::bypass
    NV2 --&gt; VENT2[&#34;排空&#34;]:::bypass

    %% --- 测量主路 (Main Line) ---
    %% 通电时走这里 (NC口)
    V1 --&#34;NC (通电常闭)&lt;br/&gt;采样模式&#34;--&gt; T1((&#34;汇流三通/歧管&#34;))
    V2 --&#34;NC (通电常闭)&lt;br/&gt;校准模式&#34;--&gt; T1

    %% --- 分析仪部分 ---
    T1 --&gt; FL1[&#34;流量计&#34;]
    FL1 --&gt; ANALYZER[&#34;分析仪/传感器&#34;]:::analyzer
    ANALYZER --&gt; EXHAUST[&#34;废气排出&#34;]

    %% 应用样式
    class S_GAS,PUMP,V1 sample
    class CAL_GAS,REG,V2 cal
    class NV1,NV2,VENT1,VENT2 bypass
&lt;/div&gt;
&lt;h4 id=&#34;为什么要这么接对比传统接法&#34;&gt;为什么要这么接？（对比传统接法）
&lt;/h4&gt;&lt;p&gt;1、传统接法（单个三通阀切换）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;接口 A 接采样，接口 B 接标气，公共口接分析仪。&lt;/li&gt;
&lt;li&gt;致命缺陷： 当你测采样时，标气那条管子是死胡同。 当你测标气时，采样那条管子是死胡同（泵会被憋死，或者你得在前面再加三通，很麻烦）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2、双阀组接法（推荐接法）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优势 1：无死体积。 每一路气体在进入分析仪之前，都在自己的旁路里流动，没有“死水”。&lt;/li&gt;
&lt;li&gt;优势 2：无交叉污染。 两个阀门的 NC 口平时都是关死的，物理隔离非常好。&lt;/li&gt;
&lt;li&gt;优势 3：压力平衡。 你可以通过调节各自旁路上的针阀，让排空的阻力和进分析仪的阻力接近，切换时没有压力跳变。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;三-避坑经验防止压力台阶&#34;&gt;三、 避坑经验：防止“压力台阶”
&lt;/h2&gt;&lt;p&gt;阀门一多，最怕的就是&lt;strong&gt;压力不平衡&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;现象： 采样时压力是 -20 kPa，一切换到标气，压力变成了 +50 kPa。&lt;/li&gt;
&lt;li&gt;后果： 这种瞬间的压力跳变会让分析仪读数剧烈震荡，甚至冲坏传感器。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;解决办法： 所有进入同一个“选通阀”的气路，压力必须预先调节到一致。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;采样路： 如果是负压，无法改变。&lt;/li&gt;
&lt;li&gt;校准路： 必须加装旁路溢流口。
&lt;ul&gt;
&lt;li&gt;让标气在进入阀门前，先对大气敞开排空一部分。&lt;/li&gt;
&lt;li&gt;目的： 强行把标气压力拉低到常压，尽量接近采样压力，减小切换时的冲击。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;四-终极方案使用歧管汇流板&#34;&gt;四、 终极方案：使用“歧管/汇流板”
&lt;/h2&gt;&lt;p&gt;如果你的阀门超过 3 个，别再用管子把一个个阀门拧在一起了。那是一团乱麻，而且漏点极多。&lt;/p&gt;
&lt;p&gt;工程经验： 直接上 集成汇流板 (Manifold Block)。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;结构： 一块金属铝块，内部钻好了孔道。你只需要把阀门像插积木一样插上去。&lt;/li&gt;
&lt;li&gt;优点：
&lt;ul&gt;
&lt;li&gt;无死体积： 内部流道极短，换气极快。&lt;/li&gt;
&lt;li&gt;逻辑清晰： 通常是“公共出气口”和“独立进气口”。&lt;/li&gt;
&lt;li&gt;排查简单： 不用去撸管子，看阀门上的灯就行。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;总结&#34;&gt;总结
&lt;/h2&gt;&lt;p&gt;气路走到底的“单线思维”是电路思维（导线没电流也没事），但不是流体思维。流体设计三定律：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;死水必臭： 不要让气体在管子里停滞，不用它时就把它放空。&lt;/li&gt;
&lt;li&gt;压力要平： 切换阀两端的压力差越小越好。&lt;/li&gt;
&lt;li&gt;倒着思考： 从分析仪入口往回推，先决定“进谁”，再决定“谁备选”。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>实战之频域分析</title>
        <link>https://teaize.github.io/p/%E5%AE%9E%E6%88%98%E4%B9%8B%E9%A2%91%E5%9F%9F%E5%88%86%E6%9E%90/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%AE%9E%E6%88%98%E4%B9%8B%E9%A2%91%E5%9F%9F%E5%88%86%E6%9E%90/</guid>
        <description>&lt;p&gt;本篇继 [[信号处理之频域分析]] ，重点讲讲如何建立起这套“先诊断、后手术”的能力&lt;/p&gt;
&lt;h3 id=&#34;第一步高频抓取-capture-fast--要想看见鬼快门得够快&#34;&gt;第一步：高频抓取 (Capture Fast) —— “要想看见鬼，快门得够快”
&lt;/h3&gt;&lt;p&gt;这是新手最容易死的地方。你想诊断 50Hz 的干扰，却用 10Hz 的速度去采样，那你一辈子也找不到原因。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;指导思想： &lt;strong&gt;奈奎斯特采样定理 (Nyquist Theorem)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;原则： 你的采样频率 ($fs$) 必须至少是你&lt;strong&gt;怀疑的干扰频率&lt;/strong&gt;的 2 倍以上。
&lt;ul&gt;
&lt;li&gt;实战建议：如果你怀疑有工频干扰 (50Hz)，你的采样率至少要设到 &lt;strong&gt;200Hz 或 500Hz&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;为什么：只有采样够快，原本模糊的“幽灵”才能在数据里显形。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;动作： 在单片机或采集卡上，暂时关掉所有的平均算法，把采样率拉满，抓取一段**“裸数据” (Raw Data)** 存下来。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第二步频谱侦查-fft-diagnosis--把果汁还原成配方&#34;&gt;第二步：频谱侦查 (FFT Diagnosis) —— “把果汁还原成配方”
&lt;/h3&gt;&lt;p&gt;拿到裸数据后，不要盯着时域波形发呆。立刻做 FFT。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;指导思想： &lt;strong&gt;能量集中原则&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;逻辑： 噪声和信号的区别在于，信号通常是缓慢变化的（低频），而能够被“手术切除”的干扰，通常在频域上表现为“尖峰”**。&lt;/li&gt;
&lt;li&gt;判读字典（经验之谈）：
&lt;ul&gt;
&lt;li&gt;50Hz / 60Hz 尖峰： 电源干扰、接地不良。&lt;/li&gt;
&lt;li&gt;100Hz / 120Hz 尖峰： 全波整流后的纹波（电源板滤波电容坏了）。&lt;/li&gt;
&lt;li&gt;几十 kHz 尖峰： 开关电源 (Switching Power Supply) 的频率。&lt;/li&gt;
&lt;li&gt;特定低频 (如 0.5Hz)： 泵的脉动、机械震动。&lt;/li&gt;
&lt;li&gt;平坦的底噪 (Carpet)： 白噪声（热噪声），这个没法切，只能用平均法压下去。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三步手术方案-filter-design--对症下药&#34;&gt;第三步：手术方案 (Filter Design) —— “对症下药”
&lt;/h3&gt;&lt;p&gt;根据 FFT 看到的“病灶”，选择刀具。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;指导思想： &lt;strong&gt;保留信号，切除干扰，代价最小。&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;决策树：
&lt;ol&gt;
&lt;li&gt;如果你看到了“孤立的尖峰” (如 50Hz)：
&lt;ul&gt;
&lt;li&gt;方案： 陷波器 (Notch Filter)。&lt;/li&gt;
&lt;li&gt;理由： 精准打击，不伤及无辜（不影响反应速度）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果你看到“高频全是乱草”：
&lt;ul&gt;
&lt;li&gt;方案： 低通滤波器 (Low Pass, LPF)。&lt;/li&gt;
&lt;li&gt;理由： 只要低频的信号，高频的一刀切。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果你看到“0Hz 附近有个巨大的直流偏置” (基线漂移)：
&lt;ul&gt;
&lt;li&gt;方案： 高通滤波器 (High Pass) 或 &lt;strong&gt;去直流 (Detrend)&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;理由： 只看变化量，不看绝对值。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第四步仿真验证-simulation--在虚拟病人身上试刀&#34;&gt;第四步：仿真验证 (Simulation) —— “在虚拟病人身上试刀”
&lt;/h3&gt;&lt;p&gt;千万不要直接把滤波代码写进 CEMS 仪器里去运行。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;指导思想： 所见即所得 (WYSIWYG)。&lt;/li&gt;
&lt;li&gt;动作：
&lt;ol&gt;
&lt;li&gt;把第一步抓到的“裸数据”导入电脑（Python/Matlab）。&lt;/li&gt;
&lt;li&gt;用代码设计滤波器（就像我们刚才做的）。&lt;/li&gt;
&lt;li&gt;把滤波器作用在裸数据上，观察效果。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;关键检查点：
&lt;ul&gt;
&lt;li&gt;干扰去掉了吗？&lt;/li&gt;
&lt;li&gt;信号变慢了吗？ (所有滤波器都会带来&lt;strong&gt;相位延迟&lt;/strong&gt;，你要确认这个延迟是否会导致 T90 超标)。&lt;/li&gt;
&lt;li&gt;信号过冲了吗？ (有些滤波器会产生振铃效应)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第五步移植落地-deployment--把-python-变成-c&#34;&gt;第五步：移植落地 (Deployment) —— “把 Python 变成 C”
&lt;/h3&gt;&lt;p&gt;最后一步才是写单片机代码。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;指导思想： &lt;strong&gt;资源换算&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;逻辑： Python 里的 &lt;code&gt;scipy.signal.filtfilt&lt;/code&gt; 是双向滤波，单片机做不到（因为单片机不能预知未来数据）。&lt;/li&gt;
&lt;li&gt;动作：
&lt;ul&gt;
&lt;li&gt;将设计好的滤波器系数 ($b, a$ 数组) 复制到 C 代码中。&lt;/li&gt;
&lt;li&gt;使用标准的 IIR 滤波公式：$$y[n] = b0 x[n] + b1 x[n-1] … - a1 y[n-1] - a2 y[n-2]…$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;总结你的实战路线图&#34;&gt;总结：你的实战路线图
&lt;/h3&gt;&lt;p&gt;如果你想从零开始练习，我建议你按照这个低成本路线去玩：&lt;/p&gt;
&lt;h4 id=&#34;level-1-纯软件练习现在就可以做&#34;&gt;Level 1: 纯软件练习（现在就可以做）
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;数据来源： 自己用 Python 生成（像我们刚才那样），或者去网上下载公开的 CSV 传感器数据集（Kaggle 上有很多）。&lt;/li&gt;
&lt;li&gt;任务： 故意往里加各种频率的噪声，然后练习用 FFT 把它们找出来，再设计滤波器滤掉。&lt;/li&gt;
&lt;li&gt;目标： 熟悉 &lt;code&gt;numpy&lt;/code&gt; 和 &lt;code&gt;scipy.signal&lt;/code&gt; 库，建立“频域直觉”**。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;level-2-手机实战零成本硬件&#34;&gt;Level 2: 手机实战（零成本硬件）
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;数据来源： 你的手机里有加速度传感器。下载一个能导出 CSV 数据的 APP (如 &amp;ldquo;Sensor Logger&amp;rdquo;)。&lt;/li&gt;
&lt;li&gt;任务：
&lt;ul&gt;
&lt;li&gt;把手机放在桌上（静止）。&lt;/li&gt;
&lt;li&gt;把手机放在嗡嗡响的电脑机箱上（震动）。&lt;/li&gt;
&lt;li&gt;手拿着手机走路（周期性摆动）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分析： 把数据导出来做 FFT。你会清晰地看到“步频”、“机箱震动频率”。尝试把走路的晃动滤掉，只保留重力方向。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;level-3-单片机实战进阶&#34;&gt;Level 3: 单片机实战（进阶）
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;硬件： STM32 + 一个光敏电阻（接 ADC）。&lt;/li&gt;
&lt;li&gt;任务： 对着家里的 LED 灯采样（采样率设高点，比如 200Hz）。&lt;/li&gt;
&lt;li&gt;分析： 哪怕你肉眼看着灯是常亮的，FFT 会告诉你，它其实在以 &lt;strong&gt;100Hz&lt;/strong&gt; 闪烁（市电整流后的频率）。然后你在 STM32 里写一个陷波器，把这个 100Hz 滤平。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;记住这八个字： “&lt;strong&gt;高频抓取，频域诊断&lt;/strong&gt;”。这就是处理看不见的信号问题的核心心法。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>信号处理的设计原则</title>
        <link>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/</guid>
        <description>&lt;p&gt;就像 P&amp;amp;ID 是气路的宪法一样，在信号处理领域，也有一个铁打的“五层金字塔”框架。我们将这个框架称为 “信号净化提纯流水线” 。&lt;/p&gt;
&lt;h3 id=&#34;第一层物理获取层--原矿开采&#34;&gt;第一层：物理获取层 —— “原矿开采”
&lt;/h3&gt;&lt;p&gt;这一层负责把物理世界变成数字世界。核心原则是“保真”**。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入： 光子、离子、电子（模拟量）。&lt;/li&gt;
&lt;li&gt;动作：
&lt;ol&gt;
&lt;li&gt;IV 转换 (TIA)： 把微弱电流变成电压（前放板的任务）。&lt;/li&gt;
&lt;li&gt;量程匹配 (Auto-Ranging)： 如果信号太小，放大 100 倍；太大，放大 1 倍。确保 ADC 能吃饱，但不撑死。&lt;/li&gt;
&lt;li&gt;过采样 (Oversampling)： 比如 ADC 是 1000Hz 采样的，我采 100 个点只取 1 个平均值。这能物理提升 ADC 的信噪比（每 4 倍过采样，增加 1 位分辨率）。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;输出： Raw Counts (原始码值)。
&lt;ul&gt;
&lt;li&gt;特征： 这通常是一个 0~65535 的整数，甚至可能是负数，没有任何物理单位，充满噪声。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第二层清洗滤波层--洗去泥沙&#34;&gt;第二层：清洗滤波层 —— “洗去泥沙”
&lt;/h3&gt;&lt;p&gt;这一层负责把噪声（Noise）去掉，留下信号（Signal）。&lt;strong&gt;核心原则是“时域与频域的结合”&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入： 充满毛刺的 Raw Counts。&lt;/li&gt;
&lt;li&gt;核心算法：
&lt;ol&gt;
&lt;li&gt;锁相放大 (PSD)： （针对 NDIR/GFC）剔除所有非 30Hz 的光干扰。&lt;/li&gt;
&lt;li&gt;剔除脉冲噪声 (Spike Rejection)： 如果突然有一个点飞到了天上去（可能是静电干扰），直接删掉，不算。&lt;/li&gt;
&lt;li&gt;滑动平均 / 卡尔曼滤波： 根据当前的工况（稳态还是突变），平滑数据。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;输出： Filtered Voltage (纯净电压)。
&lt;ul&gt;
&lt;li&gt;特征：这是一个很稳的电压值（如 2.500V），但它还不是浓度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三层物理修正层--化学反应&#34;&gt;第三层：物理修正层 —— “化学反应”
&lt;/h3&gt;&lt;p&gt;这是最体现仪器技术含量的部分。我们要用数学公式去修补物理传感器的缺陷。&lt;strong&gt;顺序绝对不能乱！&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入： Filtered Voltage。&lt;/li&gt;
&lt;li&gt;步骤顺序（黄金法则）：
&lt;ol&gt;
&lt;li&gt;零点扣除 (Zero Subtraction)： 先减去“暗电流”或“零点背景”。$$V_{net} = V_{meas} - V_{zero}$$&lt;/li&gt;
&lt;li&gt;线性化 (Linearization)： 把弯曲的电压拉直。$$C_{raw} = f(V_{net})$$&lt;/li&gt;
&lt;li&gt;温压补偿 (P/T Comp)： 理想气体状态方程修正。$$C_{std} = C_{raw} \times \frac{101.3}{P_{cur}} \times \frac{T_{cur}}{273}$$&lt;/li&gt;
&lt;li&gt;交叉干扰补偿 (Cross-Interference)： 扣除水和 CO2 的影响。$$C_{final} = C_{std} - (K \times C_{H2O})$$&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;输出： Physics Concentration (物理浓度)。
&lt;ul&gt;
&lt;li&gt;特征：此时已经是 ppm 或 mg/m³ 了，是真实的物理值。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第四层逻辑裁决层--盖章认证&#34;&gt;第四层：逻辑裁决层 —— “盖章认证”
&lt;/h3&gt;&lt;p&gt;这一层不处理数值大小，只处理“数据身份”。结合我们讲的状态机。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入： 物理浓度 + 系统状态（测量/校准/故障）。&lt;/li&gt;
&lt;li&gt;动作：
&lt;ol&gt;
&lt;li&gt;有效性判断： 现在的状态机是在 MEASURE 吗？
&lt;ul&gt;
&lt;li&gt;如果是 CAL (校准) $\rightarrow$ 标记为 &lt;strong&gt;Calibration&lt;/strong&gt;，数值照发（供调试看），但环保局不统计。&lt;/li&gt;
&lt;li&gt;如果是 FAULT (故障) $\rightarrow$ 标记为 &lt;strong&gt;Invalid&lt;/strong&gt;，数值可能强制归零或保持。&lt;/li&gt;
&lt;li&gt;如果是 PURGE (反吹) $\rightarrow$ 标记为 &lt;strong&gt;Hold&lt;/strong&gt;，数值锁定在反吹前一刻。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;上下限报警： 是否超过量程？是否低于 -5%（仪表漂移异常）？&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;输出： Display Value (显示值) + Status Flag (状态旗)。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;五层输出格式层--打包发货&#34;&gt;五层：输出格式层 —— “打包发货”
&lt;/h3&gt;&lt;p&gt;这一层负责把数据翻译成别人（PLC、DCS）能听懂的语言。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入： 显示值 + 状态旗。&lt;/li&gt;
&lt;li&gt;动作：
&lt;ol&gt;
&lt;li&gt;D/A 转换： 把 0&lt;del&gt;100 ppm 映射到 4.00&lt;/del&gt;20.00 mA。
&lt;ul&gt;
&lt;li&gt;注意：如果状态是 Invalid，可能输出 2 mA (故障电流) 告诉 DCS。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;协议打包： 放入 Modbus 寄存器（40001 = 浓度，40002 = 状态）。&lt;/li&gt;
&lt;li&gt;统计存储： 存入硬盘，生成“分钟均值”、“小时均值”。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;框架中的三个反直觉经验&#34;&gt;框架中的三个“反直觉”经验
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;先线性化，再做补偿：
&lt;ul&gt;
&lt;li&gt;一定要先用多项式把电压变成浓度（线性化），然后再去减干扰气体的浓度。&lt;/li&gt;
&lt;li&gt;错误做法：在电压阶段就减去干扰信号。这是错的，因为电压是非线性的，不能直接加减。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;滤波放在线性化之前：
&lt;ul&gt;
&lt;li&gt;一定要在电压阶段（L2）把噪声滤干净，再进公式（L3）。&lt;/li&gt;
&lt;li&gt;原因：线性化公式通常是高次方程（$V^3, V^4$）。如果电压里有噪声，经过 3 次方放大，噪声会变成巨大的误差。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;显示值 $\neq$ 4-20mA 值：**
&lt;ul&gt;
&lt;li&gt;在 L5 层，屏幕显示通常为了好看，会保留 2 位小数。&lt;/li&gt;
&lt;li&gt;但给 DAC（4-20mA）的数据，必须经过&lt;strong&gt;量程缩放&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;坑点：很多时候屏幕显示 50.00，但后台 DAC 芯片只有 12 位精度，输出可能是 49.8。调试时要区分“显示层”和“硬件输出层”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;mermaid-信号流转框架图&#34;&gt;Mermaid 信号流转框架图
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    %% 样式定义
    classDef physical fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef clean fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;
    classDef math fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;
    classDef logic fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px;
    classDef output fill:#ffebee,stroke:#c62828,stroke-width:2px;

    %% 1. 物理层
    subgraph L1 [&#34;第一层：物理获取 (Acquisition)&#34;]
        Sens((&#34;传感器&#34;)) --&gt; TIA[&#34;前置放大 TIA&#34;]
        TIA --&gt; ADC[&#34;ADC 模数转换&#34;]
        ADC --&gt; |&#34;Raw Counts (原始码)&#34;| OS[&#34;过采样/均值&#34;]
    end
    class Sens,TIA,ADC,OS physical

    %% 2. 清洗层
    subgraph L2 [&#34;第二层：清洗滤波 (Cleaning)&#34;]
        OS --&gt; PSD[&#34;锁相放大/解调&#34;]
        PSD --&gt; SPIKE[&#34;剔除脉冲噪声&#34;]
        SPIKE --&gt; FILTER[&#34;自适应滤波/卡尔曼&#34;]
        FILTER --&gt; |&#34;Filtered Voltage (净电压)&#34;| NEXT2
    end
    class PSD,SPIKE,FILTER clean

    %% 3. 修正层
    subgraph L3 [&#34;第三层：物理修正 (Correction)&#34;]
        NEXT2((&#34;V&#34;)) --&gt; ZERO_SUB[&#34;减零点背景&#34;]
        ZERO_SUB --&gt; LIN[&#34;多项式线性化&#34;]
        LIN --&gt; PT_COMP[&#34;温度/压力补偿&#34;]
        PT_COMP --&gt; INTER_COMP[&#34;交叉干扰补偿&#34;]
        INTER_COMP --&gt; |&#34;Physics Conc. (真浓度)&#34;| NEXT3
    end
    class ZERO_SUB,LIN,PT_COMP,INTER_COMP math

    %% 4. 逻辑层
    subgraph L4 [&#34;第四层：逻辑裁决 (Logic)&#34;]
        NEXT3((&#34;C&#34;)) --&gt; STATE_CHECK{&#34;状态机检查&#34;}
        STATE_Check_Logic --&gt; STATE_CHECK
        
        STATE_CHECK --&#34;正常测量&#34;--&gt; VALID[&#34;标记: Valid&#34;]
        STATE_CHECK --&#34;反吹/校准&#34;--&gt; HOLD[&#34;标记: Hold/Cal&#34;]
        STATE_CHECK --&#34;硬件报错&#34;--&gt; FAULT[&#34;标记: Invalid&#34;]
    end
    class STATE_CHECK,VALID,HOLD,FAULT logic

    %% 5. 输出层
    subgraph L5 [&#34;第五层：输出格式 (Output)&#34;]
        VALID --&gt; DAC[&#34;4-20mA 输出&#34;]
        HOLD --&gt; DAC
        FAULT --&gt; DAC
        
        VALID --&gt; MODBUS[&#34;Modbus/RS485&#34;]
        VALID --&gt; LOG[&#34;历史数据存储&#34;]
    end
    class DAC,MODBUS,LOG output

    %% 外部输入
    STATE_Check_Logic[&#34;系统状态机&#34;] -.-&gt; STATE_CHECK
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>信号处理之卡尔曼滤波</title>
        <link>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/</guid>
        <description>&lt;p&gt;之前我们聊的“滑动平均”和“自适应滤波”，本质上都是“事后诸葛亮”（基于过去的数据来推测现在）。今天认识一位“预言家” —— 卡尔曼滤波 (Kalman Filter)。&lt;/p&gt;
&lt;p&gt;它是阿波罗登月飞船导航的核心算法，也是现在自动驾驶汽车、大疆无人机悬停不动的秘密。在高端仪器（如 TDLAS 分析仪）中，它是&lt;strong&gt;解决“响应速度 (T90)”与“读数稳定性”这对死敌&lt;/strong&gt;的唯一解药。&lt;/p&gt;
&lt;h3 id=&#34;一-核心哲学你相信理论还是相信眼睛&#34;&gt;一、 核心哲学：你相信“理论”还是相信“眼睛”？
&lt;/h3&gt;&lt;p&gt;卡尔曼滤波最牛的地方在于，它不单纯依赖传感器，而是结合了&lt;strong&gt;两个信息源&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;想象你在开车进隧道，GPS 信号突然变弱了（噪声变大）。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;传感器（眼睛）： GPS 告诉你：“你现在在坐标 (100, 50)……不对，下一秒在 (100, 500)……不对，在 (100, -20)。” —— 数据不可靠，乱跳。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;物理模型&lt;/strong&gt;（理论）： 你的车速表显示 100km/h，方向盘没动。根据牛顿定律，你下一秒应该只前进了 27 米。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;卡尔曼的灵魂追问： 此刻，你信谁？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果是普通滤波：它会傻傻地把 GPS 的乱跳值取平均，结果你的车在地图上乱飞。&lt;/li&gt;
&lt;li&gt;卡尔曼滤波：它会算出一个“信任权重” (Kalman Gain, $K$)**。
&lt;ul&gt;
&lt;li&gt;它发现 GPS 噪声（方差）太大了，于是屏蔽掉 90% 的 GPS 数据。&lt;/li&gt;
&lt;li&gt;它选择相信 90% 的物理模型（根据上一秒位置 + 车速算出来的位置）。&lt;/li&gt;
&lt;li&gt;结果： 哪怕 GPS 信号烂成渣，你的车在地图上依然画出了一条平滑的直线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;二-cems-里的实战如何消灭滞后&#34;&gt;二、 CEMS 里的实战：如何消灭滞后？
&lt;/h3&gt;&lt;p&gt;在 CEMS 分析仪中，我们面临一个痛点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为了让读数稳，我们加了很重的滤波（电容大，积分时间长）。&lt;/li&gt;
&lt;li&gt;后果： 气体浓度真的突变时（比如喷氨了），读数慢吞吞地爬坡，&lt;strong&gt;T90 响应时间超标&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;卡尔曼怎么解决？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;建立模型（Predict）：
&lt;ul&gt;
&lt;li&gt;仪器内部知道气体流速和管路体积。&lt;/li&gt;
&lt;li&gt;它预测：如果进气口浓度变了，传感器腔室里的浓度应该按什么曲线变化（指数上升）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;测量修正（Update）：
&lt;ul&gt;
&lt;li&gt;传感器实测到了一个电压值。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;融合：
&lt;ul&gt;
&lt;li&gt;当实测值突然跳变，且跳变趋势符合流体力学模型时 $\to$ 卡尔曼说：“这是真信号，不是噪声！&lt;strong&gt;信任实测值，立刻跟进！&lt;/strong&gt;”&lt;/li&gt;
&lt;li&gt;当实测值跳变，但完全违背物理模型（比如 1ms 内变了 50%） $\to$ 卡尔曼说：“这不科学，肯定是干扰（Spike）。&lt;strong&gt;无视它，相信模型！&lt;/strong&gt;”
最终效果： 平时稳如老狗（滤除噪声），变时动如脱兔（T90 极快）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;三-python-实战手搓一个-1d-卡尔曼滤波器&#34;&gt;三、 Python 实战：手搓一个 1D 卡尔曼滤波器
&lt;/h3&gt;&lt;p&gt;卡尔曼滤波的矩阵公式（$P = FPF^T + Q$）看着很吓人，但对于单变量（只测一个浓度）的情况，它可以简化成&lt;strong&gt;5 行代码&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;我们要模拟：一个真实的温度信号（平稳），中间突然被一个巨大的噪声干扰，看看卡尔曼能不能把它识别出来。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;85
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 配置中文&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;font.sans-serif&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SimHei&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;axes.unicode_minus&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 模拟数据生成&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;n_iter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 数组大小&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;25.0&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 真实温度 (Constant)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 真实值：一直是 25度&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;truth&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 观测值：真实值 + 严重的白噪声 (模拟传感器)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 噪声标准差 sigma = 2.0 (抖动很大)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;truth&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;normal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 在第 50 个点，加一个巨大的脉冲干扰 (Spike)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;100.0&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 卡尔曼滤波初始化&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 这里的参数是&amp;#34;玄学&amp;#34;，需要根据物理系统去调&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Q: 过程噪声协方差 (Process Noise)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 代表：你觉得物理世界本身有多不稳定？&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设得极小 (1e-5)，代表我相信物理世界是连续的，温度不会瞬变。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Q&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1e-5&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# R: 测量噪声协方差 (Measurement Noise)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 代表：你觉得你的传感器有多烂？&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设得大 (0.1)，代表传感器噪声很大，我不信它。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 初始化状态&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;x_est&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 初始估计值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;P&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.0&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;# 初始估计误差 (不确定性)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;# 卡尔曼增益 (信任度)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;result_kalman&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 卡尔曼滤波主循环 (5步心法)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 阶段 A: 预测 (Predict) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 1. 预测状态: 既然是测恒温，我预测下一刻温度和这一刻一样&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;x_pred&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x_est&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 2. 预测误差: 加上物理世界的不确定性&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;P_pred&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Q&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 阶段 B: 更新 (Update) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 3. 计算卡尔曼增益 (K): 权衡 预测误差 vs 传感器误差&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 如果传感器误差 R 很大，K 就会很小 (不信传感器)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;K&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_pred&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;P_pred&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 4. 更新估计值: 核心公式！&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 新估计 = 预测值 + K * (实测值 - 预测值)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# K 决定了我们要接受多少&amp;#34;实测偏差&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;x_est&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x_pred&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;K&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x_pred&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 5. 更新误差: 这一轮做完了，我会变得更自信 (P变小)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;P&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;P_pred&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;result_kalman&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x_est&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 4. 绘图对比&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;k.&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;传感器测量值 (带噪声+尖峰)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;truth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;g-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;真实值 (25℃)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result_kalman&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;卡尔曼滤波结果&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;卡尔曼滤波实战：从噪声中还原真相&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;时间点&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;温度&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213164712.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213164712.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;运行后的观察点&#34;&gt;运行后的观察点
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;看整体： 尽管黑色的点（测量值）上下乱跳幅度很大，红色的线（卡尔曼）却非常平滑，紧贴着绿线（真实值）。这说明它滤除白噪声的能力极强。&lt;/li&gt;
&lt;li&gt;看第 50 点（尖峰）：
&lt;ul&gt;
&lt;li&gt;测量值瞬间跳到了 100。&lt;/li&gt;
&lt;li&gt;卡尔曼滤波的红线仅仅微微向上动了一点点，甚至几乎没受影响。&lt;/li&gt;
&lt;li&gt;原因： 因为我们设置了 $Q$ 很小。卡尔曼认为：“根据物理定律，温度不可能在 0.1 秒内从 25 度 变到 100 度。这肯定是传感器疯了。” 于是它通过极小的 $K$ 值，拒绝了这次“诈骗”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;四-进阶它比滑动平均强在哪&#34;&gt;四、 进阶：它比滑动平均强在哪？
&lt;/h3&gt;&lt;p&gt;你可能会问：“滑动平均也能滤除那个尖峰啊，为什么要搞这么复杂的公式？”主要区别在于“&lt;strong&gt;动态适应性&lt;/strong&gt;”：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;不确定性的动态追踪 ($P$ 值)：**
&lt;ul&gt;
&lt;li&gt;刚开机时，卡尔曼知道自己“没底”（$P$ 很大），它会非常听传感器的话（$K$ 大），读数收敛极快。&lt;/li&gt;
&lt;li&gt;运行一段时间后，它摸清了规律（$P$ 变小），就开始变得“自信”，不再受噪声干扰。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;滑动平均是死的，卡尔曼是活的。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;多传感器融合 (Sensor Fusion)：
&lt;ul&gt;
&lt;li&gt;这是卡尔曼的杀手锏。&lt;/li&gt;
&lt;li&gt;如果你不仅有光电传感器，还有一个流速传感器。&lt;/li&gt;
&lt;li&gt;你可以告诉卡尔曼：“流速变快了，所以浓度应该会变快。”&lt;/li&gt;
&lt;li&gt;卡尔曼会利用流速信息，在光电传感器还没反应过来之前，就提前把浓度推上去。&lt;/li&gt;
&lt;li&gt;这就是 &lt;strong&gt;Model-Based (基于模型)&lt;/strong&gt; 的力量。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;FFT 是用来找病因的（看成分）。&lt;/li&gt;
&lt;li&gt;PID 是用来做控制的（给动作）。&lt;/li&gt;
&lt;li&gt;卡尔曼滤波 是用来做估计的（猜真相）。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>信号处理之频域分析</title>
        <link>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E9%A2%91%E5%9F%9F%E5%88%86%E6%9E%90/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E9%A2%91%E5%9F%9F%E5%88%86%E6%9E%90/</guid>
        <description>&lt;p&gt;既然我们已经聊了 [[信号处理之清洗滤波]]（时域上的平均），今天我们要升级维度。我要带你进入信号处理的**“上帝视角”——频域分析 (Frequency Domain Analysis)。&lt;/p&gt;
&lt;p&gt;我们要聊聊两个核心概念：&lt;strong&gt;FFT (快速傅里叶变换)&lt;/strong&gt; 和 &lt;strong&gt;数字陷波器 (Notch Filter)&lt;/strong&gt;。这能解决一个让无数工程师抓狂的问题：&lt;strong&gt;“我知道信号里有干扰，但我怎么知道干扰是从哪来的？我又该怎么精准地干掉它？”&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;第一章从看波形到看成分--fft-的魔法&#34;&gt;第一章：从“看波形”到“看成分” —— FFT 的魔法
&lt;/h3&gt;&lt;p&gt;我们之前的示波器或绘图，都是“时域” (Time Domain) 的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;X 轴： 时间 (Time)&lt;/li&gt;
&lt;li&gt;Y 轴： 电压 (Amplitude)&lt;/li&gt;
&lt;li&gt;看到的是： 一条乱糟糟的曲线。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;但傅里叶（Fourier）告诉我们：&lt;strong&gt;任何复杂的波形，都可以拆解成无数个正弦波的叠加。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;FFT (Fast Fourier Transform) 就是那个拆解波形的“棱镜”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;X 轴： 频率 (Frequency)&lt;/li&gt;
&lt;li&gt;Y 轴： 强度 (Magnitude)&lt;/li&gt;
&lt;li&gt;看到的是： 信号的“配方表”**。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213131958.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213131958.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;1-生活中的类比果汁与配方&#34;&gt;1. 生活中的类比：果汁与配方
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;时域信号： 一杯混合果汁（你只能喝出它酸酸甜甜，看到它是红色的）。&lt;/li&gt;
&lt;li&gt;FFT 变换： 一张配方表。
&lt;ul&gt;
&lt;li&gt;草莓：50%&lt;/li&gt;
&lt;li&gt;香蕉：30%&lt;/li&gt;
&lt;li&gt;苦瓜：5%（这就是干扰！）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-cems-里的侦探故事&#34;&gt;2. CEMS 里的侦探故事
&lt;/h4&gt;&lt;p&gt;假设你的 $\text{SO}_2$ 读数一直在抖动，幅度 $\pm 1$ ppm。你用滤波怎么也滤不掉。&lt;/p&gt;
&lt;p&gt;你对数据做了一个 FFT 分析，发现频谱图上有一根尖刺：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;案例 A：尖刺在 50Hz。
&lt;ul&gt;
&lt;li&gt;破案： 50Hz 是市电频率。说明你的信号线没有屏蔽好，或者是电源地线没接好，&lt;strong&gt;工频干扰&lt;/strong&gt;串进来了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;案例 B：尖刺在 30Hz。
&lt;ul&gt;
&lt;li&gt;破案： 你的切光轮电机转速正好是 1800rpm ($1800/60 = 30Hz$)。说明切光轮震动太大，引起了光路抖动。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;案例 C：尖刺在 0.5Hz。
&lt;ul&gt;
&lt;li&gt;破案： 你的采样泵是不是每 2 秒钟“喘”一次气？这是蠕动泵或隔膜泵的&lt;strong&gt;脉动干扰&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结论： 在时域上，它们都是“乱跳”；但在频域上，它们都有“指纹”。FFT 是诊断仪器故障的神器。&lt;/p&gt;
&lt;h3 id=&#34;第二章手术刀式的切割--数字陷波器-notch-filter&#34;&gt;第二章：手术刀式的切割 —— 数字陷波器 (Notch Filter)
&lt;/h3&gt;&lt;p&gt;当你用 FFT 找到了那个讨厌的 &lt;strong&gt;50Hz 工频干扰&lt;/strong&gt;，下一步怎么办？&lt;/p&gt;
&lt;p&gt;用普通的低通滤波（求平均）？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;缺点： 为了滤掉 50Hz，你会把 1Hz、2Hz 的有用信号也压制住，导致&lt;strong&gt;响应变慢&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这时候，你需要一把“激光手术刀”，只切除 50Hz 这一块肉，保留其他所有部分。 这就是 &lt;strong&gt;带阻滤波器 (Band-stop Filter)&lt;/strong&gt;，如果阻带极窄，我们叫它 &lt;strong&gt;陷波器 (Notch Filter)&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;原理：&lt;/strong&gt; 在数学上设计一个公式，让信号通过时，唯独 &lt;strong&gt;50Hz&lt;/strong&gt; 的正弦波会被完全抵消（增益为 0），而 10Hz 或 100Hz 的信号无损通过。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三章python-视觉盛宴--抓出干扰并消灭它&#34;&gt;第三章：Python 视觉盛宴 —— 抓出干扰并消灭它
&lt;/h3&gt;&lt;p&gt;我们来模拟一个真实的 CEMS 事故现场：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;真实信号： 一个缓慢变化的 $\text{SO}_2$ 浓度。&lt;/li&gt;
&lt;li&gt;干扰源： 50Hz 的强烈工频干扰（电源没接好）。&lt;/li&gt;
&lt;li&gt;任务： 用 FFT 揪出它，然后用陷波器干掉它。&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;83
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scipy.fft&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fft&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fftfreq&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scipy&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;signal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 配置中文&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;font.sans-serif&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SimHei&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;axes.unicode_minus&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 制造案发现场 (生成信号)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;fs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 采样率 1000Hz (每秒采1000个点)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.0&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;# 总时长 2秒&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 总点数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;linspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 真实信号：一个 2Hz 的缓慢波动 (模拟气体浓度变化)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sig_clean&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pi&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 干扰信号：50Hz 的强噪音 (模拟工频干扰)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;noise_50hz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pi&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 白噪声：随机背景噪音&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;noise_white&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;normal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 混合在一起：这就是 ADC 读到的烂数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sig_corrupted&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig_clean&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;noise_50hz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;noise_white&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 侦探环节 (FFT 频谱分析)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;yf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fft&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sig_corrupted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;# 做傅里叶变换&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;xf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fftfreq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;# 计算频率轴&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 我们只看前半部分 (正频率)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;yf_abs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;xf_axis&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;xf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 手术环节 (IIR 陷波器设计)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设计一个针对 50Hz 的陷波器&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 质因数 Q 决定了切口有多窄。Q=30 表示切得很窄，不伤及无辜。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iirnotch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;50.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Q&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;30.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 应用滤波器&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sig_filtered&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filtfilt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig_corrupted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 4. 绘图展示&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 图1：时域波形对比 (乱糟糟 vs 干净)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subplot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig_corrupted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;受污染的信号 (ADC原始)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig_clean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;k--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;真实信号 (理想)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;【时域】 案发现场：根本看不清真实信号&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;upper right&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 图2：频域频谱 (破案证据)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subplot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xf_axis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;yf_abs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;b-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 只看 0-100Hz&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;【频域】 侦探视角：FFT 抓到了！50Hz 处有巨大尖峰&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;频率 (Hz)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;强度 (Amplitude)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;axvline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linestyle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;发现 50Hz 干扰&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;axvline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;g&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linestyle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;发现 2Hz 有用信号&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 图3：滤波后效果 (手术成功)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subplot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig_filtered&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;g-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;陷波器处理后&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig_clean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;k--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;真实信号&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;【结果】 手术后：精准切除 50Hz，保留有用信号&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;upper right&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tight_layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213132615.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213132615.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;运行结果解读&#34;&gt;运行结果解读
&lt;/h3&gt;&lt;p&gt;当你运行这段代码，你会看到三张图，讲了一个完整的故事：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;第一张图（时域）： 你会看到红色的线毛毛糙糙的，上面叠加了密密麻麻的锯齿。你很难看清那条原本平滑的正弦波。这就是我们在现场看到的原始数据。&lt;/li&gt;
&lt;li&gt;第二张图（频域 - 上帝视角）： 这是最震撼的一张。
&lt;ul&gt;
&lt;li&gt;在 2Hz 的地方有一根柱子（这是我们要的信号）。&lt;/li&gt;
&lt;li&gt;在 50Hz 的地方有一根巨大的红柱子。&lt;/li&gt;
&lt;li&gt;真相大白： 原来让信号变脏的罪魁祸首就是 50Hz！&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第三张图（滤波后）： 绿色的线（处理后）和黑色的虚线（真实值）几乎完美重合。
&lt;ul&gt;
&lt;li&gt;注意：我们并没有用强力的平均滤波（那样会让波形滞后），我们只是“挖掉”了 50Hz。所以信号的反应速度丝毫没有变慢，但毛刺全没了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;FFT (傅里叶变换)： 是&lt;strong&gt;诊断工具&lt;/strong&gt;。它不改变信号，但能告诉你信号里有什么鬼（干扰源频率）。&lt;/li&gt;
&lt;li&gt;陷波器 (Notch Filter)： 是&lt;strong&gt;手术工具&lt;/strong&gt;。当你用 FFT 确诊后，用陷波器可以精准切除特定频率的干扰，而不影响信号的灵敏度。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>信号处理之清洗滤波</title>
        <link>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E6%B8%85%E6%B4%97%E6%BB%A4%E6%B3%A2/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E6%B8%85%E6%B4%97%E6%BB%A4%E6%B3%A2/</guid>
        <description>&lt;p&gt;本篇继 [[信号处理的设计原则]]，具体学习清洗滤波层，怎么把输入的信号看清楚！&lt;/p&gt;
&lt;p&gt;如果说物理获取层是“把矿石挖出来”，那么&lt;strong&gt;清洗滤波层&lt;/strong&gt;就是“洗矿”——把泥巴（噪声）冲走，留下金子（信号）。在 CEMS 和精密仪器中，这一层通常由三道工序组成，针对三种不同类型的“脏东西”。&lt;/p&gt;
&lt;h3 id=&#34;第一道工序中值滤波-median-filter--对付捣乱分子&#34;&gt;第一道工序：中值滤波 (Median Filter) —— 对付“捣乱分子”
&lt;/h3&gt;&lt;p&gt;敌人： 脉冲噪声。 比如：隔壁大电机启动了一下、继电器吸合打了个火花、或者是静电放电。 特征： 信号本来是 2.5V，突然变成 5.0V，下一毫秒又回到了 2.5V。&lt;/p&gt;
&lt;p&gt;常规错误： 用平均值。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数据：&lt;code&gt;2.5, 2.5, 2.5, 50.0 (异常), 2.5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;平均值：&lt;code&gt;12.0&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;后果： 一个老鼠屎坏了一锅汤，平均值被瞬间拉高，DCS 显示瞬间超标。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;正确解法：中值滤波（去头去尾）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;算法： 就像跳水比赛打分，&lt;strong&gt;去掉最高分，去掉最低分&lt;/strong&gt;，剩下的取平均；或者直接取中间那个数。&lt;/li&gt;
&lt;li&gt;中值： &lt;code&gt;2.5&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;效果： 那个 &lt;code&gt;50.0&lt;/code&gt; 的异常值直接被扔进垃圾桶，对结果 0 影响。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第二道工序iir--fir-低通滤波--对付背景嘈杂&#34;&gt;第二道工序：IIR / FIR 低通滤波 —— 对付“背景嘈杂”
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;敌人： 白噪声 (White Noise)&lt;/strong&gt;。比如：电子热噪声、ADC 的量化误差。特征： 像蚂蚁一样密密麻麻地附着在信号线上，让读数在小数点后几位乱跳。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;主力武器：&lt;/strong&gt; &lt;strong&gt;滑动平均 (Moving Average)&lt;/strong&gt; 或 &lt;strong&gt;指数加权平均 (EMA)&lt;/strong&gt;。这两种算法在单片机里极其常见，我们重点看 &lt;strong&gt;EMA (指数移动平均)&lt;/strong&gt;，因为它最省内存。
公式：$$Y_{now} = \alpha \times X_{input} + (1 - \alpha) \times Y_{last}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$Y_{now}$：现在的输出。&lt;/li&gt;
&lt;li&gt;$Y_{last}$：上一次的输出。&lt;/li&gt;
&lt;li&gt;$X_{input}$：现在的 ADC 输入。&lt;/li&gt;
&lt;li&gt;**$\alpha$ (滤波系数)： 0~1 之间的一个数。
&lt;ul&gt;
&lt;li&gt;$\alpha$ 越小（如 0.01）：极度相信历史经验，不相信当前输入。效果： 读数稳如泰山，但反应迟钝。&lt;/li&gt;
&lt;li&gt;$\alpha$ 越大（如 0.90）：** 极度相信当前输入，不看历史。&lt;strong&gt;效果：&lt;/strong&gt; 反应极快，但读数乱跳。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三道工序自适应滤波-adaptive-filter--解决快与稳的矛盾&#34;&gt;第三道工序：自适应滤波 (Adaptive Filter) —— 解决“快与稳”的矛盾
&lt;/h3&gt;&lt;p&gt;这是这一层的大 BOSS。&lt;/p&gt;
&lt;p&gt;痛点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为了环保验收，T90 响应时间必须 &amp;lt; 200 秒 $\to$ 需要 $\alpha$ 大（弱滤波）。&lt;/li&gt;
&lt;li&gt;为了数据好看，读数不能乱跳 $\to$ 需要 $\alpha$ 小（强滤波）。&lt;/li&gt;
&lt;li&gt;矛盾： 鱼和熊掌不可兼得。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;解法：自适应（变档位）&lt;/p&gt;
&lt;p&gt;算法会实时计算“当前的变化率”，然后自动调整 $\alpha$ 值。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;静止状态：
&lt;ul&gt;
&lt;li&gt;算法发现：&lt;code&gt;|当前值 - 上次值| &amp;lt; 阈值&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;判断：现在工况很稳，波动都是噪声。&lt;/li&gt;
&lt;li&gt;动作：&lt;strong&gt;切换到“重滤波模式”&lt;/strong&gt;（$\alpha = 0.05$）。&lt;/li&gt;
&lt;li&gt;结果：屏幕上的线条平滑得像直线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;突变状态：
&lt;ul&gt;
&lt;li&gt;算法发现：&lt;code&gt;|当前值 - 上次值| &amp;gt; 阈值&lt;/code&gt;（比如突然喷氨了）。&lt;/li&gt;
&lt;li&gt;判断：这不是噪声，是真变了！&lt;/li&gt;
&lt;li&gt;动作：&lt;strong&gt;切换到“轻滤波模式”&lt;/strong&gt;（$\alpha = 0.8$）甚至**“直通模式”**。&lt;/li&gt;
&lt;li&gt;结果：读数“蹭”地一下就上去了，毫无滞后。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;代码案例&#34;&gt;代码案例
&lt;/h3&gt;&lt;p&gt;写了一段代码，模拟一个从 0 跳变到 100 的信号，并加入噪声。 我们将对比：&lt;strong&gt;普通平均&lt;/strong&gt; vs &lt;strong&gt;自适应滤波&lt;/strong&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 配置中文显示&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;font.sans-serif&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SimHei&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;axes.unicode_minus&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 生成模拟信号：0~50点是0，50点之后突变到100&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;true_signal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;true_signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 加入严重的白噪声&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;noise&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;normal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;raw_signal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;true_signal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;noise&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 定义两种滤波器&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# --- 普通 EMA 滤波器 (固定系数) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fixed_filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# --- 自适应滤波器 (智能系数) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;adaptive_filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# 核心逻辑&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 计算变化量 (Delta)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;delta&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;abs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 自适应逻辑：如果变化量大，alpha就大；变化量小，alpha就小&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 这里用一个简单的 sigmoid 或者是线性映射&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;delta&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 突变阈值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.8&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 快反应&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.05&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 稳读数 (重滤波)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 4. 运行滤波&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;out_fixed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fixed_filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 固定系数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;out_smart&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adaptive_filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;         &lt;span class=&#34;c1&#34;&gt;# 自适应&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 5. 画图对比&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw_signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;k.&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;原始带噪信号&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;true_signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;k--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;真实值&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_fixed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;b-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;普通滤波 (反应慢)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_smart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;自适应滤波 (又快又稳)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;自适应滤波 vs 普通滤波&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213115959.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213115959.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;如果你运行这段代码，你会看到：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;黑色点（原始数据）： 上蹿下跳，根本没法看。&lt;/li&gt;
&lt;li&gt;蓝线（普通滤波）：
&lt;ul&gt;
&lt;li&gt;优点： 确实把噪声滤平了。&lt;/li&gt;
&lt;li&gt;缺点： 它是&lt;strong&gt;拖泥带水&lt;/strong&gt;的。信号在第 50 秒已经跳到 100 了，蓝线在第 70 秒才慢悠悠地爬上来。这会导致 T90 不合格。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;红线（自适应滤波）：
&lt;ul&gt;
&lt;li&gt;前半段（0）： 非常平滑（因为它识别出没变化，用了重滤波）。&lt;/li&gt;
&lt;li&gt;突变点（50）： &lt;strong&gt;瞬间&lt;/strong&gt;跟上了信号的跳变（因为它识别出突变，扔掉了滤波器）。&lt;/li&gt;
&lt;li&gt;后半段（100）： 再次变平滑。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就是“清洗滤波层”的最高境界：该&lt;strong&gt;稳的时候稳如老狗，该快的时候动如脱兔&lt;/strong&gt;。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>信号处理之输出控制</title>
        <link>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E8%BE%93%E5%87%BA%E6%8E%A7%E5%88%B6/</link>
        <pubDate>Sat, 13 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B9%8B%E8%BE%93%E5%87%BA%E6%8E%A7%E5%88%B6/</guid>
        <description>&lt;p&gt;继上篇 [[信号处理之清洗滤波]]，现在我们要讲的是：“怎么把输出控制得准”！&lt;/p&gt;
&lt;p&gt;在 CEMS 里，最典型的场景就是：如何把 NOx 转换炉的温度死死锁在 315°C？ 或者 如何把激光器的温度控制在 0.001°C 的波动范围内？&lt;/p&gt;
&lt;p&gt;普通的开关控制（低于 315 开火，高于 315 停火）绝对做不到，温度会像过山车一样震荡。这时候，就需要请出统治了工业界 100 年的“万能神算法”：&lt;strong&gt;PID 控制算法&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;一-为什么-pid-是神&#34;&gt;一、 为什么 PID 是“神”？
&lt;/h3&gt;&lt;p&gt;PID 的伟大之处在于，它把人类控制事物的&lt;strong&gt;三种直觉&lt;/strong&gt;，抽象成了三个数学公式。&lt;/p&gt;
&lt;p&gt;想象你正以此去控制一辆车的&lt;strong&gt;油门&lt;/strong&gt;，试图让它停在前方 100 米处的红绿灯线（目标点）上&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;PID 环节&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;你的动作&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;对应的心理活动&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;物理结果&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;P (比例)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;看距离踩油门&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;“还有好远，冲啊！” vs “快到了，松油门。”&lt;/td&gt;
          &lt;td&gt;越近越没劲，最后可能会因为没劲而停在半路（静差）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;I (积分)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;盯着停下的车&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;“怎么停这儿不动了？还没到呢！给我动！”&lt;/td&gt;
          &lt;td&gt;慢慢积攒怒气，补一脚油门，克服上坡阻力，推过终点。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;D (微分)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;看速度表踩刹车&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;“哇！冲得太快了，肯定要过头，赶紧点一下刹车！”&lt;/td&gt;
          &lt;td&gt;产生反向阻尼，防止一头撞出去（抑制超调）。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;二-工程师的噩梦积分饱和-integral-windup&#34;&gt;二、 工程师的噩梦：积分饱和 (Integral Windup)
&lt;/h3&gt;&lt;p&gt;PID 原理书上都有，但在工程现场，新手最容易翻车的坑叫做 &lt;strong&gt;“积分饱和” (Integral Windup)&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;场景还原： CEMS 刚开机，炉温是 20°C，目标是 315°C。误差巨大！&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;P 猛推： 全功率加热！&lt;/li&gt;
&lt;li&gt;I 疯狂积累： “哇，误差这么大，还持续了这么久！”积分项迅速累加，变成了一个天文数字。&lt;/li&gt;
&lt;li&gt;到达目标： 终于到了 315°C。&lt;/li&gt;
&lt;li&gt;灾难发生： 此时误差为 0，P 停止输出了。但是！I 里面还存着刚才积累的那个天文数字！&lt;/li&gt;
&lt;li&gt;后果： I 继续输出 100% 功率，炉温直接冲到 400°C（严重超调），甚至烧坏加热棒。然后 I 开始反向积累，温度又跌到 200°C。系统进入&lt;strong&gt;剧烈震荡&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;解决方案：抗饱和算法 (Anti-Windup)&lt;/p&gt;
&lt;p&gt;这是写 PID 代码必须加的“补丁”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;逻辑： 当输出已经达到最大值（比如 PWM 100%）时，禁止积分项继续累加。&lt;/li&gt;
&lt;li&gt;潜台词： “我已经尽力了（满油门了），你再催（积分）也没用，别记账了。”&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;三-python-实战pid-控制加热炉&#34;&gt;三、 Python 实战：PID 控制加热炉
&lt;/h3&gt;&lt;p&gt;我们来写一段代码，模拟一个加热炉。 我们将对比：&lt;strong&gt;普通 PID&lt;/strong&gt; vs &lt;strong&gt;带抗饱和的 PID&lt;/strong&gt;，看看那个“灾难”是怎么发生的，又是怎么被解决的。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;103
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;104
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;105
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;106
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;107
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;108
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;109
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;110
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 配置中文  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;font.sans-serif&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SimHei&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;axes.unicode_minus&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 定义物理对象：加热炉模型  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Heater&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;20.0&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 初始室温  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inertia&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.98&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 热惯性 (越大越难热，也越难冷)  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;update&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;power&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 物理限制：功率不能超过 100%，也不能小于 0%        real_power = np.clip(power, 0, 100)  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 简单的热力学模型：  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 新温度 = 旧温度 * 惯性 + 加热升温 - 环境散热  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;heat_gain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;real_power&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;heat_loss&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;20.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.02&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inertia&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;heat_gain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;heat_loss&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 定义 PID 控制器  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;PID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anti_windup&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;anti_windup&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anti_windup&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;315.0&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;integral&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_error&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_temp&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# --- P项 ---        p_term = self.kp * error  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# --- I项 (核心差异) ---  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 如果开启抗饱和，且输出已经到极限，就不积分了  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# (这里简化处理，直接限制积分累计值)  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;anti_windup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 限制积分域，防止变成天文数字  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;abs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 只有接近目标时才启用积分（分离积分法的一种）  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;integral&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;integral&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;integral&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 钳位  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 普通PID：无脑积分  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;integral&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;i_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;integral&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# --- D项 ---        d_term = self.kd * (error - self.last_error)  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_error&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 总输出  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i_term&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d_term&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 运行仿真  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设置 PID 参数  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;5.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.0&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 实例化两个系统  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;heater_bad&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Heater&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;pid_bad&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anti_windup&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 没加补丁  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;heater_good&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Heater&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;pid_good&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anti_windup&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 加了抗饱和补丁  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;time_steps&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;300&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;history_bad&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;history_good&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;time_steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 坏的系统 ---    power_bad = pid_bad.compute(heater_bad.temp)  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;temp_bad&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;heater_bad&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;update&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;power_bad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;history_bad&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp_bad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# --- 好的系统 ---    power_good = pid_good.compute(heater_good.temp)  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;temp_good&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;heater_good&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;update&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;power_good&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;history_good&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp_good&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 4. 绘图对比  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ==========================================  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;figsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;axhline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;315&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;k&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linestyle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;目标温度 315°C&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;history_bad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r--&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;普通PID (积分饱和导致严重超调)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;history_good&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;g-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;linewidth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;抗饱和PID (完美控制)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PID 积分饱和现象演示&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;时间 (s)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;炉温 (°C)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alpha&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;legend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fontsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213125537.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251213125537.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;观察仿真结果&#34;&gt;观察仿真结果
&lt;/h4&gt;&lt;p&gt;运行代码后，你会看到极其鲜明的对比：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;红色虚线 (普通 PID)：
&lt;ul&gt;
&lt;li&gt;温度在到达 315°C 后，根本停不下来，直接冲到了 350°C 甚至更高（这就是积分饱和的恶果）。&lt;/li&gt;
&lt;li&gt;然后因为温度太高，开始降温，但又降过头，产生了几次大的震荡才慢慢稳住。&lt;/li&gt;
&lt;li&gt;后果： 在 CEMS 里，这会导致氧化锆传感器热冲击损坏，或者氨盐结晶区温度失控。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;绿色实线 (抗饱和 PID)：
&lt;ul&gt;
&lt;li&gt;温度快速上升。&lt;/li&gt;
&lt;li&gt;在接近 315°C 时，因为积分项被限制住了，没有“刹车失灵”。&lt;/li&gt;
&lt;li&gt;它平滑地、优雅地停在了 315°C，几乎没有超调。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;四-延伸cems-里的前馈控制-feed-forward&#34;&gt;四、 延伸：CEMS 里的“前馈控制” (Feed-Forward)
&lt;/h3&gt;&lt;p&gt;PID 是一种“反馈控制”（出错了再改）。 在 CEMS 中，还有一种更高级的“前馈控制”，用于处理样气流速突变。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景： 你突然把采样流量从 1L/min 调到了 2L/min。&lt;/li&gt;
&lt;li&gt;物理后果： 带进来的冷气多了，加热炉温度必降。&lt;/li&gt;
&lt;li&gt;PID 的反应： 等温度真的降下去了，它才发现，然后开始加功率。&lt;strong&gt;（这就慢了）&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;前馈的反应：
&lt;ul&gt;
&lt;li&gt;系统监测到流量计读数变大。&lt;/li&gt;
&lt;li&gt;算法直接根据物理公式：&lt;code&gt;需要增加的功率 = 流量差 × 比热容 × 温差&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;在温度还没来得及下降之前，&lt;strong&gt;预先&lt;/strong&gt;把加热棒功率加上去。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;总结：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PID 是控制算法的基石。&lt;/li&gt;
&lt;li&gt;积分饱和 是新手必踩的坑，必须用&lt;strong&gt;抗饱和逻辑&lt;/strong&gt;填平。&lt;/li&gt;
&lt;li&gt;前馈 是高手用来抵消干扰的预判。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>P&amp;ID 设计</title>
        <link>https://teaize.github.io/p/pid-%E8%AE%BE%E8%AE%A1/</link>
        <pubDate>Fri, 12 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/pid-%E8%AE%BE%E8%AE%A1/</guid>
        <description>&lt;p&gt;P&amp;amp;ID (Piping and Instrumentation Diagram，管道及仪表流程图) 是 CEMS 系统设计的“宪法”。一旦这张图定稿，采购清单（BOM）、电气接线图、PLC 程序逻辑也就基本定死了。&lt;/p&gt;
&lt;p&gt;接下来从“水、尘、压、标”四个维度解析 P&amp;amp;ID 设计的实战经验&lt;/p&gt;
&lt;h3 id=&#34;一-水的处理逻辑防守反击&#34;&gt;一、 “水”的处理逻辑：防守反击
&lt;/h3&gt;&lt;p&gt;CEMS 的头号敌人就是液态水。只要进水，分析仪必挂。在 P&amp;amp;ID 上，你必须构建三道防线。&lt;/p&gt;
&lt;h4 id=&#34;1-第一道防线伴热管线-heated-line&#34;&gt;1. 第一道防线：伴热管线 (Heated Line)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;P&amp;amp;ID 画法： 在从探头到机柜的管线上，必须画上伴热符号（通常是虚线包裹或者标注 &lt;code&gt;H&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;经验： 必须在图纸上标注温度设定点（如 120°C 或 180°C）。
&lt;ul&gt;
&lt;li&gt;陷阱： 很多图纸画进机柜就断了。错！ 伴热管线必须一直画到制冷器（冷凝器）的入口接头处。中间不能裸露任何一段 PTFE 管，否则就是“冷点”，必结露。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-第二道防线制冷器与排水-cooler--drain&#34;&gt;2. 第二道防线：制冷器与排水 (Cooler &amp;amp; Drain)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;P&amp;amp;ID 画法： 制冷器下方必须画出蠕动泵 (Peristaltic Pump)。&lt;/li&gt;
&lt;li&gt;经验：
&lt;ul&gt;
&lt;li&gt;位置： &lt;strong&gt;采样泵（抽气泵）必须画在制冷器之后&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;原理： 泵前是负压，泵后是正压。如果在泵后冷凝，水会被压出，但泵本身会吸入湿热气体，皮膜容易坏。&lt;strong&gt;让泵抽干气，寿命长&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;排水回路： 蠕动泵出口绝不能直接通大气！图纸上必须画一个“水封” (Water Seal) 或者接废液桶。否则空气会倒吸进去，导致测量氧气偏高（假数据）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-第三道防线湿度报警-moisture-alarm&#34;&gt;3. 第三道防线：湿度报警 (Moisture Alarm)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;P&amp;amp;ID 画法： 在制冷器出口和过滤器之间，必须画一个湿度传感器或 阻水过滤器。&lt;/li&gt;
&lt;li&gt;逻辑： 这是一个联锁点 (Interlock)。
&lt;ul&gt;
&lt;li&gt;图纸上要注明：&lt;code&gt;If MT = High, Then Stop Pump&lt;/code&gt;（如果湿度高，立即停泵）。这是保护分析仪的最后一道闸门。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;二-尘的处理逻辑级联过滤&#34;&gt;二、 “尘”的处理逻辑：级联过滤
&lt;/h3&gt;&lt;p&gt;不要指望探头上的那个陶瓷滤芯能挡住所有灰尘。P&amp;amp;ID 上必须体现“由粗到细”的过滤思想。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;一级过滤（探头端）： 图上标注精度（如 $20\mu m$）。&lt;/li&gt;
&lt;li&gt;二级过滤（泵前保护）： 在制冷器和采样泵之间，画一个通用过滤器（如 $5\mu m$）。
&lt;ul&gt;
&lt;li&gt;目的：保护采样泵的阀片不被颗粒物卡住。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;三级过滤（表前精滤）： 在分析仪入口前，画一个&lt;strong&gt;精密过滤器&lt;/strong&gt;（如 $0.5\mu m$ 或 $0.1\mu m$）。
&lt;ul&gt;
&lt;li&gt;经验：这里的过滤器材质必须注明 PVDF 或 玻璃纤维，不能用普通纸滤芯（吸附 $\text{SO}2$）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;三-压的处理逻辑测点布局&#34;&gt;三、 “压”的处理逻辑：测点布局
&lt;/h3&gt;&lt;p&gt;很多新手画 P&amp;amp;ID 忘了画压力表，导致现场故障根本没法查。你必须在图上埋下“诊断点”**。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;探头反吹压力表：
&lt;ul&gt;
&lt;li&gt;画在反吹储气罐上。&lt;/li&gt;
&lt;li&gt;作用： 没气了能不能报警？反吹压力够不够？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;采样真空表：
&lt;ul&gt;
&lt;li&gt;黄金位置： 画在&lt;strong&gt;采样泵的入口处&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;诊断逻辑：
&lt;ul&gt;
&lt;li&gt;平时读数 -20 kPa。&lt;/li&gt;
&lt;li&gt;突然变成 -60 kPa $\rightarrow$ 说明前端（探头/管线）堵了。&lt;/li&gt;
&lt;li&gt;突然变成 -5 kPa $\rightarrow$ 说明前端漏气或者泵皮膜破了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;经验： 最好上带远传功能的压力变送器，这样中控室能看到趋势。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分析仪背压表：
&lt;ul&gt;
&lt;li&gt;如果后面接了复杂的排气管，最好在分析仪出口画个微压表。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;四-标的处理逻辑合法性注入&#34;&gt;四、 “标”的处理逻辑：合法性注入
&lt;/h3&gt;&lt;p&gt;标气从哪里注进去，决定了你这套系统合不合规。P&amp;amp;ID 上必须明确画出“系统校准”的路径。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;错误画法（直接校准）： 标气直接接在分析仪屁股后面。
&lt;ul&gt;
&lt;li&gt;后果：只能证明分析仪是好的，不能证明采样管线没漏气/没吸附。环保局不认。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;正确画法（全程校准）：
&lt;ul&gt;
&lt;li&gt;标气管路必须一路画到探头 (Probe) 处。&lt;/li&gt;
&lt;li&gt;通过探头内部的切换阀，让标气走一遍全流程（伴热管 $\to$ 冷凝器 $\to$ 泵 $\to$ 分析仪）。&lt;/li&gt;
&lt;li&gt;图纸细节： 注明标气管路也是 $\Phi 6$ PTFE 材质，防止吸附。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;五-mermaid-实战一张标准的完全抽取法-pid&#34;&gt;五、 Mermaid 实战：一张标准的完全抽取法 P&amp;amp;ID
&lt;/h3&gt;&lt;div class=&#34;mermaid&#34;&gt;
  graph TD
    %% 定义样式
    classDef liquid stroke:#1E90FF,stroke-width:2px;
    classDef gas stroke:#2E8B57,stroke-width:2px;
    classDef electrical stroke:#FFA500,stroke-dasharray: 5 5;
    classDef key_component fill:#fff,stroke:#d00,stroke-width:3px;

    %% --- 1. 探头与伴热区 ---
    STACK(烟囱) --&gt; PROBE[采样探头]
    PROBE --&gt; |&#34;伴热管线 (180°C)&#34;| COOLER_IN((制冷器入口))
    
    %% 校准气路 (全程校准)
    CAL_GAS[标气瓶] --&gt; |&#34;校准管 (去探头)&#34;| PROBE

    %% --- 2. 除水区 ---
    COOLER_IN --&gt; COOLER[双级电子冷凝器]:::key_component
    
    %% 排水回路 (关键)
    COOLER -.-&gt; |冷凝水| PERI_PUMP(蠕动泵)
    PERI_PUMP -.-&gt; |废液| DRAIN[废液桶/水封]:::liquid

    %% --- 3. 预处理与保护区 ---
    COOLER --&gt; MT[湿度报警器/阻水器]:::key_component
    MT --&gt; FILTER2[二级过滤器 5μm]
    
    %% 湿度联锁逻辑 (虚线)
    MT -.- |&#34;Interlock: 停泵&#34;| PUMP_CTRL((控制逻辑)):::electrical

    %% --- 4. 动力区 ---
    FILTER2 --&gt; PUMP[采样泵]:::key_component
    PUMP_CTRL -.- PUMP
    
    %% 泵后加旁路 (调节流量/压力)
    PUMP --&gt; T_BYPASS((三通))
    T_BYPASS --&gt; |&#34;旁路泄压 (针阀)&#34;| VENT1[排空]
    
    %% --- 5. 分析区 ---
    T_BYPASS --&gt; FILTER3[三级精滤 0.5μm]
    FILTER3 --&gt; FLOW_METER[转子流量计]
    FLOW_METER --&gt; ANALYZER[气体分析仪 SO2/NOx/O2]:::key_component
    
    %% --- 6. 排放区 ---
    ANALYZER --&gt; EXHAUST[大气平衡排气口]

    %% 样式应用
    class STACK,PROBE,CAL_GAS,COOLER,MT,FILTER2,PUMP,FILTER3,FLOW_METER,ANALYZER,EXHAUST gas
&lt;/div&gt;
&lt;h3 id=&#34;设计中的潜规则&#34;&gt;设计中的“潜规则”
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;管径标注 (Line Sizing)：
&lt;ul&gt;
&lt;li&gt;P&amp;amp;ID 上的每一条线旁边都要标代码。例如 &lt;code&gt;G-01-6mm-PTFE&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;潜规则： 采样主路一般用 $\Phi 6$ 或 $\Phi 8$。但&lt;strong&gt;冷凝器的排水管&lt;/strong&gt;建议用粗一点的软管（如 $\Phi 3$ ID 的 Viton 管），防止水垢堵塞。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;失效安全位置&lt;/strong&gt; (Fail-Safe Position)：
&lt;ul&gt;
&lt;li&gt;所有的气动阀/电磁阀旁边要画上 &lt;code&gt;FC&lt;/code&gt; (Fail Closed) 或 &lt;code&gt;FO&lt;/code&gt; (Fail Open)。&lt;/li&gt;
&lt;li&gt;反吹阀必须是 &lt;code&gt;FC&lt;/code&gt;（断电关闭）。防止断电时压缩空气把探头吹爆。&lt;/li&gt;
&lt;li&gt;采样阀通常也是 &lt;code&gt;FC&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;材料代码 (Material Code)：
&lt;ul&gt;
&lt;li&gt;在图纸右下角的 Note 里必须写明：All wetted parts must be SS316L or PTFE/PFA.(所有接触气体的部件必须是 316L 不锈钢或特氟龙)。这是防止腐蚀的底线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>传感器信号处理</title>
        <link>https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/</link>
        <pubDate>Fri, 12 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/</guid>
        <description>&lt;p&gt;这篇继续将信号处理相关的内容。&lt;/p&gt;
&lt;h3 id=&#34;曲线是如何变直的-线性化处理&#34;&gt;曲线是如何“变直”的？—— 线性化处理
&lt;/h3&gt;&lt;p&gt;物理世界通常是不完美的。 比尔 - 朗伯定律 告诉我们，光吸收和浓度是&lt;strong&gt;指数关系&lt;/strong&gt;，不是线性关系。$$I = I_0 \cdot e^{-kc}$$
但是，DCS 和环保局只要线性的 4-20mA（对应 0-1000 ppm）。 如果在屏幕上画出来，信号是一条弯曲的弧线。我们需要把它“掰直”**。&lt;/p&gt;
&lt;h4 id=&#34;1-多项式拟合-polynomial-fitting&#34;&gt;1. 多项式拟合 (Polynomial Fitting)
&lt;/h4&gt;&lt;p&gt;这是最常用的手段。我们在做标定（Calibration）时，通入 0%, 20%, 40%, 60%, 80%, 100% 的标气。CPU 采集到 6 个电压值，然后用数学方法算出一个公式：$$C = aV^4 + bV^3 + cV^2 + dV + e$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;a, b, c, d, e&lt;/strong&gt; 就是存在存储器里的&lt;strong&gt;线性化系数&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;只要系数算得准，再弯的线也能拟合成直线。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-查表法--针对奇葩传感器&#34;&gt;2. 查表法 —— 针对“奇葩”传感器
&lt;/h4&gt;&lt;p&gt;对于氧化锆（ZrO2）这种对数关系的传感器，或者极度非线性的传感器，公式太复杂了。我们就用最笨的办法：查字典。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;内存里存一张表：
&lt;ul&gt;
&lt;li&gt;10mV -&amp;gt; 0.1 ppm&lt;/li&gt;
&lt;li&gt;12mV -&amp;gt; 0.15 ppm&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果测到了 11mV 怎么办？&lt;strong&gt;线性插值&lt;/strong&gt; 算中间值。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;气体打架怎么办-交叉干扰补偿&#34;&gt;气体打架怎么办？—— 交叉干扰补偿
&lt;/h3&gt;&lt;p&gt;这是 CEMS 最头疼的问题。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景： 你要测 $\text{SO}_2$。&lt;/li&gt;
&lt;li&gt;现实： 烟气里有大量的水 ($\text{H}_2\text{O}$) 和 $\text{CO}_2$。&lt;/li&gt;
&lt;li&gt;麻烦： 虽然我们选了滤光片，但水和 $\text{CO}_2$ 在 $\text{SO}_2$ 的波段上可能还有 &lt;strong&gt;0.1% 的微弱吸收&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;后果： 哪怕没 $\text{SO}_2$，水气也能骗过仪器，产生一个几十 ppm 的假读数。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;解决方案：矩阵解耦 (Matrix Decoupling)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;既然躲不掉，我们就不仅测 $\text{SO}_2$，顺便把干扰气体也测了。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;硬件准备： 在切光轮上多加一个滤光片，专门测水的浓度（虽然我们不报告水，但我们要用它）。&lt;/li&gt;
&lt;li&gt;数学模型：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;$$C_{\text{real}} = C_{\text{meas}} - (K_{\text{H2O}} \times C_{\text{H2O}}) - (K_{\text{CO2}} \times C_{\text{CO2}})$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;$C_{\text{real}}$&lt;/strong&gt;：真实的 $\text{SO}_2$ 浓度**（我们最终想要的）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$C_{\text{meas}}$&lt;/strong&gt;：仪器测量到的总读数（这是个混合值，包含了 $\text{SO}_2$ 的信号 + 干扰气体的伪信号）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$C_{\text{H2O}}$&lt;/strong&gt;：当前测量到的水含量（比如 10%）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$K_{\text{H2O}}$&lt;/strong&gt;：水对 $\text{SO}_2$ 的干扰系数**（Interference Coefficient）。
&lt;ul&gt;
&lt;li&gt;物理意义：每 1% 的水，会让仪器误以为有 $K$ ppm 的 $\text{SO}_2$。这个系数是厂家出厂时测定并写在内存里的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$C_{\text{CO2}}$ / $K_{\text{CO2}}$&lt;/strong&gt;：同理，这是二氧化碳的浓度和它的干扰系数。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就是为什么高端分析仪一定要测 $\text{H}_2\text{O}$ 和 $\text{CO}_2$。不是为了看，而是为了扣除背景干扰。如果你的仪器没有这个补偿功能，一下雨（湿度大），你的 $\text{SO}_2$ 数据就会莫名其妙飘高。&lt;/p&gt;
&lt;h3 id=&#34;卡尔曼滤波-kalman-filter--预测未来&#34;&gt;卡尔曼滤波 (Kalman Filter) —— 预测未来
&lt;/h3&gt;&lt;p&gt;这是现在最前沿的信号处理技术，主要用于 TDLAS 激光分析仪或高端质谱仪。普通的滤波是“事后诸葛亮”（求平均值）。卡尔曼滤波是“预言家”**。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原理：
它包含两个模型：
&lt;ul&gt;
&lt;li&gt;物理模型： 根据上一秒的浓度和流速，&lt;strong&gt;预测&lt;/strong&gt;下一秒应该是多少。&lt;/li&gt;
&lt;li&gt;测量模型： 此时此刻传感器&lt;strong&gt;实测&lt;/strong&gt;到了多少。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;融合：
&lt;ul&gt;
&lt;li&gt;如果实测值和预测值差不多 $\to$ 相信实测值。&lt;/li&gt;
&lt;li&gt;如果实测值突然跳变（噪声），但物理模型说“不可能变这么快” $\to$ 更多地相信预测值，忽略实测值。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;效果： 它能把响应时间（T90）缩短到极致，同时还能把噪声压得极低。这在需要毫秒级响应的工业过程控制中非常重要。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>蠕动泵</title>
        <link>https://teaize.github.io/p/%E8%A0%95%E5%8A%A8%E6%B3%B5/</link>
        <pubDate>Fri, 12 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%A0%95%E5%8A%A8%E6%B3%B5/</guid>
        <description>&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251212203407.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251212203407.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;蠕动泵与密封&#34;&gt;蠕动泵与密封
&lt;/h2&gt;&lt;p&gt;烟气冷凝后，通过蠕动泵排水。按常理说，既然要排水，肯定要有个“口子”。既然有口子，那样气（比如 SO2、NO）不就顺着水一起跑 (泄露) 了吗？或者如果管路是负压，外面的空气不就倒吸进来了吗？&lt;/p&gt;
&lt;p&gt;答案在于蠕动泵独特的“机械闭合”原理。简单来说：&lt;strong&gt;蠕动泵不仅是一个“泵”，它天然还是一个“截止阀”。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;核心原理时刻被掐死的管子&#34;&gt;核心原理：时刻被“掐死”的管子
&lt;/h3&gt;&lt;p&gt;蠕动泵的工作方式，并不是像离心泵那样“敞开”甩水的，而是像你用手指捏住一根吸管往下滑。&lt;/p&gt;
&lt;h4 id=&#34;1-结构解剖&#34;&gt;1. 结构解剖
&lt;/h4&gt;&lt;p&gt;蠕动泵头里通常有 2 个或 3 个滚轮，以及一根弹性极好的软管（泵管）。&lt;/p&gt;
&lt;h4 id=&#34;2-运动过程&#34;&gt;2. 运动过程
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;状态 A： 滚轮滚过泵管，将管壁完全压扁（压死），直到两层管壁紧紧贴合。&lt;/li&gt;
&lt;li&gt;状态 B： 只要设计合格，在任何时刻，至少有一个滚轮是将管子彻底压死的。&lt;/li&gt;
&lt;li&gt;结果： 这个被“压死”的点，就是一个物理密封点。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就是秘密所在： 管子虽然是通的，但因为时刻都被滚轮“掐住”了，气体根本没有“直通”的路径跑出去，外面的空气也进不来。&lt;/p&gt;
&lt;p&gt;在防止气体泄露的同时，还能排除系统中的水，&lt;strong&gt;简直是优雅 (Elegant)&lt;/strong&gt;。本质上来说，是&lt;strong&gt;通过移动的闭合点，实现物质的定向输送与隔离&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;蠕动泵与波动&#34;&gt;蠕动泵与波动
&lt;/h2&gt;</description>
        </item>
        <item>
        <title>设计文档</title>
        <link>https://teaize.github.io/p/%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</link>
        <pubDate>Fri, 12 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</guid>
        <description>&lt;p&gt;对于一台复杂的精密仪器（特别是 CEMS 这种涉及光、机、电、算、化系统的设备），在动工前，必须集齐以下四大设计文档。&lt;/p&gt;
&lt;h3 id=&#34;第一张图pid-图-仪器的血脉&#34;&gt;第一张图：P&amp;amp;ID 图—— 仪器的“血脉”
&lt;/h3&gt;&lt;p&gt;在动手买任何一个阀门之前，必须先有这张图。这是机械/流体设计的宪法。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;它是什么：它不是简单的管路连接图，它包含了所有流体部件的逻辑符号。它定义了气体怎么走、哪里测压、哪里调节、哪里放空。&lt;/li&gt;
&lt;li&gt;它决定了什么：
&lt;ul&gt;
&lt;li&gt;控制逻辑：看到图上的球阀符号，软工就知道这需要一个 DO（开关量输出）信号。看到压力变送器，就知道需要一个 AI（模拟量输入）接口。&lt;/li&gt;
&lt;li&gt;安全逻辑：哪里必须加单向阀防止倒灌？哪里必须加安全阀防止憋压？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;你的盲区可能在于：很多新手只画“管子怎么连”，却不画“测点在哪里”和“&lt;strong&gt;控制点在哪里&lt;/strong&gt;”。
&lt;ul&gt;
&lt;li&gt;比如： 你想做闭环控制稀释比，那你的 P&amp;amp;ID 上必须在临界孔前画一个压力传感器符号。如果不画，电路板设计时就不会留这个接口，最后软件就没法写闭环算法。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第二张图硬件互连图--仪器的骨骼&#34;&gt;第二张图：硬件互连图 —— 仪器的“骨骼”
&lt;/h3&gt;&lt;p&gt;你之前问了电源板、驱动板、主板……这张图就是用来规划这些板子之间怎么连线的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;它是什么：&lt;strong&gt;它不关心电路板内部怎么画（那是原理图 Schematic 的事），它只关心板子与板子、板子与部件之间的线束定义&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;它决定了什么：
&lt;ul&gt;
&lt;li&gt;供电拓扑：24V 是从电源板直接给风扇，还是先经过主板再给风扇？（决定了电流负载和走线粗细）。&lt;/li&gt;
&lt;li&gt;信号流向：PMT 的信号是先去前放板，再去主板？还是直接去 IO 板？&lt;/li&gt;
&lt;li&gt;接口定义：主板上需要留几个插座？是 10 Pin 的还是 20 Pin 的？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;你的盲区可能在于：“地线规划”。在这张图上，必须明确画出：哪根是信号地（AGND），哪根是电源地（PGND），它们在哪里汇合（单点接地）。如果这张图没画好，后期干扰问题会让你崩溃。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三张图io-列表--软硬件的字典&#34;&gt;第三张图：I/O 列表 —— 软硬件的“字典”
&lt;/h3&gt;&lt;p&gt;这是连接“硬件工程师”和“软件工程师”的唯一桥梁。也是你画状态机图的前提。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;它是什么：一个巨大的 Excel 表格。每一行代表仪器的一个“手”或“眼”。&lt;/li&gt;
&lt;li&gt;内容包含：
&lt;ul&gt;
&lt;li&gt;位号 (Tag Name)：如 &lt;code&gt;V1_Sample_Valve&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;物理接口：如 &lt;code&gt;IO_Board_J3_Pin5&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;信号类型：DO (继电器输出), DI (光耦输入), AI (4-20mA), AO。&lt;/li&gt;
&lt;li&gt;逻辑定义：高电平是开还是关？（常开还是常闭）。&lt;/li&gt;
&lt;li&gt;供电要求：这个阀门是 24V 还是 12V？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;为什么必须最先做：如果不先列出这张表，硬件工程师不知道选多大的 CPU（管脚够不够用），软件工程师不知道变量怎么定义。它是软硬件分工的契约。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第四张图时序图--仪器的剧本&#34;&gt;第四张图：时序图 —— 仪器的“剧本”
&lt;/h3&gt;&lt;p&gt;状态机图是宏观逻辑，时序图是微观动作。这是解决你之前担心的“两位三通阀乱套”问题的关键。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;它是什么：横轴是时间，纵轴是各个部件（泵、阀、灯、加热器）的状态。&lt;/li&gt;
&lt;li&gt;它解决了什么细节：
&lt;ul&gt;
&lt;li&gt;比如切校准时：是先关采样阀，还是先开标气阀？&lt;/li&gt;
&lt;li&gt;如果先关采样阀，中间有 0.1 秒 两个阀都关了，泵会不会憋死？&lt;/li&gt;
&lt;li&gt;如果先开标气阀，中间有 0.1 秒 两个阀都开了，标气会不会倒灌进采样管？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;你的盲区可能在于：“死区时间 (Dead Time)”的设计。所有的动作都不可能瞬间完成，必须在时序图上预留出 500ms 或 1s 的缓冲期。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;p&gt;如果你现在要重新设计一台 CEMS 分析仪，正确的顺序应该是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;先画 P&amp;amp;ID (气路逻辑)： 搞定物理原理。确定要几个阀、几个泵、几个传感器。（这是根本）&lt;/li&gt;
&lt;li&gt;列 I/O List (资源统计)： 数一数上一共有多少个控制点和采集点。（这是量化）&lt;/li&gt;
&lt;li&gt;画 硬件互连图 (电气架构)： 决定用几块板子，怎么给这些 I/O 供电和通讯。（这是骨架）&lt;/li&gt;
&lt;li&gt;画 状态机 &amp;amp; 时序图 (软件逻辑)： 决定这些 I/O 按照什么顺序动。（这是灵魂）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你之前的提问顺序（先问电路板、再问气路、最后问状态机），其实是“自下而上”的学习过程，这完全正常。但现在你要开始“设计”了，就必须“自上而下”，先有这四份顶层设计文档，再去画具体的电路图或写代码。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>稀释法CEMS</title>
        <link>https://teaize.github.io/p/%E7%A8%80%E9%87%8A%E6%B3%95cems/</link>
        <pubDate>Fri, 12 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%A8%80%E9%87%8A%E6%B3%95cems/</guid>
        <description>&lt;h2 id=&#34;一-稀释法系统的核心痛点与通用问题&#34;&gt;一、 稀释法系统的核心痛点与通用问题
&lt;/h2&gt;&lt;p&gt;稀释法的核心在于“稀释比”（Dilution Ratio）的稳定性。如果稀释比变了，所有的测量数据都是错误的。&lt;/p&gt;
&lt;h3 id=&#34;1-临界孔的堵塞与腐蚀&#34;&gt;1. 临界孔的堵塞与腐蚀
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;问题描述：&lt;/strong&gt; 临界孔通常是宝石或玻璃材质，孔径极小。虽然有烧结滤芯保护，但在高粉尘或由于探头加热失效导致结晶（如铵盐）时，临界孔容易发生微堵塞。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;后果：&lt;/strong&gt; 样气流量减小，导致稀释比变大，测量读数偏低。&lt;strong&gt;这是最隐蔽的故障，因为校准时通入标气也会被稀释，可能掩盖部分问题&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;场景假设正常状态&#34;&gt;场景假设：正常状态
&lt;/h4&gt;&lt;p&gt;假设你的系统设定如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;稀释比 (DR): 100:1 (即 1 份样气 : 99 份稀释风)&lt;/li&gt;
&lt;li&gt;标气浓度: 100 ppm 的 $\text{SO}_2$&lt;/li&gt;
&lt;li&gt;分析仪量程: 0-2 ppm (稀释后浓度)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;正常时：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;你通入 100 ppm 标气。&lt;/li&gt;
&lt;li&gt;经过正常的临界孔，稀释 100 倍。&lt;/li&gt;
&lt;li&gt;进入分析仪的气体浓度是 1 ppm。&lt;/li&gt;
&lt;li&gt;分析仪读数显示 1 ppm $\to$ 反算排放浓度 100 ppm。&lt;/li&gt;
&lt;li&gt;结论： 校验合格，系统正常&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;场景假设临界孔微堵&#34;&gt;场景假设：临界孔微堵
&lt;/h4&gt;&lt;p&gt;假设由于烟气脏或者加热不够，&lt;strong&gt;临界孔发生微堵塞&lt;/strong&gt;（孔径变小了，或者结晶了）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理变化： 进样流量 ($Q_{sample}$) 减半。但稀释风流量 ($Q_{air}$) 是由文丘里管或压力控制的，基本不变。&lt;/li&gt;
&lt;li&gt;结果： 稀释比从 100:1 变成了 200:1（大致估算）。&lt;/li&gt;
&lt;li&gt;此时测量烟气： 烟气被稀释了 200 倍，读数直接减半。数据明显偏低，不准了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;运维人员校准隐蔽的故障&#34;&gt;运维人员校准（隐蔽的故障）
&lt;/h4&gt;&lt;p&gt;此时，运维人员通标气进行校准。通入 100ppm 标气进入探头，但此时由于临界孔堵塞稀释比变成了 200，也就是说标气被稀释了 200 倍，进入分析仪的浓度自然只有 0.5ppm。分析仪上还是按旧系数折算的，显示 50ppm。
运维人员的操作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;运维人员看到：“咦？通 100 ppm，怎么只显示 50 ppm？看来是&lt;strong&gt;分析仪漂移&lt;/strong&gt;了，或者灵敏度下降了。”&lt;/li&gt;
&lt;li&gt;修正动作： 他在分析仪或工控机上执行 &lt;strong&gt;&amp;ldquo;Calibration / Span Adjust&amp;rdquo;（量程校准）&lt;/strong&gt; 操作。&lt;/li&gt;
&lt;li&gt;系统内部逻辑： 强行把这个 0.5 ppm 的电信号定义为 100 ppm。也就是把斜率（Gain）放大了一倍。&lt;/li&gt;
&lt;li&gt;结果：屏幕显示 100ppm。运维人员心理： “校准通过，设备修好了。”&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;为什么说这是隐蔽的故障&#34;&gt;为什么说这是“隐蔽的故障”
&lt;/h4&gt;&lt;p&gt;表面上看，你把数校准回来了，测量似乎又“准”了。但实际上，&lt;strong&gt;硬件故障（堵塞）依然存在，且被软件系数掩盖了&lt;/strong&gt;。这带来了以下严重的后续隐患：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;极不稳定的平衡：&lt;/strong&gt; 你现在的校准是建立在“临界孔堵了一半”这个特定状态下的。堵塞物（如灰尘或铵盐）是不稳定的。
&lt;ul&gt;
&lt;li&gt;情况 A： 如果反吹系统突然起作用，把堵塞物吹掉了，稀释比瞬间变回 100:1。你的读数会突然翻倍（显示 200 ppm），导致数据超标异常。&lt;/li&gt;
&lt;li&gt;情况 B： 堵塞进一步加重，稀释比变成 300:1，数据又开始缓慢下降。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;响应时间（$T_{90}$）变差：
&lt;ul&gt;
&lt;li&gt;临界孔堵塞意味着吸入样气的流速变慢。虽然浓度数被你调准了，但气体置换速度变慢了。&lt;/li&gt;
&lt;li&gt;原本烟气变化只需 30 秒就能反应在数据上，现在可能需要 2 分钟。这在工况剧烈波动时，会导致 CEMS 数据严重滞后，甚至无法通过环保验收的响应时间测试。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;真空度报警失效的边缘： 虽然还能抽气，但采样泵的负载变了，或者探头内部的真空度已经处于临界边缘。一旦工况负压波动，很容易触发低流量报警。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;工程师如何识别这个骗局&#34;&gt;工程师如何识别这个“骗局”
&lt;/h4&gt;&lt;p&gt;在做校准时，不能只看“能不能校准到标气值”，还要关注“校准系数（Slope/Gain）”的变化&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查看分析仪的 Gain/Slope 值： 如果平时这个系数是 1.0 左右，突然你需要把它调到 1.5 甚至 2.0 才能标定成功，&lt;strong&gt;绝对不是分析仪漂移了，而是稀释比变了（探头堵了）。&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;测量探头真空度： 大部分稀释法探头都有一个真空表。&lt;strong&gt;如果临界孔堵塞，真空度通常会变得更高&lt;/strong&gt;（更接近真空），因为进气阻力大了。&lt;/li&gt;
&lt;li&gt;检查响应时间： 通标气时，观察读数上升的速度。如果发现读数爬升得很慢，即使最后能稳在 100 ppm，也说明临界孔大概率堵了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-稀释比随工况漂移&#34;&gt;2. 稀释比随工况漂移
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;物理原理： 稀释比 $DR$ 受到烟道压力和温度的影响。公式大概如下：$$Q \propto \frac{P}{\sqrt{T}}$$&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;问题：&lt;/strong&gt; 虽然现代系统有压力和温度补偿，但如果烟道负压剧烈波动，或者探头加热温度控制不稳（例如伴热管线故障），稀释比就会波动，导致数据震荡。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-稀释空气zero-air的质量&#34;&gt;3. 稀释空气（Zero Air）的质量
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;关键点：&lt;/strong&gt; 稀释法的稀释比通常在 20:1 到 100:1 之间。这意味着你测量的 95%~99% 的气体其实是你自己提供的稀释风。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;隐患：&lt;/strong&gt; 如果空气压缩机或零气发生器（Zero Air Generator）出现问题（例如油雾、水分穿透），这些杂质会被放大几十倍计入背景噪声，直接摧毁微量分析仪的检出限。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-湿基转干基的误差&#34;&gt;4. 湿基转干基的误差
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;法规要求：&lt;/strong&gt; 环保上传数据通常要求&lt;strong&gt;干基&lt;/strong&gt;（Dry Basis）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;痛点：&lt;/strong&gt; 稀释法天然测出来是&lt;strong&gt;湿基&lt;/strong&gt;。必须依靠氧化锆氧量计或其他方式测算湿度来折算。湿度的测量误差会直接叠加到 $\text{SO}_2$ 和 $\text{NO}_x$ 的最终排放数据上。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>系统状态流转图</title>
        <link>https://teaize.github.io/p/%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81%E6%B5%81%E8%BD%AC%E5%9B%BE/</link>
        <pubDate>Fri, 12 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81%E6%B5%81%E8%BD%AC%E5%9B%BE/</guid>
        <description>&lt;p&gt;如果没有 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E7%8A%B6%E6%80%81%E6%9C%BA/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;状态机&lt;/a&gt; 的逻辑，分析仪就是一堆乱飞的继电器和乱跳的数字。状态机逻辑不仅决定了仪器怎么动，更决定了环保局收到的数据上打什么“标记”。例如：反吹时数据不能算超标，必须打上“保持 (Hold)”标记。&lt;/p&gt;
&lt;h3 id=&#34;一-cems-系统状态流转图&#34;&gt;一、 CEMS 系统状态流转图
&lt;/h3&gt;&lt;p&gt;下面这张图展示了一个典型的完全抽取式 CEMS 系统（含反吹、自动校准功能）的软件逻辑&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;&gt;
  stateDiagram-v2
    %% 定义全局样式
    classDef measure fill:#90EE90,color:black,stroke:#006400,stroke-width:2px;
    classDef maintain fill:#FFD700,color:black,stroke:#DAA520,stroke-width:2px;
    classDef fault fill:#FF6347,color:white,stroke:#8B0000,stroke-width:2px;
    classDef init fill:#D3D3D3,color:black,stroke:#696969;

    %% --- 初始状态 ---
    [*] --&gt; WARMUP : 上电启动

    %% 1. 预热状态
    state &#34;预热/自检 (Warm-up)&#34; as WARMUP
    WARMUP : 动作：加热炉/探头升温
    WARMUP : 数据：无效 (Invalid)
    WARMUP : 泵：关闭
    
    WARMUP --&gt; MEASURE : 温度达标 &amp;&amp; 无故障
    WARMUP --&gt; FAULT : 自检失败 (如传感器断路)

    %% 2. 测量主循环
    state &#34;正常测量 (Measurement)&#34; as MEASURE
    class MEASURE measure
    MEASURE : 动作：采样阀开，泵开
    MEASURE : 数据：正常输出 (Valid)
    MEASURE : 逻辑：实时计算浓度

    %% --- 周期性任务 (中断测量) ---
    
    %% 3. 反吹流程
    state &#34;系统反吹 (Blowback)&#34; as PURGE_CYCLE {
        state &#34;高压反吹 (Purging)&#34; as BLOW
        state &#34;样气置换/恢复 (Recovery)&#34; as RECOV
        
        BLOW --&gt; RECOV : 反吹时间到 (如30s)
        BLOW : 动作：反吹阀开，采样泵停/隔离
        
        RECOV : 动作：切回采样，等待气体稳定
    }
    class PURGE_CYCLE maintain

    MEASURE --&gt; PURGE_CYCLE : 定时器触发 (如每4小时)
    PURGE_CYCLE --&gt; MEASURE : 恢复时间到 (如120s)
    
    %% 4. 校准流程
    state &#34;校准 (Calibration)&#34; as CALIBRATION {
        state &#34;校零 (Zero Cal)&#34; as ZERO
        state &#34;校标 (Span Cal)&#34; as SPAN
        
        ZERO --&gt; SPAN : 零点成功 -&gt; 切标气
        ZERO : 动作：切零气阀
        SPAN : 动作：切标气阀
    }
    class CALIBRATION maintain

    MEASURE --&gt; CALIBRATION : 用户指令 或 定时触发
    CALIBRATION --&gt; MEASURE : 校准完成/退出

    %% 5. 故障状态
    state &#34;系统故障 (System Fault)&#34; as FAULT
    class FAULT fault
    FAULT : 触发条件：温度低、流量低、通讯断
    FAULT : 动作：切断加热、停泵 (保护)
    FAULT : 数据：故障标记 (Fault Flag)

    %% 全局故障中断
    MEASURE --&gt; FAULT : 发生故障
    PURGE_CYCLE --&gt; FAULT : 发生故障
    CALIBRATION --&gt; FAULT : 发生故障
    
    FAULT --&gt; WARMUP : 故障复位/重启
    FAULT --&gt; MEASURE : 故障清除 (非致命)

    %% 数据标记说明
    note right of PURGE_CYCLE
        关键逻辑：
        进入非测量状态时，
        数据必须 &#34;保持 (Hold)&#34;
        不能输出 0 或 20.9%
    end note
&lt;/div&gt;
&lt;h3 id=&#34;二-深度解剖状态背后的潜规则&#34;&gt;二、 深度解剖：状态背后的“潜规则”
&lt;/h3&gt;&lt;p&gt;看懂了图，我们还要看懂图背后的工程逻辑。这是写 PLC 程序或嵌入式代码的核心。&lt;/p&gt;
&lt;h4 id=&#34;1-预热状态-warm-up--严厉的门卫&#34;&gt;1. 预热状态 (Warm-up) —— 严厉的门卫
&lt;/h4&gt;&lt;p&gt;为什么不能一上电就测量？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理原因： 钼炉没到 315°C，$\text{NO}_2$ 转换效率极低；氧化锆没到 700°C，内阻无穷大；光具座没恒温，漂移巨大。&lt;/li&gt;
&lt;li&gt;软件逻辑： 这是一个 &lt;code&gt;While Loop&lt;/code&gt;。只要温度（Temp）不在设定范围内（比如 $Set \pm 5^{\circ}C$），系统死锁，禁止开启采样泵。
&lt;ul&gt;
&lt;li&gt;防止冷凝水吸入冷光路，这是保护仪器的第一道防线&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-反吹与恢复-blowback--recovery--容易被遗忘的死时间&#34;&gt;2. 反吹与恢复 (Blowback &amp;amp; Recovery) —— 容易被遗忘的“死时间”
&lt;/h4&gt;&lt;p&gt;新手写程序，往往只写“反吹动作”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;错误逻辑：&lt;/strong&gt; 反吹阀关 $\rightarrow$ 马上输出数据。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;后果：&lt;/strong&gt; 反吹时管路里全是压缩空气（$\text{O}_2 \approx 21%, \text{SO}_2 = 0$）。反吹刚结束那几十秒，样气还没抽上来。如果这时候输出数据，DCS 会记录到一个“排放跌零”的异常数据。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;正确逻辑：&lt;/strong&gt; 必须加一个 &lt;strong&gt;Recovery Time (恢复时间)&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;反吹 10 秒。&lt;/li&gt;
&lt;li&gt;等待 120 秒（让样气置换掉管路里的空气）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;这 130 秒内，数据全部打上“保持 (Hold)”标记，DCS 维持显示反吹前一刻的数值。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-故障状态-fault--优先级最高的中断&#34;&gt;3. 故障状态 (Fault) —— 优先级最高的中断
&lt;/h4&gt;&lt;p&gt;注意看图中的红线，故障是可以从&lt;strong&gt;任何状态&lt;/strong&gt;切入的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安全逻辑：
&lt;ul&gt;
&lt;li&gt;如果在“校准”时，突然检测到&lt;strong&gt;伴热管线温度低&lt;/strong&gt;（可能断了），必须立即强行中断校准，跳到 Fault 状态，并&lt;strong&gt;关闭采样泵&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;为什么？因为低温会导致结露，含水的酸性气体吸进来会腐蚀分析仪。&lt;strong&gt;保命优先于干活。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-测量状态-measure--唯一的有效数据时刻&#34;&gt;4. 测量状态 (Measure) —— 唯一的“有效数据”时刻
&lt;/h4&gt;&lt;p&gt;只有在这个状态下，软件输出的状态位（Status Bit）才是 &lt;strong&gt;&amp;ldquo;Valid&amp;rdquo; (有效)&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;环保局的数采仪（DAS）只统计标记为 Valid 的数据来计算日均值。&lt;/li&gt;
&lt;li&gt;如果你的仪器老是跳到故障或反吹，有效数据率不足 75%，企业就会面临环保处罚。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;从图到码的映射法则&#34;&gt;从“图”到“码”的映射法则
&lt;/h2&gt;&lt;p&gt;在工业控制领域，只要你的状态机（State Machine）设计得足够完善，将它“翻译”成代码，确实就是一个非常机械、甚至可以自动化的过程。&lt;/p&gt;
&lt;p&gt;如果我们以前面的 CEMS 状态图为例，写成 C 语言（单片机）或者 ST 语言（PLC），几乎是一一对应的：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;状态图要素 (Mermaid)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;代码要素 (C/C++)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;例子&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;圆角矩形 (State)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;Case 分支&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;case MEASURE:&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;箭头 (Transition)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;If 判断&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;if (Temp &amp;gt; 300) …&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;文本描述 (Action)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;函数调用&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;OpenValve();&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;状态变量&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;枚举 (Enum)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;enum {WARMUP, MEASURE…}&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;为什么说其实就比较简单&#34;&gt;为什么说“其实就比较简单”？
&lt;/h3&gt;&lt;p&gt;因为状态机图帮你解决了编程中最让人头秃的三个问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;互斥问题：
&lt;ul&gt;
&lt;li&gt;没图时：你可能会担心“反吹的时候会不会同时在测量？”&lt;/li&gt;
&lt;li&gt;有图后：不可能。因为 &lt;code&gt;case BLOWBACK&lt;/code&gt; 和 &lt;code&gt;case MEASURE&lt;/code&gt; 是互斥的，程序永远只能跑在一个分支里。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;死锁问题：
&lt;ul&gt;
&lt;li&gt;没图时：容易出现“卡在校准里出不来”。&lt;/li&gt;
&lt;li&gt;有图后：你会盯着图看，发现“校准”状态必须有一条箭头指出去（比如超时退出），否则图就是断的。图没断，代码就不会死锁。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;优先级问题：
&lt;ul&gt;
&lt;li&gt;没图时：故障发生了，但程序还在跑校准。&lt;/li&gt;
&lt;li&gt;有图后：你在图上画了 &lt;code&gt;FAULT&lt;/code&gt; 可以从任何地方切入，写代码时就会把 &lt;code&gt;if (Error)&lt;/code&gt; 放在最外层，优先级自然就清楚了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;既然这么简单难点剩下什么&#34;&gt;既然这么简单，难点剩下什么？
&lt;/h3&gt;&lt;p&gt;虽然**“逻辑流”（骨架）简单了，但作为 CEMS 专家，我要提醒你，在转换成代码时，真正的难点转移到了“血肉”（底层驱动）上。&lt;/p&gt;
&lt;h4 id=&#34;1-动作函数的实现-the-drivers&#34;&gt;1. 动作函数的实现 (The Drivers)
&lt;/h4&gt;&lt;p&gt;状态机里写一句 OpenValve(V1) 很简单。但在代码里，你得去写这个函数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GPIO 是哪个引脚？&lt;/li&gt;
&lt;li&gt;是高电平开还是低电平开？&lt;/li&gt;
&lt;li&gt;有没有防抖动处理？&lt;/li&gt;
&lt;li&gt;这部分是“脏活累活”，状态图帮不了你，得查硬件原理图。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-非阻塞计时-non-blocking-timing&#34;&gt;2. 非阻塞计时 (Non-blocking Timing)
&lt;/h4&gt;&lt;p&gt;这是一个大坑。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;状态图上写：“等待 120 秒”。&lt;/li&gt;
&lt;li&gt;新手写代码： &lt;code&gt;delay(120000);&lt;/code&gt; (死等)。
&lt;ul&gt;
&lt;li&gt;后果：这 120 秒内，CPU 睡着了，按键没反应，串口不通讯，看门狗可能会叫，程序会崩溃。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;高手写代码：必须使用“时间戳轮询”。你需要构建一个软件定时器架构，这比画图要难一些。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-故障检测的灵敏度&#34;&gt;3. 故障检测的灵敏度
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;状态图上写： “温度低 $\rightarrow$ 故障”。&lt;/li&gt;
&lt;li&gt;实际代码：
&lt;ul&gt;
&lt;li&gt;是一瞬间低于 315°C 就报警吗？（那风一吹就误报了）。&lt;/li&gt;
&lt;li&gt;还是连续 10 秒低于 315°C 才报警？&lt;/li&gt;
&lt;li&gt;这需要**“滤波算法”，这也是图上体现不出来的细节。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;终极境界代码是生成出来的&#34;&gt;终极境界：代码是“生成”出来的
&lt;/h3&gt;&lt;p&gt;正如我之前提到的，在现代高端工程中（如汽车电子、航空、高端医疗仪器），工程师甚至&lt;strong&gt;不写&lt;/strong&gt;这部分 C 代码。&lt;/p&gt;
&lt;p&gt;他们使用 &lt;strong&gt;Model-Based Design (MBD)&lt;/strong&gt; 工具（如 MATLAB/Simulink 或 现在的 AI 辅助编程）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在软件里画好你刚才看到的那个 Mermaid 状态图。&lt;/li&gt;
&lt;li&gt;点击 &amp;ldquo;Generate Code&amp;rdquo; 按钮。&lt;/li&gt;
&lt;li&gt;软件自动生成几千行完美无缺、符合工业标准（MISRA-C）的 C 代码。&lt;/li&gt;
&lt;li&gt;工程师只需要负责画图和写底层驱动。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ADC电压信号</title>
        <link>https://teaize.github.io/p/adc%E7%94%B5%E5%8E%8B%E4%BF%A1%E5%8F%B7/</link>
        <pubDate>Thu, 11 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/adc%E7%94%B5%E5%8E%8B%E4%BF%A1%E5%8F%B7/</guid>
        <description>&lt;p&gt;基本上所有的 ADC（模数转换器）只能直接“听懂”电压信号，而非电流信号&lt;/p&gt;
&lt;h3 id=&#34;为什么-adc-偏爱电压&#34;&gt;为什么 ADC 偏爱电压
&lt;/h3&gt;&lt;p&gt;ADC 的内部核心部件——比较器 (Comparator) 和 采样保持电路 (Sample and Hold) 。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;比较器的工作原理（电压的战争）：
&lt;ul&gt;
&lt;li&gt;ADC 内部其实是在做无数次“天平称重”。
&lt;ul&gt;
&lt;li&gt;一端： 你的输入信号。&lt;/li&gt;
&lt;li&gt;另一端： 内部的参考电压（$V_{ref}$）。&lt;/li&gt;
&lt;li&gt;动作： 比较器问：“现在的输入比参考电压高还是低？”&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在晶体管级别，电压（电势能）是驱动门电路开关的最直接力量&lt;/strong&gt;（场效应管 FET 就是电压控制型器件）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;采样保持（电容存电）：
&lt;ul&gt;
&lt;li&gt;ADC 在抓取数据的那一瞬间，需要把信号“冻结”住。
&lt;ul&gt;
&lt;li&gt;做法： 它是用一个小电容（Capacitor）来存电荷的。&lt;/li&gt;
&lt;li&gt;物理公式： $V = Q / C$。&lt;/li&gt;
&lt;li&gt;电容存下来的电荷量，直接体现为两端的&lt;strong&gt;电压差&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;那-4-20ma-信号呢&#34;&gt;那 4-20mA 信号呢？
&lt;/h3&gt;&lt;p&gt;你可能会问：“不对啊，现场很多变送器输出的是 &lt;strong&gt;4-20mA&lt;/strong&gt; 电流信号，PLC 的 AI 模块不是直接读进去了吗？”&lt;/p&gt;
&lt;p&gt;这其实是个“假象”。如果你拆开 PLC 的模拟量输入模块，或者拆开采集卡，你会发现在那个接线端子的背后，悄悄藏着一个&lt;strong&gt;精密电阻&lt;/strong&gt;（通常是 $250\Omega$ 或 $500\Omega$）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;外部： 你送进来的是 4-20 mA 电流。&lt;/li&gt;
&lt;li&gt;内部采样： 电流流过 $250\Omega$ 电阻。&lt;/li&gt;
&lt;li&gt;ADC： 它实际上测的是这个电阻两端的 1-5V 电压。$$V = 0.02\text{A} \times 250\Omega = \mathbf{5V}$$
所以，所谓的“电流型输入模块”，本质上就是“电压型 ADC + 一个采样电阻”**。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>动态范围</title>
        <link>https://teaize.github.io/p/%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4/</link>
        <pubDate>Thu, 11 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;为什么有的痕量分析仪，量程范围可以非常广，既可以测量小量程，又可以测量大量程。这台机器是如何做到：既能看清一只蚂蚁的腿毛（ppb 级痕量），又能看清一头大象（ppm 级常量），而且用的是同一双眼睛（PMT）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个魔法的核心在于：&lt;strong&gt;可变增益链&lt;/strong&gt; (Variable Gain Chain)。在电路实现上，主要依靠 TIA（跨阻放大器）的量程切换和 PGA（可编程增益放大器）。我把这个过程比作&lt;strong&gt;显微镜的换镜头&lt;/strong&gt;（或者说电子变速箱）&lt;/p&gt;
&lt;h3 id=&#34;一-核心矛盾adc-的分辨率瓶颈&#34;&gt;一、 核心矛盾：ADC 的分辨率瓶颈
&lt;/h3&gt;&lt;p&gt;首先，我们要明白为什么要调整增益。现在的仪器最终都要把模拟信号变成数字信号（ADC，模数转换）。&lt;/p&gt;
&lt;p&gt;假设你的 ADC 是 0~5V 输入范围。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;如果不调增益（固定量程）：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;为了测 &lt;strong&gt;100 ppm&lt;/strong&gt; (大信号)，你设定 5V = 100 ppm。&lt;/li&gt;
&lt;li&gt;那么 &lt;strong&gt;1 ppb&lt;/strong&gt; (0.001 ppm) 对应的电压就是 $0.00005\text{V}$ (50 微伏)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;后果：&lt;/strong&gt; 50 微伏的有用信号早就被电路板上的&lt;strong&gt;白噪声&lt;/strong&gt;和&lt;strong&gt;底噪&lt;/strong&gt;淹没了，根本测不出来。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;解决思路：
&lt;ul&gt;
&lt;li&gt;测大信号时：把倍数调低（5V = 100 ppm）。&lt;/li&gt;
&lt;li&gt;测小信号时：&lt;strong&gt;把倍数放大 1000 倍&lt;/strong&gt;（5V = 100 ppb）。这样 1 ppb 的信号就变成了 0.05V (50 毫伏)，这就能测准了！&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;二-硬件实现三级放大策略&#34;&gt;二、 硬件实现：三级放大策略
&lt;/h3&gt;&lt;p&gt;在紫外荧光法 $\text{SO}_2$ 分析仪中，电路通常分为三级来处理 PMT 输出的微弱电流。&lt;/p&gt;
&lt;h4 id=&#34;第一级iv-转换跨阻放大器-tia-最关键的电阻切换&#34;&gt;第一级：I/V 转换（跨阻放大器 TIA）—— 最关键的“电阻切换”
&lt;/h4&gt;&lt;p&gt;PMT 输出的是电流 ($I_{pmt}$)，通常在 皮安 (pA, $10^{-12}$) 到 微安 ($\mu\text{A}, 10^{-6}$) 级别。我们需要把它变成电压 ($V$) 给 ADC 读。&lt;/p&gt;
&lt;p&gt;公式：$V_{out} = I_{pmt} \times R_f$ (&lt;strong&gt;反馈电阻&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;这是物理层面的量程切换，也是最常用的一招。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;低量程模式 (Trace Mode)：
&lt;ul&gt;
&lt;li&gt;我们需要极大的放大倍数。&lt;/li&gt;
&lt;li&gt;电路会自动接通一个 1G$\Omega$ ($10^9$ 欧姆) 的超大电阻。&lt;/li&gt;
&lt;li&gt;哪怕只有 1pA 的电流，也能产生 $1\text{pA} \times 1\text{G}\Omega = 1\text{mV}$ 的电压。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;高量程模式 (High Range)：
&lt;ul&gt;
&lt;li&gt;电流太大了，用大电阻会瞬间让电压“爆表”（超过 5V）。&lt;/li&gt;
&lt;li&gt;电路通过继电器或模拟开关，切换成一个 1M$\Omega$ ($10^6$ 欧姆) 的电阻。&lt;/li&gt;
&lt;li&gt;倍数瞬间缩小了 1000 倍。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第二级pga-可编程增益放大器--精细微调&#34;&gt;第二级：PGA (可编程增益放大器) —— 精细微调
&lt;/h4&gt;&lt;p&gt;TIA 负责粗调（比如 x1, x100, x1000），PGA 负责细调（x1, x2, x4, x8…）。这是一个集成芯片，CPU 可以通过发指令，瞬间改变它的放大倍数。它的作用是把第一级出来的电压，尽可能拉伸到 ADC 的最佳工作区（比如 2V~4V）。&lt;/p&gt;
&lt;h4 id=&#34;第三级pmt-高压调整-hv-adjustment--终极武器&#34;&gt;第三级：PMT 高压调整 (HV Adjustment) —— 终极武器
&lt;/h4&gt;&lt;p&gt;如果光强实在太强了，把电阻换到最小、PGA 设为 1 还是爆表怎么办？&lt;/p&gt;
&lt;p&gt;降低 PMT 的供电电压（负高压）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMT 的增益对高压极其敏感。高压从 -800V 降到 -600V，PMT 输出的电流可能直接衰减 10 倍。&lt;/li&gt;
&lt;li&gt;注：这种方法响应慢，通常不用于快速量程切换，只用于基准设定。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;三-算法逻辑自动量程-auto-ranging-的傻瓜逻辑&#34;&gt;三、 算法逻辑：自动量程 (Auto-Ranging) 的“傻瓜”逻辑
&lt;/h3&gt;&lt;p&gt;硬件准备好了，软件（算法）是怎么指挥的呢？这就涉及到了&lt;strong&gt;阈值判定&lt;/strong&gt; 和 &lt;strong&gt;滞回&lt;/strong&gt;。CPU 会在一个循环里不断监视 ADC 的读数（假设 ADC 满量程是 65535）：&lt;/p&gt;
&lt;h4 id=&#34;1-向上切换-upscale防止爆表&#34;&gt;1. 向上切换 (Upscale)：防止爆表
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;逻辑： 如果 ADC 读数连续 N 次超过 90% (比如 &amp;gt; 59000)。&lt;/li&gt;
&lt;li&gt;判断： “危险！信号快到顶了，要被削顶了！”&lt;/li&gt;
&lt;li&gt;动作：
&lt;ol&gt;
&lt;li&gt;命令 PGA 增益 除以 10（或者切换 TIA 电阻）。&lt;/li&gt;
&lt;li&gt;软件内部记录：现在的 硬件放大倍数 (Gain Factor) 变了。&lt;/li&gt;
&lt;li&gt;丢弃切换瞬间不稳定的那几个数据。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-向下切换-downscale防止丢失精度&#34;&gt;2. 向下切换 (Downscale)：防止丢失精度
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;逻辑： 如果 ADC 读数连续 N 次低于 &lt;strong&gt;10%&lt;/strong&gt; (比如 &amp;lt; 6500)。&lt;/li&gt;
&lt;li&gt;判断： “信号太小了，分辨率不够用了，我要放大看细节！”&lt;/li&gt;
&lt;li&gt;动作：
&lt;ol&gt;
&lt;li&gt;命令 PGA 增益 乘以 10。&lt;/li&gt;
&lt;li&gt;等待电路稳定。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-核心算法滞回区间-hysteresis--避免抽风&#34;&gt;3. 核心算法：滞回区间 (Hysteresis) —— 避免“抽风”
&lt;/h4&gt;&lt;p&gt;这是一个非常重要的工程经验。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果你设定： &amp;gt;90% 升档，&amp;lt;90% 降档。&lt;/li&gt;
&lt;li&gt;后果： 如果读数刚好在 90% 附近跳动，继电器就会“咔哒咔哒”疯狂切换，系统就崩溃了。&lt;/li&gt;
&lt;li&gt;做法：
&lt;ul&gt;
&lt;li&gt;升档阈值设为 &lt;strong&gt;95%&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;降档阈值设为 &lt;strong&gt;15%&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;中间这巨大的空白区，保持当前量程不动。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;四-数据还原这一步最容易被忽视&#34;&gt;四、 数据还原：这一步最容易被忽视
&lt;/h3&gt;&lt;p&gt;硬件切换了，电压变了，那屏幕上显示的浓度数值会不会突然跳变？当然不能跳！ 软件必须把电压归一化。
$$\text{最终显示浓度} = \frac{\text{ADC读数电压}}{\text{当前的硬件总增益}} \times \text{校准系数}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景 A（低量程）：
&lt;ul&gt;
&lt;li&gt;ADC 读到 4.0V。&lt;/li&gt;
&lt;li&gt;当前增益是 x1000。&lt;/li&gt;
&lt;li&gt;反算原始信号：$4.0 / 1000 = 0.004$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;场景 B（高量程）：
&lt;ul&gt;
&lt;li&gt;切换后，硬件增益变成了 x1。&lt;/li&gt;
&lt;li&gt;同样的浓度，ADC 读数变成了 0.004V。&lt;/li&gt;
&lt;li&gt;反算原始信号：$0.004 / 1 = 0.004$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结果： 虽然 ADC 读到的电压天差地别，但经过软件除以增益后，最终算出来的浓度是平滑连接的。&lt;/p&gt;
&lt;h2 id=&#34;痕量仪与常量仪&#34;&gt;痕量仪与常量仪
&lt;/h2&gt;&lt;p&gt;那按照上面的思路，分析仪就可以通过电路的调整来实现量程的扩大了，不是吗？那为什么现实中很多分析仪并没有这么做。为什么大量程小量程不能用一台机器“通吃”？&lt;/p&gt;
&lt;p&gt;这么做，&lt;strong&gt;电路的瓶颈确实被打破了，但物理和化学的瓶颈还在&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;死敌一光学饱和效应--堵车了&#34;&gt;死敌一：光学饱和效应 —— 堵车了
&lt;/h3&gt;&lt;p&gt;这是紫外荧光法（$\text{SO}_2$）和化学发光法（$\text{NO}_x$）无法测量高浓度的最主要原因。&lt;/p&gt;
&lt;p&gt;场景类比：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;低浓度（正常）： 广场上站着 10 个人（$\text{SO}_2$）。我用一束光照过去，每个人都能被照到，每个人都发光。光强 $\propto$ 人数。线性很好。&lt;/li&gt;
&lt;li&gt;超高浓度（扩大量程后）： 广场上密密麻麻挤了 10,000 个人。
&lt;ul&gt;
&lt;li&gt;问题来了： 我手电筒的光，只能照亮最前面那几排人。&lt;/li&gt;
&lt;li&gt;后面的人： &lt;strong&gt;被前面的人挡住了（阴影区），根本没受到激发，不发光&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;发出的光： 甚至发出来的荧光，在飞向 PMT 的过程中，又被旁边没发光的人给“吸收”了（自吸收）。
结果（非线性）：即使电路能读数，但你会发现：浓度 1000 ppm 时读数是 1V；浓度 5000 ppm 时读数可能只有 1.2V。曲线趴下了。 这时候算法再怎么拟合也救不回来。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;死敌二探测器的生理极限--亮瞎眼&#34;&gt;死敌二：探测器的生理极限 —— “亮瞎眼”
&lt;/h3&gt;&lt;p&gt;即使我们假设气体没有自吸收，发出了巨大的光，PMT（光电倍增管）也受不了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMT 的原理： 一个光子进来，变成 100 万个电子出去。&lt;/li&gt;
&lt;li&gt;高浓度下： 进来的光子太多了。
&lt;ul&gt;
&lt;li&gt;电流限制： PMT 内部的倍增极（Dynode）电流是有上限的。电子云太密集，空间电荷效应会排斥后续的电子。&lt;/li&gt;
&lt;li&gt;不可逆损伤： 如果你强行用痕量仪去测高浓度（比如锅炉爆表），巨大的阳极电流会把 PMT 的最后一级“烧坏”，导致灵敏度永久下降。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;电路能调增益，但救不了探测器的命。 就像你能把照片亮度调低，但不能让你的视网膜盯着太阳看。&lt;/p&gt;
&lt;h3 id=&#34;死敌三系统的记忆效应--洗不干净&#34;&gt;死敌三：系统的“记忆效应” —— “洗不干净”
&lt;/h3&gt;&lt;p&gt;这是机械和气路设计的痛。&lt;/p&gt;
&lt;p&gt;痕量分析仪（比如测 ppb 级的）为了追求灵敏度，其管路、反应室材料虽然也是特氟龙或不锈钢，但只要接触过一次高浓度气体（比如 1% 的 $\text{SO}_2$）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;吸附： 高浓度的气体会深深“钻”进管路表面的微孔里。&lt;/li&gt;
&lt;li&gt;清洗： 当你切回测量低浓度（ppb）时，那些钻进去的气体开始慢慢释放。&lt;/li&gt;
&lt;li&gt;后果： 你的背景噪声（本底）会变得极高。原本能测 1 ppb，现在因为管路脏了，起步就是 50 ppb。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;结论：测过一次高浓度，这台“痕量仪”就废了，可能需要吹扫几天几夜才能恢复“视力”。&lt;/p&gt;
&lt;h3 id=&#34;工程师的作弊手段如果非要测怎么办&#34;&gt;工程师的“作弊”手段：如果非要测，怎么办？
&lt;/h3&gt;&lt;h4 id=&#34;1-物理衰减器-physical-attenuator--光圈&#34;&gt;1. 物理衰减器 (Physical Attenuator) / 光圈
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原理： 既然光太强会“亮瞎眼”，那我就戴墨镜。&lt;/li&gt;
&lt;li&gt;做法： 在 PMT 前面加一个带小孔的金属片（光阑）或者中性密度滤光片。&lt;/li&gt;
&lt;li&gt;代价： 牺牲了低浓度的检出限（看不清微量了），但把量程上限扩大了 100 倍。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-双光路--双气室-dual-bench&#34;&gt;2. 双光路 / 双气室 (Dual Bench)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原理： 既然不能通吃，那我就装两套系统。&lt;/li&gt;
&lt;li&gt;结构：
&lt;ul&gt;
&lt;li&gt;长气室： 光程长，灵敏度高，用来测低浓度。&lt;/li&gt;
&lt;li&gt;短气室： 光程极短（比如只有 1mm），专门测高浓度（避免光学饱和）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;切换： 很多 NDIR 分析仪里，你会看到一个切光轮上同时有长短两个气室，CPU 自动判断：浓度高了就读短的，浓度低了就读长的。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-稀释采样-dilution&#34;&gt;3. 稀释采样 (Dilution)
&lt;/h4&gt;&lt;p&gt;这就回到了我们最开始聊的。既然仪器测不了高浓度，那我就在进气口把它稀释 100 倍再送进去。这是最彻底的解决办法。&lt;/p&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;p&gt;在纯信号处理领域，通过可变增益链确实可以非常“简单”的扩大量程 (比如数字万用表，靠切电阻就能从 mV 测到 kV），但在分析仪器领域，我们要处理的是物质和光：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;光会饱和（非线性）。&lt;/li&gt;
&lt;li&gt;物质会吸附（污染）。&lt;/li&gt;
&lt;li&gt;器件会损坏（PMT 过载）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以，分析仪厂家才会把产品严格分为 “环境级（Ambient / Trace, ppb）” 和 “污染源级（Source / Emission, ppm）。这不仅仅是软件设置的不同，而是光路长度、气室体积、管路材质、甚至探测器选型的&lt;strong&gt;全方位物理差异&lt;/strong&gt;。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>快与稳的悖论</title>
        <link>https://teaize.github.io/p/%E5%BF%AB%E4%B8%8E%E7%A8%B3%E7%9A%84%E6%82%96%E8%AE%BA/</link>
        <pubDate>Thu, 11 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%BF%AB%E4%B8%8E%E7%A8%B3%E7%9A%84%E6%82%96%E8%AE%BA/</guid>
        <description>&lt;p&gt;现在，我们要解决两个更让现场工程师抓狂的问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“&lt;strong&gt;快与稳的悖论&lt;/strong&gt;”： 想要读数稳，反应就慢；想要反应快，读数就乱跳。怎么兼得？&lt;/li&gt;
&lt;li&gt;“&lt;strong&gt;幽灵漂移&lt;/strong&gt;”： 明明采用了切光轮/脉冲灯，为什么过了一周零点还是歪了？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这里涉及到两个非常经典的信号处理策略：自适应数字滤波 和 自动调零。&lt;/p&gt;
&lt;h3 id=&#34;第一关自适应滤波--智能减震器&#34;&gt;第一关：自适应滤波 —— “智能减震器”
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;工程师的困境：T90 vs. 噪声&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;T90 (响应时间)： 环保局要求，当烟气浓度突变时，你的仪表要在几十秒内反应过来。&lt;/li&gt;
&lt;li&gt;噪声 (Noise)： 信号里总是有白噪声在跳动。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;常规解法（滑动平均 Moving Average）：CPU 像一个收银员，手里拿着一个计算器：“我不看现在的瞬时值，我看过去 10 秒的平均值。”$$\text{显示值} = \frac{V_1 + V_2 + … + V_{10}}{10}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;问题来了：
&lt;ul&gt;
&lt;li&gt;如果你平均 100 个 数据（重滤波）：读数稳如老狗，但是反应迟钝。烟气都超标一分钟了，你还在慢慢爬坡。&lt;/li&gt;
&lt;li&gt;如果你只平均 5 个 数据（轻滤波）：反应极快，但读数像心电图一样乱跳。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-高端解法自适应滤波器-smart-filter&#34;&gt;2. 高端解法：自适应滤波器 (Smart Filter)
&lt;/h3&gt;&lt;p&gt;聪明的算法不会死板地用固定的平均时间，它会“看人下菜碟”。它会实时计算“当前的变化率” (Delta)。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景 A：平稳工况
&lt;ul&gt;
&lt;li&gt;监测： 现在的测量值 $V_{now}$ 和上一秒的值 $V_{last}$ 差值很小（比如变化 &amp;lt; 1%）。&lt;/li&gt;
&lt;li&gt;判断： “现在锅炉运行很稳，这点波动肯定是噪声。”&lt;/li&gt;
&lt;li&gt;动作： &lt;strong&gt;加大滤波力度！&lt;/strong&gt; 把过去 60 秒的数据拿来平均。&lt;/li&gt;
&lt;li&gt;效果： 屏幕上的线条平滑得像直线。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;场景 B：突发工况（如喷氨、起炉）
&lt;ul&gt;
&lt;li&gt;监测： 突然， $V_{now}$ 比 $V_{last}$ 激增了 20%！&lt;/li&gt;
&lt;li&gt;判断： “这不是噪声！这是真的浓度突变！出大事了！”&lt;/li&gt;
&lt;li&gt;动作： &lt;strong&gt;瞬间扔掉滤波器！&lt;/strong&gt; 甚至直接显示瞬时值，或者把平均时间缩短到 1 秒。&lt;/li&gt;
&lt;li&gt;效果： 读数直线飙升，瞬间跟上工况变化。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就是为什么你在看仪表时，平时它很稳，但一旦给标气，它“噌”地一下就上去了。不是它反应本来就那么快，是算法帮你“换挡”了。&lt;/p&gt;
&lt;h3 id=&#34;第二关自动调零-auto-zero--给仪表清零&#34;&gt;第二关：自动调零 (Auto-Zero) —— 给仪表“清零”
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;为什么还需要调零？&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;你可能会问：“我们不是用了切光轮/脉冲灯了吗？不是已经把温漂减掉了吗？”很遗憾，减得不彻底。切光轮只能扣除探测器和电路的漂移。但它&lt;strong&gt;扣除不了光路本身的物理变化&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例子： 如果测量室的窗片（Window）慢慢蒙上了一层极其均匀的薄雾（油气），或者镜片慢慢变黄了。&lt;/li&gt;
&lt;li&gt;后果： $I_{meas}$ 会慢慢变小。仪表会以为是有气体在吸收光，导致读数正漂。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种几小时甚至几天的极慢速漂移，切光轮（几十 Hz）是无能为力的。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;解决方案：电磁阀的“偷梁换柱”&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在痕量分析仪（特别是测 CO 或 UVF SO2）里，你会听到每隔几小时，机柜里就“咔哒”一声响。这是 Auto-Zero Solenoid Valve (自动调零电磁阀) 在动作。&lt;/p&gt;
&lt;p&gt;算法逻辑：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;测量模式 ：
&lt;ul&gt;
&lt;li&gt;阀门让样气进入气室。&lt;/li&gt;
&lt;li&gt;读数 = 样气信号 + 脏背景。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;调零模式 （比如每 4 小时一次）：
&lt;ul&gt;
&lt;li&gt;CPU 启动电磁阀，切断样气。&lt;/li&gt;
&lt;li&gt;让样气通过一个内部的 Scrubber (吸附剂/洗涤器)，把 $\text{SO}_2$ 或是 CO 过滤干净，变成零气。&lt;/li&gt;
&lt;li&gt;此时气室里只有“脏背景”。&lt;/li&gt;
&lt;li&gt;CPU 记录： “哦，原来现在就算没有气，也有 0.5V 的电压啊。记下来，这是新的零点偏置 (Zero Offset)。”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;恢复测量：
&lt;ul&gt;
&lt;li&gt;切回样气。&lt;/li&gt;
&lt;li&gt;$$\text{最终读数} = \text{当前测量值} - \text{刚才记下的 0.5V}$$
这就是为什么高端仪表可以无人值守运行好几个月，零点依然不飘。因为它自己会“每天洗几次澡”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第三关温度系数--电阻的热胀冷缩&#34;&gt;第三关：温度系数 —— 电阻的“热胀冷缩”
&lt;/h3&gt;&lt;p&gt;这是硬件电路设计中最隐蔽的“精度杀手”。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;那个 1G$\Omega$ 的大电阻&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;还记得我们用来做 I/V 转换的那个 1G$\Omega$ (10 亿欧姆) 反馈电阻吗？$$V = I \times R$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;理想情况： 电阻永远是 1,000,000,000 $\Omega$。&lt;/li&gt;
&lt;li&gt;现实情况： 所有电阻都有 温度系数 (TCR, Temperature Coefficient of Resistance)。
&lt;ul&gt;
&lt;li&gt;普通电阻的 TCR 可能是 100 ppm/°C。&lt;/li&gt;
&lt;li&gt;这意味着：温度每变 1°C，电阻值就变万分之一。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;灾难推演&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;早晚温差 20°C。&lt;/li&gt;
&lt;li&gt;电阻值变化：$20 \times 100\text{ppm} = 2000\text{ppm} = 0.2%$。&lt;/li&gt;
&lt;li&gt;后果： 你的测量结果会凭空产生 0.2% 的误差。对于痕量分析来说，0.2% 的满量程误差可能就是几十 ppb，直接导致数据超标。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;解决方案：&lt;strong&gt;恒温舱&lt;/strong&gt; (The Oven)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这也是为什么 CEMS 分析仪的核心光具座通常都要包裹厚厚的保温棉，并且要加热到 &lt;strong&gt;45°C 或 50°C&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;目的： 不是为了让气体舒服，而是为了“烤电阻”和“烤探测器”**。&lt;/li&gt;
&lt;li&gt;逻辑： 既然电阻随温度变，那我就死死地&lt;strong&gt;把温度锁在 45°C&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;硬件细节： 你会发现前置放大板通常直接贴在发热的光学底板上，或者有一个专门的铝盒罩着它。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;p&gt;信号处理不仅仅是公式，&lt;strong&gt;它是对物理世界缺陷的补救&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;问题&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;物理缺陷&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;信号处理补救&lt;/strong&gt; (补丁)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;读数乱跳&lt;/td&gt;
          &lt;td&gt;瞬时噪声大&lt;/td&gt;
          &lt;td&gt;滑动平均 (Moving Average)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;反应太慢&lt;/td&gt;
          &lt;td&gt;滤波导致滞后&lt;/td&gt;
          &lt;td&gt;自适应滤波 (Adaptive Filter)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;长期漂移&lt;/td&gt;
          &lt;td&gt;镜片脏/光路变&lt;/td&gt;
          &lt;td&gt;自动调零 (Auto-Zero Valve)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;量程不够&lt;/td&gt;
          &lt;td&gt;ADC 位数有限&lt;/td&gt;
          &lt;td&gt;自动增益 (Auto-Ranging)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;昼夜温差&lt;/td&gt;
          &lt;td&gt;电阻阻值变化&lt;/td&gt;
          &lt;td&gt;恒温控制 (Oven Control)&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;现在的分析仪，其实就是 &lt;strong&gt;20% 的物理/化学原理 + 80% 的信号处理“补丁”&lt;/strong&gt;。你看懂了这些补丁，你就看懂了这台仪器的灵魂。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>氧气的测量</title>
        <link>https://teaize.github.io/p/%E6%B0%A7%E6%B0%94%E7%9A%84%E6%B5%8B%E9%87%8F/</link>
        <pubDate>Thu, 11 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%B0%A7%E6%B0%94%E7%9A%84%E6%B5%8B%E9%87%8F/</guid>
        <description>&lt;p&gt;本篇继 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E7%B4%AB%E5%A4%96%E8%8D%A7%E5%85%89%E6%B3%95/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;紫外荧光法&lt;/a&gt;&lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E5%8C%96%E5%AD%A6%E5%8F%91%E5%85%89%E6%B3%95/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;化学发光法&lt;/a&gt; 之后。&lt;/p&gt;
&lt;p&gt;今天，我们学习 CEMS 系统中地位最高、却最容易被轻视的“修正之王” —— 氧气的测量。
为什么说它地位最高？因为环保局看的数据是“&lt;strong&gt;折算浓度&lt;/strong&gt;”。公式是这样的：$$\text{折算浓度} = \text{实测浓度} \times \frac{21 - \text{基准氧}}{21 - \text{实测氧}}$$
也就是说，如果 $\text{O}_2$ 测不准（比如把 6% 测成了 5%），你的 $\text{SO}_2$ 和 $\text{NO}_x$ 数据会瞬间产生巨大的误差。&lt;/p&gt;
&lt;h2 id=&#34;第一部分顺磁法--氧气是磁铁吗&#34;&gt;第一部分：顺磁法 —— 氧气是“磁铁”吗？
&lt;/h2&gt;&lt;p&gt;我们通常认为气体是没有磁性的，但&lt;strong&gt;氧气是个异类&lt;/strong&gt;。 &lt;strong&gt;氧气分子 ($\text{O}_2$) 具有很强的顺磁性&lt;/strong&gt; 。简单说，如果有一块强力磁铁，氧气会被吸过去！而氮气、二氧化碳这些大多数气体是抗磁性的（会被磁铁排斥）。&lt;/p&gt;
&lt;p&gt;利用这个物理特性，工程师设计了两种极为精巧的机械结构来测量氧气&lt;/p&gt;
&lt;h3 id=&#34;1-哑铃式-气体天平&#34;&gt;1. 哑铃式—— “气体天平”
&lt;/h3&gt;&lt;p&gt;哑铃式氧分析仪基于磁力机械式顺磁原理工作。 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;顺磁性&lt;/strong&gt;：氧气是少数具有强顺磁性的气体之一，会被磁场吸引；而大多数其他气体（如氮气、二氧化碳）是抗磁性的。&lt;/li&gt;
&lt;li&gt;测量装置：仪器的核心是一个由细金属丝（通常是铂金丝）水平悬挂的玻璃哑铃，哑铃内部充有氮气，并被放置在一个不均匀的磁场中。&lt;/li&gt;
&lt;li&gt;偏转与平衡：当含有氧气的待测气体流入测量室时，氧分子被吸引到磁场较强的区域，从而对玻璃哑铃产生一个扭转力，使其偏转。偏转角度与氧气浓度成正比。&lt;/li&gt;
&lt;li&gt;信号检测与反馈：一个光源、反射镜和光接收元件系统会检测哑铃的偏转。一个反馈回路会施加电流产生一个反向力矩，使哑铃回到初始平衡位置。&lt;strong&gt;保持平衡所需的电流大小与氧气浓度成正比&lt;/strong&gt;，从而实现氧气含量的精确测量。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;主要优势: 由于是基于纯物理效应（顺磁性）的直接测量，传感器本身没有消耗，理论上寿命无限长，维护成本低。&lt;/p&gt;
&lt;h3 id=&#34;2-磁风式-没有运动部件的风扇&#34;&gt;2. 磁风式—— “没有运动部件的风扇”
&lt;/h3&gt;&lt;p&gt;如果你嫌哑铃太娇气，还有一种更硬核的设计。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原理： &lt;strong&gt;居里定律告诉我们，氧气的磁化率与温度成反比&lt;/strong&gt;（越热，磁性越弱）。&lt;/li&gt;
&lt;li&gt;结构： 设计一个环形气室，一边加磁场，同时加热电阻丝。&lt;/li&gt;
&lt;li&gt;过程：
&lt;ol&gt;
&lt;li&gt;冷的氧气被磁铁强力吸过来。&lt;/li&gt;
&lt;li&gt;氧气接触到电阻丝，变热了。&lt;/li&gt;
&lt;li&gt;变热后的氧气磁性减弱，被后面源源不断吸过来的冷氧气推走。&lt;/li&gt;
&lt;li&gt;结果： 形成了一股持续的“磁风” 。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;测量： 这股风吹过热敏电阻，带走热量。通过测量热敏电阻的冷却程度，算出氧气浓度。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;第二部分氧化锆法--浓差电池&#34;&gt;第二部分：氧化锆法 —— 浓差电池
&lt;/h2&gt;&lt;p&gt;如果说顺磁法是物理机械的艺术，氧化锆法就是&lt;strong&gt;电化学&lt;/strong&gt;的魔法。它主要用于原位测量（直接插在烟道里）或高温采样。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;核心元件： 氧化锆 ($ZrO_2$) 陶瓷管。
&lt;ul&gt;
&lt;li&gt;这种陶瓷在高温（&amp;gt;600°C）下，变成了一种固体电解质。&lt;strong&gt;它允许氧离子 ($O^{2-}$) 在里面自由穿梭，但电子过不去&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;结构：
陶瓷管像一个试管。
&lt;ul&gt;
&lt;li&gt;内侧： 通参比空气（氧浓度 20.95%）。&lt;/li&gt;
&lt;li&gt;外侧： 接触烟气（氧浓度低，比如 3%）。&lt;/li&gt;
&lt;li&gt;两侧都涂上多孔铂电极。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;原理（能斯特方程 Nernst Equation）：
&lt;ul&gt;
&lt;li&gt;因为内外氧浓度不同，高浓度一侧的氧分子抢着穿过陶瓷壁跑到低浓度一侧去。&lt;/li&gt;
&lt;li&gt;这就形成了一个“氧气浓差电池”。&lt;/li&gt;
&lt;li&gt;$$E = \frac{RT}{4F} \ln\left(\frac{P_{ref}}{P_{meas}}\right)$$
&lt;ul&gt;
&lt;li&gt;E： 产生的电压（毫伏级）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$P_{ref}$：&lt;/strong&gt; 21%（空气）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;$P_{meas}$：&lt;/strong&gt; 待测氧浓度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;特点：
&lt;ul&gt;
&lt;li&gt;反直觉： &lt;strong&gt;氧气越少（贫氧），电压反而越高&lt;/strong&gt;！&lt;/li&gt;
&lt;li&gt;对数关系： &lt;strong&gt;在低浓度（比如 1ppm）时灵敏度极高&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;第三部分专家经验--著名的湿干之争&#34;&gt;第三部分：专家经验 —— 著名的“湿干之争”
&lt;/h2&gt;&lt;p&gt;这是现场最容易掉进去的坑，尤其是当你混合使用不同原理的仪表时。&lt;/p&gt;
&lt;p&gt;问题场景：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A 表（氧化锆）： 测出来氧量 4.0%。&lt;/li&gt;
&lt;li&gt;B 表（顺磁）： 测出来氧量 4.5%。&lt;/li&gt;
&lt;li&gt;谁是准的？&lt;strong&gt;可能都准！&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;逻辑陷阱：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;氧化锆法：
&lt;ul&gt;
&lt;li&gt;通常需要在高温下工作。如果它是原位式（In-situ）探头，它直接插在烟道里测。&lt;/li&gt;
&lt;li&gt;烟道里有大量的水蒸气（比如 10%）。&lt;strong&gt;氧化锆测的是包含水蒸气的湿基氧&lt;/strong&gt; (Wet Basis)。&lt;/li&gt;
&lt;li&gt;$$\text{湿基氧} = \frac{V_{O2}}{V_{dry} + V_{water}}$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;顺磁法：
&lt;ul&gt;
&lt;li&gt;通常安装在 CEMS 机柜里。样气在进入机柜前，必须经过冷凝器除水（为了保护精密机械哑铃）。所以水蒸气被去掉了，体积变小了，氧气的占比自然就“浓缩”了。&lt;/li&gt;
&lt;li&gt;它测的是干基氧 。$$\text{干基氧} = \frac{V_{O2}}{V_{dry}}$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;换算公式：$$\text{干基氧} = \frac{\text{湿基氧}}{1 - \text{湿度%}}$$&lt;/li&gt;
&lt;li&gt;假设湿度是 10%：$$4.5% (\text{干}) \approx \frac{4.0% (\text{湿})}{1 - 0.1}$$
&lt;ul&gt;
&lt;li&gt;$4.0 / 0.9 = 4.44%$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结论：如果不搞清楚你的表是测干的还是湿的，你的折算浓度可能会差出 10%~15% 的误差，这在环保验收时是致命的。&lt;/p&gt;
&lt;h2 id=&#34;关于发现和发明的辩证关系&#34;&gt;关于发现和发明的辩证关系
&lt;/h2&gt;&lt;p&gt;如果氧气恰好没有顺磁性，或者氧化锆恰好不能传导氧离子，那么今天这两种主流的分析仪是不是就不会存在？&lt;/p&gt;
&lt;h3 id=&#34;所谓的巧合其实是物质的指纹&#34;&gt;所谓的“巧合”，其实是物质的“指纹”
&lt;/h3&gt;&lt;p&gt;我们在工程上测量任何一种东西，本质上都不是在测量它本身，&lt;strong&gt;而是在测量它的“特异性指纹”&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;氧气 (O2)： 它的指纹刚好是“顺磁性”。&lt;/li&gt;
&lt;li&gt;二氧化硫 (SO2)： 它的指纹刚好是“被紫外光激发发荧光”。&lt;/li&gt;
&lt;li&gt;一氧化碳 (CO)： 它的指纹刚好是“吸收 4.6 微米的红外光”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这并不是因为运气好才发现了这些指纹，而是因为科学家把物质的所有属性（光、电、磁、热、力）都测了一遍，然后“按图索骥”。&lt;/p&gt;
&lt;p&gt;历史上是先有了法拉第早在 1845 年就发现了氧气的顺磁性（当时只觉得是个有趣的物理现象），过了几十年，当工业界需要测量氧气时，工程师们翻开物理书：“嘿，大家都不导磁，就这货导磁，咱们就用这个特性来抓它！”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;所以，不是为了做传感器才发现了特性，而是特性一直都在，等着我们去把它们变成工具。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;实际上，如果没有这些“巧合”，我们也一样还有其他方法可以测氧气，这里暂时就不展开了。&lt;/p&gt;
&lt;h3 id=&#34;为什么是顺磁和氧化锆胜出了&#34;&gt;为什么是顺磁和氧化锆胜出了？
&lt;/h3&gt;&lt;p&gt;这两种特性之所以统治了 CEMS 领域，是因为它们满足了工业现场最挑剔的三个要求：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;特异性强&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;顺磁法：几乎只有氧气顺磁，别的气体不干扰。（抗干扰）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;耐操（Robustness）：
&lt;ul&gt;
&lt;li&gt;氧化锆：哪怕在 800°C 的肮脏烟道里，它是一块陶瓷，烧不坏、腐蚀不动。（耐高温、耐腐蚀）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;简单：
&lt;ul&gt;
&lt;li&gt;哑铃就是个力学结构，氧化锆就是个管子。结构越简单，故障率越低。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;并不是因为巧合才有了氧传感器。而是因为氧气恰好有这两个“又独特、又好用”的物理特性，导致利用这两个特性的传感器成本最低、寿命最长，从而淘汰了其他竞争对手，让你产生了“只有它们”的错觉。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;所有的工程技术，本质上都是在把大自然微观层面的“BUG”（特异性），通过放大器，变成了宏观层面的“FEATURE”（功能）&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;这也是为什么我们要学习物理——&lt;strong&gt;为了在上帝留下的代码里，找到那些可以被利用的“后门”。&lt;/strong&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>化学发光法</title>
        <link>https://teaize.github.io/p/%E5%8C%96%E5%AD%A6%E5%8F%91%E5%85%89%E6%B3%95/</link>
        <pubDate>Tue, 09 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8C%96%E5%AD%A6%E5%8F%91%E5%85%89%E6%B3%95/</guid>
        <description>&lt;h3 id=&#34;nox-化学发光法-chemiluminescence&#34;&gt;NOx 化学发光法 (Chemiluminescence)
&lt;/h3&gt;&lt;p&gt;这是测量 $\text{NO}_x$ 的标准方法，利用 $\text{NO}$ 与臭氧反应发光。原理：
$$
\text{NO} + \text{O}_3 \rightarrow \text{NO}_2^* + \text{O}_2
$$
$$
\text{NO}_2^* \rightarrow \text{NO}_2 + h\nu (600-3000nm)
$$
在稀释法中存在的问题：&lt;/p&gt;
&lt;h3 id=&#34;1no2-转化效率&#34;&gt;1、NO2 转化效率
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;问题： 化学发光法只能测 $\text{NO}$。烟气中的 $\text{NO}_2$ 必须先通过转换炉（通常是钼炉或不锈钢炉）还原成 $\text{NO}$。$$\text{NO}_2 \xrightarrow{\text{Converter}} \text{NO}$$&lt;/li&gt;
&lt;li&gt;稀释法的挑战： 虽然稀释降低了中毒风险，但转换炉有寿命。如果转化率低于 95%，$\text{NO}_x$ 总量测量就会&lt;strong&gt;偏低&lt;/strong&gt;。特别是在氨逃逸较高的情况下，可能会生成铵盐堵塞转换器。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;场景假设化学发光法-textno_x-的偷梁换柱&#34;&gt;场景假设：化学发光法 $\text{NO}_x$ 的“偷梁换柱”
&lt;/h4&gt;&lt;p&gt;背景知识： 化学发光法其实是个“独眼龙”，它只能直接看见 $\text{NO}$。 对于烟气里的 $\text{NO}_2$，它必须先通过一个高温炉（转换器），把 $\text{NO}_2$ 变成 $\text{NO}$ 才能测。$$\text{NO}_x = \text{NO} (\text{直接测}) + \text{NO}_2 (\text{转化后测})$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;校准时刻（偷懒的代价）：
&lt;ul&gt;
&lt;li&gt;绝大多数现场，运维只会买一瓶 **$\text{NO}$ 标气。&lt;/li&gt;
&lt;li&gt;通入 100 ppm 的 $\text{NO}$。&lt;/li&gt;
&lt;li&gt;气体流过旁路（不经过转换炉） -&amp;gt; 测得 100。&lt;/li&gt;
&lt;li&gt;气体流过转换炉（经过转换炉） -&amp;gt; $\text{NO}$ 还是 $\text{NO}$，测得 100。&lt;/li&gt;
&lt;li&gt;结果： 校准通过。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;故障时刻：
&lt;ul&gt;
&lt;li&gt;转换炉用久了，或者因为前面说的稀释探头加热不好，导致一点点冷凝水或铵盐进去了，&lt;strong&gt;转换炉中毒失效了&lt;/strong&gt;。效率降到了 0%。&lt;/li&gt;
&lt;li&gt;此时你再用 $\text{NO}$ 标气校准。因为 $\text{NO}$ 不需要转换，所以&lt;strong&gt;校准依然是合格的！&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;测量时刻（致命漏测）：
&lt;ul&gt;
&lt;li&gt;工况烟气来了。假设里面有 80 ppm $\text{NO}$ 和 20 ppm $\text{NO}_2$（总 $\text{NO}_x$ = 100）。&lt;/li&gt;
&lt;li&gt;分析仪读数： 只能测到那 80 ppm 的 $\text{NO}$。那 20 ppm 的 $\text{NO}_2$ 因为转换炉坏了，没变成 $\text{NO}$，直接被分析仪无视了。&lt;/li&gt;
&lt;li&gt;显示结果： 80 ppm。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;欺骗结果：
&lt;ul&gt;
&lt;li&gt;你少测了 20% 的排放量。&lt;/li&gt;
&lt;li&gt;而且，因为你也只用 $\text{NO}$ 标气校验，你根本发现不了转换炉已经挂了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如何破解这种骗局呢：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;必须使用 $\text{NO}_2$ 标气：只有通入 $\text{NO}_2$ 标气，看能不能读出数来，才能验证转换炉的好坏。&lt;/li&gt;
&lt;li&gt;观察 $\text{NO}_x$ 与 $\text{NO}$ 的差值：在正常燃烧工况下，$\text{NO}_2$ 通常占 $\text{NO}_x$ 的 5% 左右。如果你发现你的表上，$\text{NO}$ 的数值永远等于 $\text{NO}_x$ 的数值（即 $\text{NO}_2$ 读数长期为 0），那很可能是转换炉出问题了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2h2o-和-co2-的猝灭效应&#34;&gt;2、H2O 和 CO2 的猝灭效应
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;痛点： 与紫外荧光法类似，$\text{H}_2\text{O}$ 和 $\text{CO}_2$ 也是化学发光法的强猝灭剂。&lt;/li&gt;
&lt;li&gt;现象： 如果稀释空气干燥度不够（露点高），水分进入反应室，会显著降低发光强度，导致 $\text{NO}_x$ 读数&lt;strong&gt;偏低&lt;/strong&gt;。这就是为什么稀释风的露点通常要求在 -40°C 以下。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3臭氧发生器的稳定性&#34;&gt;3、臭氧发生器的稳定性
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;系统隐患： 分析仪内部自带高压臭氧发生器。如果&lt;strong&gt;供电电压不稳&lt;/strong&gt;或发生器老化，臭氧浓度下降，反应就不完全（不再是富氧反应），导致测量线性变差。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;案例-1nox-转换炉的好心办坏事&#34;&gt;案例 1：NOx 转换炉的“好心办坏事”
&lt;/h2&gt;&lt;p&gt;背景知识： 前面我们说过，化学发光法为了测 $\text{NO}_2$，需要用转换炉（钼炉或不锈钢炉）把 $\text{NO}_2$ 还原成 $\text{NO}$。我们希望这个炉子只干这一件事。$$\text{NO}_2 \xrightarrow{\text{高温 + 催化剂}} \text{NO}$$&lt;/p&gt;
&lt;h3 id=&#34;逻辑陷阱场景重现&#34;&gt;逻辑陷阱（场景重现）：
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工况背景：为了降低 $\text{NO}_x$ 排放，电厂都会喷氨水（SCR/SNCR 脱硝）。如果不小心喷多了，烟气里就会有逃逸的氨气 ($\text{NH}_3$)。&lt;/li&gt;
&lt;li&gt;分析仪的“过度热情”：常用的钼炉（Moly Converter）工作温度在 315°C~350°C 左右。在这个温度下，钼炉不仅能把 $\text{NO}_2$ 还原成 $\text{NO}$，它也能把 $\text{NH}_3$ 氧化成 $\text{NO}$。$$\text{NH}_3 + \text{O}_2 \xrightarrow{\text{Mo, 350°C}} \text{NO} + \text{H}_2\text{O}$$&lt;/li&gt;
&lt;li&gt;现场的“死亡螺旋”：
&lt;ul&gt;
&lt;li&gt;状态： 此时 $\text{NO}_x$ 实际上有点高。&lt;/li&gt;
&lt;li&gt;操作： 运行人员加大喷氨量。&lt;/li&gt;
&lt;li&gt;物理结果： 实际 $\text{NO}_x$ 降下来了，但逃逸的 $\text{NH}_3$ 变多了。&lt;/li&gt;
&lt;li&gt;CEMS 读数： 逃逸的 $\text{NH}_3$ 进入转换炉，变成了 $\text{NO}$。分析仪把这部分 $\text{NH}_3$ 当作 $\text{NO}_x$ 计入了读数。读数不仅没降，反而可能升高了！&lt;/li&gt;
&lt;li&gt;误判： 运行人员一看屏幕：“卧槽，喷了氨怎么 $\text{NO}_x$ 还没降？肯定是喷得不够！再加大喷氨！”&lt;/li&gt;
&lt;li&gt;结局： 氨水耗尽，设备腐蚀，CEMS 数据依然超标。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;那么如何排查这个问题&#34;&gt;那么如何排查这个问题
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;准备工作： 找一个氨逃逸比较大的工况（或者让运行稍微多喷点氨）。&lt;/li&gt;
&lt;li&gt;正常测量： 记录此时的 $\text{NO}_x$ 读数（例如 50 ppm）。&lt;/li&gt;
&lt;li&gt;切断转换炉：
&lt;ul&gt;
&lt;li&gt;如果是高温炉，把温度设定降到室温（或者直接拔掉加热棒电源，让它自然冷却）。&lt;/li&gt;
&lt;li&gt;或者切换气路，让样气绕过转换炉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;观察读数变化：
&lt;ul&gt;
&lt;li&gt;理论上： 绕过转换炉后，$\text{NO}_2$ 不被转化了，读数应该下降（只剩 $\text{NO}$）。&lt;/li&gt;
&lt;li&gt;如果读数下降得非常剧烈（例如从 50 降到 10）： 说明之前那 40 ppm 的差值里，包含着大量的 $\text{NO}_2$ 或者 被转化了的 $\text{NH}_3$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;氨气过滤器：
&lt;ul&gt;
&lt;li&gt;在取样管路中临时加装一个&lt;strong&gt;磷酸浸渍的过滤器&lt;/strong&gt;（专门吸附氨气，不吸附 $\text{NO}_x$）。&lt;/li&gt;
&lt;li&gt;如果加了过滤器后，$\text{NO}_x$ 读数瞬间下降了，那就实锤了：你的转换炉在把氨气当成 $\text{NO}_x$ 测！&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>锁相放大器</title>
        <link>https://teaize.github.io/p/%E9%94%81%E7%9B%B8%E6%94%BE%E5%A4%A7%E5%99%A8/</link>
        <pubDate>Tue, 09 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E9%94%81%E7%9B%B8%E6%94%BE%E5%A4%A7%E5%99%A8/</guid>
        <description>&lt;p&gt;继 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E7%B2%89%E7%BA%A2%E5%99%AA%E5%A3%B0/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;粉红噪声&lt;/a&gt; 后篇，这篇学习&lt;strong&gt;锁相放大器&lt;/strong&gt; (Lock-in Amplifier)，或者更具体一点，叫相敏检波器 (PSD, Phase Sensitive Detector)&lt;/p&gt;
&lt;p&gt;为了明白这个概念，举一个推秋千的例子。想象你是一个“相敏检波器 (PSD)”，你的任务是让秋千荡得越高越好（提取出信号）&lt;/p&gt;
&lt;h3 id=&#34;场景设定&#34;&gt;场景设定
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;信号 (Input Signal)： 坐在秋千上的孩子。
&lt;ul&gt;
&lt;li&gt;他有规律地&lt;strong&gt;荡来荡去&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;向前荡&lt;/strong&gt;代表正电压 (+V)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;向后荡&lt;/strong&gt;代表负电压 (-V)。&lt;/li&gt;
&lt;li&gt;这就是我们一直在说的交流信号 (AC)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;噪声 (Noise)： 一群捣乱的风。
&lt;ul&gt;
&lt;li&gt;风一会儿从前吹，一会儿从后吹，完全没规律。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;参考信号 (Reference Signal)： 你的大脑指令（推还是拉）。
&lt;ul&gt;
&lt;li&gt;你的大脑里有一个节拍器，频率和秋千完全同步。&lt;/li&gt;
&lt;li&gt;指令 +1（正指令）： 用力推。&lt;/li&gt;
&lt;li&gt;指令 -1（负指令）： 用力拉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;核心机制同步乘法&#34;&gt;核心机制：同步乘法
&lt;/h3&gt;&lt;p&gt;所谓的“乘法”，在这里就是你的动作（&lt;strong&gt;参考信号&lt;/strong&gt;）与秋千运动（&lt;strong&gt;输入信号&lt;/strong&gt;）的相互作用。我们来看三种情况：&lt;/p&gt;
&lt;h4 id=&#34;情况一完美的信号提取同步乘法生效&#34;&gt;情况一：完美的信号提取（同步乘法生效）
&lt;/h4&gt;&lt;p&gt;你想让信号变大（提取信号），你必须配合秋千的节奏。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一半周期（秋千向前荡 +）：
&lt;ul&gt;
&lt;li&gt;输入信号： 正 (+)（孩子向前冲）。&lt;/li&gt;
&lt;li&gt;你的动作： 你的节拍器告诉你，现在是前半拍，指令是 推 (+)。&lt;/li&gt;
&lt;li&gt;乘法运算： $(+) \times (+) = \mathbf{+}$ (获得正向的能量，秋千变高)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第二半周期（秋千向后荡 -）：
&lt;ul&gt;
&lt;li&gt;输入信号： 负 (-)（孩子荡回来了）。&lt;/li&gt;
&lt;li&gt;你的动作： 你的节拍器告诉你，现在是后半拍，指令是 拉 (-)。
&lt;ul&gt;
&lt;li&gt;注意：这里是关键！你不是推，你是顺势往回拉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;乘法运算： $(-) \times (-) = \mathbf{+}$ (负负得正！你顺着他回来的劲用力拉，秋千依然获得正向能量，变得更高)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结果： 无论秋千是向前还是向后，因为你的动作（参考信号）总是和它&lt;strong&gt;同步反转&lt;/strong&gt;，你做的每一次功都是&lt;strong&gt;正功&lt;/strong&gt;。经过一段时间（积分），秋千荡得非常高（输出一个稳定的直流高电压）。&lt;/p&gt;
&lt;h4 id=&#34;情况二噪声的过滤随机信号被抵消&#34;&gt;情况二：噪声的过滤（随机信号被抵消）
&lt;/h4&gt;&lt;p&gt;现在看看那阵乱吹的风（噪声）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一回合：
&lt;ul&gt;
&lt;li&gt;风向前吹 (+)。&lt;/li&gt;
&lt;li&gt;你的动作是 推 (+)。&lt;/li&gt;
&lt;li&gt;结果：$(+) \times (+) = +$ (风帮你省力了，产生正能量)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第二回合：
&lt;ul&gt;
&lt;li&gt;风依然向前吹 (+)（因为风是随机的，没必要跟着你换方向）。&lt;/li&gt;
&lt;li&gt;你的动作变成了 拉 (-)。&lt;/li&gt;
&lt;li&gt;结果：$(+) \times (-) = \mathbf{-}$ (你和风对着干，抵消了能量)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结果： 因为风（噪声）没有你的节拍器，它一会儿帮你，一会儿阻碍你。当你做 1000 次动作后，这些帮助和阻碍互相抵消，平均下来等于 &lt;strong&gt;0&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;这就是“只选想要的频率，过滤掉所有其他频率”的物理本质。&lt;/p&gt;
&lt;h4 id=&#34;情况三相位的诅咒不同步会怎样&#34;&gt;情况三：相位的诅咒（不同步会怎样？）
&lt;/h4&gt;&lt;p&gt;这也解释了为什么要有 “相位设置”。假设你的节拍器虽然频率对了（也是 1 秒一次），但是慢了半拍（相位差 90 度）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;秋千已经荡到最高点准备往回落了（速度为 0），你才刚开始用力推。&lt;/li&gt;
&lt;li&gt;秋千已经荡到最低点速度最快了，你却停手了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这时候，你做功的效率就会大打折扣，甚至有时候会起反作用（阻碍秋千）。 在仪表上，这就表现为：&lt;strong&gt;虽然有信号，但读数很小，甚至接近于 0。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;所以，工程师调校仪器，就是为了让你的“推拉节奏”和“秋千的摆动”&lt;strong&gt;严丝合缝（同频同相）&lt;/strong&gt;，从而获得最大的推力（最大的输出信号）。&lt;/p&gt;
&lt;h2 id=&#34;实际案例红外气体分析仪&#34;&gt;实际案例：红外气体分析仪
&lt;/h2&gt;&lt;p&gt;CEMS 机柜中的 CO 和 CO2 分析仪，它们通常用的是 &lt;strong&gt;非分散红外法 (NDIR)&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;在老式或者经典的 NDIR 分析仪里，有一个核心的机械部件叫 &lt;strong&gt;切光轮&lt;/strong&gt;（实际上，在电子调制技术（像脉冲氙灯那样直接开关灯）还不成熟，或者光源无法快速开关的年代，工程师们用纯机械的方式解决信号处理问题的杰作）。&lt;/p&gt;
&lt;h3 id=&#34;一-为什么要切物理约束&#34;&gt;一、 为什么要“切”？（物理约束）
&lt;/h3&gt;&lt;p&gt;在讲结构之前，我们要先解决一个核心矛盾。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;红外光源的惰性： CEMS 用的红外光源通常是&lt;strong&gt;黑体辐射源&lt;/strong&gt;（比如陶瓷加热棒、MEMS 热源）。 想象一个烧红的电炉丝，你能让它每秒钟开关 10 次吗？ 不能。 你断电了，它还要几秒钟才冷却。它的&lt;strong&gt;热惯性&lt;/strong&gt;（Thermal Inertia）太大了，没法像氙灯那样做“电子脉冲”。它只能常亮。&lt;/li&gt;
&lt;li&gt;探测器的“怪癖”： NDIR 最常用的探测器是热释电探测器 或 气动探测器 。 它们有一个致命的特性：**只对“变化”敏感。
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;如果光强恒定（哪怕很强），探测器输出电荷会逐渐中和，输出信号归零&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;只有光强发生跳变时，它才会输出一个尖峰电压。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;矛盾出现了： 光源只能常亮（DC），但探测器只吃跳变信号（AC） —&amp;gt; “既然灯关不掉，那我就用手挡住它！快点挡，快点松开！” —— &lt;strong&gt;这就是切光轮。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;二切光轮结构拆解&#34;&gt;二、切光轮结构拆解
&lt;/h3&gt;&lt;p&gt;一个典型的 NDIR 切光组件包含三个核心部分：&lt;/p&gt;
&lt;h4 id=&#34;1-切光轮本体&#34;&gt;1. 切光轮本体
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;材质： 通常是轻质铝合金或不锈钢，表面发黑处理（防止反光）。&lt;/li&gt;
&lt;li&gt;形状： 像电风扇叶片。最简单的是半圆盘（50% 透光，50% 遮光）。&lt;/li&gt;
&lt;li&gt;转速： 通常由一个无刷直流电机带动，转速极其稳定。频率通常设定在 10 Hz ~ 60 Hz 之间。
&lt;ul&gt;
&lt;li&gt;太慢了：避不开粉红噪声。&lt;/li&gt;
&lt;li&gt;太快了：红外探测器反应慢，来不及响应。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-光路截断&#34;&gt;2. 光路截断
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;切光轮安装在 光源 和 气室/探测器 之间。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态 A（透光）：&lt;/strong&gt; 叶片转走，红外光穿过样气，打在探测器上。
&lt;ul&gt;
&lt;li&gt;信号 = 气体吸收后的光强 + 背景杂散光 + 探测器热漂移。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态 B（遮光）：&lt;/strong&gt; 叶片挡住光路。探测器处于“黑暗”中。
&lt;ul&gt;
&lt;li&gt;信号 = &lt;strong&gt;切光轮自身的辐射&lt;/strong&gt; + 背景杂散光 + 探测器热漂移。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-同步信号发生器&#34;&gt;3. 同步信号发生器
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;在切光轮的边缘，通常会开一个小孔，或者切光轮本身就是齿轮状的。&lt;/li&gt;
&lt;li&gt;旁边装有一个 U 型光电开关。&lt;/li&gt;
&lt;li&gt;轮子每转一圈，光电开关就输出一个方波脉冲。&lt;/li&gt;
&lt;li&gt;作用： 这个方波直接发给 CPU，告诉 CPU：“现在是亮的时候！”或者“现在是暗的时候！”。这就是&lt;strong&gt;参考信号 (Reference Signal)&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;三-信号处理流程把直流变成交流&#34;&gt;三、 信号处理流程（把“直流”变成“交流”）
&lt;/h3&gt;&lt;p&gt;让我们看看探测器实际输出了什么波形，以及 PSD 是怎么处理的。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;原始光强 (Optical Input)：是一个方波。有光 -&amp;gt; 无光 -&amp;gt; 有光 -&amp;gt; 无光。&lt;/li&gt;
&lt;li&gt;探测器输出 (Detector Output)：由于探测器有热容（反应慢），它输出的不是完美的方波，而是像鲨鱼鳍一样的三角波/锯齿波。
&lt;ul&gt;
&lt;li&gt;光来了，电压慢慢爬升。&lt;/li&gt;
&lt;li&gt;光断了，电压慢慢下降。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;锁相放大 (PSD Processing)：CPU 拿着光电开关给的“参考信号”，对探测器的“锯齿波”进行同步解调。$$\text{最终值} = (\text{爬升的峰值}) - (\text{下降的谷值})$$&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;核心优势：假设探测器因为环境温度升高，产生了一个巨大的直流漂移（比如电压整体抬升了 5V）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;爬升峰值变成了 5.1V。&lt;/li&gt;
&lt;li&gt;下降谷值变成了 5.0V。&lt;/li&gt;
&lt;li&gt;相减： $5.1 - 5.0 = \mathbf{0.1V}$。&lt;/li&gt;
&lt;li&gt;结果： 那个 5V 的温漂被机械切光轮完美干掉了！&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;进阶玩法gfc-气体相关滤波&#34;&gt;“进阶玩法”：GFC (气体相关滤波)
&lt;/h3&gt;&lt;p&gt;既然轮子都要转，“为什么只做挡光和透光？能不能干点更高级的？”于是诞生了 &lt;strong&gt;气体相关滤波轮 (Gas Filter Correlation, GFC)&lt;/strong&gt;。这是 NDIR 抗干扰的终极武器。&lt;/p&gt;
&lt;p&gt;切光轮上不再是空的，而是装了两个充满气体的透明小盒子：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;测量室 (Measure Cell)：&lt;/strong&gt; 里面充的是&lt;strong&gt;纯氮气 ($N_2$)&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;作用：透光。红外光穿过去，被烟道里的样气吸收。这是“有信号”的状态。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;参比室 (Reference Cell)：&lt;/strong&gt; 里面充的是&lt;strong&gt;极高浓度的待测气体&lt;/strong&gt;（比如 100% 的 CO）。
&lt;ul&gt;
&lt;li&gt;作用：“光学饱和”。&lt;/li&gt;
&lt;li&gt;因为浓度太高，CO 对应的吸收波长的光被这个小盒子全部吃光了。&lt;/li&gt;
&lt;li&gt;此时打到探测器上的光，已经不包含任何 CO 的信息了（因为那个频段已经黑了）。这相当于一个“特异性极强的物理挡板”**。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;工作逻辑：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;轮子转到氮气格： 测得 $I_{meas}$（包含样气吸收信息）。&lt;/li&gt;
&lt;li&gt;轮子转到 CO 格： 测得 $I_{ref}$（样气里的 CO 吸无可吸，因为光已经被小盒子吸干了，所以这个信号不受样气浓度影响，只受粉尘、光源衰减影响）。&lt;/li&gt;
&lt;li&gt;计算： 通过对比这两个信号，不仅扣除了背景，还&lt;strong&gt;完美扣除了粉尘干扰&lt;/strong&gt;和&lt;strong&gt;窗口污染&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;疑问解答&#34;&gt;疑问解答
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;如何理解这句话：通过对比这两个信号，不仅扣除了背景，还完美扣除了粉尘干扰和窗口污染&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;为了解开这个结，我们需要引入一个核心物理概念：“光谱指纹”与“饱和”。&lt;/p&gt;
&lt;h3 id=&#34;第一步理解前提--光不是铁板一块&#34;&gt;第一步：理解前提 —— 光不是“铁板一块”
&lt;/h3&gt;&lt;p&gt;红外光不是单纯的一束白光，它像一条包含各种颜色糖果的传送带（光谱）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;糖果 A（特定波长）：&lt;/strong&gt; 只有 CO 喜欢吃（比如 4.6 微米波段）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;糖果 B（其他波长）：&lt;/strong&gt; CO 根本不碰，只有灰尘（墨镜）会挡住它们。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比尔定律的基础： 我们通过数“糖果 A 少了多少”，来算出 CO 有多少。&lt;/p&gt;
&lt;h3 id=&#34;第二步解密吸无可吸&#34;&gt;第二步：解密“吸无可吸”
&lt;/h3&gt;&lt;p&gt;现在的场景是：光（传送带）先经过烟道（样气），再经过切光轮上的小盒子。&lt;/p&gt;
&lt;h4 id=&#34;场景-1轮子转到测量室纯氮气-n_2&#34;&gt;场景 1：轮子转到“测量室”（纯氮气 $N_2$）
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;设定： $N_2$ 啥都不吃。&lt;/li&gt;
&lt;li&gt;过程：
&lt;ol&gt;
&lt;li&gt;传送带上有 100 颗“糖果 A”。&lt;/li&gt;
&lt;li&gt;经过烟道（样气），样气里的 CO 比较少，偷吃了 20 颗。&lt;/li&gt;
&lt;li&gt;经过 $N_2$ 盒子，没变化。&lt;/li&gt;
&lt;li&gt;到达探测器： 收到 80 颗。&lt;/li&gt;
&lt;li&gt;结论： 探测器发现少了 20 颗，算出样气里有 CO。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;场景-2轮子转到参比室高浓度-co&#34;&gt;场景 2：轮子转到“参比室”（高浓度 CO）
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;设定： 这个小盒子里塞满了高压 CO，它是超级大胃王，能把所有的“糖果 A”&lt;strong&gt;全部吃光&lt;/strong&gt;，一颗不剩。&lt;/li&gt;
&lt;li&gt;过程：
&lt;ol&gt;
&lt;li&gt;传送带上有 100 颗“糖果 A”。&lt;/li&gt;
&lt;li&gt;阶段一（经过烟道）： 样气里的 CO 还是偷吃了那 20 颗。剩下 80 颗。&lt;/li&gt;
&lt;li&gt;阶段二（经过 CO 盒子）： 剩下的 80 颗糖果 A 进入盒子。因为盒子里的 CO 浓度极高（饱和），它会把进来的所有“糖果 A”统统吃掉。&lt;/li&gt;
&lt;li&gt;到达探测器： 收到 0 颗 “糖果 A”。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;现在我们来做一个思想实验：如果样气里的 CO 浓度变高了，它在阶段一偷吃了 50 颗（而不是 20 颗），结果会怎样？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;阶段一： 100 颗 -&amp;gt; 剩下 50 颗。&lt;/li&gt;
&lt;li&gt;阶段二（CO 盒子）： 盒子里的超级大胃王把剩下的 50 颗统统吃掉。&lt;/li&gt;
&lt;li&gt;到达探测器： 依然收到 0 颗 “糖果 A”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结论：无论样气里的 CO 偷吃了多少（是 0 颗、20 颗还是 50 颗），只要后面跟着一个“通吃”的参比室，最终到达探测器的“糖果 A”永远是 0。这就是为什么我说：&lt;strong&gt;$I_{ref}$ 信号不受样气中 CO 浓度的影响。&lt;/strong&gt; 对于 CO 敏感的那个波段来说，光已经被彻底“拉黑”了，谁也改变不了结局。&lt;/p&gt;
&lt;h3 id=&#34;第三步那-i_ref-到底是测什么的&#34;&gt;第三步：那 $I_{ref}$ 到底是测什么的？
&lt;/h3&gt;&lt;p&gt;你可能会问：“既然糖果 A 都是 0 了，那探测器读到的信号 $I_{ref}$ 是哪里来的？”别忘了传送带上还有 “糖果 B”（其他波长的光）！&lt;/p&gt;
&lt;p&gt;CO 不吃糖果 B，所以糖果 B 会穿过样气，也会穿过 CO 盒子，最终打在探测器上。&lt;/p&gt;
&lt;p&gt;这时候，灰尘（粉尘）的作用就显现了：灰尘是不挑食的，它像一块半透明的布，既挡糖果 A，也挡糖果 B。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果有灰尘： 糖果 B 的数量会减少（比如从 1000 减到 900）。&lt;/li&gt;
&lt;li&gt;如果有光源老化： 糖果 B 的初始数量就会减少。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以，&lt;strong&gt;$I_{ref}$ 测量的是“除了 CO 吸收波段以外的背景光强”&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;第四步最终的算术魔法&#34;&gt;第四步：最终的算术魔法
&lt;/h3&gt;&lt;p&gt;分析仪 CPU 做的是这样一个对比运算：$$浓度 \propto \frac{I_{meas} - I_{ref}}{I_{ref}}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$I_{meas}$ (测量信号)：背景光 + 剩余 CO 波段的敏感光&lt;/li&gt;
&lt;li&gt;$I_{ref}$ (参比信号)： 仅包含（背景光）。注：因为 CO 波段已经黑了，剩下的全是背景。&lt;/li&gt;
&lt;li&gt;$I_{meas} - I_{ref}$ (差值)： 这代表 “样气到底吃掉了多少光”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251209232443.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251209232443.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;


通过这个公式：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;抵消干扰：&lt;/strong&gt; 灰尘是非选择性吸收，无论光是“背景光成分”还是“CO 敏感光成分”，灰尘都一视同仁，统统挡掉一半。通过比值之后，抵消掉这个干扰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;提取浓度：&lt;/strong&gt; 分子和分母的&lt;strong&gt;差值&lt;/strong&gt;，正好就是“样气 CO 吃掉的那部分光”。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;测量室（$N_2$）：&lt;/strong&gt; 像一块透明玻璃。样气里的 CO 吃多少，我就能看到光少多少。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;参比室（高浓度 CO）：&lt;/strong&gt; 像一块&lt;strong&gt;特定颜色的黑布&lt;/strong&gt;（针对 CO 波段）。它强制把 CO 的波段“清零”。
&lt;ul&gt;
&lt;li&gt;既然已经强制清零了，样气之前吃没吃过这口光，对结果（0）没有影响。&lt;/li&gt;
&lt;li&gt;它剩下的光，反映的是“光路脏不脏、灯泡亮不亮”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>PMT金属屏蔽层</title>
        <link>https://teaize.github.io/p/pmt%E9%87%91%E5%B1%9E%E5%B1%8F%E8%94%BD%E5%B1%82/</link>
        <pubDate>Mon, 08 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/pmt%E9%87%91%E5%B1%9E%E5%B1%8F%E8%94%BD%E5%B1%82/</guid>
        <description>&lt;p&gt;这个金属层通常不只是为了“遮光”，它最核心、最容易被忽视的作用是抗磁干扰，其次才是静电屏蔽。&lt;/p&gt;
&lt;h3 id=&#34;核心防御抗磁干扰&#34;&gt;核心防御：抗磁干扰
&lt;/h3&gt;&lt;p&gt;这是 PMT 屏蔽层最独特的功能。这层金属通常不是普通的铁或铝，而是坡莫合金（Permalloy / Mu-metal），&lt;strong&gt;一种具有超高导磁率的材料。&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理原理： PMT 的工作原理是光电子在真空中飞行，撞击一系列倍增极（Dynodes）。 电子带电且在运动，根据洛伦兹力公式：$$\vec{F} = q(\vec{v} \times \vec{B})$$
&lt;ul&gt;
&lt;li&gt;只要周围存在磁场（$\vec{B}$），电子的飞行轨迹就会发生偏转。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;后果： 如果电子因为磁场偏转，没有打中下一级倍增极，而是打到了管壁上，增益（Gain）就会大幅下降。
&lt;ul&gt;
&lt;li&gt;外部干扰源： 变压器、散热风扇的电机、电磁阀线圈，甚至是地磁场。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;屏蔽层的作用：&lt;/strong&gt; 坡莫合金就像磁场的“高速公路”。外部磁力线会优先沿着屏蔽层（磁阻最小路径）绕过 PMT 内部空间，从而&lt;strong&gt;在 PMT 内部营造一个“无磁环境”&lt;/strong&gt;，确保电子走直线。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;常规防御静电屏蔽&#34;&gt;常规防御：静电屏蔽
&lt;/h3&gt;&lt;p&gt;PMT 通常工作在负高压状态（例如 -800V 到 -1000V），其输出信号却是极其微弱的电流（纳安 nA 级别），需要被放大电路（前置放大器）读取。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;干扰源： 分析仪内部到处都是噪声源：开关电源的高频噪声、紫外灯点火时的脉冲干扰、加热继电器的吸合噪声。&lt;/li&gt;
&lt;li&gt;屏蔽层的作用： 这就如同&lt;strong&gt;法拉第笼（Faraday Cage）&lt;/strong&gt;。将金属屏蔽层接地（通常是模拟地 AGND），可以将外部的电场耦合屏蔽在外面，防止杂散电容将高频噪声引入信号链路。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;屏蔽层的作用： 这就如同&lt;strong&gt;法拉第笼（Faraday Cage）&lt;/strong&gt;。将金属屏蔽层接地（通常是模拟地 AGND），可以将外部的电场耦合屏蔽在外面，防止杂散电容将高频噪声引入信号链路。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;关于这一点的疑问：&lt;/p&gt;
&lt;h3 id=&#34;1法拉第笼--电场的结界&#34;&gt;1、法拉第笼 —— “电场的结界”
&lt;/h3&gt;&lt;h4 id=&#34;1如何理解法拉第笼&#34;&gt;1、如何理解法拉第笼
&lt;/h4&gt;&lt;p&gt;想象一个由金属网或金属板做成的全封闭盒子。 &lt;strong&gt;物理原理：&lt;/strong&gt; 金属是导电的，意味着里面有大量的自由电子。 当外部有一个电场（比如旁边有个带高压电的变压器，或者空中的无线电波）打到这个盒子上时，金属盒子表面的自由电子会瞬间移动。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;电子移动的结果是：在盒子表面产生一个反向电场，刚好和外部电场抵消。&lt;/li&gt;
&lt;li&gt;最终效果： &lt;strong&gt;盒子内部的合电场为 0&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2通俗类比&#34;&gt;2、通俗类比
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;避雷针/汽车： 下雷雨时，躲在汽车里是最安全的。即便闪电击中汽车，电流只会沿着金属外壳流到地下，车里的人毫发无损。汽车就是一个法拉第笼。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3为什么-pmt-需要它&#34;&gt;3、为什么 PMT 需要它
&lt;/h4&gt;&lt;p&gt;PMT 内部处理的是纳安（nA）甚至更小级别的电流信号。 如果没有这个金属壳（法拉第笼）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;旁边 220V 的电源线 就像一个“发射塔”，不断向周围辐射 50Hz 的电场。&lt;/li&gt;
&lt;li&gt;PMT 内部的信号线就像“天线”，会接收到这个 50Hz 干扰。&lt;/li&gt;
&lt;li&gt;结果：你的测量数据里会叠加一个讨厌的正弦波噪声。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;加上屏蔽层后： 干扰被金属壳挡在外面，内部“风平浪静”&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2接地--电荷的下水道与海平面&#34;&gt;2、接地 —— “电荷的下水道”与“海平面”
&lt;/h3&gt;&lt;p&gt;“地”不是真正的泥土，它是一个&lt;strong&gt;电位参考点&lt;/strong&gt;。&lt;/p&gt;
&lt;h4 id=&#34;为什么要接地&#34;&gt;为什么要接地？
&lt;/h4&gt;&lt;p&gt;金属屏蔽层（法拉第笼）挡住了外部的干扰电场，这意味着屏蔽层&lt;strong&gt;表面&lt;/strong&gt;感应了很多电荷（噪音）。 如果这个屏蔽层悬空（不接任何东西）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;它上面积累的电荷无处可去。&lt;/li&gt;
&lt;li&gt;当电荷积累多了，屏蔽层本身就变成了一个带电体（噪声源），反过来通过电容耦合干扰里面的 PMT。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;接地的作用：&lt;/strong&gt; 就像给浴缸接了一根排水管。 把屏蔽层接到“地”，就是给这些感应到的噪声电荷提供一条低阻抗的路径，让它们迅速流走，保证屏蔽层本身始终保持 0V 电位（干净）。&lt;/p&gt;
&lt;h3 id=&#34;3模拟地-agnd-vs-数字地-dgnd--纯净水与污水&#34;&gt;3、模拟地 (AGND) vs. 数字地 (DGND) —— “纯净水”与“污水”
&lt;/h3&gt;&lt;p&gt;为什么要特意强调接“模拟地 (AGND)”&lt;/p&gt;
&lt;p&gt;在一块复杂的 CEMS 电路板上，虽然所有的“地”最终都会连在一起，但在局部，它们是分开管理的。&lt;/p&gt;
&lt;h4 id=&#34;1数字地-dgnd--建筑工地&#34;&gt;1、数字地 (DGND) —— “建筑工地”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;谁在用： CPU、单片机、继电器、电机驱动、风扇。&lt;/li&gt;
&lt;li&gt;特征： &lt;strong&gt;电流变化剧烈&lt;/strong&gt;。CPU 的时钟是以 MHz 频率开关的，电机启动会有大电流冲击。&lt;/li&gt;
&lt;li&gt;水质： &lt;strong&gt;这里的“地”虽然名义上是 0V，但实际上因为电流波动大，上面充满了各种尖峰毛刺&lt;/strong&gt;。就像建筑工地的污水管，水流湍急且脏。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2模拟地-agnd--精密实验室&#34;&gt;2、模拟地 (AGND) —— “精密实验室”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;谁在用： 传感器、运放、ADC（模数转换）、PMT 前置放大器。&lt;/li&gt;
&lt;li&gt;特征： 处理的是微弱信号，要求极其安静的背景。&lt;/li&gt;
&lt;li&gt;水质： 这里的“地”要求非常平稳，是一潭死水。就像实验室的纯净水管。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3为什么-pmt-屏蔽层不能接-dgnd&#34;&gt;3、为什么 PMT 屏蔽层不能接 DGND
&lt;/h4&gt;&lt;p&gt;如果把 PMT 的屏蔽层接到了“数字地”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;本来你是想让屏蔽层把噪声排走。&lt;/li&gt;
&lt;li&gt;结果因为数字地太脏，电机转动产生的噪声反而顺着地线&lt;strong&gt;倒灌&lt;/strong&gt;到了屏蔽层上。&lt;/li&gt;
&lt;li&gt;屏蔽层变成了发射天线，把数字噪声辐射给了 PMT。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;正确做法： 必须把屏蔽层接到最干净的 &lt;strong&gt;AGND&lt;/strong&gt;。确保它是整个系统中最宁静的参考平面。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>地环路</title>
        <link>https://teaize.github.io/p/%E5%9C%B0%E7%8E%AF%E8%B7%AF/</link>
        <pubDate>Mon, 08 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%9C%B0%E7%8E%AF%E8%B7%AF/</guid>
        <description>&lt;p&gt;继 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/pmt%E9%87%91%E5%B1%9E%E5%B1%8F%E8%94%BD%E5%B1%82/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PMT金属屏蔽层&lt;/a&gt; 的引申。这篇学习法拉第笼的“死敌”——地环路。&lt;/p&gt;
&lt;h3 id=&#34;屏蔽电缆&#34;&gt;屏蔽电缆
&lt;/h3&gt;&lt;p&gt;除了前面所说 PMT 屏蔽层之外，其实很多传输信号的电缆线也是法拉第笼，更像是一条柔软的法拉第笼。例如探头上传感器连接到机柜的信号线，用的是同轴电缆或者屏蔽电缆&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251208193433.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251208193433.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;芯线 (Inner Conductor)： 传输信号。&lt;/li&gt;
&lt;li&gt;编织屏蔽层 (Outer Conductor)： 就是那个法拉第笼。&lt;/li&gt;
&lt;li&gt;外皮 (Jacket)： 绝缘保护。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;只要这个编织层接地，外部的电磁干扰就会像水流过雨衣一样，沿着屏蔽层流走，保护里面的芯线信号。听起来很完美，对吧？但是……&lt;/p&gt;
&lt;h3 id=&#34;噩梦的开始地环路&#34;&gt;噩梦的开始：地环路
&lt;/h3&gt;&lt;p&gt;场景假设： 你有一根信号线，连接着 探头 (在烟囱上) 和 分析仪 (在分析小屋里)。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;探头端： 探头装在几十米高的钢制烟囱上。烟囱是巨大的金属导体，也是巨大的天线（接收雷电、静电）。烟囱的“地”通常很“脏”，电压可能比大地高出几伏特。&lt;/li&gt;
&lt;li&gt;机柜端： 分析仪小屋有专门的接地桩，这里的“地”很干净（0V）。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;错误操作： 如果是毫无经验的接线工，他会非常负责任地：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在探头端，把屏蔽层接在烟囱的金属壳上（接地）。&lt;/li&gt;
&lt;li&gt;在机柜端，把屏蔽层接在机柜的汇流排上（接地）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结果：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;两点接地！&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;物理现象： 烟囱的地电位（比如 5V）和机柜的地电位（0V）之间有&lt;strong&gt;电势差&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;后果：&lt;/strong&gt; 你的信号线屏蔽层，现在变成了一根&lt;strong&gt;导线&lt;/strong&gt;，连接了两个巨大的电源。强大的&lt;strong&gt;环路电流&lt;/strong&gt;（可能高达几安培！）开始在你的屏蔽层里疯狂流动。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就叫“地环路”。你的“法拉第笼”现在不仅不防干扰，反而自己变成了一个&lt;strong&gt;发热的、带强电流的电磁铁&lt;/strong&gt;。这股电流通过互感，直接把巨大的 50Hz 嗡嗡声感应到里面的芯线上。&lt;/p&gt;
&lt;p&gt;体现到数据上： 你的 CEMS 读数会在屏幕上剧烈跳动，或者叠加一个巨大的波浪线。&lt;/p&gt;
&lt;h3 id=&#34;解决方案单点接地-single-point-grounding&#34;&gt;解决方案：单点接地 (Single-Point Grounding)
&lt;/h3&gt;&lt;p&gt;如何在硬件安装上解决这个问题？答案是：&lt;strong&gt;物理隔断&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;黄金法则：&lt;strong&gt;对于低频信号屏蔽，屏蔽层只能在一端接地&lt;/strong&gt;！&lt;/p&gt;
&lt;p&gt;通常的做法是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;机柜端接地： 在分析仪这一侧，把屏蔽层剥开，牢牢接在干净的仪表地上（AGND）。&lt;/li&gt;
&lt;li&gt;探头端悬空（浮空）： 在探头那一侧，屏蔽层剪断，&lt;strong&gt;做绝缘处理，绝不能碰到烟囱金属壳&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这样，屏蔽层依然是法拉第笼（电位是 0V），但回路被切断了，地电流流不过去。&lt;/p&gt;
&lt;p&gt;为了防止探头壳体通过螺栓意外连接到烟囱的大地，我们在机械安装时，经常会用到&lt;strong&gt;绝缘法兰垫片&lt;/strong&gt;和&lt;strong&gt;绝缘螺栓套管&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;这也是为什么在看某些进口探头的安装图纸时，会发现它们要求在安装法兰中间加一层厚厚的四氟垫片，这不仅仅是为了密封，更是为了电气隔离，切断地环路。&lt;/p&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;p&gt;现在回头看 CEMS 系统，是不是感觉不一样了:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMT 屏蔽罩： 小法拉第笼，保护心脏。&lt;/li&gt;
&lt;li&gt;同轴电缆： 长法拉第笼，保护血管。&lt;/li&gt;
&lt;li&gt;单点接地： 防止笼子变成通电线圈。&lt;/li&gt;
&lt;li&gt;绝缘法兰： 机械层面的“断路器”。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>调制与解调</title>
        <link>https://teaize.github.io/p/%E8%B0%83%E5%88%B6%E4%B8%8E%E8%A7%A3%E8%B0%83/</link>
        <pubDate>Mon, 08 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%B0%83%E5%88%B6%E4%B8%8E%E8%A7%A3%E8%B0%83/</guid>
        <description>&lt;p&gt;继 [[PMT金属屏蔽层]]、[[地环路]] 的引申。这篇学习调制与解调。在硬件上，这通常对应着一个关键部件：脉冲氙灯（或者闪烁氙灯）或者切光轮。&lt;/p&gt;
&lt;h3 id=&#34;问题的根源直流漂移&#34;&gt;问题的根源：直流漂移
&lt;/h3&gt;&lt;p&gt;场景假设：你把 PMT 的屏蔽做好了，地线也接好了。&lt;/p&gt;
&lt;p&gt;但是，PMT 这个器件本身有个物理特性：暗电流。即使在完全没有光的情况下，它也会输出一点点电流（比如 0.1 nA）。更糟糕的是，这个“0.1 nA”不是固定的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;温度升高 1 度，它可能变成 0.12 nA。&lt;/li&gt;
&lt;li&gt;器件老化一点，它可能变成 0.15 nA。&lt;/li&gt;
&lt;li&gt;供电电压波动一点，它又变了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就是“漂移”。如果你用&lt;strong&gt;连续恒定&lt;/strong&gt;的紫外灯（Continuous Lamp）去照射 $\text{SO}_2$：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMT 读到的总电流 = （$\text{SO}_2$ 荧光电流）+ （PMT 暗电流）+ （杂散光背景）。&lt;/li&gt;
&lt;li&gt;困境： 当总电流变大了，你根本不知道是 $\text{SO}_2$ 浓度高了，还是 PMT 变热了，或者是灯泡老化亮度变了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就好比：&lt;strong&gt;你在一个黄昏的房间里读书，你不知道书本变暗是因为天黑了（背景变了），还是你的视力下降了（器件漂移）。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;硬件的破局让光闪起来&#34;&gt;硬件的破局：让光“闪”起来
&lt;/h3&gt;&lt;p&gt;为了解决这个问题（漂移），工程师引入了“调制”。在紫外荧光法中，我们通常使用的是脉冲氙灯（比如 Thermo 43i 就用这个技术）。它的逻辑极其简单粗暴，但极其有效：“别一直开灯！闪着开！”&lt;/p&gt;
&lt;h4 id=&#34;1-工作时序&#34;&gt;1. 工作时序
&lt;/h4&gt;&lt;p&gt;分析仪的 CPU 会控制灯以固定的频率闪烁（例如 10Hz，每秒闪 10 次）。这就把时间切成了两半：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;状态 A（灯亮时刻）：
&lt;ul&gt;
&lt;li&gt;PMT 测到的值 = &lt;strong&gt;信号 ($\text{SO}_2$) + 噪声 (暗电流 + 背景)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;状态 B（灯灭时刻）：
&lt;ul&gt;
&lt;li&gt;PMT 测到的值 = &lt;strong&gt;0 + 噪声 (暗电流 + 背景)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-算术魔法&#34;&gt;2. 算术魔法
&lt;/h4&gt;&lt;p&gt;CPU 做一个简单的减法：$$\text{真实信号} = \text{状态 A} - \text{状态 B} = (\text{信号} + \text{噪声}) - (\text{噪声})= \text{信号}$$
也就是说，不管你的 PMT 暗电流怎么漂移（今天 0.1，明天 0.2），也不管背景光怎么变化，只要它们在“灯亮”和“灯灭”的那一瞬间保持不变，它们就会被完美减掉！&lt;/p&gt;
&lt;p&gt;这就是&lt;strong&gt;锁相放大&lt;/strong&gt;的雏形。&lt;/p&gt;
&lt;h3 id=&#34;硬件工程师的噩梦同步与触发&#34;&gt;硬件工程师的“噩梦”：同步与触发
&lt;/h3&gt;&lt;p&gt;虽然原理听起来很软件，但在硬件层面，这带来了一系列极具挑战的机械/电子问题。这也是区分“好仪器”和“烂仪器”的分水岭。&lt;/p&gt;
&lt;h4 id=&#34;1-触发抖动&#34;&gt;1. 触发抖动
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;要求： 既然要做减法，PMT 的采集必须和灯的闪烁&lt;strong&gt;严丝合缝&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;故障： 氙灯的高压触发电路如果有延时，或者不稳定。
&lt;ul&gt;
&lt;li&gt;现象： CPU 以为灯亮了，开始采集“状态 A”，但其实灯还没完全亮到峰值。&lt;/li&gt;
&lt;li&gt;结果： 测到的信号忽高忽低，读数剧烈跳动（噪声大）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;硬件排查： 很多时候是触发板上的电容老化，或者灯泡电极烧蚀导致击穿电压变化，引起了“时间轴错位”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-光强衰减与参考光路&#34;&gt;2. 光强衰减与“参考光路”
&lt;/h4&gt;&lt;p&gt;脉冲灯解决了 PMT 漂移，但&lt;strong&gt;灯泡自己也会老啊&lt;/strong&gt;！氙灯闪了几亿次后，能量会下降。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果不处理： 灯暗了 $\to$ $\text{SO}_2$ 激发的荧光弱了 $\to$ 读数偏低。&lt;/li&gt;
&lt;li&gt;硬件解决方案： 分光镜。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在光路设计中，你会看到一块成 45 度角的石英玻璃。它把紫外光分成两路：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;主路 (90%)：&lt;/strong&gt; 去照样气，产生荧光 $\to$ 给主 PMT 测。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;辅路 (10%)：&lt;/strong&gt; 照向一个小光电二极管。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终算法进化：$$\text{浓度} \propto \frac{\text{主 PMT 信号 (扣除背景后)}}{\text{参考光强信号}}$$&lt;/p&gt;
&lt;h3 id=&#34;从静到动的思维升华&#34;&gt;从“静”到“动”的思维升华
&lt;/h3&gt;&lt;p&gt;这里有一个工程思维模型，值得记在心里：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;“如果是静态测不准的东西，就把它动起来测。”&lt;/strong&gt; (If you can&amp;rsquo;t measure it statically, modulate it.)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;测微弱光：&lt;/strong&gt; 别常亮，让它闪（脉冲/切光轮）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;测微弱气：&lt;/strong&gt; 别一直通样气，让它和零气交替通（自动校零/参比法）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;测微弱力：&lt;/strong&gt; 别用力压，让它振动（原子力显微镜原理）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种&lt;strong&gt;将直流信号 (DC) 搬移到交流频段 (AC)&lt;/strong&gt; 的技术，避开了低频的 1/f 噪声（粉红噪声），是精密测量的基石。&lt;/p&gt;
&lt;p&gt;从&lt;strong&gt;PMT 的屏蔽&lt;/strong&gt;（空间防御），到&lt;strong&gt;地环路的切断&lt;/strong&gt;（路径防御），再到&lt;strong&gt;脉冲调制&lt;/strong&gt;（时间防御），这一整套“海陆空”立体防御体系，是不是让你对这台仪器的设计逻辑有了全新的认识？&lt;/p&gt;
</description>
        </item>
        <item>
        <title>粉红噪声</title>
        <link>https://teaize.github.io/p/%E7%B2%89%E7%BA%A2%E5%99%AA%E5%A3%B0/</link>
        <pubDate>Mon, 08 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%B2%89%E7%BA%A2%E5%99%AA%E5%A3%B0/</guid>
        <description>&lt;p&gt;目的：理解了粉红噪声，可能就能想明白为什么一些高端仪器都要把本来静止的信号“折腾”成动的。&lt;/p&gt;
&lt;h3 id=&#34;什么是粉红噪声-pink-noise--1f-noise&#34;&gt;什么是粉红噪声 (Pink Noise / 1/f Noise)
&lt;/h3&gt;&lt;p&gt;在电子电路和物理世界中，噪声按“频率分布”有着不同的颜色命名&lt;/p&gt;
&lt;h4 id=&#34;1-白噪声-white-noise--沙沙声&#34;&gt;1. 白噪声 (White Noise) —— “沙沙声”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;特征： 能量在所有频率上是一样的。&lt;/li&gt;
&lt;li&gt;物理来源： &lt;strong&gt;热噪声 (Thermal Noise)&lt;/strong&gt;。只要有温度，电子就会无规则乱动。&lt;/li&gt;
&lt;li&gt;听感： 像收音机没台时的“沙沙”声。&lt;/li&gt;
&lt;li&gt;图谱： 一条平的直线。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-粉红噪声-pink-noise--低沉的轰鸣&#34;&gt;2. 粉红噪声 (Pink Noise) —— “低沉的轰鸣”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;特征： 频率越低，能量越大。
&lt;ul&gt;
&lt;li&gt;公式是：$$\text{噪声功率} \propto \frac{1}{f}$$&lt;/li&gt;
&lt;li&gt;这意味着：0.1 Hz 的噪声能量是 10 Hz 的 100 倍！ &lt;strong&gt;当频率趋近于 0（也就是 DC 直流）时，噪声能量趋近于无穷大&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;物理来源： 元件老化、表面缺陷、温度缓慢漂移、半导体晶格缺陷。这些过程都很“慢”，所以集中在低频。&lt;/li&gt;
&lt;li&gt;为什么叫“粉红”？ 在可见光里，红光的频率最低。既然这种噪声低频能量强（偏红），高频能量弱（偏蓝），我们就叫它“粉红噪声”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;更加透彻地理解粉红噪声&#34;&gt;更加透彻地理解粉红噪声
&lt;/h3&gt;&lt;p&gt;想象你在高速公路上开车，试图保持车在车道正中间行驶。&lt;/p&gt;
&lt;h4 id=&#34;白噪声white-noise路面的细碎颠簸&#34;&gt;白噪声（White Noise）：路面的细碎颠簸
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;感觉： 方向盘在你手里会有轻微的、快速的震动。这是因为路面不平、发动机震动造成的。&lt;/li&gt;
&lt;li&gt;特点： 这种震动&lt;strong&gt;频率很快&lt;/strong&gt;，但是&lt;strong&gt;幅度很小&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;影响： 就算你不管它，这震动也不会让你的车翻到沟里去。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;粉红噪声pink-noise车子的跑偏&#34;&gt;粉红噪声（Pink Noise）：车子的“跑偏”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;感觉： 假设你的四轮定位没做好，或者侧面一阵一阵地刮大风。你会发现车子&lt;strong&gt;慢慢地、不知不觉地&lt;/strong&gt;往右边偏。&lt;/li&gt;
&lt;li&gt;特点： 这种变化&lt;strong&gt;动作很慢&lt;/strong&gt;（频率极低，可能几十秒才偏过去），但是&lt;strong&gt;幅度巨大&lt;/strong&gt;（如果不回正，车就撞护栏了）。&lt;/li&gt;
&lt;li&gt;这就是粉红噪声！&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对应到 CEMS 仪表：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;白噪声 = 读数在 100.0, 100.1, 99.9 之间快速跳动。（只要平均一下就没事了）&lt;/li&gt;
&lt;li&gt;粉红噪声 = 读数慢慢地从 100 变成了 105，又慢慢变成了 90。（这就是漂移，你平均它也没用，因为它代表了错误的趋势。）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们最怕的不是读数“突突突”地小跳（白噪声），那个容易滤掉。我们最怕的是读数“不知不觉地跑远了”（粉红噪声/漂移）。&lt;/p&gt;
&lt;h3 id=&#34;为什么要避开它&#34;&gt;为什么要避开它？
&lt;/h3&gt;&lt;p&gt;想象一下噪音频谱图：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;最左边 (0 Hz / DC)： 是一座高耸入云的“噪声大山”（温漂、零漂、老化）。&lt;/li&gt;
&lt;li&gt;右边 (高频 AC)： 是一片平坦的“宁静平原”（只有微弱的热噪声）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你的测量困境：你要测量的 $\text{SO}_2$ 浓度，如果一直通气不动，它就是一个 DC 信号 (0 Hz)。如果你直接测量 DC 信号，就等于把房子建在了噪声大山的悬崖边上。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PMT 稍微热一点，读数就变了。&lt;/li&gt;
&lt;li&gt;电压稍微动一下，读数又变了。&lt;/li&gt;
&lt;li&gt;这些“慢”的噪声会把你微弱的 $\text{SO}_2$ 信号完全淹没。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;核心技术把信号搬到平原去&#34;&gt;核心技术：把信号“搬”到平原去
&lt;/h3&gt;&lt;p&gt;既然左边的“低频沼泽”太吵了，我们就把信号&lt;strong&gt;搬运&lt;/strong&gt;到右边的“高频平原”去测。这就是 &lt;strong&gt;“调制 ”&lt;/strong&gt; 的本质。&lt;/p&gt;
&lt;p&gt;让我们回到 CEMS 的 &lt;strong&gt;脉冲氙灯&lt;/strong&gt; 案例，看看这个“搬运”过程是如何发生的：&lt;/p&gt;
&lt;h4 id=&#34;第一步原始状态-dc&#34;&gt;第一步：原始状态 (DC)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;信号： $\text{SO}_2$ 浓度恒定，信号频率 $f = 0$。&lt;/li&gt;
&lt;li&gt;位置： 处于粉红噪声最强的区域。&lt;/li&gt;
&lt;li&gt;结果： 信号被淹没。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第二步调制-modulation--搬运工&#34;&gt;第二步：调制 (Modulation) —— 搬运工
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;动作： 氙灯以 &lt;strong&gt;10 Hz&lt;/strong&gt; 的频率闪烁。&lt;/li&gt;
&lt;li&gt;物理变化： 原本静止的 $\text{SO}_2$ 荧光信号，被迫变成了一个 &lt;strong&gt;10 Hz 的闪烁信号&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;位置变化： 信号的坐标从 0 Hz &lt;strong&gt;搬移&lt;/strong&gt; 到了 10 Hz 的位置。&lt;/li&gt;
&lt;li&gt;环境变化： 在 10 Hz 这个位置，粉红噪声（1/f）已经衰减了很多，背景比 0 Hz 干净得多！&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;第三步解调-demodulation--提纯&#34;&gt;第三步：解调 (Demodulation) —— 提纯
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;动作： 使用 &lt;strong&gt;锁相放大 (Lock-in)&lt;/strong&gt; 技术（也就是前面说的“灯亮减灯灭”）。&lt;/li&gt;
&lt;li&gt;逻辑： 分析仪只盯着 10 Hz 看。
&lt;ul&gt;
&lt;li&gt;0 Hz 的温漂？我不管，过滤掉。&lt;/li&gt;
&lt;li&gt;50 Hz 的工频干扰？我不管，过滤掉。&lt;/li&gt;
&lt;li&gt;我只提取 10 Hz 那个频段的信号。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;结果： 你在最干净的频段，把信号毫发无损地拿了回来。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;p&gt;“仪表漂移”在数学和信号处理的语言里，就是典型的“粉红噪声”。那为什么好端端的仪器，放着不动，它自己就会“漂移”？为什么这些物理现象会产生“粉红噪声”（慢速、大幅度的波动）？&lt;/p&gt;
&lt;p&gt;漂移主要来自这三个“物理元凶”：&lt;/p&gt;
&lt;h4 id=&#34;元凶一热胀冷缩--仪器的呼吸&#34;&gt;元凶一：热胀冷缩 —— 仪器的“呼吸”
&lt;/h4&gt;&lt;p&gt;这是最主要的漂移来源，尤其是在光学仪器中。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理过程： 分析仪内部有加热盒，外部环境有昼夜温差。 金属的光学底板会随着温度微小变化而膨胀或收缩。&lt;/li&gt;
&lt;li&gt;导致的后果（漂移）：
&lt;ul&gt;
&lt;li&gt;光路微偏： 氙灯发出的光，原本聚焦在中心，因为底板膨胀了 10 微米，光斑稍微偏了一点点。&lt;/li&gt;
&lt;li&gt;滤光片波长漂移： 紫外滤光片的中心波长会随温度轻微移动。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;为什么是粉红噪声？ 温度的变化是极慢的（以分钟或小时为单位）。这种变化在图谱上就是一条缓慢起伏的曲线，这就是典型的低频噪声。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;调制技术的降维打击：&lt;/strong&gt; 氙灯一秒钟闪 10 次。 在这 &lt;strong&gt;0.1 秒&lt;/strong&gt; 的瞬间里，温度根本来不及变，底板也来不及胀。所以调制技术完美忽略了温度漂移。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;元凶二器件老化与疲劳-仪器的衰老&#34;&gt;元凶二：器件老化与疲劳—— 仪器的“衰老”
&lt;/h4&gt;&lt;p&gt;没有任何电子/光学元器件是永恒不变的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;光源（氙灯/紫外灯）：
&lt;ul&gt;
&lt;li&gt;电极烧蚀： 每次放电，电极都会损耗一点点原子，弧光的位置会一点点移动（Arc Wander）。&lt;/li&gt;
&lt;li&gt;光强衰减： 灯泡玻璃壁会因为金属溅射变黑，透光率慢慢下降。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;探测器（PMT）：
&lt;ul&gt;
&lt;li&gt;倍增极疲劳： PMT 里面的倍增极（Dynode）长期受电子轰击，表面涂层会变化，发射电子的能力（增益 Gain）会&lt;strong&gt;缓慢下降&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;为什么是粉红噪声？ 这种衰减不是一瞬间发生的，而是随着几百个小时慢慢滑落的。这是一个&lt;strong&gt;超低频&lt;/strong&gt;的变化趋势。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;同样，在调制的“快变”短时间内，器件的老化与疲劳来不及反应，所以调制技术&lt;/p&gt;
&lt;h4 id=&#34;元凶三半导体特性的随机游走--电子的拥堵&#34;&gt;元凶三：半导体特性的随机游走 —— 电子的“拥堵”
&lt;/h4&gt;&lt;p&gt;这是最玄学的一个，但真实存在于放大器电路中。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理过程： 在半导体（比如运算放大器、电阻）的晶格内部，会有很多&lt;strong&gt;缺陷&lt;/strong&gt;或&lt;strong&gt;杂质&lt;/strong&gt;。 电流流过时，电子会被这些陷阱“卡住”一会，然后再释放出来。&lt;/li&gt;
&lt;li&gt;导致的后果： 这种随机的“卡顿”和“释放”效应，会导致电阻值或放大倍数发生微小的、不规则的波动。&lt;/li&gt;
&lt;li&gt;为什么是粉红噪声？ 物理学家发现，这种“卡顿”效应在慢速尺度上特别明显。它会让零点电压（Zero Offset）像喝醉了酒的人一样，毫无规律地瞎溜达。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;现在不仅知道它叫漂移，还知道了&lt;strong&gt;它的物理本质是“热、光、电的慢速不稳定性”&lt;/strong&gt;。 正是因为这些物理量变太慢了（即频率接近 0），所以我们才不能在 0 Hz 处测量，必须去 10 Hz（高频）处测量。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>二极管的钳位功能</title>
        <link>https://teaize.github.io/p/%E4%BA%8C%E6%9E%81%E7%AE%A1%E7%9A%84%E9%92%B3%E4%BD%8D%E5%8A%9F%E8%83%BD/</link>
        <pubDate>Sun, 07 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BA%8C%E6%9E%81%E7%AE%A1%E7%9A%84%E9%92%B3%E4%BD%8D%E5%8A%9F%E8%83%BD/</guid>
        <description>&lt;p&gt;&lt;strong&gt;二极管导通之后，压降是恒定的&lt;/strong&gt;，利用这一点特性，实现钳位功能。本质上是把电压“&lt;strong&gt;钉&lt;/strong&gt;”在某个安全的范围内，不让它乱跑。想象一个疯狂跳跃的弹簧（电压信号），二极管就是一个坚固的“天花板”或者“地板”，强制让这个弹簧不能跳得比天花板高，或者比地板低。&lt;/p&gt;
&lt;p&gt;下面是一些利用二极管钳位功能的实战场景：&lt;/p&gt;
&lt;h3 id=&#34;保护芯片引脚adc-或-gpio-输入保护&#34;&gt;保护芯片引脚（ADC 或 GPIO 输入保护）
&lt;/h3&gt;&lt;p&gt;这是最常见的应用。芯片（比如单片机或 ADC 芯片）的引脚通常很脆弱，只能承受 -0.3V 到 VCC+0.3V 的电压。如果外部接了长线，可能会感应出高压静电或浪涌，瞬间击穿芯片。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;做法&lt;/strong&gt;：在输入引脚上，&lt;strong&gt;并联两个二极管&lt;/strong&gt;（通常是肖特基二极管，因为正向压降小）。
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;上钳位二极管&lt;/strong&gt;：正极接引脚，负极接 VCC。如果输入电压超过 VCC，二极管导通，把多余的电压泄放到电源上去。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;下钳位二极管&lt;/strong&gt;：负极接引脚，正极接 GND。如果输入电压低于 GND（出现负压），二极管导通，把电压“钉”在 GND 附近（-0.3V 左右），防止芯片内部损坏。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;应用&lt;/strong&gt;：几乎所有暴露在机壳外的接口（USB, HDMI, 传感器接口）内部或外部都有这种结构&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;【上钳位二极管】例如这个电路中，二极管后端接 3.3V，那么他的前端电压只要高于 3.3+0.7=4V，二极管就会被导通，也就是说二极管前端电压不可能超过 4V（同样也是运放的输入引脚）。这样也就防止电压过高将运放烧坏

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020250703193335.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020250703193335.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;【下钳位二极管】下图当中，就可以确保点 2 处的电压不能低于 -0.7V

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251207102905.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251207102905.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;继电器电机线圈的续流保护&#34;&gt;继电器/电机线圈的“续流保护”
&lt;/h3&gt;&lt;p&gt;这也是一种“钳位”。我们在控制电感性负载（线圈、电机、继电器）时，断电瞬间线圈会产生几百伏的反向高压（电感尖峰），如果不处理，驱动三极管或 MOS 管必炸无疑。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;做法&lt;/strong&gt;：在继电器线圈两端&lt;strong&gt;反向并联&lt;/strong&gt;一个二极管。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;原理&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;正常通电时，二极管截止，不起作用。&lt;/li&gt;
&lt;li&gt;断电瞬间，线圈产生反向电压（下正上负），这时二极管被正向导通。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;钳位效果&lt;/strong&gt;：线圈两端的反向电压被二极管强行钳位在 &lt;strong&gt;0.7V&lt;/strong&gt;（二极管压降），而不是几百伏。能量通过二极管和线圈自己形成的回路慢慢消耗掉（续流）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;应用&lt;/strong&gt;：所有继电器驱动电路、电机 H 桥电路。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;注意点&#34;&gt;注意点
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;电流去哪了？&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;比如在 &lt;strong&gt;ADC 保护&lt;/strong&gt;场景中，当输入高压被二极管钳位到 VCC 时，多余的能量是灌入电源轨（VCC）的。如果这个浪涌电流太大，会把你的 VCC 电压抬高，甚至把整个板子的其他芯片烧掉！&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;对策&lt;/strong&gt;：通常会在输入端串联一个电阻（限流电阻），限制灌入二极管的电流。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;二极管的速度&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;钳位通常是为了对付瞬态高压（ESD、浪涌），这些尖峰来得极快（纳秒级）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;对策&lt;/strong&gt;：普通整流二极管（如 1N4007）太慢了，来不及反应芯片就挂了。必须用 &lt;strong&gt;快恢复二极管&lt;/strong&gt; 或 &lt;strong&gt;肖特基二极管&lt;/strong&gt;（如 BAT54S, 1N4148, 1N5819）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>三极管下拉电阻</title>
        <link>https://teaize.github.io/p/%E4%B8%89%E6%9E%81%E7%AE%A1%E4%B8%8B%E6%8B%89%E7%94%B5%E9%98%BB/</link>
        <pubDate>Sun, 07 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%B8%89%E6%9E%81%E7%AE%A1%E4%B8%8B%E6%8B%89%E7%94%B5%E9%98%BB/</guid>
        <description>&lt;p&gt;给 N 型三极管的基极加下拉电阻可以改善噪声的干扰；对于 PNP 三极管，接上拉电阻&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020250704090644.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020250704090644.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;在三极管基极（B）和地（GND）之间的电阻，主要隐藏着 &lt;strong&gt;三个核心设计意图&lt;/strong&gt;：&lt;/p&gt;
&lt;h3 id=&#34;定海神针--防止引脚悬空导致误动作上电防误动&#34;&gt;“定海神针” —— 防止引脚悬空导致误动作（上电防误动）
&lt;/h3&gt;&lt;p&gt;这是最主要的原因。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景：当你的单片机（MCU）刚通电、正在复位（Reset）、或者正在烧录程序时，它的 GPIO 引脚通常处于 高阻抗输入状态（Floating / 悬空）。&lt;/li&gt;
&lt;li&gt;危险：这时候引脚的电平是不确定的，就像风中的树叶。外界的一点点静电、电磁干扰（EMI），甚至你手靠近一下，都可能在基极感应出一点电压。&lt;/li&gt;
&lt;li&gt;后果：三极管非常灵敏，这点感应电压可能足以让它&lt;strong&gt;微导通&lt;/strong&gt;。如果这个三极管控制的是继电器或电机，你就会看到设备在上电瞬间莫名其妙地“动了一下”或者“哒”的一声。&lt;/li&gt;
&lt;li&gt;电阻的作用：&lt;strong&gt;这个电阻把基极强行拉到地（GND）。在单片机“发呆”的时候，它就像一个锚，把基极电位死死钉在 0V，确保三极管保持 绝对的截止（关断） 状态&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;快速泄放通道--加速关断排水管&#34;&gt;“快速泄放通道” —— 加速关断（排水管）
&lt;/h3&gt;&lt;p&gt;三极管是双极型器件（BJT），它的工作原理是靠基极只要存有&lt;strong&gt;电荷&lt;/strong&gt;，它就导通。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景：当你把单片机输出从“高”变“低”，想关掉三极管时。&lt;/li&gt;
&lt;li&gt;微观世界：三极管内部的 PN 结（基极 - 发射极之间）其实有一个&lt;strong&gt;寄生电容&lt;/strong&gt; ($C_{be}$)。刚才导通时，这里面存满了电荷。&lt;/li&gt;
&lt;li&gt;麻烦：如果你只是把输入断开，或者前级驱动不够强，这些存储的电荷没有地方去，它们得慢慢消散。只要电荷没散完，三极管就还处于“藕断丝连”的半导通状态。&lt;/li&gt;
&lt;li&gt;电阻的作用：这个电阻提供了一条通往 GND 的&lt;strong&gt;高速公路&lt;/strong&gt;。当你发出关断指令时，基极积存的电荷会迅速通过这个电阻流进地里，让三极管干脆利落地关断。这在高频开关应用中尤其重要。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;高温保护伞--吸收漏电流高温抗漏电&#34;&gt;“高温保护伞” —— 吸收漏电流（高温抗漏电）
&lt;/h3&gt;&lt;p&gt;还记得前面学习的漏电流吗？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景：高温环境下，三极管的集电极（C）和基极（B）之间会有漏电流 ($I_{CBO}$)。&lt;/li&gt;
&lt;li&gt;危险：如果没有这个下拉电阻，这个漏电流会流向哪里？它只能流进发射极（E）。
&lt;ul&gt;
&lt;li&gt;注意：流进基极的电流是会被放大的！漏电流 $I_{CBO}$ 进入基极后，会被放大 $\beta$ 倍流过集电极。&lt;/li&gt;
&lt;li&gt;这可能导致三极管在高温下自己就“失控导通”了，根本不受你控制。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;电阻的作用：这个电阻为漏电流提供了一条&lt;strong&gt;旁路&lt;/strong&gt;。漏电流会优先走电阻这个“容易的路”流进 GND，而不会流进发射结去触发放大作用，从而提高了电路的高温稳定性。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;工程师经验这个电阻选多大&#34;&gt;工程师经验：这个电阻选多大
&lt;/h3&gt;&lt;p&gt;通常这个电阻 ($R_{BE}$) 的阻值选取是有讲究的，不需要太精确，但有数量级要求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;常见值：&lt;strong&gt;$10k\Omega$, $47k\Omega$, $100k\Omega$&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;原则：
&lt;ul&gt;
&lt;li&gt;不能太小：如果太小（比如 $100\Omega$），大部分驱动电流都顺着它跑去 GND 了，流进三极管基极的电流就少了，导致三极管推不开。&lt;/li&gt;
&lt;li&gt;不能太大：如果太大（比如 $1M\Omega$），泄放电荷太慢，抗干扰能力也变弱。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;黄金比例：&lt;strong&gt;通常取基极串联限流电阻 ($R_B$) 的 5 到 10 倍&lt;/strong&gt;。
&lt;ul&gt;
&lt;li&gt;例如：基极串联电阻 $R_B = 1k\Omega$，那下拉电阻 $R_{BE}$ 就可以选 $10k\Omega$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>紫外荧光法</title>
        <link>https://teaize.github.io/p/%E7%B4%AB%E5%A4%96%E8%8D%A7%E5%85%89%E6%B3%95/</link>
        <pubDate>Sun, 07 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%B4%AB%E5%A4%96%E8%8D%A7%E5%85%89%E6%B3%95/</guid>
        <description>&lt;h2 id=&#34;textso_2-紫外荧光法&#34;&gt;$\text{SO}_2$ 紫外荧光法
&lt;/h2&gt;&lt;p&gt;紫外荧光法通常用于测量微量 $\text{SO}_2$（ppb 级），非常适合稀释后的低浓度样气。原理：
$$
\begin{aligned}
\text{SO}_2 + h\nu (190-230,\text{nm}) &amp;amp;\rightarrow \text{SO}_2^*
\end{aligned}
$$
$$
\begin{aligned}
\text{SO}_2^* &amp;amp;\rightarrow \text{SO}_2 + h\nu&amp;rsquo; (240-420,\text{nm})
\end{aligned}
$$&lt;/p&gt;
&lt;p&gt;在稀释法中可能存在的问题：&lt;/p&gt;
&lt;h3 id=&#34;1芳香烃干扰-aromatic-hydrocarbon-interference&#34;&gt;1、芳香烃干扰 (Aromatic Hydrocarbon Interference)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;机理：&lt;/strong&gt; 某些芳香族碳氢化合物（如多环芳烃）在紫外光激发下也会产生荧光，且波长范围与 $\text{SO}_2$ 重叠。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;后果：&lt;/strong&gt; 导致测量结果&lt;strong&gt;假性偏高&lt;/strong&gt;。虽然稀释法降低了干扰物浓度，但在石化、焦化等行业，这种干扰依然存在。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;对策：&lt;/strong&gt; 分析仪内部通常需要配备“除烃器”（Kicker），如果除烃器失效，数据就会飘高。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2猝灭效应-quenching-effect--最核心问题&#34;&gt;2、猝灭效应 (Quenching Effect) —— 最核心问题
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;机理： 激发的 $\text{SO}_2^*$ 分子在回到基态发出光子之前，与背景气体分子（如 $\text{H}_2\text{O}$, $\text{CO}_2$, $\text{O}_2$, $\text{N}_2$）发生碰撞，将能量以热能形式转移，而不发光。&lt;/p&gt;
&lt;p&gt;$$\text{SO}_2^* + M \rightarrow \text{SO}_2 + M + \text{Heat}$$&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;稀释法的优势与劣势： 稀释法的好处是用大量的空气（主要是 $\text{N}_2$ 和 $\text{O}_2$）稀释了 $\text{CO}_2$ 和 $\text{H}_2\text{O}$，从而稳定了猝灭系数。但如果背景气中 $\text{CO}_2$ 浓度波动极大，或者稀释比过低，猝灭效应仍会导致读数&lt;strong&gt;偏低&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;场景假设猝灭效应带来的背景气欺诈&#34;&gt;场景假设：猝灭效应带来的背景气欺诈
&lt;/h4&gt;&lt;p&gt;背景知识： 紫外荧光法是通过测量 $\text{SO}_2$ 分子受激发后发出的荧光强度来计算浓度的。 但是在物理上，有一个大敌叫“猝灭” 。&lt;strong&gt;简单说，就是 $\text{CO}_2$ 和 $\text{H}_2\text{O}$ 这些“胖子”分子，喜欢撞击受激发的 $\text{SO}_2$，把能量“偷走”变成热量，导致 $\text{SO}_2$ 发不出光&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;校准时刻（理想世界）：
&lt;ul&gt;
&lt;li&gt;你拿一瓶标气去校准。标气的背景气是什么？通常是 **$\text{N}_2$。&lt;/li&gt;
&lt;li&gt;$\text{N}_2$ 很“老实”，不怎么产生猝灭。&lt;/li&gt;
&lt;li&gt;结果： 100 个 $\text{SO}_2$ 分子，发出了 100 份光。分析仪记住了：100 光 = 100ppm。校准完美通过。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;测量时刻（残酷现实）：
&lt;ul&gt;
&lt;li&gt;探头抽入烟气。虽然稀释法混入了很多空气（$\text{N}_2$ 和 $\text{O}_2$），但烟道里原本含有 12%~15% 的 $\text{CO}_2$ 和大量 水汽。&lt;/li&gt;
&lt;li&gt;即便稀释了 50 倍，进入分析室的气体里依然混杂着微量的 $\text{CO}_2$ 和水分子。&lt;/li&gt;
&lt;li&gt;结果： 同样的 100 个 $\text{SO}_2$ 分子，刚想发光，就被旁边的 $\text{CO}_2$ 撞了一下，能量没了。最终只有 95 份光 被探测器收到。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;欺骗结果：
&lt;ul&gt;
&lt;li&gt;分析仪按校准曲线计算：95 光 = 95ppm。&lt;/li&gt;
&lt;li&gt;真相： 实际排放是 100ppm，你测出来只有 95ppm。&lt;/li&gt;
&lt;li&gt;最可怕的点： &lt;strong&gt;无论你怎么通标气验证，它都是准的（因为标气里没有 $\text{CO}_2$）。你永远不知道你在测量实际烟气时，数据一直在负偏差&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如何破解这种骗局呢;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;看稀释比： &lt;strong&gt;稀释比越高，猝灭效应越小&lt;/strong&gt;（因为背景气越接近空气）。如果你为了提高灵敏度把稀释比调低（比如从 100:1 调到 20:1），这个误差会指数级上升。&lt;/li&gt;
&lt;li&gt;不仅看标气，要看比对： 这种问题只能通过参比方法（手工采样）才能发现。如果手工数据总是比 CEMS 高 5%~10%，且标气校准又没问题，那基本就是&lt;strong&gt;猝灭系数&lt;/strong&gt;没修正。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;如果确实是-co2-引起的淬灭反应如何解决&#34;&gt;如果确实是 CO2 引起的淬灭反应，如何解决
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;核心问题在于，&lt;strong&gt;我们通常无法在不损失 $\text{SO}_2$ 的前提下“物理剔除” $\text{CO}_2$&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;原因在于化学性质的相似性：$\text{CO}_2$ 和 $\text{SO}_2$ 都是酸性气体。任何能通过化学反应吸收 $\text{CO}_2$ 的物质（如碱石灰、强碱溶液），都会更贪婪地把你要测的 $\text{SO}_2$ 也一起吸收掉，导致测量结果归零。&lt;/li&gt;
&lt;li&gt;因此，在工业 CEMS 应用中，我们应对猝灭效应的策略不是“剔除”，而是“&lt;strong&gt;稀释压制&lt;/strong&gt;”和“&lt;strong&gt;基质匹配&lt;/strong&gt;（Matrix Matching）”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;方法一提高稀释比&#34;&gt;方法一：提高稀释比
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原理： 猝灭效应与干扰物（$\text{CO}_2$）的分压（浓度）成正比。&lt;/li&gt;
&lt;li&gt;计算推演：
&lt;ul&gt;
&lt;li&gt;假设烟道内 $\text{CO}_2$ 浓度为 15%（燃煤电厂典型值）。&lt;/li&gt;
&lt;li&gt;低稀释比（20:1）： 进入分析仪的 $\text{CO}_2$ 浓度为 $15% \div 20 = \mathbf{0.75%}$。这个浓度足以引起可察觉的负偏差。&lt;/li&gt;
&lt;li&gt;高稀释比（100:1）： 进入分析仪的 $\text{CO}_2$ 浓度为 $15% \div 100 = \mathbf{0.15%}$。在这个浓度下，$\text{N}_2$ 和 $\text{O}_2$（来自稀释风）占据了绝对主导，$\text{CO}_2$ 的猝灭影响几乎可以忽略不计。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;操作建议：
&lt;ul&gt;
&lt;li&gt;如果你现在的探头稀释比只有 20:1 或 50:1，且 $\text{CO}_2$ 干扰明显，可以尝试更换更小孔径的临界孔，将稀释比提升至 100:1 甚至更高。&lt;/li&gt;
&lt;li&gt;代价： 稀释比提高了，进入分析仪的 $\text{SO}_2$ 浓度会变得更低，这对分析仪的检出限和信噪比提出了更高要求。你需要确认你的分析仪在测量 0.5 ppm 以下浓度时依然稳定。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;方法二基质匹配校准&#34;&gt;方法二：基质匹配校准
&lt;/h4&gt;&lt;p&gt;既然 $\text{CO}_2$ 会把读数“压低”，那我们在校准的时候，就故意用含有 $\text{CO}_2$ 的标气来校准，让分析仪“习惯”这种压低的状态。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;常规做法： 使用 $\text{SO}_2$ / $\text{N}_2$ 平衡气。
&lt;ul&gt;
&lt;li&gt;背景气是纯氮气，无猝灭。分析仪灵敏度最高。&lt;/li&gt;
&lt;li&gt;一测样气（含 $\text{CO}_2$），灵敏度下降，读数偏低。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;改进做法： 购买定制标气，例如 **$\text{SO}_2$ (50ppm) + $\text{CO}_2$ (15%) + $\text{N}_2$ (平衡)。
&lt;ul&gt;
&lt;li&gt;注意：这里的 15% 指的是稀释前的模拟浓度，或者直接按比例计算混合标气。&lt;/li&gt;
&lt;li&gt;更具操作性的现场做法是：如果你的标气瓶只是 $\text{SO}_2/\text{N}_2$，你可以通过&lt;strong&gt;动态配气仪&lt;/strong&gt;，混入一定比例的纯 $\text{CO}_2$。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;结果： 你在校准时，分析仪就已经处于“被猝灭”的状态了。它确立的校准曲线斜率（Slope）已经包含了猝灭因子的修正。当你再去测含有 15% $\text{CO}_2$ 的烟气时，正好抵消。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;总结建议&#34;&gt;总结建议
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;第一步（查硬件）： 确认你的稀释比是多少？如果是 &lt;strong&gt;100:1&lt;/strong&gt; 甚至 &lt;strong&gt;200:1&lt;/strong&gt;，那么 $\text{CO}_2$ 的物理浓度已经非常低（&amp;lt;0.2%），理论上不应产生可见误差。如果此时还有很大误差，请排查是否有其他问题（如泄漏）。&lt;/li&gt;
&lt;li&gt;第二步（改校准）： 如果无法改变稀释比（比如因为 $\text{SO}_2$ 浓度本身就太低，再稀释就测不到了），那么请联系标气供应商，&lt;strong&gt;定制含有 10%~15% $\text{CO}_2$ 背景的 $\text{SO}_2$ 标气&lt;/strong&gt;。这是成本最低、效果最立竿见影的方法。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;加性干扰与乘性干扰&#34;&gt;加性干扰与乘性干扰
&lt;/h3&gt;&lt;p&gt;这里还有个常见的误区：&lt;/p&gt;
&lt;p&gt;例如运维人员发现 CO2 确实会对 SO2 的测量有干扰，于是拿一瓶 CO2 标气通入分析仪去测量，结果发现分析仪示数为 0（分析仪如果同时也开启了负值显示的功能），于是便认为 CO2 对 SO2 的测量没有正影响，也没有负影响。于是便得出 CO2 对 SO2 分析仪完全没有影响的结论
&lt;strong&gt;这个误区之所以普遍，是因为很多人混淆了“加性干扰”（Additive Interference）和“乘性干扰”（Multiplicative Interference）的概念&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;加性干扰（如芳香烃）：$$测量值 = (\text{SO}_2 \text{真实值}) + (\text{干扰值})$$
&lt;ul&gt;
&lt;li&gt;当 $\text{SO}_2 = 0$，通入干扰物，测量值 = 干扰值。&lt;/li&gt;
&lt;li&gt;结论： 这种干扰可以通过通纯气测出来。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;乘性干扰（猝灭效应）：
猝灭效应是按比例吃掉光强。它是一个效率因子 (Efficiency Factor)，通常小于 1。$$测量值 = (\text{SO}_2 \text{真实值}) \times (\text{1 - 猝灭率})$$
&lt;ul&gt;
&lt;li&gt;运维人员的测试： 他通入了纯 $\text{CO}_2$，意味着 $\text{SO}_2 \text{真实值} = 0$。&lt;/li&gt;
&lt;li&gt;代入公式：$$测量值 = 0 \times (\text{1 - 猝灭率}) = \mathbf{0}$$&lt;/li&gt;
&lt;li&gt;真相： 无论猝灭率有多大（哪怕 $\text{CO}_2$ 把光全吃没了），只要原本就没有光（$\text{SO}_2=0$），结果永远是 0。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;猝灭效应是“杀手”。如果屋子里本来就没有人（没有 $\text{SO}_2$），杀手（$\text{CO}_2$）进去也杀不到人，但这并不代表杀手没有杀伤力。&lt;/p&gt;
&lt;p&gt;正确的测试方法：要验证 $\text{CO}_2$ 的猝灭效应，必须进行“基质干扰测试”，必须有 $\text{SO}_2$ 在场，例如：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;步骤&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;通入气体成分&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;预期读数 (假设无干扰)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;实际读数 (存在猝灭)&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;结论&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;标气 A:&lt;/strong&gt; 50ppm $\text{SO}_2$ + $\text{N}_2$ (平衡气)&lt;/td&gt;
          &lt;td&gt;50.0 ppm&lt;/td&gt;
          &lt;td&gt;50.0 ppm&lt;/td&gt;
          &lt;td&gt;标定基准点&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;混气 B:&lt;/strong&gt; 50ppm $\text{SO}_2$ + &lt;strong&gt;15% $\text{CO}_2$&lt;/strong&gt; + $\text{N}_2$&lt;/td&gt;
          &lt;td&gt;50.0 ppm&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;45~48 ppm&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;读数下降&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;判定： 步骤 2 的读数明显低于步骤 1（通常低 3%~8%），这个差值才是 $\text{CO}_2$ 的真实干扰（猝灭效应）&lt;/p&gt;
&lt;p&gt;上面所说的分析仪负值显示功能，这其实是针对&lt;strong&gt;加性干扰&lt;/strong&gt;的反向漂移或零点漂移设计的，对于猝灭这种&lt;strong&gt;乘性干扰&lt;/strong&gt;没有任何帮助。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果读数是负的（例如 -2 ppm），通常是因为背景气比纯氮气更“干净”（背景噪声更低），或者是电路零点漂移。&lt;/li&gt;
&lt;li&gt;$\text{CO}_2$ 的猝灭永远是**“乘以一个小于 1 的系数”&lt;strong&gt;，它不会把正数变成负数，它只会让正数&lt;/strong&gt;变小**。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;海绵效应---吸附滞后&#34;&gt;海绵效应 - 吸附滞后
&lt;/h2&gt;&lt;p&gt;逻辑类型： 时间滞后型干扰。&lt;strong&gt;打破了“管路不参与反应”的假设&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;常规认知：管路只是传输气体的通道，样气从探头到分析仪，只要流速恒定，延迟时间就是固定的（比如 30 秒）。&lt;/li&gt;
&lt;li&gt;老鸟经验：对于 $\text{SO}_2$ 和 $\text{NH}_3$ 这种极性强、水溶性好的气体，采样管线（特别是老化或污染的特氟龙/PFA 管）不仅仅是通道，更是一块 “海绵”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;场景复盘：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;早晨（气温低）： 采样管线较冷。$\text{SO}_2$ 经过管线时，被管壁上的水膜或灰尘吸附。
&lt;ul&gt;
&lt;li&gt;现象：CEMS 读数比实际排放低。运维以为脱硫效率高，很开心。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;中午（气温高）： 太阳出来了，伴热管线温度也更稳定了。管壁温度升高。&lt;/li&gt;
&lt;li&gt;午后惊魂： 早上吸附在管壁上的 $\text{SO}_2$ 开始解吸（Desorption），释放出来。
&lt;ul&gt;
&lt;li&gt;现象：哪怕锅炉停运了，或者排放很稳，CEMS 读数却莫名其妙地飘高，甚至超标。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;物理本质：这是吸附/解吸平衡问题。你测到的浓度，是“现在的排放”加上“过去的债务（或存款）”。$$C_{measured}(t) = C_{source}(t) - R_{adsorption} + R_{desorption}(T)$$&lt;/p&gt;
&lt;p&gt;如何识破：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;做“&lt;strong&gt;台阶测试&lt;/strong&gt;”： 通入高浓度标气（如 80% 量程），待稳定后，立刻切回零气。&lt;/li&gt;
&lt;li&gt;观察下降曲线： 正常的系统应该像悬崖一样垂直下降（陡峭）。&lt;strong&gt;如果读数像“拖尾巴”一样，慢悠悠地往下掉&lt;/strong&gt;（比如从 100 降到 0 用了 5 分钟），说明管路吸附严重。这就叫“系统记忆效应”**。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;放大镜陷阱---稀释风的纯度&#34;&gt;放大镜陷阱 - 稀释风的纯度
&lt;/h2&gt;&lt;p&gt;逻辑类型： 被放大的加性干扰。&lt;strong&gt;打破了“校准零气 = 工作零气”的假设&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;常规认知：稀释法 CEMS 需要洁净的压缩空气（零气）作为动力源。只要干燥、无油就行。一般的空气压缩机出来的气，含个 0.1 ppm 的杂质不算啥吧？&lt;/li&gt;
&lt;li&gt;老鸟经验：在稀释法中，稀释风的微小脏污，会被“稀释比”成百倍地放大。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;数学逻辑：假设你的稀释比是 100:1。$$C_{reading} = C_{detector} \times 100$$&lt;/p&gt;
&lt;p&gt;注意，分析仪探测器实际测量的是混合气体：&lt;/p&gt;
&lt;p&gt;$$C_{detector} \approx \frac{C_{stack} \times 1 + C_{air} \times 99}{100}$$&lt;/p&gt;
&lt;p&gt;如果你的稀释风（$C_{air}$）里含有 0.1 ppm 的 $\text{SO}_2$（比如空压机进气口吸入了烟气尾羽）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;分析仪测到的底数是 0.1 ppm。&lt;/li&gt;
&lt;li&gt;系统反算： $0.1 \times 100 = \mathbf{10 \text{ ppm}}$。&lt;/li&gt;
&lt;li&gt;结果： 你的 CEMS 读数平白无故多了 10 ppm 的底数。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;场景复盘：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当你做零点校准时，你用的是&lt;strong&gt;瓶装高纯氮&lt;/strong&gt;。校准完美通过（读数为 0）。&lt;/li&gt;
&lt;li&gt;当你切回测量模式时，你用的是&lt;strong&gt;现场空压机的气&lt;/strong&gt;。读数立刻跳升 10 ppm。&lt;/li&gt;
&lt;li&gt;运维误判： “这就是现在的排放值。” 其实全是假数。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;应对：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;稀释法的零气发生器（Zero Air Generator）必须配备高效的 $\text{SO}_2/\text{NO}_x$ 吸附柱（通常是紫色的高锰酸钾氧化铝或活性炭）。一旦这个变色失效，数据立马漂移。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Midisart 2000</title>
        <link>https://teaize.github.io/p/midisart-2000/</link>
        <pubDate>Sat, 06 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/midisart-2000/</guid>
        <description>&lt;p&gt;Midisart 2000 是德国 Sartorius（赛多利斯） 公司生产的一款&lt;strong&gt;一次性气体过滤器&lt;/strong&gt;的商业名称。在 CEMS 领域，它通常被称为&lt;strong&gt;阻水过滤器&lt;/strong&gt;或者&lt;strong&gt;疏水过滤器&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;外壳：聚丙烯（PP），耐腐蚀&lt;/li&gt;
&lt;li&gt;滤膜（关键）: 内部是一层 PTFE（聚四氟乙烯）膜&lt;/li&gt;
&lt;li&gt;精度： CEMS 中常用的规格通常是 0.2 µm 或 0.45 µm&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251206131946.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251206131946.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;主要作用&#34;&gt;主要作用
&lt;/h3&gt;&lt;h4 id=&#34;核心功能疏水保护&#34;&gt;核心功能：疏水保护
&lt;/h4&gt;&lt;p&gt;CEMS 的样气经过冷凝器除水后，虽然大部分水被除去了，但在故障或极端工况下（如冷凝器失效、蠕动泵坏了），液态水可能会直接冲向后端的分析仪&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Midisart 2000 的特性： 它的 PTFE 膜是&lt;strong&gt;天然疏水&lt;/strong&gt;的。
&lt;ul&gt;
&lt;li&gt;气体（$SO_2, NO, O_2$）可以轻松穿过。&lt;/li&gt;
&lt;li&gt;液态水 无法穿过。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;保护逻辑： 一旦有液态水过来，这个过滤器会瞬间利用表面张力把水挡住（同时也堵死了气路）。
&lt;ul&gt;
&lt;li&gt;结果： 流量计归零，分析仪报警“流量低”。&lt;/li&gt;
&lt;li&gt;价值： 虽然系统停运了，但它牺牲了自己，救了后面的分析仪气室（如果水进气室，光学部件可能报废）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;辅助功能精细过滤&#34;&gt;辅助功能：精细过滤
&lt;/h4&gt;&lt;p&gt;冷凝器前端通常有初级过滤器（如 2μm 或 5μm），但微小的粉尘可能会穿透。Midisart 2000 的精度通常是 0.2μm（微米级）。也就是说，它可以滤除极其细微的颗粒物，确保进入红外/紫外分析仪气室的气体是绝对纯净的，防止镜片脏污。&lt;/p&gt;
&lt;h3 id=&#34;注意事项&#34;&gt;注意事项
&lt;/h3&gt;&lt;p&gt;Midisart 2000 是一个疏水性的精密微孔过滤器，它是&lt;strong&gt;一次性的&lt;/strong&gt;。它的存在是为了&lt;strong&gt;防止液态水和微尘进入分析仪&lt;/strong&gt;。如果它堵了，说明它为后端的分析仪挡了一次灾。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基本参数：注意连接方向、使用截止日期及过过滤尺寸。&lt;/li&gt;
&lt;li&gt;变色：如果白色滤膜变黑、变黄，说明粉尘多了，&lt;strong&gt;需要更换&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;进水： 如果发现前端管路有水珠，且流量突然降低，说明它已经“堵水”了。此时千万不要试图把它甩干再用，&lt;strong&gt;水中的杂质可能已经堵死了微孔，直接换新的&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;安装位置： 它通常安装在冷凝器之后、分析仪入口之前，或者取样泵的入口处（保护泵）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251206130625.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251206130625.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>电容充电时间常数</title>
        <link>https://teaize.github.io/p/%E7%94%B5%E5%AE%B9%E5%85%85%E7%94%B5%E6%97%B6%E9%97%B4%E5%B8%B8%E6%95%B0/</link>
        <pubDate>Sat, 06 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%94%B5%E5%AE%B9%E5%85%85%E7%94%B5%E6%97%B6%E9%97%B4%E5%B8%B8%E6%95%B0/</guid>
        <description>&lt;p&gt;电容充电时间常数 ($\tau$) 就是电路的“**反应速度”，简单来说：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$\tau$ 小 $\rightarrow$ 电容充放电快 $\rightarrow$ 电路反应灵敏，波形陡峭。&lt;/li&gt;
&lt;li&gt;$\tau$ 大 $\rightarrow$ 电容充放电慢 $\rightarrow$ 电路反应迟钝，波形平缓。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;它是怎么算的&#34;&gt;它是怎么算的
&lt;/h3&gt;&lt;p&gt;$$\tau = R \times C$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$R$ (电阻)：单位是欧姆 ($\Omega$)&lt;/li&gt;
&lt;li&gt;$C$ (电容)：单位是法拉 ($F$)&lt;/li&gt;
&lt;li&gt;$\tau$ (时间常数)：单位是秒 ($s$)&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;例子：如果你有一个 $10k\Omega$ 的电阻和一个 $10\mu F$ 的电容，时间常数就是：
$10,000 \times 0.00001 = 0.1$ 秒 (即 100 毫秒)。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;它告诉了我们什么&#34;&gt;它告诉了我们什么
&lt;/h3&gt;&lt;p&gt;电容不像一个水桶（装满就停），它更像一个有阻力的弹簧。时间常数 $\tau$ 告诉我们要等多久电容才能“跟上”电压的变化&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$1\tau$ (63.2%)：给电容充电时，经过 1 个时间常数 的时间，电压会充到总电压的 63.2%。&lt;/li&gt;
&lt;li&gt;$5\tau$ (99.3%)：经过 5 个时间常数 的时间，我们工程上认为电容已经充满了（或者放电放完了）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;拿它做什么&#34;&gt;拿它做什么
&lt;/h3&gt;&lt;p&gt;我们通常利用 $\tau$ 的“延时”和“平滑”这两个特性来设计电路。以下是三个最经典的应用&lt;/p&gt;
&lt;h4 id=&#34;让子弹飞一会儿--上电复位电路&#34;&gt;“让子弹飞一会儿” —— 上电复位电路
&lt;/h4&gt;&lt;p&gt;芯片（比如单片机）刚通电时，电源电压可能不稳，如果芯片马上开始工作，容易出错（跑飞）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;做法：我们在复位引脚（Reset）接一个 RC 电路。&lt;/li&gt;
&lt;li&gt;原理：电源上电了，但电容电压需要慢慢爬升（由 $\tau$ 决定）。只要电容电压还没爬到高电平，芯片就一直处于“被按住复位键”的状态。&lt;/li&gt;
&lt;li&gt;目的：给电源一点时间稳定下来，等 $\tau$ 时间过了，电容充满了，复位结束，芯片再安全启动。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;过滤杂音--按键去抖&#34;&gt;“过滤杂音” —— 按键去抖
&lt;/h4&gt;&lt;p&gt;当你按下一个机械按键时，金属弹片会发生极其快速的物理抖动（几毫秒内通断几十次）。单片机会以为你按了几十次。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;做法：在按键旁边并联一个电容，串联一个电阻。&lt;/li&gt;
&lt;li&gt;原理：利用 $\tau$ 制造的“迟钝”。抖动太快了（时间极短），电容来不及充电和放电，电压就被“拉平”了，看不出抖动。&lt;/li&gt;
&lt;li&gt;目的：让单片机读到一个干净、平滑的按键信号。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;把方波变直流--pwm-转-dac-无源滤波&#34;&gt;“把方波变直流” —— PWM 转 DAC (无源滤波)
&lt;/h4&gt;&lt;p&gt;如果你想用数字信号（PWM，只有 0V 和 3.3V）控制一个模拟设备（比如调节屏幕亮度或电机速度），你需要一个中间电压（比如 1.65V）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;做法：让 PWM 信号通过一个 RC 低通滤波器。&lt;/li&gt;
&lt;li&gt;原理：如果 $\tau$ 远大于 PWM 的周期，电容就来不及随着 PWM 的高低电平快速充放电，而是维持在一个平均电压值上。&lt;/li&gt;
&lt;li&gt;目的：把“一顿一顿”的数字脉冲平滑成“连续”的模拟电压。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;经验法则&#34;&gt;经验法则
&lt;/h3&gt;&lt;p&gt;在图纸上看到电阻和电容连在一起时，可以这样快速判断：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;看位置
&lt;ul&gt;
&lt;li&gt;如果是 信号线对地 接 RC：通常是为了&lt;strong&gt;滤除噪声&lt;/strong&gt;（让高频干扰来不及反应）。&lt;/li&gt;
&lt;li&gt;如果是 芯片复位脚/电源脚：通常是为了&lt;strong&gt;延时启动&lt;/strong&gt;或&lt;strong&gt;软启动&lt;/strong&gt;（Soft Start）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;估算时间
&lt;ul&gt;
&lt;li&gt;看到 $R=10k, C=10\mu F$，心里默念“0.1 秒”。&lt;/li&gt;
&lt;li&gt;看到 $R=1k, C=1nF$，心里默念“1 微秒”（非常快，通常用于滤除射频干扰）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>接头密封</title>
        <link>https://teaize.github.io/p/%E6%8E%A5%E5%A4%B4%E5%AF%86%E5%B0%81/</link>
        <pubDate>Sat, 06 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%8E%A5%E5%A4%B4%E5%AF%86%E5%B0%81/</guid>
        <description>&lt;p&gt;接头密封是保证气路不泄漏的关键，那么接头又是如何实现密封的呢：&lt;/p&gt;
&lt;h3 id=&#34;双卡套金属硬密封&#34;&gt;双卡套金属硬密封
&lt;/h3&gt;&lt;p&gt;常用在分析仪内部高温、腐蚀性气路、316L 不锈钢管等，这是 Swagelok（世伟洛克）确立的行业标准&lt;/p&gt;
&lt;p&gt;密封原理：功能解耦模型。早期的单卡套设计经常泄漏，因为一个卡套既要负责“抓紧管子”，又要负责“密封气体”，分身乏术。双卡套通过两个独立的金属环，把任务分开了：&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251206153923627.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20251206153923627.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;前卡套 —— &lt;strong&gt;负责密封&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;当螺母拧紧时，前卡套被推入接头主体的锥形口。&lt;/li&gt;
&lt;li&gt;物理动作： 它的外缘与接头内壁贴合，内缘紧抱管子。&lt;/li&gt;
&lt;li&gt;作用： 它产生&lt;strong&gt;过盈配合&lt;/strong&gt;，形成第一道气密防线。它主要受压，不怎么破坏管子表面。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;后卡套 —— &lt;strong&gt;负责抓紧&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;螺母推着后卡套，后卡套推着前卡套。&lt;/li&gt;
&lt;li&gt;物理动作： &lt;strong&gt;后卡套经过特殊的硬化处理&lt;/strong&gt;。在挤压下，它的前端会像牙齿一样“咬”进不锈钢管的表层金属里（你可以看到管子上有一圈明显的压痕）。&lt;/li&gt;
&lt;li&gt;作用： 它的任务是&lt;strong&gt;抗震&lt;/strong&gt;和&lt;strong&gt;抗拔&lt;/strong&gt;。它锁住了管子，防止高压把管子吹出去，并隔离了震动，保护前卡套的密封性。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种密封是金属对金属的冷作硬化密封，没有橡胶 O 圈。所以它&lt;strong&gt;耐高温、耐腐蚀、耐老化&lt;/strong&gt;。
但它是不可逆的塑性变形。一旦卡紧，卡套就和管子“长”在一起了。虽然可以拆卸重装，但次数有限。&lt;/p&gt;
&lt;h3 id=&#34;软密封倒钩与弹性张力&#34;&gt;软密封：倒钩与弹性张力
&lt;/h3&gt;&lt;p&gt;应用场景： 蠕动泵管、废液管、某些低压内部连接（软管，如氟胶管、特氟龙软管）。&lt;/p&gt;
&lt;p&gt;密封原理：利用环向应力， 这就是我们常说的“宝塔头”或“倒刺接头”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理动作： 接头外径比软管内径大。你把软管强行撑开套进去。&lt;/li&gt;
&lt;li&gt;密封力来源： 软管试图回缩恢复原状的&lt;strong&gt;弹性回复力&lt;/strong&gt;，紧紧箍在接头上。&lt;/li&gt;
&lt;li&gt;倒钩作用： 防止管子被拉出来。&lt;/li&gt;
&lt;li&gt;加强版： 为了保险，通常会在外面加一个&lt;strong&gt;喉箍&lt;/strong&gt;或&lt;strong&gt;卡环&lt;/strong&gt;，施加额外的向心压力。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在 CEMS 里，凡是正压且有腐蚀性的气体（如从样气泵出来到分析仪这段），&lt;strong&gt;尽量少用&lt;/strong&gt;这种接头。因为橡胶管高温下会变软，应力松弛导致箍紧力下降而泄漏。&lt;/p&gt;
&lt;h3 id=&#34;快插接头o-形圈径向密封&#34;&gt;快插接头：O 形圈径向密封
&lt;/h3&gt;&lt;p&gt;应用场景： 仪表空气（反吹气）、气动阀驱动气路（PU 管或尼龙管）&lt;/p&gt;
&lt;p&gt;密封原理：自锁与唇形密封，这就是常见的塑料“一插即连”接头&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;抓紧机制： 内部有一圈不锈钢的爪簧 。当你插入管子，爪子张开；当你试图拔出，爪子会反向咬住管壁（类似倒刺）。&lt;/li&gt;
&lt;li&gt;密封机制： &lt;strong&gt;O 形圈&lt;/strong&gt;。管子穿过爪簧后，深处有一个橡胶 O 圈，紧贴管子外壁进行密封。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;严禁在 CEMS 的样气流路中使用普通的塑料快插接头：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;材料不耐腐： 内部 O 圈&lt;strong&gt;通常是丁腈橡胶&lt;/strong&gt;（NBR），遇到 $SO_2/NO_x$ 会烂掉。&lt;/li&gt;
&lt;li&gt;耐温性差： 塑料主体受热会变形泄漏。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;螺纹密封&#34;&gt;螺纹密封
&lt;/h3&gt;&lt;p&gt;接头本身连管子是用卡套，但接头连到阀门或流量计上，通常靠螺纹。这里分为两派：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;锥管螺纹 (NPT / R / PT)：
&lt;ul&gt;
&lt;li&gt;原理： 螺纹是锥形的（越拧越紧）。靠螺纹牙之间的金属挤压变形 + 生料带/密封胶 填充缝隙来密封。&lt;/li&gt;
&lt;li&gt;模型： 螺旋楔紧模型。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;平行螺纹 (G / M / UNF)：
&lt;ul&gt;
&lt;li&gt;原理： 螺纹只负责“拉紧”，不负责密封。&lt;/li&gt;
&lt;li&gt;密封： 靠根部的&lt;strong&gt;垫片&lt;/strong&gt;（紫铜垫、组合垫圈）或 &lt;strong&gt;O 形圈&lt;/strong&gt; 被压扁来密封。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>截止频率</title>
        <link>https://teaize.github.io/p/%E6%88%AA%E6%AD%A2%E9%A2%91%E7%8E%87/</link>
        <pubDate>Sat, 06 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%88%AA%E6%AD%A2%E9%A2%91%E7%8E%87/</guid>
        <description>&lt;p&gt;需要明白一个概念：在低通滤波电路当中，&lt;strong&gt;截止频率越大，是越能防止“高频噪声进来”还是越不能防止“高频噪声进来”&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;假设截止频率是门卫，在低通滤波器里，截止频率就是“门卫放行的速度上限”：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;比这个频率&lt;strong&gt;低&lt;/strong&gt;的信号（比如直流电、慢速信号）：门卫说“请进”。&lt;/li&gt;
&lt;li&gt;比这个频率&lt;strong&gt;高&lt;/strong&gt;的信号（比如高频噪声）：门卫说“太快了，拦住”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;截止频率计算公式：
$$f_c = \frac{1}{2\pi RC}$$
&lt;strong&gt;电容 C 变小，截止频率 $f_c$ 变大，意味着门卫的标准放宽了&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;以前（大电容，$f_c$ 低）：门卫说“超过 100Hz 的都算噪音，全部拦住！” $\rightarrow$ 只有很干净的低频能过，滤波效果极好。&lt;/li&gt;
&lt;li&gt;现在（小电容，$f_c$ 高）：门卫说“标准提高了，超过 10,000Hz (10kHz) 的才算噪音，拦住。” $\rightarrow$ 结果 100Hz 到 10,000Hz 之间的噪音全都大摇大摆进来了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也就是说，在低通滤波（滤除噪声）的应用中，截止频率越高，意味着能通过的高频成分越多，滤波效果反而越“差”（或者说越不敏感）。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;既然电容越大，截止频率越小，越能去除掉高频噪声。是不是和之前所说的“&lt;strong&gt;大鬼和小鬼&lt;/strong&gt;”冲突了？【在前面“大鬼和小鬼”的介绍中，0.1uF 负责对付高频噪声，而 10uF 负责充当蓄水池】。不应该由大电容来负责对付高频噪声更合适吗？&lt;/p&gt;
&lt;p&gt;因为大电容在高频时“失效”了。现实中的电容，因为制造工艺（还要卷绕、有引脚），内部其实隐藏着一个小电阻和一个微小的&lt;strong&gt;电感&lt;/strong&gt;（大电容相对于小电容，寄生电感更大）。
当频率非常高（超过几 MHz）时，那点微小的寄生电感开始发威了！电感的特性是“频率越高，阻碍越大”。或者更简单的说，这个大电容存在着某一个频率，在这个频率下，电容的作用和所藏着的电感的作用打了个平手。低于这个频率，电容说了算。高于这个频率，反而是所藏着的电感说了算
所以，在处理高频噪声（比如 10MHz 以上）时，$10\mu F$ 的大电容已经“变节”成电感了，根本不起滤波作用。这时候全靠 $0.1\mu F$ 这个动作灵敏的小鬼在死扛
所以大小鬼的策略是：用&lt;strong&gt;大电容&lt;/strong&gt;搞定低频，用&lt;strong&gt;小电容&lt;/strong&gt;搞定高频，并且让&lt;strong&gt;小电容&lt;/strong&gt;站前排&lt;/p&gt;
</description>
        </item>
        <item>
        <title>去耦电容</title>
        <link>https://teaize.github.io/p/%E5%8E%BB%E8%80%A6%E7%94%B5%E5%AE%B9/</link>
        <pubDate>Sat, 06 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8E%BB%E8%80%A6%E7%94%B5%E5%AE%B9/</guid>
        <description>&lt;p&gt;把电容跨接在芯片的 VCC 和 GND 之间，这个电容在工程上有一个专门的名字，叫 “&lt;strong&gt;去耦电容&lt;/strong&gt;”或者 “旁路电容”。如果没有它，芯片可能会莫名其妙地死机、重启，或者信号乱跳。&lt;/p&gt;
&lt;h3 id=&#34;为什么要加电容&#34;&gt;为什么要加电容
&lt;/h3&gt;&lt;p&gt;你可以把 电源 想象成一个远处的 水库，把 导线 想象成 输水管，而 芯片 是家里必须要&lt;strong&gt;频繁开关的 水龙头&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;应对瞬时缺水--储能作用&#34;&gt;应对“瞬时缺水” —— 储能作用
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;问题：芯片工作时不是一直在喝水，而是像机关枪一样，一会儿猛喝一口（电流瞬间增大），一会儿不喝。当芯片突然要“喝一大口水”时，远处水库的水流过来需要时间（因为导线有电感和电阻，水流有惯性）。结果就是，水还没流过来，芯片门口的水压（电压）瞬间就掉下去了（也叫作&lt;strong&gt;电压跌落&lt;/strong&gt;）。电压一掉，芯片就复位或死机了。&lt;/li&gt;
&lt;li&gt;解决：在芯片门口（VCC 引脚旁）放一个小水桶（电容）。&lt;/li&gt;
&lt;li&gt;效果：当芯片突然要喝水时，先喝小水桶里的水。因为水桶离得近，水立马就能供上，维持了水压（电压）的稳定。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;滤除水管杂音--滤波作用&#34;&gt;滤除“水管杂音” —— 滤波作用
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;问题：电源送过来的水流往往不干净，里面可能有波浪（高频噪声）。同时，芯片自己工作时也会产生震动，反向传回水管里，干扰别人。&lt;/li&gt;
&lt;li&gt;解决：电容对高频信号相当于“短路”。&lt;/li&gt;
&lt;li&gt;效果：高频噪声（波浪）过来时，直接通过电容流进地（GND）里消散掉了，不会进入芯片内部干扰核心电路。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;通常是如何应用的&#34;&gt;通常是如何应用的
&lt;/h3&gt;&lt;p&gt;在画电路图和 画板时，有一套约定俗成的“组合拳”。&lt;/p&gt;
&lt;h4 id=&#34;选什么值-大鬼和小鬼&#34;&gt;选什么值？—— “大鬼和小鬼”
&lt;/h4&gt;&lt;p&gt;通常我们会看到一个引脚旁边并联了两个不一样大的电容，比如 10uF 和 0.1uF。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0.1uF (100nF, 也就是常说的 104 电容)：
&lt;ul&gt;
&lt;li&gt;角色：这是“&lt;strong&gt;标配&lt;/strong&gt;”。&lt;/li&gt;
&lt;li&gt;作用：专门对付高频噪声（几 MHz 到几十 MHz）。因为小电容的内部卷绕少，寄生电感小，反应极快。&lt;/li&gt;
&lt;li&gt;材质：通常用陶瓷电容（MLCC）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;10uF (或者 4.7uF, 100uF)：
&lt;ul&gt;
&lt;li&gt;角色：这是“&lt;strong&gt;蓄水池&lt;/strong&gt;”。&lt;/li&gt;
&lt;li&gt;作用：对付低频波动或大电流需求。它存的电荷多，能撑得久一点。&lt;/li&gt;
&lt;li&gt;材质：可能是钽电容、电解电容或大容量陶瓷电容。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;工程经验：如果只让加一个，对于大多数普通数字芯片（如逻辑门、低速单片机），加一个 0.1uF 是底线。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;放哪里-寸土寸金&#34;&gt;放哪里？—— “寸土寸金”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;黄金法则：电容必须尽可能靠近芯片的 VCC 和 GND 引脚&lt;/li&gt;
&lt;li&gt;原因：还记得水桶理论吗？如果水桶离水龙头太远，水管还是很长，那这个水桶就没用了。电容离引脚越远，中间的走线产生的寄生电感就越大，去耦效果就越差。&lt;/li&gt;
&lt;li&gt;顺序：如果同时有 10uF 和 0.1uF，&lt;strong&gt;小的（0.1uF）要紧贴着芯片放，大的（10uF）可以稍微放外面一点点&lt;/strong&gt;。因为高频噪声最难搞，必须第一时间干掉。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>O形圈参数</title>
        <link>https://teaize.github.io/p/o%E5%BD%A2%E5%9C%88%E5%8F%82%E6%95%B0/</link>
        <pubDate>Fri, 05 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/o%E5%BD%A2%E5%9C%88%E5%8F%82%E6%95%B0/</guid>
        <description>&lt;h2 id=&#34;关于-o-形圈内径拉伸率&#34;&gt;关于 O 形圈内径拉伸率
&lt;/h2&gt;&lt;p&gt;轴向密封时，建议内径拉伸率最大不超过 3%，为什么&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251205085313.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251205085313.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;焦耳---高夫效应--热力学陷阱&#34;&gt;焦耳 - 高夫效应 —— 热力学陷阱
&lt;/h3&gt;&lt;p&gt;这是限制拉伸率最核心、最物理的原因。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;直觉模型： 大多数物体（如钢、水、空气）受热都会膨胀&lt;/li&gt;
&lt;li&gt;反直觉模型（橡胶）： 处于拉伸状态的橡胶，&lt;strong&gt;受热时会收缩&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当你拉伸橡胶时，你强行把那些卷曲的高分子链拉直了（有序度增加，熵减小）。根据热力学定律，系统倾向于回到高熵（混乱）状态。当你加热它，分子热运动加剧，长链更想卷回去。 表现出来的宏观现象就是：越热，拉紧的皮筋缩得越紧&lt;/p&gt;
&lt;p&gt;假设设计了一个轴向密封，O 形圈内径拉伸了 6% 装进去。常温下，一切正常。仪表开始工作，温度开始上升，例如升温到 150℃时，根据焦耳 - 高夫效应，O 形圈不仅不膨胀密封，反而试图剧烈收缩。这种收缩力会产生巨大的内应力，导致 O 形圈在沟槽内崩断，或者产生龟裂&lt;/p&gt;
&lt;h3 id=&#34;截面缩减&#34;&gt;截面缩减
&lt;/h3&gt;&lt;p&gt;根据泊松比推算，O 形圈内径每拉伸 1%，其截面直径（线径 $d_2$）大约会减少 0.5%。&lt;/p&gt;
&lt;p&gt;假设你选了线径 3.53mm 的 O 形圈，为了密封，设计压缩量是 20%。如果你将它拉伸了 10%：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;截面直径会减小约 5% $\rightarrow$ 变成了 3.35mm。&lt;/li&gt;
&lt;li&gt;你原本设计的沟槽深度是按 3.53mm 算的。&lt;/li&gt;
&lt;li&gt;现在 O 形圈变细了，实际压缩量（Squeeze）大幅下降，可能只剩 10% 甚至更低。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;造成的结果是，低压时可能还能封住，但一旦遇到压力波动或震动，因为压缩量不足（回弹力不够），直接泄漏。&lt;strong&gt;也就是说，如果大幅调整了 O 形圈拉伸率，那么 O 形圈沟槽深度可能也需要再重新设计&lt;/strong&gt;。限制 3%，是为了保证 O 形圈的“身材”不走样，维持预期的压缩率&lt;/p&gt;
&lt;h3 id=&#34;安装工艺&#34;&gt;安装工艺
&lt;/h3&gt;&lt;p&gt;这是一个很实际的工程问题。例如轴向密封为盖板，如果 O 形圈拉伸了 5%，它时刻都想缩回原形。 当工人试图把盖板合上时，O 形圈会不由自主地从沟槽里“跳”出来，或者向内卷曲。导致 O 形圈被盖板面切边或压扁，密封失效。&lt;/p&gt;
&lt;h3 id=&#34;应力老化&#34;&gt;应力老化
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;模型： 紧绷的绳子 vs. 松弛的绳子。拿刀去割一根松弛的绳子，挺难割断；但如果把绳子崩到极限，轻轻一碰就断了。&lt;/li&gt;
&lt;li&gt;化学原理：当橡胶分子链处于拉伸（张紧）状态时，化学键的键能处于高能态，极不稳定。这时候，空气中的臭氧或者 CEMS 样气中的腐蚀性气体（$SO_2, NO_2$），会优先攻击这些“紧绷”的化学键。&lt;/li&gt;
&lt;li&gt;后果：拉伸率过大，会成倍加速 O 形圈的老化和龟裂。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;轴向密封设计原则&#34;&gt;轴向密封设计原则
&lt;/h2&gt;&lt;p&gt;我们设计的核心目标是：&lt;strong&gt;压力往哪边推，O 形圈安装时就预先靠在哪边的墙上&lt;/strong&gt;（减少运动，防止磨损）&lt;/p&gt;
&lt;h3 id=&#34;1-内压工况正压&#34;&gt;1. 内压工况（正压）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;物理流向： 气体从中心向外推。&lt;/li&gt;
&lt;li&gt;O 形圈位置： 应该预先紧贴沟槽外壁。&lt;/li&gt;
&lt;li&gt;尺寸设计：
&lt;ul&gt;
&lt;li&gt;外径 (OD)： O 形圈外径 $\approx$ 沟槽外径（&lt;strong&gt;甚至可以让 O 形圈外径比沟槽外径略大 1%~2%，形成外径过盈/干涉，让它稳稳地“撑”在沟槽外圈不动&lt;/strong&gt;）。&lt;/li&gt;
&lt;li&gt;内径 (ID)： O 形圈内径 &amp;gt; 沟槽内径（必须留有余量，绝对不能小，否则就变成箍在内圈了）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-外压真空工况&#34;&gt;2. 外压/真空工况
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;物理流向： 大气压从外向中心推（或者由于内部是真空，被吸向中心）。&lt;/li&gt;
&lt;li&gt;O 形圈位置： 应该预先紧贴沟槽内壁。&lt;/li&gt;
&lt;li&gt;尺寸设计：
&lt;ul&gt;
&lt;li&gt;内径 (ID)： O 形圈内径 &amp;lt; 沟槽内径（这就是之前提到的内径拉伸，&lt;strong&gt;让 O 形圈比沟槽内圈略小 1%~3%，紧紧箍在内圈上&lt;/strong&gt;）。&lt;/li&gt;
&lt;li&gt;外径 (OD)： O 形圈外径 &amp;lt; 沟槽外径（自然会有间隙）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;工况类型&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;压力方向&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;O 形圈的“靠山”&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;尺寸关系&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;内压/正压&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$\rightarrow$ 向外推&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;外壁&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;O 形圈外径 $\ge$ 沟槽外径&lt;/strong&gt; (外径过盈)&lt;br&gt;&lt;strong&gt;O 形圈内径 &amp;gt; 沟槽内径&lt;/strong&gt; (内径有间隙)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;外压/真空&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$\leftarrow$ 向内推&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;内壁&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;O 形圈内径 &amp;lt; 沟槽内径&lt;/strong&gt; (内径拉伸/过盈)&lt;br&gt;&lt;strong&gt;O 形圈外径 &amp;lt; 沟槽外径&lt;/strong&gt; (外径有间隙)&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>关于接头与密封</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%8E%A5%E5%A4%B4%E4%B8%8E%E5%AF%86%E5%B0%81/</link>
        <pubDate>Fri, 05 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%8E%A5%E5%A4%B4%E4%B8%8E%E5%AF%86%E5%B0%81/</guid>
        <description>&lt;p&gt;参考资料：&lt;a class=&#34;link&#34; href=&#34;https://gemini.google.com/app/4c6f5f035f60257e&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Google Gemini&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在 CEMS 仪器仪表当中，接头用的比较多，你能给我介绍一下接头是靠什么方式密封的吗，卡套？还是什么&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>氧化锆氧传感器</title>
        <link>https://teaize.github.io/p/%E6%B0%A7%E5%8C%96%E9%94%86%E6%B0%A7%E4%BC%A0%E6%84%9F%E5%99%A8/</link>
        <pubDate>Fri, 05 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%B0%A7%E5%8C%96%E9%94%86%E6%B0%A7%E4%BC%A0%E6%84%9F%E5%99%A8/</guid>
        <description>&lt;p&gt;氧化锆（ZrO₂）氧传感器的“零点标定”，和红外/紫外分析仪的“零点标定”，在物理逻辑上是不同的。&lt;/p&gt;
&lt;h3 id=&#34;不能使用纯氮标零&#34;&gt;不能使用“纯氮”标零
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;物理模型（能斯特方程）
&lt;ul&gt;
&lt;li&gt;$$E = A \cdot T \cdot \ln(\frac{\text{参考气浓度}}{\text{被测气浓度}})$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;数学陷阱： 如果被测气浓度为 0%（纯氮），那么分母为 0，$\ln(\infty)$ 趋向于无穷大。&lt;/li&gt;
&lt;li&gt;后果： 理论上，通入纯氮，传感器应该输出无穷大的电压。实际上，它会&lt;strong&gt;输出一个极其不稳定、受微量杂质干扰巨大的高电压信号&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;正确做法：&lt;strong&gt;氧化锆的“零点标定”，实际上是“低点标定”&lt;/strong&gt;。 通常推荐使用 1% ~ 4% 的标气（氮气背景下的氧气）。例如使用 1% 的标气标定，那么标定时输入 1%，而不是 0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;情况 A：通入空气 ($20.95%$)
&lt;ul&gt;
&lt;li&gt;$$E = K \times \ln(1) = 0 \text{ mV}$$&lt;/li&gt;
&lt;li&gt;这是氧化锆的物理零点，但通常作为量程点&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;情况 B：通入 1% 标气
&lt;ul&gt;
&lt;li&gt;$$E = K \times \ln(20.95 / 1) \approx K \times 3.04 \approx 150 \text{ mV}$$&lt;/li&gt;
&lt;li&gt;这是一个稳定、可测量的电压&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;情况 C：通入 0% 纯氮 ($0%$)
&lt;ul&gt;
&lt;li&gt;$$E = K \times \ln(20.95 / 0) = K \times \infty = \infty \text{ (无穷大)}$$&lt;/li&gt;
&lt;li&gt;所以，对于氧化锆氧传感器，无法用纯氮气标定，因为数学上那是“奇点”，物理上那是“噪声放大器”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;低氧测量&#34;&gt;低氧测量
&lt;/h2&gt;&lt;p&gt;根据能特斯特方程（电势法），氧化锆具备测量微量氧且微量氧下灵敏度高的优势：
$$E = A \cdot T \cdot \ln(\frac{\text{参考气浓度}}{\text{被测气浓度}})$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;为什么？&lt;/strong&gt; $E \propto \ln(1/C)$。浓度 $C$ 越低，对数曲线越陡峭，电压变化率越大
&lt;ul&gt;
&lt;li&gt;21% 变到 20%，电压只变几毫伏&lt;/li&gt;
&lt;li&gt;10ppm 变到 1ppm，电压能变几十毫伏&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结论：&lt;/strong&gt; 氧化锆天生适合测低氧（这也是为什么空分行业测高纯氮里的微量氧都用氧化锆）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;那为什么 CEMS 工业现场，低氧测量往往不推荐氧化锆呢？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;真正的死穴不是灵敏度，而是干扰和燃烧效应&lt;/strong&gt;。氧化锆工作在 700℃ 高温下。在低氧环境（比如燃烧控制的还原区）中，往往伴随着一氧化碳（CO）、氢气（H₂）等可燃气体：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;现象： 这些可燃气会在高温的氧化锆探头表面，和仅存的那一点点氧气发生二次燃烧&lt;/li&gt;
&lt;li&gt;后果： 还没等探头测到氧气，氧气就被烧光了。会测到一个比真实值低得多的数据（甚至显示 0）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;电流型氧化锆&#34;&gt;电流型氧化锆
&lt;/h3&gt;&lt;p&gt;为了解决“能斯特方程非线性”问题，工业界其实发明了另一种氧化锆——&lt;strong&gt;电流型（极限电流型）&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;原理差异：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;普通氧化锆（电压型）： 也是我们常说的，测&lt;strong&gt;电压&lt;/strong&gt;（对数关系，低氧灵敏，但非线性）。&lt;/li&gt;
&lt;li&gt;电流型氧化锆（泵氧型）： 给氧化锆施加一个电压，强制把氧离子从一端“泵”到另一端。当电压加到一定程度，受限于扩散孔，氧离子的迁移速度达到极限。此时的&lt;strong&gt;极限电流 ($I_{lim}$)&lt;/strong&gt; 与氧浓度成&lt;strong&gt;线性正比&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;应用： 汽车上的 &lt;strong&gt;宽域氧传感器&lt;/strong&gt; 就是这种。它克服了能斯特方程的非线性，实现了从低氧到高氧的全量程线性测量。&lt;/p&gt;
&lt;p&gt;注意：前面所说的燃烧效应依旧存在。不得不面临一个物理事实：无论是电压型还是电流型，氧化锆的核心元件（ZrO₂ 陶瓷体）必须加热到 &lt;strong&gt;400℃ ~ 700℃&lt;/strong&gt; 才能传导氧离子。并且电极还使用铂（很多反应的催化剂）。如果样气中含有一氧化碳或者氢气，在高温 + 铂催化的环境下，会和氧气发生反应，例如
$$2CO + O_2 \rightarrow 2CO_2$$&lt;/p&gt;
&lt;p&gt;后果： 传感器测到的氧，是“被消耗后剩余的氧”，而不是样气原本的氧。 也就是说，只要背景气里有可燃组分，电流型氧化锆的读数依然会流偏低。&lt;/p&gt;
&lt;h2 id=&#34;传感器线性关系&#34;&gt;传感器线性关系
&lt;/h2&gt;&lt;p&gt;其实，非线性才是大自然的常态&lt;/p&gt;
&lt;p&gt;在 CEMS 和工业仪表中，有很多测量原理输入和输出之间存在指数、对数或者平方根关系。理解这些非线性，对于理解仪表的“量程比”、“灵敏度区间” 以及 “为什么低量程测不准”至关重要。&lt;/p&gt;
&lt;h3 id=&#34;朗伯---比尔定律-ndiruv指数饱和模型&#34;&gt;朗伯 - 比尔定律 (NDIR/UV)：指数饱和模型
&lt;/h3&gt;&lt;p&gt;这是所有光学气体分析仪（测 $SO_2, NO_x, CO$）的物理基石。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理公式：光强透射率 $T = \frac{I}{I_0} = e^{-k \cdot L \cdot C}$
&lt;ul&gt;
&lt;li&gt;$I$: 接收到的光强&lt;/li&gt;
&lt;li&gt;$C$: 气体浓度&lt;/li&gt;
&lt;li&gt;$L$: 光程长度&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;非线性特征：指数衰减，&lt;strong&gt;偏低&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;模型思维： “刷油漆模型”
&lt;ul&gt;
&lt;li&gt;低浓度时（线性区）： 就像给透明玻璃刷第一层黑漆，挡光效果非常明显。此时灵敏度最高。&lt;/li&gt;
&lt;li&gt;高浓度时（饱和区）： 就像已经刷了 10 层漆，玻璃已经黑了。再刷第 11 层（浓度增加），透过的光几乎没有变化。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;奇点/难点：当浓度 $C$ 过大时，探测器接收到的光强 $I \approx 0$。此时信号淹没在噪声中，无论浓度再怎么增加，仪器都“瞎”了。这就是光学饱和。所以 NDIR 分析仪严禁长时间超量程运行，否则读数会“切平头”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;皮托管测流速平方根模型&#34;&gt;皮托管测流速：平方根模型
&lt;/h3&gt;&lt;p&gt;这是 CEMS 测量烟气流速最常用的方法&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理公式（伯努利方程）：$$v = K \cdot \sqrt{\frac{2 \cdot \Delta P}{\rho}}$$
&lt;ul&gt;
&lt;li&gt;$v$: 流速&lt;/li&gt;
&lt;li&gt;$\Delta P$: 差压（动压）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;非线性特征：抛物线关系，差压 $\Delta P$ 与流速 $v$ 的平方成正比。&lt;/li&gt;
&lt;li&gt;模型思维： “动能 - 势能转换”
&lt;ul&gt;
&lt;li&gt;高速区（好测）： 流速 20m/s 时，差压很大，很容易测准。&lt;/li&gt;
&lt;li&gt;低速区（难测）： 这是一个“死区”。
&lt;ul&gt;
&lt;li&gt;流速从 0 变到 2 m/s，差压的变化微乎其微（接近 0）。&lt;/li&gt;
&lt;li&gt;$\sqrt{0.001}$ 和 $\sqrt{0.002}$ 的差异极难分辨。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;奇点/难点：&lt;strong&gt;结论：&lt;/strong&gt;。因为差压传感器在零点附近的漂移（比如 1Pa）会被开根号放大，导致流速读数在 0 和 3m/s 之间乱跳。这就是为什么低负荷工况下，烟气流速很难测准。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;热式质量流量计kings-law-金氏定律&#34;&gt;热式质量流量计：King&amp;rsquo;s Law (金氏定律)
&lt;/h3&gt;&lt;p&gt;这经常用来测 CEMS 采样流量或氨逃逸流量&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理公式：$$P = A + B \cdot v^{n}$$
&lt;ul&gt;
&lt;li&gt;(通常 $n \approx 0.5$)，即功率 $P$ 与流速的 $n$ 次方成正比。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;非线性特征：倒数敏感，它和皮托管正好相反&lt;/li&gt;
&lt;li&gt;模型思维： “风冷效应”
&lt;ul&gt;
&lt;li&gt;低速区： 就像你出汗时吹微风，稍微有一点风，冷却效果就特别明显。（灵敏度极高）&lt;/li&gt;
&lt;li&gt;高速区： 当风速已经很大了，再大的风，带走热量的能力增加得也很有限。（灵敏度下降）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;应用启示：如果你要测微小泄漏或者微小流量，选热式（它对小流量敏感）；如果你要测台风，选皮托管（它对大流量敏感）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ph-计-脱硫废水湿法脱硫对数模型&#34;&gt;pH 计 (脱硫废水/湿法脱硫)：对数模型
&lt;/h3&gt;&lt;p&gt;这和氧化锆比较相似&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理公式：
&lt;ul&gt;
&lt;li&gt;$$E = E_0 - S \cdot \log[H^+]$$&lt;/li&gt;
&lt;li&gt;$$pH = -\log[H^+]$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;非线性特征：pH 每变化 1 个单位，氢离子浓度 $[H^+]$ 变化 10 倍。&lt;/li&gt;
&lt;li&gt;模型思维： “数量级压缩”
&lt;ul&gt;
&lt;li&gt;pH 6 变到 pH 7，我们需要中和掉的酸，是 pH 7 变到 pH 8 的 10 倍。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;光并不是随浓度线性减少的，而是按百分比衰减的&lt;/strong&gt;。这是一个典型的非线性控制难题。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>O形圈沟槽</title>
        <link>https://teaize.github.io/p/o%E5%BD%A2%E5%9C%88%E6%B2%9F%E6%A7%BD/</link>
        <pubDate>Thu, 04 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/o%E5%BD%A2%E5%9C%88%E6%B2%9F%E6%A7%BD/</guid>
        <description>&lt;p&gt;复习到这张卡片时产生的疑问和想法，为什么建议 O 形圈沟槽填充率最大不超过 85%？&lt;/p&gt;
&lt;p&gt;$$\text{填充率} = \frac{\text{O形圈截面面积}}{\text{沟槽截面面积}} \times 100%$$&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251204204859.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251204204859.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;橡胶不可压缩&#34;&gt;橡胶不可压缩
&lt;/h3&gt;&lt;p&gt;这里有一个直觉误区，很多人认为橡胶像海绵，压一压体积就变小了。&lt;strong&gt;但橡胶在宏观上是不可压缩的液体&lt;/strong&gt;[^1]（泊松比 $\approx 0.5$）。你压扁它，它必须向旁边鼓出来。体积恒定，只是形状改变。&lt;/p&gt;
&lt;p&gt;如果你设计的沟槽填充率达到了 100%（即橡胶体积 = 沟槽体积），当两个金属面合拢时，橡胶无处可去。 这时候，O 形圈就不再是密封件，而变成了一个&lt;strong&gt;液压千斤顶&lt;/strong&gt;。它会产生巨大的反作用力，导致法兰变形，或者 O 形圈自己被挤出缝隙切碎。 留出的 15% 空间，是给橡胶变形流动的“避难所”&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：这里指的“液体”，并非指它的物态是流动的，而是指它在力学行为上符合液体的特征。初中学的帕斯卡定律“&lt;strong&gt;加在密闭液体上的压强，能够大小不变地向各个方向传递&lt;/strong&gt;”，O 形圈就是这么工作的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当你拧紧法兰，或者流体压力施加在 O 形圈一侧时，O 形圈内部的压力会像水一样传递。&lt;/li&gt;
&lt;li&gt;输入压力 = 接触面压力。&lt;/li&gt;
&lt;li&gt;它会把自己承受的压力，1:1 地传递给沟槽壁。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果橡胶是普通固体（像木头），你压它的一侧，它另一侧可能根本没反应，这就没法密封了。正因为它是“液体”，它才能把系统压力转化为密封接触力，形成自紧式密封&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;热膨胀&#34;&gt;热膨胀
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;物理现象： 橡胶的热膨胀系数远大于金属（钢或铝）。通常橡胶的 CTE 是钢的 10 倍到 15 倍。&lt;/li&gt;
&lt;li&gt;场景推演： 假设你在 20℃ 装配好设备，沟槽填满了 98%。 当设备运行到 100℃ 时，钢槽没怎么变大，但橡胶体积膨胀了。 由于没有空隙（&amp;lt; 2%），膨胀的橡胶会产生极高的&lt;strong&gt;内压&lt;/strong&gt;。这种内压会导致密封失效，或者产生巨大的摩擦力（对于动密封）。&lt;/li&gt;
&lt;li&gt;85% 的含义： 这预留的空间是为了容纳高温下橡胶相对于金属多出来的那些体积。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;化学溶胀&#34;&gt;化学溶胀
&lt;/h3&gt;&lt;p&gt;此外，与 O 形圈热膨胀类型，O 形圈在接触介质（油、酸、气）时，可能也会发生&lt;strong&gt;溶胀&lt;/strong&gt;。
即使是“兼容”的材料（例如 氟橡胶 Viton 在 汽油 中），也允许有 5%~15% 的体积膨胀。这在材料手册里是合格的。85% 的上限，也预留了“化学反应溶胀”的余量。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>自紧密封</title>
        <link>https://teaize.github.io/p/%E8%87%AA%E7%B4%A7%E5%AF%86%E5%B0%81/</link>
        <pubDate>Thu, 04 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%87%AA%E7%B4%A7%E5%AF%86%E5%B0%81/</guid>
        <description>&lt;p&gt;继上篇 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/o%E5%BD%A2%E5%9C%88%E6%B2%9F%E6%A7%BD/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;O形圈沟槽&lt;/a&gt; 所说的帕斯卡定律，为什么 O 形圈可以实现自紧密封&lt;/p&gt;
&lt;h3 id=&#34;o-形圈自紧原理&#34;&gt;O 形圈自紧原理
&lt;/h3&gt;&lt;p&gt;如果我们把橡胶看作普通固体（比如软木垫片），要密封 10MPa 的气体压力，你的螺栓必须提供大于 10MPa 的压紧力。一旦螺栓松了一点，压力大于压紧力，密封就失效了。&lt;/p&gt;
&lt;p&gt;但在&lt;strong&gt;帕斯卡定律&lt;/strong&gt;的加持下，O 形圈便“活”了起来：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;初始状态（压力为 0）： 你安装好 O 形圈，给它一个初始压缩量（比如 20%）。此时，橡胶依靠自身的弹性（固体属性），产生了一个初始接触压力 $P_{init}$（例如 2MPa）。 此时：密封能力 = 2MPa。&lt;/li&gt;
&lt;li&gt;工作状态（系统压力 $P_{sys}$ = 10MPa）：高压气体进入沟槽，推挤 O 形圈。 帕斯卡定律生效： O 形圈作为“液体”，忠实地传递了这个 10MPa 的压力。它把这个压力叠加到了密封面上。
&lt;ul&gt;
&lt;li&gt;$$P_{final} = P_{init} + P_{sys}$$&lt;/li&gt;
&lt;li&gt;$$P_{final} = 2MPa + 10MPa = 12MPa$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;结论： 接触压力（12MPa） &amp;gt; 系统压力（10MPa）。 无论系统压力怎么升高，密封面的反作用力永远比它高出一个 $P_{init}$。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;这就是自紧：压力越大，封得越紧。&lt;/strong&gt; 你不需要用巨大的螺栓去对抗 10MPa，你只需要提供那微不足道的 2MPa 初始压力，剩下的力气，是流体自己“帮”你封住的。&lt;/p&gt;
&lt;h3 id=&#34;与垫片密封的区别&#34;&gt;与垫片密封的区别
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;垫片
&lt;ul&gt;
&lt;li&gt;对象：紫铜垫、石棉垫、聚四氟乙烯（PTFE）。&lt;/li&gt;
&lt;li&gt;物理模型：&lt;strong&gt;塑性变形&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;操作：拼命拧螺栓。 必须要让法兰变形，死死压住垫片。螺栓力就是一切。&lt;/li&gt;
&lt;li&gt;缺点：震动导致螺栓松动后，立马泄漏。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;O 形圈
&lt;ul&gt;
&lt;li&gt;对象：橡胶、全氟醚。&lt;/li&gt;
&lt;li&gt;物理模型：&lt;strong&gt;帕斯卡传压&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;操作：金对金接触 。螺栓拧紧是为了让两个金属法兰面贴合，而不是为了压扁 O 形圈。O 形圈的压缩量是由沟槽深度锁死的（设计好的）。&lt;/li&gt;
&lt;li&gt;优点：螺栓即便微量松动，只要金属面不分开太多，流体压力依然会让 O 形圈膨胀补偿，维持密封。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;副作用间隙挤出&#34;&gt;“副作用”间隙挤出
&lt;/h3&gt;&lt;p&gt;当然，既然它是“液体”，在高压下，它就会像水一样，试图从哪怕最细微的缝隙里“射”出去。这就是为什么高压（&amp;gt;10MPa）密封设计中，配合公差 比 表面光洁度 更重要。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;场景： 法兰面没对齐，留了 0.2mm 的缝隙。&lt;/li&gt;
&lt;li&gt;低压时： 它是固体，没事。&lt;/li&gt;
&lt;li&gt;高压时： 帕斯卡定律让它变成了高压水流。橡胶会被“挤”进这 0.2mm 的缝隙里，像削土豆皮一样被金属边缘切掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;解决办法： 既然它是液体，堵不住缝隙，那就加一个挡圈。挡圈通常是硬质特氟龙或 PEEK，它更像固体，用来堵住缝隙，让柔软的橡胶安心做它的“液体工作”。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>关于NPD的情绪倾倒行为</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8Enpd%E7%9A%84%E6%83%85%E7%BB%AA%E5%80%BE%E5%80%92%E8%A1%8C%E4%B8%BA/</link>
        <pubDate>Wed, 03 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8Enpd%E7%9A%84%E6%83%85%E7%BB%AA%E5%80%BE%E5%80%92%E8%A1%8C%E4%B8%BA/</guid>
        <description>&lt;p&gt;和亲密的人接触久了，非常明显的就能区别正常抱怨与 NPD 式抱怨：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;正常人： 抱怨是为了寻求建议或情感支持，说完后情绪会缓解，也会关心对方的感受。&lt;/li&gt;
&lt;li&gt;NPD： 抱怨是单向的、无休止的，不寻求解决方案（如果你给建议他们反而会生气），并且完全无视这对听众造成的心理负担。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;之前听到 Ta 给我抱怨 Ta 生活、工作中遇到的琐事，我会尽量安慰、提出一些我觉得可能有用的缓解方式、或者从 Ta 所认为的施暴者角度分析为什么会这么做。结果换来的结局是，Ta 认为我怎么帮着“施暴者”说话。
慢慢地，我意识到 Ta 向我抱怨时，我只能顺着 Ta 的想法给 Ta 回复，Ta 觉得 A 有问题，那我就绝对不能说“A 其实也没有怎么怎么样”。否则，Ta 与 A 之间的矛盾，会立刻马上转到 Ta 和你之间的矛盾。&lt;/p&gt;
&lt;p&gt;接触的越多，越觉得 Ta 将自己当作情绪垃圾桶，身边随便一点小事，都会向你抱怨个没完，要么表现出一种极度厌世和烦躁的行为。&lt;/p&gt;
&lt;p&gt;这种情绪倾倒（Emotional Dumping）的行为，主要目的是什么呢：&lt;/p&gt;
&lt;h3 id=&#34;把你当作情绪垃圾桶外部调节机制&#34;&gt;把你当作“情绪垃圾桶”（外部调节机制）
&lt;/h3&gt;&lt;p&gt;NPD 患者通常缺乏自我调节负面情绪的能力。当他们感到羞耻、挫败、焦虑或空虚时，他们无法内部消化这些感受。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;机制： 他们需要一个外部容器来承载这些“坏情绪”。亲密伴侣作为最安全、最近的人，就成了这个容器。&lt;/li&gt;
&lt;li&gt;表现： 他们会把在外面受到的气（比如交通堵塞、同事的一句话、天气的变化）夸大，并不停地向你抱怨。一旦他们把这些负能量“倒”给了你，看着你变得焦虑、担忧或心情低落，他们自己反而会觉得轻松了。这是一种“痛苦转移”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;索取自恋供应即使是负面的&#34;&gt;索取“自恋供应”（即使是负面的）
&lt;/h3&gt;&lt;p&gt;NPD 的核心需求是关注（自恋供应）。&lt;strong&gt;关注不一定非要是赞美，同情、安抚，甚至是伴侣的惊慌失措，都是一种“供应”&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;受害者叙事： 通过抱怨琐事，他们把自己塑造成一个“被生活亏待的受害者”。潜台词是：“你看我多不容易，全世界都在针对我，你必须关注我、心疼我、哄我。”&lt;/li&gt;
&lt;li&gt;测试忠诚度： 他们通过这种令人窒息的负能量来测试你的底线：你是否愿意为了我忍受这些垃圾情绪？如果你忍受了，就证明我在你心中是至高无上的。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;投射与逃避责任&#34;&gt;投射与逃避责任
&lt;/h3&gt;&lt;p&gt;NPD 内心深处往往有着深刻的空虚感和自我厌恶。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;投射： 他们无法接受自己内心的“坏”，所以把这种“坏”投射到外部世界。如果你觉得他们烦躁、厌世，那是因为他们内心就是混乱的。&lt;/li&gt;
&lt;li&gt;推卸责任： 如果生活不顺，绝对不是他们无能，而是“这个世界太烂了”、“周围的人太蠢了”。&lt;strong&gt;抱怨琐事是他们维护全能感、避免面对自身缺陷的一种方式&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;如何防御&#34;&gt;如何防御
&lt;/h3&gt;&lt;p&gt;对于 NPD 制造的这种双重束缚：你不关心，你是冷血；你关心，你就是情绪垃圾桶。核心策略不是“对抗”或“完全冷漠”，而是“温和的情绪抽离”。你的目标不是解决 Ta 的问题（因为那些问题通常解决不完），而是保护你的能量场。下面是一些防御策略，或者称之为“有礼貌的敷衍”。&lt;/p&gt;
&lt;h4 id=&#34;核心心法不要做海绵要做雨衣&#34;&gt;核心心法：不要做“海绵”，要做“雨衣”
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;海绵模式： 把 Ta 的情绪全都吸进来，感同身受，试图帮他分析、解决。结果你湿透了，Ta 干了。&lt;/li&gt;
&lt;li&gt;雨衣模式： 水（抱怨）打在你身上，你看见了，听到了，但让水直接滑走，不渗透进你的内心。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;战术动作改良版灰岩法&#34;&gt;战术动作：改良版“灰岩法”
&lt;/h4&gt;&lt;p&gt;面对抱怨，彻底不理睬会引发暴怒，所以你需要给出反应，但必须是“低质量的反应”&lt;/p&gt;
&lt;p&gt;话术公式： “肯定情绪” + “不仅过脑子” + “不给建议/不提问”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;错误回应（高能量）： “天哪怎么会这样？这也太过分了！那你打算怎么办？要不要我帮你……”（这给了他极大的自恋供应）。&lt;/li&gt;
&lt;li&gt;错误回应（冷漠）： “这点小事有什么好说的。”（这会引发争吵）。&lt;/li&gt;
&lt;li&gt;正确回应（灰岩/雨衣）：
&lt;ul&gt;
&lt;li&gt;“嗯，确实挺让人心烦的。”&lt;/li&gt;
&lt;li&gt;“是啊，这事儿哪怕搁谁身上都不好受。”&lt;/li&gt;
&lt;li&gt;“噢，原来是这样。哎。”&lt;/li&gt;
&lt;li&gt;“听起来今天确实不顺。”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;重点: &lt;strong&gt;你的回应要像是一个没有感情的客服机器人&lt;/strong&gt;。你有礼貌，有回应，但是&lt;strong&gt;没有任何情绪波澜&lt;/strong&gt;。当 Ta 发现无论怎么抱怨都只能换来这些枯燥的“嗯嗯啊啊”，Ta 从你这里获得的“情绪快感”就会减少，久而久之可能会觉得没劲，从而减少找你抱怨的频率。&lt;/p&gt;
&lt;h4 id=&#34;切断供能不要提供解决方案&#34;&gt;切断供能：不要提供解决方案
&lt;/h4&gt;&lt;p&gt;NPD 抱怨时，最忌讳的就是你给他提建议。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果你说：“那你下次早点出门就不堵车了。”&lt;/li&gt;
&lt;li&gt;他会听到：“你在指责我做错了。”&lt;/li&gt;
&lt;li&gt;防御策略： 无论他说什么，&lt;strong&gt;千万别试图通过逻辑帮他解决问题&lt;/strong&gt;。只要点头说是即可。他要的不是答案，而是你的情绪起伏。&lt;strong&gt;你不给建议，你就不会卷入辩论。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;心理建设把-ta幼体化&#34;&gt;心理建设：把 Ta“幼体化”
&lt;/h4&gt;&lt;p&gt;当他开始狂躁、抱怨琐事时，如果你把他看作一个成年伴侣，你会觉得失望和愤怒。 试着在心里把他想象成一个“穿着大人衣服的 3 岁小孩”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;小孩摔倒了哭闹，你会觉得他坏吗？不会，你只会觉得“他又失控了”。&lt;/li&gt;
&lt;li&gt;这种&lt;strong&gt;临床视角的抽离&lt;/strong&gt;能帮你保持冷静。你在心里看着他表演，心想：“哦，自恋型人格障碍的症状又发作了，真的很典型。”而不是想：“他为什么要折磨我？”&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;小结&#34;&gt;小结
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;“即使是关心，也是有限度的资源。”&lt;/strong&gt; 面对 NPD 的抱怨，最好的防御就是&lt;strong&gt;不再把他的情绪当作你的责任&lt;/strong&gt;。保持礼貌，但要在内心竖起一道玻璃墙：他在墙那边狂风暴雨，你在墙这边看着，仅仅是看着而已。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>取样泵调节流量</title>
        <link>https://teaize.github.io/p/%E5%8F%96%E6%A0%B7%E6%B3%B5%E8%B0%83%E8%8A%82%E6%B5%81%E9%87%8F/</link>
        <pubDate>Wed, 03 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8F%96%E6%A0%B7%E6%B3%B5%E8%B0%83%E8%8A%82%E6%B5%81%E9%87%8F/</guid>
        <description>&lt;p&gt;两种方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在输出端串联节流阀（出口节流）&lt;/li&gt;
&lt;li&gt;在吸入和排出间并联节流阀（旁路调节/回流调节）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;在输出端串联节流阀出口节流&#34;&gt;在输出端串联节流阀（出口节流）
&lt;/h3&gt;&lt;p&gt;能用，但“伤身体”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理模型： 增加阻抗（Impedance Increase）。&lt;/li&gt;
&lt;li&gt;原理： 你通过关小阀门，人为地在泵的出口增加了一个巨大的阻力（背压）。泵必须花费更大的力气去克服这个阻力才能把气推出去。&lt;/li&gt;
&lt;li&gt;对 CEMS 取样泵（隔膜泵）的影响：
&lt;ul&gt;
&lt;li&gt;高压风险： 隔膜泵属于&lt;strong&gt;容积式泵&lt;/strong&gt;。它的特点是“给多少空间挤多少气”，它性格很“轴”，遇到阻力不会自动停，只会拼命挤。&lt;/li&gt;
&lt;li&gt;后果： 出口节流会导致泵腔内压力剧增。长期这样运行，隔膜容易疲劳破裂，连杆轴承负荷变大，电机发热。&lt;/li&gt;
&lt;li&gt;适用场景： 这种调节方式通常只适用于离心泵/风机（离心式遇到阻力流量会自动下降，负载反而变小），&lt;strong&gt;非常不建议用于 CEMS 的隔膜取样泵&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;在吸入和排出间并联节流阀旁路调节回流调节&#34;&gt;在吸入和排出间并联节流阀（旁路调节/回流调节）
&lt;/h3&gt;&lt;p&gt;更加专业，这是标准做法。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理模型： 分流模型（Shunt / Bypass）。&lt;/li&gt;
&lt;li&gt;原理： 这就像给泵开了一个“后门”。泵打出来的气，一部分去了分析仪，另一部分通过这个旁路阀流回了泵的入口。
&lt;ul&gt;
&lt;li&gt;想要流量小一点？就把旁路阀开大一点（让更多气体“空转”）。&lt;/li&gt;
&lt;li&gt;想要流量大一点？就把旁路阀关小一点。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;对 CEMS 取样泵的影响：
&lt;ul&gt;
&lt;li&gt;恒压运行： 泵始终在一个相对舒适、固定的压力下工作，不会因为你调节流量而感受到巨大的背压变化。&lt;/li&gt;
&lt;li&gt;寿命保护： 避免了“憋压”，保护了隔膜和电机。&lt;/li&gt;
&lt;li&gt;调节线性度： 这种方式调节起来更柔和，流量控制更精准。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CEMS 中采用旁路调节的方法比较多&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;核心原因： CEMS 的分析仪通常只需要较小的流量（例如 1L/min），但为了保证响应速度（快点把气抽过来），我们选的泵往往是 3L/min 甚至 5L/min 的大泵。&lt;/li&gt;
&lt;li&gt;策略： 必须把多余的 4L/min 排掉。
&lt;ul&gt;
&lt;li&gt;如果用方法 1（堵住）：泵会发烫，震动剧烈。&lt;/li&gt;
&lt;li&gt;如果用方法 2（回流）：多余的气体在泵头内部或者外部管路循环，泵运行很轻松。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>共模干扰</title>
        <link>https://teaize.github.io/p/%E5%85%B1%E6%A8%A1%E5%B9%B2%E6%89%B0/</link>
        <pubDate>Tue, 02 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B1%E6%A8%A1%E5%B9%B2%E6%89%B0/</guid>
        <description>&lt;h3 id=&#34;核心模型海浪与船直观理解&#34;&gt;核心模型：海浪与船（直观理解）
&lt;/h3&gt;&lt;p&gt;想象你正在海边测量两艘船的高度差。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;信号（你要测的东西）： A 船比 B 船高出多少（比如 A 船上站了一个人，B 船是空的）。&lt;/li&gt;
&lt;li&gt;干扰（噪声）： 大海的潮汐和海浪。&lt;/li&gt;
&lt;li&gt;情况一：差模干扰（Differential Mode） 如果一个浪打过来，只把 A 船打翻了，或者把 A 船抬高了，而 B 船没动。 -&amp;gt; 这时候你测出来的高度差就乱了。这种“你变他不变”的干扰，叫差模干扰。&lt;/li&gt;
&lt;li&gt;情况二：共模干扰（Common Mode） 如果涨潮了，或者一个巨大的涌浪过来，A 船和 B 船同时被抬高了 1 米。 -&amp;gt; 虽然两艘船的绝对海拔都变了，但它们之间的相对高度差（A - B）其实没变。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就是共模干扰：作用在两根信号线上，幅度相同、相位相同（方向一致）的干扰信号。 它是“共同”拥有的干扰。&lt;/p&gt;
&lt;h3 id=&#34;电路模型数学视角&#34;&gt;电路模型：数学视角
&lt;/h3&gt;&lt;p&gt;在仪表设计中，我们通常用两根线传输信号（信号线 + 地线，或者 信号线 A+ 信号线 B）。&lt;/p&gt;
&lt;p&gt;假设：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$S$ 是我们想要的真实信号（Signal）。&lt;/li&gt;
&lt;li&gt;$N$ 是外界进来的噪声（Noise）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;共模干扰的数学表达：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;线路 1 的电压： $V_1 = S + N$ （信号 + 噪声）&lt;/li&gt;
&lt;li&gt;线路 2 的电压： $V_2 = 0 + N$ （参考地/负端 + 同样的噪声）&lt;/li&gt;
&lt;li&gt;如果你用单端测量（只看 $V_1$ 对大地的电压）：你读到的结果是 $S + N$。干扰成功入侵了，数据不仅包含信号，还包含噪声。&lt;/li&gt;
&lt;li&gt;如果你用差分测量（Differential）（看 $V_1$ 和 $V_2$ 的差值）：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$输出 = V_1 - V_2 = (S + N) - (0 + N) = S$$&lt;/p&gt;
&lt;p&gt;神奇的事情发生了： $N$（噪声）被数学减法消掉了。这就是“差分设计思想”的威力——通过结构设计，让干扰变成“共模”，然后通过相减把它杀掉。&lt;/p&gt;
&lt;h3 id=&#34;cems-现场的共模干扰来源&#34;&gt;CEMS 现场的共模干扰来源
&lt;/h3&gt;&lt;h4 id=&#34;1地电位差ground-loop&#34;&gt;1、地电位差（Ground Loop）
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;场景： CEMS 分析仪在控制室，采样探头在几十米外的烟囱上。&lt;/li&gt;
&lt;li&gt;现象： 烟囱的金属架虽然接了地，控制室机柜也接了地。但因为距离远，两点的“地”之间可能存在几伏甚至几十伏的电压差（尤其是在大电机启动瞬间）。&lt;/li&gt;
&lt;li&gt;结果： 这个电压差会同时叠加在你的信号线和回路上，形成巨大的共模电压。如果不处理，轻则数据乱跳，重则烧毁端口。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2空间电磁感应&#34;&gt;2、空间电磁感应
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;场景： 你的信号线旁边并行铺设了一根 380V 的大功率动力电缆。&lt;/li&gt;
&lt;li&gt;现象： 动力电缆产生的交变磁场，会在你的两根信号线上同时感应出 50Hz 的交流电压。&lt;/li&gt;
&lt;li&gt;结果： 这是一个典型的共模噪声，两根线都在“抖”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;如何在设计中对付它&#34;&gt;如何在设计中对付它
&lt;/h3&gt;&lt;p&gt;如何对付共模干扰呢：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“不让它进来” —— 双绞线
&lt;ul&gt;
&lt;li&gt;原理： 把两根信号线像麻花一样拧在一起。&lt;/li&gt;
&lt;li&gt;效果： 这样保证了外界磁场穿过两根线的面积几乎相等，感应出的噪声电压 $N$ 也就几乎相等。只要 $N$ 相等，它就是标准的共模干扰，容易被后级电路滤除。 如果不绞合，一根线离干扰源近，一根远，那就变成难搞的差模干扰了。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;“关门打狗” —— 差分放大器/仪表放大器
&lt;ul&gt;
&lt;li&gt;原理： 使用具有高共模抑制比的运放芯片。&lt;/li&gt;
&lt;li&gt;效果：这种芯片天生只放大差值（$A-B$），对共模值（$A$ 和 $B$ 的平均值）视而不见。CEMS 里的微弱信号（如电化学传感器、热电偶）必须进这种放大器。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;“物理隔离” —— 隔离变压器/光耦隔离
&lt;ul&gt;
&lt;li&gt;原理： 直接切断导线连接。用光或磁来传信号。&lt;/li&gt;
&lt;li&gt;效果： 这是对付地电位差的终极武器。既然两边的“地”打架，我就把路断开，让信号“飞”过去。CEMS 的模拟量输出（4-20mA）通常都要求带光电隔离，就是为了防止 DCS 系统的地干扰反噬分析仪。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;共模干扰不可怕，可怕的是把共模变成了差模&lt;/strong&gt;。在设计仪表时，我们的核心任务之一，需尽可能保证干扰在两根线上是“对称”的（比如走线长度一样、阻抗匹配一样、双绞紧密），这样它就是&lt;strong&gt;纯净的共模干扰&lt;/strong&gt;，然后交给后端的&lt;strong&gt;差分放大器&lt;/strong&gt;一口吃掉它。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>间接测量之干湿氧法</title>
        <link>https://teaize.github.io/p/%E9%97%B4%E6%8E%A5%E6%B5%8B%E9%87%8F%E4%B9%8B%E5%B9%B2%E6%B9%BF%E6%B0%A7%E6%B3%95/</link>
        <pubDate>Tue, 02 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E9%97%B4%E6%8E%A5%E6%B5%8B%E9%87%8F%E4%B9%8B%E5%B9%B2%E6%B9%BF%E6%B0%A7%E6%B3%95/</guid>
        <description>&lt;p&gt;继 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E5%B9%B2%E6%B9%BF%E6%B0%A7%E5%B7%AE%E5%87%8F%E6%B3%95/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;干湿氧差减法&lt;/a&gt; 后的想法，这种醉翁之意不在酒的工程思维，这种设计美感，值得进一步学习！&lt;/p&gt;
&lt;h3 id=&#34;1侧面迂回间接测量思维&#34;&gt;1、侧面迂回：间接测量思维
&lt;/h3&gt;&lt;p&gt;当直接测量目标（水分子）很难、很贵或者不准时，我们寻找一个&lt;strong&gt;与目标有强数学关联&lt;/strong&gt;的容易测量的“代理变量”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;思维逻辑： “我不直接抓嫌疑人，我通过监控他身边形影不离的伙伴来锁定他。”&lt;/li&gt;
&lt;li&gt;在本例中：
&lt;ul&gt;
&lt;li&gt;直接测量水： 需要阻容法或激光法，成本高，且高温下容易损坏。&lt;/li&gt;
&lt;li&gt;间接测量氧： 氧化锆氧量计极其成熟、耐高温、便宜。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;本质： 利用&lt;strong&gt;相关性&lt;/strong&gt;替代&lt;strong&gt;直接性&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2稀释挤占效应思维-dilutiondisplacement-effect&#34;&gt;2、稀释/挤占效应思维 (Dilution/Displacement Effect)
&lt;/h3&gt;&lt;p&gt;这才是干湿氧法最底层的物理逻辑。这是一种“总量守恒下的占比分析”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;模型解释：想象一个电梯（单位体积的气体），里面只能装 100 个人（分子）。
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;状态 A（湿）：&lt;/strong&gt; 里面混进了几个胖子（水分子），导致瘦子（氧分子）被挤得只剩 10 个了（浓度 10%）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态 B（干）：&lt;/strong&gt; 把胖子（水分子）赶出去。因为电梯空间是固定的，瘦子们分散开了，或者更多的瘦子补进来填补空缺，这时候数一数，瘦子变成了 12 个（浓度 12%）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;计算逻辑：
&lt;ul&gt;
&lt;li&gt;既然瘦子（氧气）的总量没变，仅仅是因为空间被胖子（水）挤占了。那么通过瘦子浓度的变化率，就能反推出胖子占了多大地方。
&lt;ul&gt;
&lt;li&gt;$$C_{wet} = C_{dry} \times (1 - H_{2}O%)$$&lt;/li&gt;
&lt;li&gt;$$H_{2}O% = 1 - \frac{O_{2, wet}}{O_{2, dry}}$$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;这种思维的威力： 只要你能制造出“有它”和“没它”两种状态，利用归一化（Normalization）原理，就能算出它。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3差分状态对比思维-differential-state-comparison&#34;&gt;3、差分状态对比思维 (Differential State Comparison)
&lt;/h3&gt;&lt;p&gt;如 [[如何训练工程系统思维]] 中所说的，这里也算是利用“两次测量，一次计算”逻辑的变体&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;通常的差分是：信号 - 本底&lt;/li&gt;
&lt;li&gt;这里的差分是：状态 A（含水） vs 状态 B（脱水）。 这种思维不再依赖传感器的绝对准确度（虽然氧传感器要准），它更依赖于物理过程（脱水）的彻底性。只要前处理系统把水除干净了，这个数学逻辑就没有问题。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4小结&#34;&gt;4、小结
&lt;/h3&gt;&lt;p&gt;其实这种思维并不少见，例如阿基米德测皇冠体积，通过测排开水的体积来测量皇冠的总体积，这其实也是一种“挤占效应”；还有个例子和 &lt;a class=&#34;link&#34; href=&#34;https://teaize.github.io/p/%E5%B9%B2%E6%B9%BF%E6%B0%A7%E5%B7%AE%E5%87%8F%E6%B3%95/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;干湿氧差减法&lt;/a&gt; 的思想特别像：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;血液检查中的红细胞压积
&lt;ul&gt;
&lt;li&gt;现象： 当一个人严重脱水时，医生抽血化验，会发现他的血红蛋白浓度异常升高。&lt;/li&gt;
&lt;li&gt;逻辑： 血红蛋白总量没变，是血里的水少了（溶剂减少）。医生通过测量“溶质变浓了多少”，反推出你“缺了多少水”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;另外，虽然干湿氧法这种方法应用的很巧妙，但需要注意他的&lt;strong&gt;边界条件&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;分母陷阱： 公式是 $H_{2}O% = 1 - (O_{2, wet} / O_{2, dry})$。 如果氧含量极低（比如接近 0%），那么 $O_{2, wet}$ 和 $O_{2, dry}$ 都很小，传感器的一点点噪声会导致比值剧烈波动，计算出的水分数据会满天飞。
&lt;ul&gt;
&lt;li&gt;所以，这种方法并不适合低氧工况&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;假设前提：这种计算方法成立的前提是，除湿前和除湿后，气体中只是去除了水，并没有去除其他气体成分。如果预处理系统中使用了能吸附氧气的除湿剂，或者漏气导致氧气进入，计算公式将不再适用。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>如何训练工程系统思维</title>
        <link>https://teaize.github.io/p/%E5%A6%82%E4%BD%95%E8%AE%AD%E7%BB%83%E5%B7%A5%E7%A8%8B%E7%B3%BB%E7%BB%9F%E6%80%9D%E7%BB%B4/</link>
        <pubDate>Tue, 02 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%A6%82%E4%BD%95%E8%AE%AD%E7%BB%83%E5%B7%A5%E7%A8%8B%E7%B3%BB%E7%BB%9F%E6%80%9D%E7%BB%B4/</guid>
        <description>&lt;h3 id=&#34;第一步从what到why--逆向工程思维&#34;&gt;第一步：从“What”到“Why” —— 逆向工程思维
&lt;/h3&gt;&lt;p&gt;很多工程师看到一台高端进口仪表（比如西门子的 CEMS），看到的是“它有一个参比气室”。而设计思维要求你多问一步：“为什么它必须有这个气室？如果去掉它，哪条物理定律会惩罚这台机器？”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;练习方法：
&lt;ul&gt;
&lt;li&gt;看到任何一个奇怪的设计细节（比如一段弯曲的管路、一个多余的电容、一个看起来很多余的校准步骤），不要认为它是“惯例”。&lt;/li&gt;
&lt;li&gt;多问： “设计师在防御什么？”&lt;/li&gt;
&lt;li&gt;假设： “如果我把这个去掉，是在高温下会死？还是在零点漂移时会死？”&lt;/li&gt;
&lt;li&gt;结论： 一旦你找到了它防御的那个“敌人”（共模干扰、热传导、电磁噪声），你就掌握了一个模型。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第二步建立思维模型库--抽象化能力&#34;&gt;第二步：建立“思维模型库” —— 抽象化能力
&lt;/h3&gt;&lt;p&gt;所谓模型思维，就是把具体的物理问题，抽象成通用的数学或逻辑结构。当你不再把“温度补偿”看作是修温度的，而是看作“&lt;strong&gt;输入 - 输出修正模型&lt;/strong&gt;”时，你就会发现：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;修温度可以用这个公式。&lt;/li&gt;
&lt;li&gt;修压力可以用这个公式。&lt;/li&gt;
&lt;li&gt;甚至修“传感器老化导致的灵敏度下降”，本质上也是同一个数学模型（$y = kx + b$，其中 $k$ 和 $b$ 是随时间变化的函数）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你需要建立的核心模型库包括：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;黑盒模型： 任何器件都是 &lt;code&gt;输入 -&amp;gt; [传递函数 + 干扰] -&amp;gt; 输出&lt;/code&gt;。设计的目的就是最大化传递函数，最小化干扰。&lt;/li&gt;
&lt;li&gt;负反馈模型： 系统必须知道自己“错”了，才能改。所以必须有回路（闭环）。&lt;/li&gt;
&lt;li&gt;信噪比（SNR）模型： 世界上没有绝对精准，只有信号比噪声强多少。差分设计的本质就是压低分母（噪声）。&lt;/li&gt;
&lt;li&gt;冗余模型： 既然一定会坏，那就准备两套（无论是硬件冗余还是信息冗余）。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;第三步回到第一性原理--物理直觉&#34;&gt;第三步：回到“第一性原理” —— 物理直觉
&lt;/h3&gt;&lt;p&gt;所有的工程技巧，最终都服务于底层的物理定律。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;朗伯 - 比尔定律告诉我们要关注光强 $I$ 和路径 $L$。&lt;/li&gt;
&lt;li&gt;理想气体状态方程告诉我们要关注 $P$ 和 $T$。&lt;/li&gt;
&lt;li&gt;能斯特方程告诉我们氧化锆的电势与温度 $T$ 成正比。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;养成习惯： 在设计任何传感器应用时，把它的基础物理公式写在纸上，盯着公式里的每一个变量问自己：“这个变量在现场会变吗？如果变了，我怎么通过设计把它按住？”&lt;/p&gt;
&lt;h3 id=&#34;第四步极限思维--把工况推向无穷大&#34;&gt;第四步：极限思维 —— 把工况推向无穷大
&lt;/h3&gt;&lt;p&gt;这是发现设计漏洞的最好办法。在脑海里进行思想实验：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“如果环境温度变成了 $1000^\circ C$，我的设计哪里先挂？” -&amp;gt; 让你意识到热隔离的重要性。&lt;/li&gt;
&lt;li&gt;“如果信号线断了（阻抗无穷大），我的读数是几？” -&amp;gt; 让你意识到 Fail-Safe 设计的重要性。&lt;/li&gt;
&lt;li&gt;“如果背景气体全是水（100% 湿度），我的读数会偏多少？” -&amp;gt; 让你意识到交叉干扰补偿的重要性。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;案例pt100&#34;&gt;案例：PT100
&lt;/h2&gt;&lt;p&gt;工业用的 PT100 通常包含三根引线，网上看到的解释是第三根线上用来补偿的，但具体原理还没有研究过&lt;/p&gt;
&lt;h3 id=&#34;1问题模型为什么-2-根线不行&#34;&gt;1、问题模型：为什么 2 根线不行
&lt;/h3&gt;&lt;p&gt;PT100 的原理是电阻随温度变化（PT 表示铂、100 表示 $0^\circ C$ 时 $100\Omega$）。 CEMS 现场，探头在烟囱上，分析仪在小屋里，中间可能隔着十几米（例如 50m）长的电缆。&lt;/p&gt;
&lt;p&gt;2 线制的困境： 当我们用万用表或变送器测量电阻时，电流必须流个来回
$$R_{测量值} = R_{导线A} + R_{PT100} + R_{导线B}$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;误差来源： 铜导线是有电阻的。50 米长的截面积 $1.0mm^2$ 铜线，往返电阻约为 $1.7\Omega$。&lt;/li&gt;
&lt;li&gt;后果：PT100 的灵敏度约为 $0.385\Omega/^\circ C$。$$误差 = 1.7\Omega / 0.385 \approx 4.4^\circ C$$
也就是说，CEMS 读数会凭空高出 $4.4^\circ C$。而且这个误差是不固定的——夏天电缆热，电阻变大；冬天电缆冷，电阻变小。&lt;strong&gt;这种不可控的漂移是仪器的大忌&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2解决方案3-线制的数学减法&#34;&gt;2、解决方案：3 线制的“数学减法”
&lt;/h3&gt;&lt;p&gt;为了把 $R_{导线}$ 从公式里踢出去，工程师引入了第三根线。&lt;/p&gt;
&lt;p&gt;物理结构：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PT100 电阻的一端接 1 根线（设为线 A）。&lt;/li&gt;
&lt;li&gt;PT100 电阻的另一端接 2 根线（设为线 B 和 线 C）。&lt;/li&gt;
&lt;li&gt;关键假设： 我们默认这三根线是同一根电缆里的，长度一样、材质一样、温度环境一样，所以它们的电阻相等：$R_A = R_B = R_C = r$。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;补偿原理（电桥法/运算逻辑），现代仪表通常采用“两次测量，一次计算”的逻辑（或电桥平衡逻辑）：&lt;/p&gt;
&lt;p&gt;1、回路 1（测量回路）：电流从 线 A 流入，经过 $R_{PT100}$，从 线 B 流回。
$$阻值_1 = R_A + R_{PT100} + R_B = 2r + R_{PT100}$$
2、回路 2（补偿回路）： 电流从 线 B 流入，直接从 线 C 流回（因为 B 和 C 在探头根部是短接的，电流不经过 PT100）。
$$阻值_2 = R_B + R_C = 2r$$
3、最终计算： 仪表内部算法执行减法：
$$R_{真实} = 阻值_1 - 阻值_2$$
$$R_{真实} = (2r + R_{PT100}) - 2r = R_{PT100}$$
如此，导线电阻 $r$ 就被完美消除掉了。无论电缆是 10 米还是 100 米，无论夏天还是冬天，只要三根线变化一致，误差就会被自动扣除&lt;/p&gt;
</description>
        </item>
        <item>
        <title>仪表设计思想</title>
        <link>https://teaize.github.io/p/%E4%BB%AA%E8%A1%A8%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/</link>
        <pubDate>Tue, 02 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BB%AA%E8%A1%A8%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/</guid>
        <description>&lt;p&gt;继上篇的 [[参数化补偿]]，这里汇总了一些在仪表研发和系统集成中，除了“补偿”之外的一些指导思想。&lt;/p&gt;
&lt;h3 id=&#34;1差分设计思想differential-design&#34;&gt;1、差分设计思想（Differential Design）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心逻辑：&lt;/strong&gt; 不要只测“绝对值”，要测“差异值”。通过物理架构抵消&lt;strong&gt;共模干扰&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;在 CEMS 中，环境变化（光源波动、电源纹波、温度整体漂移）往往同时作用于所有通道。&lt;strong&gt;如果只看单路信号，很难分清是浓度变了还是灯泡暗了&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;典型应用：
&lt;ul&gt;
&lt;li&gt;参比光路（Reference Channel）： 比如非分散红外（NDIR）气体分析仪。设计两个探测器，一个前加滤光片只透过不被吸收的光（参比端），另一个透过被测气体吸收的光（测量端）。&lt;/li&gt;
&lt;li&gt;算法逻辑： 不是看测量端电压 $V_{meas}$ 多少，而是看 $V_{meas} / V_{ref}$ 的比值。&lt;/li&gt;
&lt;li&gt;价值： 光源亮度衰减了 50%，两个通道同时衰减，比值不变。这种物理层面的抵消，比软件补偿更底层、更可靠。&lt;/li&gt;
&lt;li&gt;CEMS（DOAS）： CEMS 中测 $SO_2$/$NO_x$ 的主流技术。它利用气体的窄带吸收（快变信号）和宽带散射（慢变信号）的差异，直接在频谱上把粉尘干扰（宽带）像剥洋葱一样剥离掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2闭环反馈与自动归零closed-loop--auto-zeroing&#34;&gt;2、闭环反馈与自动归零（Closed-loop &amp;amp; Auto-Zeroing）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心逻辑：&lt;/strong&gt; 仪器不能是“开环”的，它必须有一个不断回到原点的机制，以此来锚定测量的基准&lt;/p&gt;
&lt;p&gt;传感器最大的敌人是零点漂移。与其拼命制造不漂移的传感器，不如设计一套机制，让它每隔一段时间就“看一眼”什么是零。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;典型应用：
&lt;ul&gt;
&lt;li&gt;电磁阀切换： 几乎所有的 CEMS 分析仪内部都有电磁阀。每隔 4 小时或 24 小时，系统自动切断烟气，通入洁净空气（例如实现每 24h 自动校零一次）。&lt;/li&gt;
&lt;li&gt;动态调整： 此时读数如果不是 0（比如漂移到了 2ppm），系统自动将当前电压定义为新的“零点”。&lt;/li&gt;
&lt;li&gt;价值： 这种“分时复用”的设计思想，把长期的稳定性要求，降低为了“在两次自动校零间隔内稳定”即可。这极大降低了硬件设计难度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3失效安全与防御性设计fail-safe-design&#34;&gt;3、失效安全与防御性设计（Fail-Safe Design）
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心逻辑：&lt;/strong&gt; 假设系统一定会出故障，那么出故障时，必须停留在最安全的状态，而不是破坏性最大的状态。&lt;/p&gt;
&lt;p&gt;CEMS 涉及高温伴热和流体传输，一旦失控，后果往往是损坏昂贵的分析仪核心部件。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;典型应用：
&lt;ul&gt;
&lt;li&gt;伴热管线低温连锁： 这是一个经典的防御设计。采样探头或管线温度如果低于设定值（如 120℃），必须强制停运采样泵。&lt;/li&gt;
&lt;li&gt;为什么？ 因为温度不够会导致 $SO_2$ 和水结合成亚硫酸/硫酸，不仅腐蚀管路，液态水进入分析仪气室会直接导致传感器报废。&lt;/li&gt;
&lt;li&gt;信号输出： 4-20mA 输出设计中，2mA 通常代表“故障”，0mA 代表“断电/断线”。不能让故障表现为“0 浓度”，误导环保部门以为排放达标。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4模块化解耦与热隔离decoupling--isolation&#34;&gt;4、模块化解耦与热隔离（Decoupling &amp;amp; Isolation）
&lt;/h3&gt;&lt;p&gt;核心逻辑： 将相互影响的物理量在空间上隔绝，让每个模块只处理单纯的任务。&lt;/p&gt;
&lt;p&gt;在仪表设计中，最怕“热 - 电 - 气”混杂在一起互相打架。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;典型应用：
&lt;ul&gt;
&lt;li&gt;气电分离（Gas-Electronics Separation）： 优秀的分析仪机箱设计，&lt;strong&gt;气路部分（易漏气、有腐蚀性）和电路部分（怕腐蚀、怕热）是严格分仓的&lt;/strong&gt;，中间通过密封隔板隔开。&lt;/li&gt;
&lt;li&gt;热隔离： 高温紫外分析仪的气室需要加热到 180℃以上，但光纤光谱仪和电路板只能承受 50℃。设计中会使用气凝胶隔热层、独立的散热风道，或者半导体制冷片制冷，确保“火热的心（气室）”和“冷静的头脑（电路）”互不干扰。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;p&gt;在设计一款仪表时，我们可以按这个层级思考：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;架构层（差分设计）： 能用物理结构抵消的误差，绝不用算法去算。&lt;/li&gt;
&lt;li&gt;流程层（闭环归零）： 利用时间换空间，通过频繁校准来维持精度。&lt;/li&gt;
&lt;li&gt;算法层（参数化补偿）： 既然规律可循，就用数学模型把剩余的误差修补回来。&lt;/li&gt;
&lt;li&gt;安全层（Fail-Safe）： 守住底线，保护核心器件不被次生灾害损坏。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>状态机</title>
        <link>https://teaize.github.io/p/%E7%8A%B6%E6%80%81%E6%9C%BA/</link>
        <pubDate>Tue, 02 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%8A%B6%E6%80%81%E6%9C%BA/</guid>
        <description>&lt;p&gt;由一张卡片带来的思考，芯片有睡眠、待机、停机、运算等不同的状态，仪表有“校零/预热/测量/吹扫”等状态，本质上都是&lt;strong&gt;有限状态机&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251202200206.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251202200206.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;状态机的概念&#34;&gt;状态机的概念
&lt;/h3&gt;&lt;p&gt;“状态机”（Finite State Machine, FSM） 是逻辑控制中的一种数学模型。它的第一性原理是：&lt;strong&gt;系统在任何一个时刻，只能处于一种特定的状态中&lt;/strong&gt;。 它不能既是 A 又是 B。&lt;/p&gt;
&lt;p&gt;想象一个人：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;状态 A：睡觉。 (此时如果你听到闹钟响 -&amp;gt; 这是一个事件/输入)&lt;/li&gt;
&lt;li&gt;动作： 起床。&lt;/li&gt;
&lt;li&gt;状态 B：清醒。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就是一个最简单的状态机。 如果没有状态机思维，你可能会写出这样的逻辑：“我正在睡觉，同时我在跑步”。这在逻辑上是崩溃的。&lt;/p&gt;
&lt;h3 id=&#34;状态机的四大要素&#34;&gt;状态机的四大要素
&lt;/h3&gt;&lt;p&gt;要描述一个状态机，需要定义清楚这四个东西，以 CMES 仪表为例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;现态 (Current State)： 你现在在哪？（例如：测量中）&lt;/li&gt;
&lt;li&gt;条件/事件 (Condition/Event)： 发生了什么事？（例如：收到校准指令 或 定时器时间到）&lt;/li&gt;
&lt;li&gt;动作 (Action)： 你要干什么？（例如：切电磁阀、冻结数据）&lt;/li&gt;
&lt;li&gt;次态 (Next State)： 做完动作后，你变成了什么？（例如：变成“校准中”）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;有限状态机思维-finite-state-machine-fsm&#34;&gt;有限状态机思维 (Finite State Machine, FSM)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;核心思想： 系统不是一个连续混沌的过程，而是由若干个&lt;strong&gt;离散的、定义明确的状态&lt;/strong&gt; 组成的。&lt;/li&gt;
&lt;li&gt;设计哲学：&lt;strong&gt;各司其职，互不干扰。&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;在 CEMS 中的应用：
&lt;ul&gt;
&lt;li&gt;预热状态 ： 此时系统的唯一任务是“热起来”。策略： 全功率开启加热器，但禁止开启采样泵（防止冷凝水抽入气室，类似芯片的软启动保护）。&lt;/li&gt;
&lt;li&gt;校零状态： 此时系统的任务是“找基准”。策略： 切换电磁阀，屏蔽掉所有超标报警（因为标气可能超标），并冻结 4-20mA 输出（保持在测量前的数值），防止 DCS 误报警。&lt;/li&gt;
&lt;li&gt;吹扫状态： 此时系统的任务是“清洁”。策略： 泵反转或开启反吹气源，此时任何测量数据都是无效的，必须打上“无效数据”的 Flag。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;负载分级与最坏情况设计-worst-case-design&#34;&gt;负载分级与最坏情况设计 (Worst-Case Design)
&lt;/h3&gt;&lt;p&gt;芯片之所以有很多电容，是因为设计者考虑到了&lt;strong&gt;最坏的瞬时功耗&lt;/strong&gt;。在 CEMS 设计中，这对应着“功耗预算 (Power Budgeting)”思想：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不同档位（状态）的功耗是不一样的：
&lt;ul&gt;
&lt;li&gt;预热状态： 伴热管线加热（2000W）+ 探头加热（500W）+ 仪表加热（200W）。这是峰值功耗（Max Load）。&lt;/li&gt;
&lt;li&gt;测量状态： 加热器只需保温（占空比 30%），但泵全速转。这是典型功耗。&lt;/li&gt;
&lt;li&gt;待机状态： 只有电路板供电。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;设计陷阱： 很多新手设计师只按“典型功耗”选电缆和空开，结果一到冬天冷启动（预热状态），全系统跳闸。&lt;/li&gt;
&lt;li&gt;思维模型： 必须按照“所有耗能元件同时开启的那个瞬间”（通常是上电瞬间或预热态）来设计供电系统。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>参数化补偿</title>
        <link>https://teaize.github.io/p/%E5%8F%82%E6%95%B0%E5%8C%96%E8%A1%A5%E5%81%BF/</link>
        <pubDate>Mon, 01 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8F%82%E6%95%B0%E5%8C%96%E8%A1%A5%E5%81%BF/</guid>
        <description>&lt;p&gt;在二氧化硫紫外荧光分析仪当中，荧光灯会随着使用的老化，光强逐渐变弱，那么仪表参考的基准变了，自然测出来的数据就会和真值有所偏差。如下卡片内容所示，这是一种参数化补偿设计。&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251201193037.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251201193037.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;实际上，在 CEMS 领域，这是一个核心且无处不在的设计思想。因为 CEMS 系统处于极其恶劣的工况（高温、高湿、高腐蚀、高粉尘）下，且要求长期（3-6 个月）免维护运行，&lt;strong&gt;纯粹靠硬件的“刚性”往往无法抵抗物理定律带来的漂移和退化&lt;/strong&gt;。此时，我们就需要大量引入可测变量（传感器数据）作为补偿参数，通过软件算法来“拉回”偏差。&lt;/p&gt;
&lt;h3 id=&#34;一些应用&#34;&gt;一些应用
&lt;/h3&gt;&lt;h4 id=&#34;1工况参数补偿&#34;&gt;1、工况参数补偿
&lt;/h4&gt;&lt;p&gt;这是参数化补偿在 CEMS 中最直观的应用。分析仪测得的通常是“特定状态下的浓度”，但法规要求的是“标况干基浓度”。温度和压力就是这里的“可测不一致性”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;问题背景： &lt;strong&gt;烟气温度和压力随锅炉负荷波动，导致气体摩尔体积变化，直接影响测量值的准确性&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;补偿参数： 温度（$t$）、压力（$P$）&lt;/li&gt;
&lt;li&gt;补偿逻辑： 引入状态方程进行修正，将工况浓度折算为标况浓度：
&lt;ul&gt;
&lt;li&gt;$$C_{std} = C_{meas} \times \frac{273.15}{273.15 + t} \times \frac{P + P_{atm}}{101.325}$$&lt;/li&gt;
&lt;li&gt;这里，$t$ 和 $P$ 就是动态补偿参数，抵消了环境物理量变化带来的“不一致”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2光源衰减与脏污补偿针对退化现象&#34;&gt;2、光源衰减与脏污补偿（针对“退化现象”）
&lt;/h4&gt;&lt;p&gt;CEMS 的光学器件（透镜、反射镜、光源）随时间推移必然会老化或沾染灰尘。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;问题背景： 朗伯 - 比尔定律 $A = \lg(I_0/I)$ 依赖于初始光强 $I_0$。如果光源老化导致 $I_0$ 下降，或者视窗脏污导致透光率下降，测量值就会漂移。&lt;/li&gt;
&lt;li&gt;补偿参数： 参考信号强度（Reference Signal）或 光强衰减系数。&lt;/li&gt;
&lt;li&gt;设计实现：
&lt;ul&gt;
&lt;li&gt;双光路/双波长设计： 引入一个不被待测气体吸收的“参考波长”。&lt;/li&gt;
&lt;li&gt;当参考波长的光强 $I_{ref}$ 下降时，系统认为这是由光源老化或灰尘引起的&lt;strong&gt;共模干扰&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;系统会自动根据 $I_{ref}$ 的衰减比例，对测量信号 $I_{meas}$ 进行等比例补偿，或者自动调整增益（AGC），从而抵消硬件退化的影响。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3传感器线性度与全温区补偿&#34;&gt;3、传感器线性度与全温区补偿
&lt;/h4&gt;&lt;p&gt;没有完美的线性传感器，也没有完全不受环境温度影响的电子元器件。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;问题背景： 电化学传感器或某些光学检测器在不同环境温度下，灵敏度（Slope）和零点（Zero）会发生漂移。&lt;/li&gt;
&lt;li&gt;补偿参数： 温度系数（Temperature Coefficient）与 多项式拟合系数。&lt;/li&gt;
&lt;li&gt;设计实现：
&lt;ul&gt;
&lt;li&gt;在分析仪内部（如光学平台或传感器旁）安装高精度温度探头。&lt;/li&gt;
&lt;li&gt;建立一个温度 - 修正量的数学模型（通常是二次或三次多项式）。&lt;/li&gt;
&lt;li&gt;$$Output_{corrected} = Output_{raw} \times (1 + \alpha \times (T_{curr} - T_{cal}))$$&lt;/li&gt;
&lt;li&gt;其中 $\alpha$ 就是温度补偿系数。这使得设备即使从 $20^\circ C$ 变到 $40^\circ C$，输出依然稳定。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4氧化锆氧量计的内阻补偿&#34;&gt;4、氧化锆氧量计的内阻补偿
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;问题背景： 氧化锆头在长期高温运行后，电极会老化，内阻增加，导致响应变慢或本底电势变化。&lt;/li&gt;
&lt;li&gt;补偿设计： 现代高端氧化锆变送器会周期性测量探头的内阻（作为监测参数）。当内阻发生可预期的变化时，变送器会调整加热电流或对电势信号进行算法补偿，延长探头的使用寿命（虽然最终还是需要更换，但在退化期能保持数据可用）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小结&#34;&gt;小结
&lt;/h3&gt;&lt;p&gt;参数化补偿设计在 CEMS 中的核心思想是：&lt;strong&gt;承认不完美，利用相关性&lt;/strong&gt;。我们不再试图制造一个在任何温度、压力、老化程度下都物理性质绝对不变的“完美仪器”(这会极大提高成本，或者物理上做不到)，而是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;承认&lt;/strong&gt;干扰和退化的存在（如光源会暗，承认水汽有干扰）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;量化&lt;/strong&gt;这些干扰（通过传感器测出温度、光强、干扰气浓度）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;计算&lt;/strong&gt;出修正值并实时抵消。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种思想&lt;strong&gt;将硬件的制造难度转移到了软件算法和系统集成上&lt;/strong&gt;，也是是现代精密仪器的核心竞争力之一&lt;/p&gt;
</description>
        </item>
        <item>
        <title>服役性能与工艺性能的博弈</title>
        <link>https://teaize.github.io/p/%E6%9C%8D%E5%BD%B9%E6%80%A7%E8%83%BD%E4%B8%8E%E5%B7%A5%E8%89%BA%E6%80%A7%E8%83%BD%E7%9A%84%E5%8D%9A%E5%BC%88/</link>
        <pubDate>Mon, 01 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%9C%8D%E5%BD%B9%E6%80%A7%E8%83%BD%E4%B8%8E%E5%B7%A5%E8%89%BA%E6%80%A7%E8%83%BD%E7%9A%84%E5%8D%9A%E5%BC%88/</guid>
        <description>&lt;p&gt;复习到一张一年前的卡片，卡片内容：在某些方面，不锈钢刚度大是一种优点，但在压铆螺母压铆方面，却会带来一些问题，需要采用高强度特种不锈钢材料的压铆螺母，压铆螺母铆接不牢固经常需要再点焊&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251201102543.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251201102543.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;在普通碳钢板（如 SPCC、SECC）上压铆时，通常使用普通不锈钢螺母（CLS 型号，通常为 304 材质）。但在不锈钢板上，普通 CLS 螺母完全行不通。&lt;/p&gt;
&lt;p&gt;其实，这涉及到一个核心的物理力学原理：压铆要想牢固，螺母必须显著硬于板材。压铆螺母是靠挤压压入板材的，螺母的压花齿和导向槽必须具备&lt;strong&gt;硬度优势&lt;/strong&gt;，迫使板材发生&lt;strong&gt;塑性变形&lt;/strong&gt;。
另外，不锈钢有一种加工硬化的特性，当你试图挤压它时，它会瞬间变硬，结果就是硬碰硬，板材没有流动，反而是螺母的压花齿被压平了。所以需要采用高强度特种不锈钢材料的压铆螺母&lt;/p&gt;
&lt;h3 id=&#34;二律背反-antinomy&#34;&gt;二律背反 Antinomy
&lt;/h3&gt;&lt;p&gt;这其中就体现了一种二律背反的现象，或者说，是一种“服役性能”与“工艺性能”的博弈（Performance vs. Processability Trade-off）&lt;/p&gt;
&lt;p&gt;这种思想的核心在于认识到，材料的物理属性是中性的，所谓的“优缺点”完全取决于它所处的时间段&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在“使用阶段”（服役期）： 我们希望不锈钢刚度大、硬度高、耐腐蚀。这时候，刚度大是优点，代表着产品结实、不变形。&lt;/li&gt;
&lt;li&gt;在“制造阶段”（出生期）： 我们需要对材料进行塑形（折弯、压铆、切削）。这时候，刚度大就变成了阻力，意味着难以流动、损耗刀具、结合力差。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种思想的本质是：一个完美的工程设计，不能只盯着产品“做好了之后”的样子（功能），必须同时对产品“如何被造出来”的过程（工艺）表现出极大的敬畏&lt;/p&gt;
&lt;h3 id=&#34;如何在未来的工作中多利用这种思想&#34;&gt;如何在未来的工作中多利用这种思想
&lt;/h3&gt;&lt;p&gt;初级工程师看到的是材料的强度； 资深工程师看到的是材料的流变。需要我们养成&lt;strong&gt;分时段、分维度&lt;/strong&gt;审视材料属性的习惯，可以尝试下面这四种思维模型：&lt;/p&gt;
&lt;h4 id=&#34;思维模型一时间轴切片法timeline-slicing&#34;&gt;思维模型一：时间轴切片法（Timeline Slicing）
&lt;/h4&gt;&lt;p&gt;在选材时，不要只看一张物性表，要在脑海里画一条时间轴，把材料在不同阶段的表现列出来&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;练习： 当你想选一种“超强、超硬”的材料时，立刻反问自己：
&lt;ul&gt;
&lt;li&gt;切削时： 它会不会崩刀？&lt;/li&gt;
&lt;li&gt;焊接时： 它会不会因为碳当量高而裂纹？&lt;/li&gt;
&lt;li&gt;装配时： 它会不会太硬导致无法过盈配合？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;应用案例： 汽车齿轮。
&lt;ul&gt;
&lt;li&gt;使用时需要极高的表面硬度（耐磨）。&lt;/li&gt;
&lt;li&gt;制造时需要较低的硬度（方便滚齿加工）。&lt;/li&gt;
&lt;li&gt;解决方案： 利用时间轴思维，先用软状态加工齿形，再通过渗碳淬火在最后阶段改变表面属性。这就是“错峰”解决矛盾。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;思维模型二功能解耦法functional-decoupling&#34;&gt;思维模型二：功能解耦法（Functional Decoupling）
&lt;/h4&gt;&lt;p&gt;如果不锈钢板又硬又难压铆是一个死结，那就不要试图用“一种材料”解决所有问题。将“结构支撑”和“连接功能”分开。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;思想： 既然基材硬度大导致压铆困难，那就引入第三者，或者改变连接界面。&lt;/li&gt;
&lt;li&gt;应用案例：
&lt;ul&gt;
&lt;li&gt;镶件注塑： 塑料太软握不住螺钉，就埋入铜螺母；铝合金件中打入钢丝螺套。&lt;/li&gt;
&lt;li&gt;涂层技术： 基体用廉价易加工的碳钢（解决工艺问题），表面镀镍或喷涂（解决防锈的功能问题），而不是死磕全不锈钢。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;思维模型三顺势而为法process-compensation&#34;&gt;思维模型三：顺势而为法（Process Compensation）
&lt;/h4&gt;&lt;p&gt;既然材料的某个属性（如刚度大）在工艺上是劣势，我们可以通过改变工艺环境，暂时“抑制”这个属性，或者利用这个属性。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;思想： 如果硬碰硬不行，能不能换个物理环境？&lt;/li&gt;
&lt;li&gt;应用案例：
&lt;ul&gt;
&lt;li&gt;温热成形： 钛合金在常温下很难冲压（回弹大、易裂），但在高温下延展性极好。我们在制造阶段加热它，利用它变软的瞬间加工，冷却后它又恢复了高强度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;思维模型四木桶短板的逆向思维&#34;&gt;思维模型四：木桶短板的逆向思维
&lt;/h4&gt;&lt;p&gt;通常我们说短板决定容量，但在制造中，最难加工的那个特征决定了整个零件的成本和良率。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;思想： 既然不锈钢板压铆容易失效，那这是否是必须的结构？&lt;/li&gt;
&lt;li&gt;应用案例：
&lt;ul&gt;
&lt;li&gt;如果你发现为了配合压铆，不得不把整块板材的选型变得很复杂，不如直接取消压铆。&lt;/li&gt;
&lt;li&gt;改为&lt;strong&gt;拉铆螺母&lt;/strong&gt;（依靠螺母自身的变形，而不是板材变形，完美避开了不锈钢硬度高导致板材不流动的问题）。&lt;/li&gt;
&lt;li&gt;这种思维会让你跳出“如何把这个铆钉压好”的战术陷阱，上升到“如何实现连接”的战略高度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>元认知Metacognition</title>
        <link>https://teaize.github.io/p/%E5%85%83%E8%AE%A4%E7%9F%A5metacognition/</link>
        <pubDate>Mon, 01 Dec 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%83%E8%AE%A4%E7%9F%A5metacognition/</guid>
        <description>&lt;p&gt;如何训练出一种“对思考过程的思考”，也就是元认知能力（Metacognition）。这里摘抄了 AI 给的一些建议。通过如下四个步骤刻意练习，在大脑中建立起“模型库”&lt;/p&gt;
&lt;h3 id=&#34;第一步抽象化训练给问题起名字&#34;&gt;第一步：抽象化训练（给问题“起名字”）
&lt;/h3&gt;&lt;p&gt;很多工程师止步于“解决问题”，而高阶工程师强在“定义问题”。&lt;/p&gt;
&lt;p&gt;当你解决完“不锈钢压铆不牢”的问题后，不要只在笔记本上写“下次要扩孔”。你要强迫自己&lt;strong&gt;把这个具体的物理现象，抽象成一个通用的概念&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;初级思考： 这个螺母硬度不够，要换硬的。&lt;/li&gt;
&lt;li&gt;中级思考： 这是硬度匹配的问题，要保证 A 比 B 硬。&lt;/li&gt;
&lt;li&gt;模型化思考（我的思考方式）： 这是**“加工性能与服役性能的矛盾”，或者是“二律背反”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如何练习： 每次解决一个技术难题后，问自己一句：“这件事如果在别的行业、别的领域发生，它叫什么？”&lt;/p&gt;
&lt;h3 id=&#34;第二步跨界联想利用你的多重兴趣&#34;&gt;第二步：跨界联想（利用你的多重兴趣）
&lt;/h3&gt;&lt;p&gt;思维模型最强大的时候，往往是跨学科借用的时候。你可以尝试把这些毫不相关的领域强行联系起来：&lt;/p&gt;
&lt;p&gt;机械 vs 心理学：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你提到的 NPD（自恋型人格障碍）有一个特点：外表自大（刚度高），内心脆弱（韧性差）。&lt;/li&gt;
&lt;li&gt;这不就是陶瓷材料或者未回火的马氏体钢吗？&lt;/li&gt;
&lt;li&gt;思维模型： “高强低韧系统”。这种系统极其危险，看着很强，一受冲击就“崩塌”（人格崩塌/零件断裂）。&lt;/li&gt;
&lt;li&gt;应用： 当你设计一个机构时，如果发现它太刚硬没有缓冲，你可以对自己说：“这结构太 NPD 了，容易暴雷，我得加点阻尼（同理心/韧性）。”&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第三步学习现成的工程师外挂triz-理论&#34;&gt;第三步：学习现成的“工程师外挂”——TRIZ 理论
&lt;/h3&gt;&lt;p&gt;如果你觉得靠自己总结太慢，机械工程界其实有一套现成的“思维模型百科全书”，叫做 &lt;strong&gt;TRIZ（发明问题解决理论）&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;苏联科学家分析了 200 万份专利，提炼出了 40 个发明原理和 39 个工程参数。我刚才提到的“矛盾”，在 TRIZ 里叫“物理矛盾”或“技术矛盾”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;刚才的例子： 不锈钢既要硬（使用）又要软（加工）。&lt;/li&gt;
&lt;li&gt;TRIZ 解决方案： “分离原理”。
&lt;ul&gt;
&lt;li&gt;时间分离： 现在的状态（热）和未来的状态（冷）不一样。（比如温热成形）&lt;/li&gt;
&lt;li&gt;空间分离： 核心部分硬，边缘部分软。（比如激光局部退火）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如何练习： 建议你把 TRIZ 的 40 个发明原理 打印出来贴在工位旁。遇到想不通的死结，挨个过一遍。比如“分割”、“抽取”、“局部质量”、“不对称”等。这相当于给你的大脑装了一个作弊器。&lt;/p&gt;
&lt;h3 id=&#34;第四步从what到how再到why的深度挖掘&#34;&gt;第四步：从“What”到“How”再到“Why”的深度挖掘
&lt;/h3&gt;&lt;p&gt;普通人看现象，高手看结构，大师看系统。&lt;/p&gt;
&lt;p&gt;你可以养成“追问三层”的习惯：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;现象层（What）： 为什么压铆不牢？ -&amp;gt; 因为有硬化层。&lt;/li&gt;
&lt;li&gt;原理层（How）： 为什么有硬化层会有影响？ -&amp;gt; 因为阻碍了塑性流动。&lt;/li&gt;
&lt;li&gt;模型层（Why/Meta）： 为什么我们非要塑性流动？ -&amp;gt; 因为我们试图用形变来换取连接力。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当你走到第三层，你就不再受困于“怎么把孔钻得更好”，而是可以思考“怎么把连接做得更稳”。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>干湿氧差减法</title>
        <link>https://teaize.github.io/p/%E5%B9%B2%E6%B9%BF%E6%B0%A7%E5%B7%AE%E5%87%8F%E6%B3%95/</link>
        <pubDate>Sun, 30 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%B9%B2%E6%B9%BF%E6%B0%A7%E5%B7%AE%E5%87%8F%E6%B3%95/</guid>
        <description>&lt;p&gt;干湿氧差减法,它通过比较“含水的烟气”和“脱水的烟气”中氧气浓度的变化，来反推水分有多少&lt;/p&gt;
&lt;h3 id=&#34;核心概念-湿氧-vs-干氧&#34;&gt;核心概念 湿氧 vs 干氧
&lt;/h3&gt;&lt;p&gt;要理解这个原理，首先要明白两个概念：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;湿氧 ($O_{2, wet}$)：
&lt;ul&gt;
&lt;li&gt;指原汁原味的烟气中的氧含量。此时烟气里混杂着水蒸气。&lt;/li&gt;
&lt;li&gt;获取方式： 通常是用&lt;strong&gt;氧化锆探头&lt;/strong&gt;直接插入高温烟道（In-situ），在高温下直接测量出来的。因为水在高温下是气态，占据体积，所以测出来的是“湿基氧含量”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;干氧 ($O_{2, dry}$)：
&lt;ul&gt;
&lt;li&gt;指除去水分后的烟气中的氧含量。&lt;/li&gt;
&lt;li&gt;获取方式： 通过采样管把烟气抽出来，经过冷凝器（除水），把水蒸气变成液态排掉，剩下的干气再送入分析仪（如磁氧分析仪或另一台氧化锆）测量。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;原理推演-水分子是个占位符&#34;&gt;原理推演 水分子是个“占位符”
&lt;/h3&gt;&lt;p&gt;想象一个拥挤的房间（烟气），里面有 100 个人（气体分子）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;其中有 &lt;strong&gt;10 个&lt;/strong&gt; 穿红衣服的（氧气）。&lt;/li&gt;
&lt;li&gt;其中有 &lt;strong&gt;10 个&lt;/strong&gt; 穿蓝雨衣的（水蒸气）。&lt;/li&gt;
&lt;li&gt;剩下 &lt;strong&gt;80 个&lt;/strong&gt; 是穿灰衣服的（氮气、CO2 等）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;场景一：在烟道里直接测（湿氧）&lt;/p&gt;
&lt;p&gt;这时候水蒸气还在房间里。氧气的占比 = $\frac{10}{100} = 10%$。,这就是 $O_{2, wet} = 10%$。&lt;/p&gt;
&lt;p&gt;场景二：抽出来除水后测（干氧）&lt;/p&gt;
&lt;p&gt;我们把穿蓝雨衣的 10 个人（水蒸气）赶出房间。这时候房间里总人数变成了 $100 - 10 = 90$ 人。但是穿红衣服的（氧气）还是 10 个人。氧气的占比 = $\frac{10}{90} \approx 11.11%$。,这就是 $O_{2, dry} \approx 11.11%$。&lt;/p&gt;
&lt;p&gt;发现了吗？干氧浓度（11.11%）总是大于湿氧浓度（10%）。这两个数值的差值，完全取决于刚才赶走了多少个“穿蓝雨衣的人”（水分）。只要我们同时测到了 $O_{2, dry}$ 和 $O_{2, wet}$，就可以通过下面的公式直接算出水分含量（$H_2O%$）：&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130163126.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130163126.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;注意：氧化锆探头（Zirconia Oxygen Sensor）只认识“自由身”的氧气分子（$O_2$），完全“看不见”被锁在水分子（$H_2O$）里面的那个氧原子&lt;/p&gt;
</description>
        </item>
        <item>
        <title>关于Anki-语义记忆与情景记忆</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8Eanki-%E8%AF%AD%E4%B9%89%E8%AE%B0%E5%BF%86%E4%B8%8E%E6%83%85%E6%99%AF%E8%AE%B0%E5%BF%86/</link>
        <pubDate>Sun, 30 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8Eanki-%E8%AF%AD%E4%B9%89%E8%AE%B0%E5%BF%86%E4%B8%8E%E6%83%85%E6%99%AF%E8%AE%B0%E5%BF%86/</guid>
        <description>&lt;h3 id=&#34;缘由&#34;&gt;缘由
&lt;/h3&gt;&lt;p&gt;四月份的某一天闪过一个灵感，想在之后添加 Anki 卡片时，在卡片的开头添加上日期。这种方案一直用到了今天，效果很棒&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130215223.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130215223.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;实际上，这无意中触碰到了记忆心理学中一个非常核心的概念：将“语义记忆”与“情景记忆”（Episodic Memory，生活中的经历）相结合。加上日期后，那张卡片就不再仅仅是一个冷冰冰的知识点，它变成了一个&lt;strong&gt;时间胶囊&lt;/strong&gt;。当你复习时，你不仅在复习知识，还在“复习”当时那个努力的自己。这种“&lt;strong&gt;元认知&lt;/strong&gt;”（对学习过程的认知）带来的成就感，是维持长期 Anki 习惯的最强动力。&lt;/p&gt;
&lt;p&gt;仔细一想，也许还能扩展出更多：&lt;/p&gt;
&lt;h3 id=&#34;1增加来源出处&#34;&gt;1、增加“来源/出处”
&lt;/h3&gt;&lt;p&gt;在“日期”旁边，再增加一个简单的字段，记录你是在哪里、或者什么场景下捕捉到这个知识点的，例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2023-12-05 | 和朋友在咖啡馆聊天时提到的概念&lt;/li&gt;
&lt;li&gt;2024-12-10 | 更换了硬件芯片解决了令人头秃问题后的教训&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2添加为什么这很重要字段&#34;&gt;2、添加“为什么这很重要”字段
&lt;/h3&gt;&lt;p&gt;很多时候我们过了一年再看卡片，会纳闷：“我为什么要背这个？”导致产生厌烦情绪。添加一个 &lt;code&gt;{{Why}}&lt;/code&gt; 字段，用一句话写给未来的自己。例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这个概念虽然冷门，但它解释了我为什么 XXX&lt;/li&gt;
&lt;li&gt;记着这个，下次写代码报错时就能立马意识到这是 XXX 问题&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这赋予了知识“&lt;strong&gt;情绪价值&lt;/strong&gt;”。当你疲惫时，看到过去的自己告诉你“这个很重要，因为它能帮你解决 X 问题”，动力会显著提升；如果之后用不着这个了，对照一下 &lt;code&gt;{{Why}}&lt;/code&gt; 字段，也可以删除或者暂停卡片&lt;/p&gt;
&lt;h3 id=&#34;3使用实拍图而非网络图&#34;&gt;3、使用“实拍图”而非“网络图”
&lt;/h3&gt;&lt;p&gt;如果 Anki 能🔗Google 相册就好，这样就能快速调用手机中的图片了。可是目前并没有这个功能&lt;/p&gt;
&lt;h3 id=&#34;4极简的评分心情标签&#34;&gt;4、极简的“评分/心情”标签
&lt;/h3&gt;&lt;p&gt;如果不想打太多字，也可以用 Emoji 作为标签（Tag），例如制卡时打上标签，如 &lt;code&gt;#🔥&lt;/code&gt; (重要且紧急)、&lt;code&gt;#💡&lt;/code&gt; (灵光一现)、&lt;code&gt;#💀&lt;/code&gt; (极难，死磕很久才懂)。&lt;/p&gt;
&lt;p&gt;当复习时看到 &lt;code&gt;#💀&lt;/code&gt;，你会对过去的努力会心一笑：“当时觉得难如登天，现在看也不过如此嘛。” —— 这就是你提到的“感知进步”&lt;/p&gt;
</description>
        </item>
        <item>
        <title>关于稳定性优先原则</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E7%A8%B3%E5%AE%9A%E6%80%A7%E4%BC%98%E5%85%88%E5%8E%9F%E5%88%99/</link>
        <pubDate>Sun, 30 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E7%A8%B3%E5%AE%9A%E6%80%A7%E4%BC%98%E5%85%88%E5%8E%9F%E5%88%99/</guid>
        <description>&lt;h3 id=&#34;稳定性优先原则&#34;&gt;稳定性优先原则
&lt;/h3&gt;&lt;p&gt;Stability-first principle&lt;/p&gt;
&lt;p&gt;一些芯片存在“使能”引脚（Enable、EN 等），它们存在的主要目的，就是控制“什么时候让芯片真正开始工作”，以避免在电源、时钟或外设没准备好之前就开始运行，导致错误输出、不稳定行为甚至损坏。
同样，在一些传感器检测系统中，也存在“预热”的说法，需要先使系统达到稳定状态之后，传感器再开始工作。如果系统还未稳定，即使传感器有输出，这些输出也可能是不准确、不可信的，这些不准确的数据反而更容易误导使用者。&lt;/p&gt;
&lt;p&gt;本质一句话：先保证自己处于正确、稳定、可控的状态，再向外界产生影响。换句话说，&lt;strong&gt;不成熟的输出比没有输出更危险&lt;/strong&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>零气产生方式</title>
        <link>https://teaize.github.io/p/%E9%9B%B6%E6%B0%94%E4%BA%A7%E7%94%9F%E6%96%B9%E5%BC%8F/</link>
        <pubDate>Sun, 30 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E9%9B%B6%E6%B0%94%E4%BA%A7%E7%94%9F%E6%96%B9%E5%BC%8F/</guid>
        <description>&lt;p&gt;在 CEMS 稀释法（尤其是湿法抽取、稀释取样）中，干净的零气是系统准确度的基础。
零气的核心目标是：不含任何会影响气体分析的成分。&lt;/p&gt;
&lt;h2 id=&#34;零气需要去除哪些杂质&#34;&gt;零气需要去除哪些杂质
&lt;/h2&gt;&lt;p&gt;一般来说，需要去除：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;去除本底污染气体
&lt;ul&gt;
&lt;li&gt;SO₂&lt;/li&gt;
&lt;li&gt;NO、NO₂（总称 NOx）&lt;/li&gt;
&lt;li&gt;CO&lt;/li&gt;
&lt;li&gt;CO₂（有时不完全去）&lt;/li&gt;
&lt;li&gt;O₃&lt;/li&gt;
&lt;li&gt;H₂S、NH₃、VOC（有机物）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;去除颗粒物
&lt;ul&gt;
&lt;li&gt;PM、灰尘、烟尘等固体颗粒&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;去除水分（H₂O）
&lt;ul&gt;
&lt;li&gt;水汽会影响红外吸收、冷凝会影响流量稳定&lt;/li&gt;
&lt;li&gt;也会导致传递线腐蚀或反应吸附&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;去除油雾、气溶胶
&lt;ul&gt;
&lt;li&gt;来自空气压缩机或管路污染&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;去除臭氧与活性氧
&lt;ul&gt;
&lt;li&gt;避免氧化其他成分，特别是 NO → NO₂&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;为什么要去除这些&#34;&gt;为什么要去除这些
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;污染物&lt;/th&gt;
          &lt;th&gt;危害&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;SO₂、NOx、CO&lt;/td&gt;
          &lt;td&gt;直接影响零点校准，测量值偏高&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;H₂O&lt;/td&gt;
          &lt;td&gt;影响稀释比、吸收光谱干扰、冷凝堵塞&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;VOC&lt;/td&gt;
          &lt;td&gt;干扰红外光谱，形成背景噪声&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;颗粒物&lt;/td&gt;
          &lt;td&gt;堵塞过滤器和稀释器喷嘴&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;O₃&lt;/td&gt;
          &lt;td&gt;氧化 NO，让 NOx 测量出现假值&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;油雾&lt;/td&gt;
          &lt;td&gt;污染管路、吸附气体导致滞后&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;本质一句话：零气必须不含任何可吸收红外/紫外/电化学干扰的成分，同时要无颗粒、无水、无油。&lt;/p&gt;
&lt;h2 id=&#34;零气产生方式&#34;&gt;零气产生方式
&lt;/h2&gt;&lt;p&gt;常见零气发生方式：&lt;/p&gt;
&lt;h3 id=&#34;1压缩空气--多级净化方式&#34;&gt;1、压缩空气 + 多级净化方式
&lt;/h3&gt;&lt;h4 id=&#34;步骤链路-1&#34;&gt;步骤链路 1：
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;粗过滤（去颗粒）&lt;/li&gt;
&lt;li&gt;活性炭吸附（去 VOC / SO₂ / H₂S）&lt;/li&gt;
&lt;li&gt;分子筛 / 干燥剂（去水）&lt;/li&gt;
&lt;li&gt;高效氧化催化（Pall / Hopcalite）：
&lt;ul&gt;
&lt;li&gt;将 CO、HC 氧化为 CO₂、H₂O&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;臭氧分解过滤器&lt;/li&gt;
&lt;li&gt;中高效 HEPA 过滤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终输出：高纯洁净零气&lt;/p&gt;
&lt;h4 id=&#34;改进的步骤链路-2&#34;&gt;改进的步骤链路 2：
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;压缩空气输入&lt;/li&gt;
&lt;li&gt;除水/除油过滤（粗滤）&lt;/li&gt;
&lt;li&gt;变压吸附（PSA）或 干燥剂 —&amp;gt; 去除水分（露点小于 -40℃）&lt;/li&gt;
&lt;li&gt;活性炭 —&amp;gt; 去除 VOCs, O3, 部分 SO2&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;氧化催化&lt;/strong&gt;（Hopcalite） —&amp;gt; 将 CO 转化为 CO2，将 NO 转化为 NO2&lt;/li&gt;
&lt;li&gt;新增 化学吸附/碱石灰（Soda Lime）或 分子筛（13X） —&amp;gt; 这是最关键的一步，用于吸附刚刚产生的 CO2 以及酸性气体 SO2, NO2&lt;/li&gt;
&lt;li&gt;新增 &lt;strong&gt;普拉飞&lt;/strong&gt;（Purafil / 高锰酸钾氧化铝） —&amp;gt; 深度去除残留的 NO 和轻分子有机物（可选，视环境而定）&lt;/li&gt;
&lt;li&gt;末端 HEPA 过滤（High-Efficiency Particulate Air，高效滤网） —&amp;gt; 拦截粉尘&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;污染物&lt;/th&gt;
          &lt;th&gt;步骤链路 1&lt;/th&gt;
          &lt;th&gt;步骤链路 2&lt;/th&gt;
          &lt;th&gt;备注&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;颗粒物&lt;/td&gt;
          &lt;td&gt;✅ 优秀&lt;/td&gt;
          &lt;td&gt;✅ 优秀&lt;/td&gt;
          &lt;td&gt;HEPA 必不可少&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;水分 ($H_2O$)&lt;/td&gt;
          &lt;td&gt;✅ 优秀&lt;/td&gt;
          &lt;td&gt;✅ 优秀&lt;/td&gt;
          &lt;td&gt;稀释法核心要求&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;油/VOCs&lt;/td&gt;
          &lt;td&gt;✅ 良好&lt;/td&gt;
          &lt;td&gt;✅ 优秀&lt;/td&gt;
          &lt;td&gt;活性炭的作用&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;一氧化碳 ($CO$)&lt;/td&gt;
          &lt;td&gt;✅ 转化为 $CO_2$&lt;/td&gt;
          &lt;td&gt;✅ 转化为 $CO_2$ 后被吸收&lt;/td&gt;
          &lt;td&gt;必须氧化&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;二氧化碳 ($CO_2$)&lt;/td&gt;
          &lt;td&gt;❌ 未去除 (反而增加)&lt;/td&gt;
          &lt;td&gt;✅ 去除&lt;/td&gt;
          &lt;td&gt;需要加装脱碳单元&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;氮氧化物 ($NO_x$)&lt;/td&gt;
          &lt;td&gt;⚠️ 可能残留 $NO$&lt;/td&gt;
          &lt;td&gt;✅ 深度去除&lt;/td&gt;
          &lt;td&gt;需要氧化 + 化学吸附&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;2零气发生器氧化催化&#34;&gt;2、零气发生器（氧化催化）
&lt;/h3&gt;&lt;p&gt;利用催化炉将空气中痕量杂质完全氧化
多数可达到：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SO₂ &amp;lt; 0.1 ppm&lt;/li&gt;
&lt;li&gt;NOx &amp;lt; 0.1 ppm&lt;/li&gt;
&lt;li&gt;THC &amp;lt; 0.1 ppm&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3高纯氮n替代&#34;&gt;3、高纯氮（N₂）替代
&lt;/h3&gt;&lt;p&gt;适用于紫外或化学发光 NOx 校准
缺点：不能用于氧浓度测量校准&lt;/p&gt;
&lt;h2 id=&#34;小结&#34;&gt;小结
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;稀释法零气的本质目标：干净、稳定、无干扰。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;需要去除：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;污染气体&lt;/li&gt;
&lt;li&gt;水分&lt;/li&gt;
&lt;li&gt;颗粒&lt;/li&gt;
&lt;li&gt;油雾&lt;/li&gt;
&lt;li&gt;臭氧和活性气体&lt;/li&gt;
&lt;li&gt;所有测量组分的背景浓度&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终得到 真正意义上的零基准气体，才能保证稀释法测量准确可靠。&lt;/p&gt;
&lt;h2 id=&#34;氧化催化hopcalite&#34;&gt;氧化催化（Hopcalite）
&lt;/h2&gt;&lt;h3 id=&#34;霍加拉特基本概念&#34;&gt;霍加拉特基本概念
&lt;/h3&gt;&lt;p&gt;氧化催化（Hopcalite，霍加拉特剂），通常被称为 “氧化柱”、“催化转化柱”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hopcalite 是一种黑褐色的颗粒状物质（&lt;strong&gt;主要成分是二氧化锰 $MnO_2$ 和氧化铜 $CuO$ 的混合物&lt;/strong&gt;），它不是靠物理孔隙去拦截杂质，而是靠化学反应去转化气体&lt;/li&gt;
&lt;li&gt;常见名称：&lt;strong&gt;CO 催化氧化柱&lt;/strong&gt;、霍加拉特柱&lt;/li&gt;
&lt;li&gt;常见外观
&lt;ul&gt;
&lt;li&gt;不锈钢管 (316L)： 最常见。耐高压、耐腐蚀。通常是一根两端带有滤网（防止颗粒吹出）的不锈钢圆柱体&lt;/li&gt;
&lt;li&gt;透明亚克力/玻璃管： 某些实验室级或低压设备为了便于观察介质状态会使用。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;内部结构
&lt;ul&gt;
&lt;li&gt;气体从一端进入，穿过致密堆积的颗粒层，从另一端流出。&lt;/li&gt;
&lt;li&gt;停留时间 (Residence Time)： 柱子的长度和直径设计很重要，必须保证气体在里面停留足够的时间，才能完全反应掉 $CO$ 和 $NO$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么它能将-no-转换成-no2&#34;&gt;为什么它能将 NO 转换成 NO2
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;难点： 一氧化氮 ($NO$) 是一种中性偏弱的气体，&lt;strong&gt;很难被普通的化学吸附剂（如碱石灰、活性炭）直接抓获&lt;/strong&gt;。它像泥鳅一样容易穿透过滤器。&lt;/li&gt;
&lt;li&gt;策略： Hopcalite 作为氧化剂，先把 $NO$ 氧化成二氧化氮 ($NO_2$)。
&lt;ul&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130154220.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130154220.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;结果： $NO_2$ 是强酸性气体。一旦它变成 $NO_2$，后面的 碱性吸附剂（如碱石灰/Soda Lime） 或者 化学吸附剂（如 Purafil） 就能轻而易举地把它吸附掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;霍加拉特使用注意事项&#34;&gt;霍加拉特使用注意事项
&lt;/h3&gt;&lt;p&gt;严禁碰水，Hopcalite 非常怕水（包括高湿度空气）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;失效原理： 水分子会占据催化剂表面的活性位点，导致催化剂“中毒”失效。一旦受潮，它就无法再将 $CO$ 转化为 $CO_2$，也无法转化 $NO$。&lt;/li&gt;
&lt;li&gt;系统布局铁律：
&lt;ul&gt;
&lt;li&gt;在你的链路中，Hopcalite 必须 放置在 强力干燥（分子筛/变压吸附） 之后。&lt;/li&gt;
&lt;li&gt;✅ 正确顺序： 压缩机 -&amp;gt; 冷凝 -&amp;gt; &lt;strong&gt;深度干燥&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Hopcalite 氧化柱&lt;/strong&gt; -&amp;gt; 吸附柱 -&amp;gt; 精滤。&lt;/li&gt;
&lt;li&gt;❌ 错误顺序： 压缩机 -&amp;gt; Hopcalite -&amp;gt; 干燥 (这样催化剂几天就报废了)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;在霍加拉特后端，需要有吸附柱，例如混合吸附剂（活性炭 + 碱石灰 +Purafil），用于将刚才氧化出来的 CO2 和 NO2 吸附掉&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么霍加拉特在-co-方面用的更多呢&#34;&gt;为什么霍加拉特在 CO 方面用的更多呢
&lt;/h3&gt;&lt;p&gt;需要注意的是，业界提到霍加拉特，大多数情况是针对 CO，不过也确实能转换 NO：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$MnO_2$ 是一种极强的氧化剂。在催化化学中，它不仅能切断 $CO$ 的碳氧键，也能在常温下催化 $NO$ 与空气中的 $O_2$ 反应。&lt;/li&gt;
&lt;li&gt;实验数据支持： 多项研究表明，锰基催化剂在常温下对 $NO$ 的氧化转化率可以达到 40%~90%（取决于流速和接触时间）。&lt;/li&gt;
&lt;li&gt;痛点一：它“管杀不管埋”
&lt;ul&gt;
&lt;li&gt;对于 $CO$，它将其转化为 $CO_2$。对于大多数不需要测量 $CO_2$ 的场合（如环境空气站），$CO_2$ 直接穿透过去也没关系，无毒无害。&lt;/li&gt;
&lt;li&gt;对于 $NO$，它将其转化为 $NO_2$。&lt;strong&gt;$NO_2$ 依然是污染物&lt;/strong&gt;，而且具有腐蚀性。如果你后面没有东西把 $NO_2$ 吃掉，那你实际上并没有“去除”氮氧化物，只是给它“换了个马甲”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;痛点二：转化效率不如 CO 稳定
&lt;ul&gt;
&lt;li&gt;霍加拉特切除 $CO$ 如同切菜，效率极高。&lt;/li&gt;
&lt;li&gt;但对于 $NO$ 的氧化，受流速、温度和&lt;strong&gt;竞争吸附&lt;/strong&gt;（如果同时存在 CO，CO 会抢占活性位点）的影响较大。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;谁才是除-no-的正规军&#34;&gt;谁才是除 NO 的正规军
&lt;/h2&gt;&lt;p&gt;在标准的 CEMS 零气发生器设计中，为了彻底去除 $NO$，通常不单独依赖霍加拉特，而是引入另一种特殊材料：&lt;strong&gt;高锰酸钾氧化铝&lt;/strong&gt;，商业俗称 &lt;strong&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.purafil.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Purafil&lt;/a&gt;&lt;/strong&gt;（品牌名泛称）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;工作原理： 化学吸附（Chemisorption）。 它利用高锰酸钾 ($KMnO_4$) 的强氧化性将 $NO$ 氧化，并且直接将其转化为固态的硝酸盐 ($NO_3^-$) 固定在球体内部&lt;/li&gt;
&lt;li&gt;优势： &lt;strong&gt;一步到位，既氧化又吸收&lt;/strong&gt;，不需要后面再跟一个吸附柱&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130160126.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020251130160126.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;分子筛&#34;&gt;分子筛
&lt;/h2&gt;&lt;p&gt;分子筛通常是&lt;strong&gt;米白色或褐色的圆球状颗粒&lt;/strong&gt;（直径约 1.6mm - 3.2mm），看起来有点像陶粒或未加工的药丸。它被致密地填充在金属罐体（干燥塔）中&lt;/p&gt;
&lt;p&gt;它的核心原理：以此之名（“筛子”），它由人工合成的沸石晶体（Zeolite）构成&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;微观结构： 它的每一颗小球内部都有数以亿计的、&lt;strong&gt;孔径完全均一&lt;/strong&gt;的微孔通道。&lt;/li&gt;
&lt;li&gt;筛分原理（物理吸附）： 这些微孔的大小是精确控制的（单位是埃，$\mathring{A}$）。
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;只进不亦出&lt;/strong&gt;： 如果气体分子的直径 &lt;strong&gt;小于&lt;/strong&gt; 孔径，就会被吸进去并紧紧锁在孔穴里。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;拒之门外&lt;/strong&gt;： 如果气体分子的直径 &lt;strong&gt;大于&lt;/strong&gt; 孔径，它就进不去，只能随气流流走。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;打个比方，想象一个带有无数小孔的捕捉陷阱。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;水分子 ($H_2O$) 个头很小（约 $2.8 \mathring{A}$），一下就掉进陷阱里出不来了。&lt;/li&gt;
&lt;li&gt;氮气 ($N_2$)、氧气 ($O_2$) 个头较大（约 $3.6 \mathring{A}$ 左右），掉不进孔里，于是顺利通过。&lt;/li&gt;
&lt;li&gt;结果：出来的空气里就没有水了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;为什么零气发生器中用它而不是用硅胶呢&#34;&gt;为什么零气发生器中用它而不是用硅胶呢
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;理由一：深度干燥能力（低露点）
&lt;ul&gt;
&lt;li&gt;硅胶在空气很湿的时候吸水快，但在空气比较干的时候就吸不动了。&lt;/li&gt;
&lt;li&gt;分子筛是“贪婪”的： 即使空气湿度已经很低，它依然能强力捕捉残留的水分子。这就是为什么它能把露点压到 $-40^\circ C$ 甚至 $-70^\circ C$ 的原因。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;理由二：多功能性（除 $CO_2$）
&lt;ul&gt;
&lt;li&gt;特定型号的分子筛不仅能吸水，还能吸附 $CO_2$、$SO_2$ 等酸性气体。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;分子筛根据孔径大小分为不同型号，在 CEMS 零气中，最常见的是 &lt;strong&gt;13X&lt;/strong&gt; 和 &lt;strong&gt;4A&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;型号&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;孔径&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;特点&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;在零气中的作用&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;4A 分子筛&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$4\mathring{A}$&lt;/td&gt;
          &lt;td&gt;最经典的干燥剂&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;深度除水&lt;/strong&gt;。它不吸附较大的分子，专心除水。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;13X 分子筛&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;$10\mathring{A}$&lt;/td&gt;
          &lt;td&gt;孔径很大，吸附力极强&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;除水 + 除 $CO_2$ + 除油&lt;/strong&gt;。它是制备“无 $CO_2$ 空气”的神器。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;它是如何工作的&#34;&gt;它是如何工作的
&lt;/h3&gt;&lt;p&gt;PSA 变压吸附 (Pressure Swing Adsorption)。分子筛有一个特性：&lt;strong&gt;加压时吸附，减压时释放&lt;/strong&gt;。 在你的零气发生器内部，通常有两个装满分子筛的罐子（A 罐和 B 罐）交替工作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A 罐工作： 压缩空气进入 A 罐，高压下，水分子被分子筛抓牢，干空气流出。&lt;/li&gt;
&lt;li&gt;B 罐再生： 此时 B 罐通入少量干空气并减压，分子筛“松手”，把刚才抓住的水分吐出来排到机箱外（你会听到定期的“噗——嘶”排气声）。&lt;/li&gt;
&lt;li&gt;切换： 几分钟后，A、B 互换角色。 这就是为什么这套系统可以连续 24 小时产生干空气而不需要经常更换滤料。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>使用Python创建Word文档</title>
        <link>https://teaize.github.io/p/%E4%BD%BF%E7%94%A8python%E5%88%9B%E5%BB%BAword%E6%96%87%E6%A1%A3/</link>
        <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BD%BF%E7%94%A8python%E5%88%9B%E5%BB%BAword%E6%96%87%E6%A1%A3/</guid>
        <description>&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;docx&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Document&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;docx.shared&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;docx.enum.text&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WD_PARAGRAPH_ALIGNMENT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;docx.oxml.ns&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;qn&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 创建文档&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设置中文字体&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;style&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;styles&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Normal&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;font&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;宋体&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_element&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rPr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rFonts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;w:eastAsia&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;宋体&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;font&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 添加标题&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add_heading&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;备件收据&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alignment&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WD_PARAGRAPH_ALIGNMENT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CENTER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 修改后的正文内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;lines&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;今交付给 XXX 先生/女士，由其接收我方留存于现场的一套备件，具体信息如下：&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;项目编号：XXX&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;备件名称：XXX&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;数量：各1套&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;交付日期：____年____月____日&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;存放地点：_____________________&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;上述物品为项目备用件，存放于现场，仅供后续维护或更换使用，所有权归属原单位所有。接收人已确认物品完好，并承诺妥善保管。&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;特此收据。&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;经手人签字：_______________        接收人签字：_______________&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;日期：____年____月____日&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lines&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add_paragraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;paragraph_format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;space_after&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 保存文档&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/mnt/data/备件收据_项目号XS2024009041_修订版.docx&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>仪器仪表外壳印字与Logo工艺方法</title>
        <link>https://teaize.github.io/p/%E4%BB%AA%E5%99%A8%E4%BB%AA%E8%A1%A8%E5%A4%96%E5%A3%B3%E5%8D%B0%E5%AD%97%E4%B8%8Elogo%E5%B7%A5%E8%89%BA%E6%96%B9%E6%B3%95/</link>
        <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BB%AA%E5%99%A8%E4%BB%AA%E8%A1%A8%E5%A4%96%E5%A3%B3%E5%8D%B0%E5%AD%97%E4%B8%8Elogo%E5%B7%A5%E8%89%BA%E6%96%B9%E6%B3%95/</guid>
        <description>&lt;p&gt;仪器仪表的机箱、机柜、面板上印字、标识、Logo，常见方法如下：&lt;/p&gt;
&lt;h3 id=&#34;丝网印刷丝印&#34;&gt;丝网印刷（丝印）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;原理：用丝网油墨直接印在面板上，再烘干固化&lt;/li&gt;
&lt;li&gt;优点：成本低、颜色鲜艳、适用于批量生产&lt;/li&gt;
&lt;li&gt;缺点：耐磨一般，时间久了可能掉字&lt;/li&gt;
&lt;li&gt;常用材质：金属喷漆面板、塑料面板&lt;/li&gt;
&lt;li&gt;使用场景：批量仪表外壳、按钮面板&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;激光雕刻激光打标&#34;&gt;激光雕刻（激光打标）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;原理：用激光烧蚀材料形成文字或图形&lt;/li&gt;
&lt;li&gt;优点：永久性、不掉色、精度高、耐腐蚀、耐高温&lt;/li&gt;
&lt;li&gt;缺点：只能做单色（通常白/黑/金属色），图案较简单&lt;/li&gt;
&lt;li&gt;常用材质：铝、不锈钢、工程塑料&lt;/li&gt;
&lt;li&gt;适用场景：工业级仪器、高端设备、户外设备&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;uv-数码打印&#34;&gt;UV 数码打印
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;原理：喷墨 +UV 光固化，类似“打印机直接在面板上打印”&lt;/li&gt;
&lt;li&gt;优点：可彩色、高分辨率、适合复杂图案、速度快&lt;/li&gt;
&lt;li&gt;缺点：表面硬度比喷漆低，容易刮花（但可加保护透明漆）&lt;/li&gt;
&lt;li&gt;适用场景：LOGO、彩色图标、少量生产、定制版&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;金属铭牌--标牌蚀刻丝印激光&#34;&gt;金属铭牌 / 标牌（蚀刻、丝印、激光）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;形式：独立金属片，固定在机箱上（铆接或粘贴）&lt;/li&gt;
&lt;li&gt;优点：坚固、耐腐蚀、显专业&lt;/li&gt;
&lt;li&gt;缺点：成本高、需要安装工序&lt;/li&gt;
&lt;li&gt;适用：型号铭牌、参数铭牌、品牌标识&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;热转印--水转印&#34;&gt;热转印 / 水转印
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;优点：可做非常复杂的图案，立体感强、效果好&lt;/li&gt;
&lt;li&gt;缺点：工艺要求高、适合塑料壳&lt;/li&gt;
&lt;li&gt;场景：外观要求高、消费类产品&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;贴纸普通--透明-pet--pvc--强粘--背胶&#34;&gt;贴纸（普通 / 透明 PET / PVC / 强粘 / 背胶）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;优点：成本低、灵活、快速、适用于小批量&lt;/li&gt;
&lt;li&gt;缺点：容易翘边、老化、掉色&lt;/li&gt;
&lt;li&gt;场景：试产阶段、型号区分标签、临时标识&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;移印pad-printing&#34;&gt;移印（Pad printing）
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;优点：适合弧面、凹凸表面印字&lt;/li&gt;
&lt;li&gt;缺点：不如激光耐用&lt;/li&gt;
&lt;li&gt;场景：按钮、旋钮、曲面外壳&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;选择建议&#34;&gt;选择建议
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工控仪表、CEMS、户外设备：激光雕刻 / 金属铭牌（耐久）&lt;/li&gt;
&lt;li&gt;批量塑料外壳：丝印&lt;/li&gt;
&lt;li&gt;LOGO 彩色、高质量外观：UV 打印&lt;/li&gt;
&lt;li&gt;小批量或者研发阶段：贴纸&lt;/li&gt;
&lt;li&gt;曲面按键：移印&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
</description>
        </item>
        <item>
        <title>主板字库文件</title>
        <link>https://teaize.github.io/p/%E4%B8%BB%E6%9D%BF%E5%AD%97%E5%BA%93%E6%96%87%E4%BB%B6/</link>
        <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%B8%BB%E6%9D%BF%E5%AD%97%E5%BA%93%E6%96%87%E4%BB%B6/</guid>
        <description>&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;vi&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nanox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;bin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Casella&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;切换成英文输入法，&lt;code&gt;Shift+D&lt;/code&gt;，删除字符 &lt;code&gt;&amp;amp;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;cd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;share&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fonts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X11&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dpi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mnt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nfs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Sung&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;12.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fnt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ls&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Sung&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;12.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fnt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bootdelay&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;pri&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>装配辅助件</title>
        <link>https://teaize.github.io/p/%E8%A3%85%E9%85%8D%E8%BE%85%E5%8A%A9%E4%BB%B6/</link>
        <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%A3%85%E9%85%8D%E8%BE%85%E5%8A%A9%E4%BB%B6/</guid>
        <description>&lt;ul&gt;
&lt;li&gt;手动工具
&lt;ul&gt;
&lt;li&gt;螺丝刀：用于拧紧或拆卸螺丝，固定 PCB、电源板、端子、外壳等&lt;/li&gt;
&lt;li&gt;内六角扳手：用于紧固内六角螺钉，常用于结构件或机壳连接&lt;/li&gt;
&lt;li&gt;钳子（尖嘴钳、斜口钳）：尖嘴钳用于夹持、弯线；斜口钳用于剪电线、扎带&lt;/li&gt;
&lt;li&gt;扳手/套筒：拧螺母、螺栓&lt;/li&gt;
&lt;li&gt;镊子：夹小元器件、定位紧凑空间的螺丝&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;电气与焊接工具
&lt;ul&gt;
&lt;li&gt;烙铁：焊接电阻、电容、芯片等元件到电路板上&lt;/li&gt;
&lt;li&gt;热熔胶枪：用于临时固定线束、插头、PCB，防止振动松动&lt;/li&gt;
&lt;li&gt;热风枪：拆焊芯片、热缩管收缩、防水封线&lt;/li&gt;
&lt;li&gt;万用表：测量电压、电流、电阻，检查电路是否正常&lt;/li&gt;
&lt;li&gt;电笔：检测是否带电&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;材料与辅料
&lt;ul&gt;
&lt;li&gt;硅橡胶（RTV silicone）：用于密封、防水、减震、固定元件，常用于探头、电缆入口处&lt;/li&gt;
&lt;li&gt;导热硅脂/导热垫片：用于功率器件（MOSFET、稳压器）与散热器之间，提高散热&lt;/li&gt;
&lt;li&gt;绝缘胶带（PVC）：包线、绝缘、临时固定&lt;/li&gt;
&lt;li&gt;高温胶带（Kapton）：隔离高温区域，如焊接附近&lt;/li&gt;
&lt;li&gt;扎带：整理线束，避免干扰和拉扯&lt;/li&gt;
&lt;li&gt;热缩管：包裹接线点，加强绝缘、防水&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;精密工具与测量工具
&lt;ul&gt;
&lt;li&gt;游标卡尺：测量尺寸，保证结构件间配合精确&lt;/li&gt;
&lt;li&gt;扭力螺丝刀：用于控制紧固力度防止损坏塑料或螺纹&lt;/li&gt;
&lt;li&gt;划线笔、记号笔：标记装配位置&lt;/li&gt;
&lt;li&gt;放大灯/显微镜：观看小型贴片器件焊点&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;清洁与整理
&lt;ul&gt;
&lt;li&gt;酒精：清理焊锡残留、清洁探头表面&lt;/li&gt;
&lt;li&gt;防静电刷：清理电路板不伤元件&lt;/li&gt;
&lt;li&gt;防静电手环：防止静电损坏芯片&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;结构辅助件
&lt;ul&gt;
&lt;li&gt;垫片、螺母、螺丝、铆钉：用于结构固定与装配&lt;/li&gt;
&lt;li&gt;橡胶减震垫：用于仪器内部减震、降低噪声提升可靠性&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>关于气阻的理解</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%B0%94%E9%98%BB%E7%9A%84%E7%90%86%E8%A7%A3/</link>
        <pubDate>Mon, 24 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%B0%94%E9%98%BB%E7%9A%84%E7%90%86%E8%A7%A3/</guid>
        <description>&lt;h2 id=&#34;关于气阻&#34;&gt;关于气阻
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在 CEMS 仪器仪表当中，最好在检测气室出口设置阀门或性能稳定的气阻阀，以提高气室背压，减少流速变化对测量的影响，同时还可以提高仪表的灵敏度。
如何理解上述这段话&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;假设你想精确测量一条管道里水的温度或成分，如果水流很急、忽快忽慢，你放在水里的温度探头就会一直被冲得乱晃，测量值又会受到流速变化带来的“扰动”，读数不稳定。如果在出口处加一个阀门，让水“稍微堵一点”，形成一定的&lt;strong&gt;背压&lt;/strong&gt;，水流就会变得&lt;strong&gt;平稳、缓慢、可控&lt;/strong&gt;，测量就更加稳定和精确。&lt;/p&gt;
&lt;h3 id=&#34;气阻的实际作用&#34;&gt;气阻的实际作用
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;稳定流速
&lt;ul&gt;
&lt;li&gt;气阻相当于在出口处加一个“刹车”，让气体流速更恒定。&lt;/li&gt;
&lt;li&gt;流速稳定 → 吸收室或光腔内的气体浓度变化更稳定 → 输出信号更平滑。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;提高背压
&lt;ul&gt;
&lt;li&gt;背压升高后，气体在气室里停留时间变长，反应更充分。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;减少外界扰动
&lt;ul&gt;
&lt;li&gt;采样泵波动&lt;/li&gt;
&lt;li&gt;前级采样管抽力变化&lt;/li&gt;
&lt;li&gt;烟道压力变化&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种思想有点像是控温。例如环境温度可能在 -10℃、有的环境温度可能 20℃、有的可能 30℃，但是为了在测量时保持一个恒温的温度测量，就会将预设温度提高到例如 50℃，这样不管周边的环境温度是多少度，最终都会加热到 50℃。气阻这个例子就是将预设的流量设置到一个非常低的水平，这样就算采样泵老化或者前级管抽力发生变化，也不会影响到整体的流量&lt;/p&gt;
&lt;p&gt;核心思想是：主动建立稳定的工作点，消除外界波动带来的干扰。&lt;/p&gt;
&lt;h3 id=&#34;核心思想&#34;&gt;核心思想
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;人为设定一个“目标工作条件”
&lt;ul&gt;
&lt;li&gt;例如温度设为 50℃，流量设为低而稳定的参考流量。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;让系统在这个目标点附近稳定工作
&lt;ul&gt;
&lt;li&gt;不管外界怎么变，内部都保持一致的工作条件。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;削弱外界波动对测量结果的影响
&lt;ul&gt;
&lt;li&gt;例如外界温度、压力、抽力变化。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也就是说：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;控温系统：把测量环境变成“自己说了算” → 周围 -10℃也无所谓&lt;/li&gt;
&lt;li&gt;气阻系统：把流量变成“自己说了算” → 泵强一点或弱一点也无所谓&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;换句话说：&lt;/p&gt;
&lt;p&gt;系统越稳定，测量越可靠；不去追着外界变化跑，而是建立自己的“标准平台”。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>NPD自恋型人格障碍</title>
        <link>https://teaize.github.io/p/npd%E8%87%AA%E6%81%8B%E5%9E%8B%E4%BA%BA%E6%A0%BC%E9%9A%9C%E7%A2%8D/</link>
        <pubDate>Sun, 23 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/npd%E8%87%AA%E6%81%8B%E5%9E%8B%E4%BA%BA%E6%A0%BC%E9%9A%9C%E7%A2%8D/</guid>
        <description>&lt;p&gt;起初自己并不相信“人格”这个说法，认为和“十二星座”、“阴阳五行”是一种性质的。没有接触过类似的书籍，没有接触过相关的课程，也因此更不会去主动搜索了解，直到身边真正遇到这样的人。&lt;/p&gt;
&lt;p&gt;NPD 是 Narcissistic Personality Disorder 的缩写，中文叫做&lt;strong&gt;自恋型人格障碍&lt;/strong&gt;。这种说法是有科学依据的，它被 DSM-5（美国精神疾病诊断与统计手册第 5 版）明确列为一种人格障碍，也就是说，它不是网络上随便起的词，而&lt;strong&gt;是一种有临床研究与诊断标准支撑的心理障碍&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;1、几个典型特征是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;极度需要被崇拜和关注：希望别人认可、赞美自己，稍微受到否定就难以接受&lt;/li&gt;
&lt;li&gt;具有特权感，不合理地期待特殊待遇或他人会无条件顺从&lt;/li&gt;
&lt;li&gt;在人际关系中剥削他人，利用他人来达成自己的目的&lt;/li&gt;
&lt;li&gt;缺乏共情能力：很难真正理解别人的感受，经常伤害别人但不自知&lt;/li&gt;
&lt;li&gt;经常嫉妒他人或认为别人嫉妒自己&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2、与“普通自恋”的区别&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;普通自恋（健康）&lt;/th&gt;
          &lt;th&gt;NPD（障碍）&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;爱自己、努力提升&lt;/td&gt;
          &lt;td&gt;脆弱自尊、无法接受失败&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;有共情能力，能换位思考&lt;/td&gt;
          &lt;td&gt;缺乏共情，忽略他人感受&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;能接受批评&lt;/td&gt;
          &lt;td&gt;对批评极度敏感&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;能建立正常关系&lt;/td&gt;
          &lt;td&gt;人际关系混乱，利用别人&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;3、相关读物&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;《情感勒索》——先理解控制与操纵
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://book.douban.com/subject/30235060/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;情感勒索 (豆瓣)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;《自恋的基因》——了解 NPD
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://book.douban.com/subject/35189020/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;自恋的基因 (豆瓣)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;《原生家庭》——理解深层原因与疗愈方向
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://book.douban.com/subject/30199434/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;原生家庭 (豆瓣)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;4、属于什么领域的科学，如何从零开始接触这个领域&lt;/p&gt;
&lt;p&gt;NPD 人格障碍属于精神病学（Psychiatry）和临床心理学（Clinical Psychology）领域。&lt;/p&gt;
&lt;p&gt;如果想进一步了解这个领域，可以按这个顺序展开：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;普通心理学 &amp;amp; 人格心理学
&lt;ul&gt;
&lt;li&gt;了解基本概念、什么是人格&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;临床心理学 &amp;amp; 异常心理学
&lt;ul&gt;
&lt;li&gt;了解人格障碍分类标准&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;依恋理论
&lt;ul&gt;
&lt;li&gt;了解人格形成机制&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;自体心理学 / NPD 专题研究
&lt;ul&gt;
&lt;li&gt;深入理解自恋人格的结构&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;咨询与治疗方法
&lt;ul&gt;
&lt;li&gt;了解如何帮助或相处&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;5、遗憾和痛恨的是，自己 2025 年才意识到这样的概念&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;学校教育更多关注“知识”，而不是“自我和心理”
&lt;ul&gt;
&lt;li&gt;很少有人教我们，情绪是什么、人格是什么、如何理解自己，于是心理学、人格学变成了“只有遇到问题才会接触的知识”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;人容易把“看不见的东西”当成不重要
&lt;ul&gt;
&lt;li&gt;心理、人格、情绪无法像机械结构那样看见与测量，所以很多人觉得：“跟我没关系”、“没必要研究”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;人在没有遇到痛点前，&lt;strong&gt;不会主动探索认知边界&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;很多概念，只有在经历冲突、挫折、关系困扰、工作压力后， 才会让人想：“为什么会这样？有没有更深的解释？”。这时才会发现自己理解世界的方式不够用了&lt;/li&gt;
&lt;li&gt;痛点 ≈ 打开新世界的大门&lt;/li&gt;
&lt;li&gt;另外，自己以往太过于自信，过去思维体系足以支持自己成长的一段时间，没有意识到自己的思维体系已开始进入一种故步自封的状态&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;6、之后如何避免类似的问题&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;保持谦卑，不轻易下结论
&lt;ul&gt;
&lt;li&gt;遇到不懂的问题，先问：这件事我真的了解吗？有没有可能我不知道关键的信息？&lt;/li&gt;
&lt;li&gt;少评判，多提问&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;建立长期学习机制，而不是靠随机触发
&lt;ul&gt;
&lt;li&gt;每周选一个领域补充新知识&lt;/li&gt;
&lt;li&gt;订阅领域文章、视频&lt;/li&gt;
&lt;li&gt;与不同背景的人交流&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;意识到“看不见的东西往往最重要”
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;心理、关系、认知、思维模式比技术、工具更影响人生走向&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;允许自己“暂时不知道”
&lt;ul&gt;
&lt;li&gt;“不知道”不是弱点，而是通往真正理解的入口&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;每次遇到困惑，问自己三个问题
&lt;ul&gt;
&lt;li&gt;我以前的认知在哪个地方失效了？&lt;/li&gt;
&lt;li&gt;为什么会失效？&lt;/li&gt;
&lt;li&gt;我接下来要补什么？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;给我的一种感觉是：NPD 就像是情感当中的吸血鬼。如果将感情比作交易系统当中的价值曲线，当前价值对应你两的感情，NPD 就像是大空头，时不时需要空一下，你必须充当多头的角色，不断往里投入时间、情绪、增大对她的包容和服从。
你作为多头，持续的投入，直到某一天，你终于快坚持不住了，而此时 NPD 却持续吸走你的能量。当你也从多头转到空头的那一天，感情出现恐慌情绪，价值曲线快速下跌。当价格跌破某一感情线时，这段感情可能就彻底结束了。
类似于我在加杠杆做多，而 NPD 却在不断套现，导致情绪资产无法继续维持，最终断崖式崩盘&lt;/p&gt;
&lt;p&gt;NPD is like an emotional vampire. If we compare a relationship to a trading system’s value curve—where the current value represents the emotional state between two people—then NPD behaves like a major short seller. They constantly need to short the market emotionally, and you are forced to take the long position, continuously investing time, emotions, patience, and obedience.
As the long side, you keep injecting energy into the relationship until one day you can barely hold on, while the NPD partner keeps draining your emotional resources. When you finally switch from long to short, panic hits the emotional market and the value curve collapses rapidly. Once the price breaks below a certain emotional support line, the relationship may be completely finished.
It’s like you are adding leverage to go long, while the NPD is continually cashing out, causing the emotional asset to become unsustainable and ultimately crash off a cliff.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>关于惯性的思考</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%83%AF%E6%80%A7%E7%9A%84%E6%80%9D%E8%80%83/</link>
        <pubDate>Sun, 23 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E6%83%AF%E6%80%A7%E7%9A%84%E6%80%9D%E8%80%83/</guid>
        <description>&lt;p&gt;发现一个有趣的规律：很多东西都存在惯性，例如传统文化，一些比较糟粕的传统文化到如今依旧还有很多人遵从；传感器也有惯性，例如热电偶和热电阻的热惯性就不一样&lt;/p&gt;
&lt;p&gt;绝大多数现实世界中的系统和现象都表现出某种形式的“惯性”或“滞后”，这意味着它们对外部变化的响应总是需要时间，并且会“留恋”于它们之前的状态。本质上，本质上都是&lt;strong&gt;系统抵抗状态改变的能力&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;物理学：质量惯性&lt;/li&gt;
&lt;li&gt;工程学：热惯性
&lt;ul&gt;
&lt;li&gt;热电偶与热电阻： 它们的测量端都有一定的质量和体积。当环境温度突然变化时，它们需要时间来加热或冷却到新的温度。这个时间就是它们的热惯性，通常用时间常数 ($\tau$) 来衡量&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;电学：电感、电容，抵抗的结果是电流/电压的瞬时改变&lt;/li&gt;
&lt;li&gt;生物学：初中学过的生态系统具有稳定性，实际上也是惯性。
&lt;ul&gt;
&lt;li&gt;一个成熟的生态系统对外部的干扰（如气候变化、物种入侵）具有很强的抵抗力。即使受到一定程度的破坏，它也能在一定程度上恢复，这种抵抗和恢复的能力就是生态惯性&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;文化与社会惯性：一种思想、制度或传统一旦确立，&lt;strong&gt;即使环境变化或证明其不合理，它也会继续存在很长时间&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以说，&lt;strong&gt;惯性是系统的固有属性&lt;/strong&gt;，正是这种惯性使世界从混沌走向有序，也是我们设计控制系统时必须考虑的核心因素。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>情感曲线</title>
        <link>https://teaize.github.io/p/%E6%83%85%E6%84%9F%E6%9B%B2%E7%BA%BF/</link>
        <pubDate>Sun, 23 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%83%85%E6%84%9F%E6%9B%B2%E7%BA%BF/</guid>
        <description>&lt;p&gt;该篇继《NPD 自恋型人格障碍》&lt;/p&gt;
&lt;p&gt;其一，不要太陷入某一次吵架当中，等事后你会发现，这其实只是一场短暂的多空博弈而已。（1）不要情绪化交易，（2）格局要大一点。如果目光短浅，仅仅沉溺在这段吵架当中，只会消耗自己的意志和专注力，让自己焦虑。
情感曲线像加密货币市场，24h 开市，周六周天也不休息。如果是长期投资者，只要不双方不犯原则性问题，就不要太关注这些小争执，多将注意力转移到真正需要的地方。
交往了这么久，情感曲线经营了那么久，不会就因为这点鸡毛蒜片的小事结束了吧，我是不信的。&lt;/p&gt;
&lt;p&gt;其二，上面说的，格局要大一点，可是，如果缩小整条情感曲线（纵观所有的交往），都看不到曲线明显的上涨或下跌的趋势，一只处于横盘状态，那说明这段感情也是有问题的。或许是双方没有一个共同目标，或许双方眼光太过于狭隘&lt;/p&gt;
</description>
        </item>
        <item>
        <title>认知能力训练方法</title>
        <link>https://teaize.github.io/p/%E8%AE%A4%E7%9F%A5%E8%83%BD%E5%8A%9B%E8%AE%AD%E7%BB%83%E6%96%B9%E6%B3%95/</link>
        <pubDate>Sun, 23 Nov 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%AE%A4%E7%9F%A5%E8%83%BD%E5%8A%9B%E8%AE%AD%E7%BB%83%E6%96%B9%E6%B3%95/</guid>
        <description>&lt;h2 id=&#34;认知能力训练方法&#34;&gt;认知能力训练方法
&lt;/h2&gt;&lt;h3 id=&#34;-认知输入训练&#34;&gt;① 认知输入训练
&lt;/h3&gt;&lt;p&gt;每天至少 20～30 分钟 接触新知识，让大脑持续更新模型&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;读一本专业书 / 通识书&lt;/li&gt;
&lt;li&gt;看一篇深度文章&lt;/li&gt;
&lt;li&gt;听专家讲解或课程&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目标不是读多少，而是：看见新的观点，挑战旧的思维框架&lt;/p&gt;
&lt;h3 id=&#34;-认知输出训练&#34;&gt;② 认知输出训练
&lt;/h3&gt;&lt;p&gt;把学到的内容用自己的话表达出来&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;写一段总结（100~200 字即可）&lt;/li&gt;
&lt;li&gt;讲给别人听（或模拟讲给别人听）
&lt;ul&gt;
&lt;li&gt;我学到了什么&lt;/li&gt;
&lt;li&gt;哪句话最触动我&lt;/li&gt;
&lt;li&gt;怎样能用到现实场景&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;原理：输出 = 深度理解 + 反思，是真正吸收的过程&lt;/p&gt;
&lt;h3 id=&#34;-自我提问法提升思维深度&#34;&gt;③ 自我提问法（提升思维深度）
&lt;/h3&gt;&lt;p&gt;遇到任何事情，不急着下结论，让自己养成 5 个问题反射&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;为什么？
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;有没有更好的解释？
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;有没有证据？
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;如果相反情况成立会怎样？
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;真正的底层逻辑是什么？
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这 5 个问题，会强迫大脑走更深的路径，而不是停留在表面。&lt;/p&gt;
&lt;h3 id=&#34;-认知盲区训练&#34;&gt;④ 认知盲区训练
&lt;/h3&gt;&lt;p&gt;每周选一个完全不懂或不熟悉的领域主题，比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;心理学、经济学、哲学、神经科学、历史、金融&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目标不是成为专家，而是：&lt;strong&gt;让大脑习惯在陌生领域生存，降低傲慢，提高开放度&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;-假设检验训练防止自以为是&#34;&gt;⑤ 假设检验训练（防止自以为是）
&lt;/h3&gt;&lt;p&gt;当你产生一个观点时，做一件事：找会反驳你的证据&lt;/p&gt;
&lt;p&gt;例子：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“我觉得市场会涨” → 去找“为什么会跌”的理由&lt;/li&gt;
&lt;li&gt;“某个人很糟糕” → 去找“他可能被误解”的理由&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这叫二阶思考，能有效避免固化思维与认知偏见&lt;/p&gt;
&lt;h3 id=&#34;-复盘训练提升判断力&#34;&gt;⑥ 复盘训练（提升判断力）
&lt;/h3&gt;&lt;p&gt;每天 5 分钟回顾今天的决策，问 3 个问题：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;今天最值得总结的 1 件事是什么？
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;为什么会这样？
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;如果重来，我会怎么做？
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;复盘不是写流水账，是写 认知升级点&lt;/p&gt;
&lt;h3 id=&#34;-建立一点点进步表&#34;&gt;⑦ 建立“一点点进步表”
&lt;/h3&gt;&lt;p&gt;每天只要求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 个输入&lt;/li&gt;
&lt;li&gt;1 个输出&lt;/li&gt;
&lt;li&gt;1 个思考&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;每天 1mm，持续一年 = 巨大差异&lt;/p&gt;
&lt;h2 id=&#34;训练的核心思想&#34;&gt;训练的核心思想
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;认知不是天赋，是肌肉
肌肉靠训练增长，不靠想象增长&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;只要做到一件事，你一定会变强：持续训练，而不是偶尔努力&lt;/p&gt;
&lt;h2 id=&#34;建议执行模板&#34;&gt;建议执行模板
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;输入：看书10分钟 / 视频10分钟
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;输出：写总结100字
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;思考：3个关键问题
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;坚持 60 天，你会看到明显变化：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;思考更深&lt;/li&gt;
&lt;li&gt;容易看清问题核心&lt;/li&gt;
&lt;li&gt;不再被情绪带跑&lt;/li&gt;
&lt;li&gt;更稳、更清晰、更独立&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;认知能力书单&#34;&gt;认知能力书单
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;《认知觉醒：开启自我改变的原动力》 — 周坤 著。内容涵盖“大脑起源、潜意识、元认知、专注力”等，对“提升认知”这个主题切入较好。&lt;/li&gt;
&lt;li&gt;《清醒思考的艺术》 — 罗尔夫·多贝里 著（中文译本）。讨论常见思维谬误、怎么让思维更清晰。来自豆瓣书单推荐。&lt;/li&gt;
&lt;li&gt;《认知心理学及其启示》 — 约翰·R·安德森 著（中文版）。这是偏“理论 + 科学”的入门读物，适合你当做 “认知能力提升” 的基础书。&lt;/li&gt;
&lt;li&gt;《身份的焦虑》 — 艾伦·狄波顿 著。虽然不专讲“认知训练”，但从社会心理／自我认知角度，很能开阔视野。&lt;/li&gt;
&lt;li&gt;《人类简史》 — 尤瓦尔·赫拉利 著。虽然是历史类书籍，但书中“认知革命”一章对理解人类思维、认知演化很有启发。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>压力传感器</title>
        <link>https://teaize.github.io/p/%E5%8E%8B%E5%8A%9B%E4%BC%A0%E6%84%9F%E5%99%A8/</link>
        <pubDate>Sun, 23 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8E%8B%E5%8A%9B%E4%BC%A0%E6%84%9F%E5%99%A8/</guid>
        <description>&lt;h3 id=&#34;压力传感器类型&#34;&gt;压力传感器类型
&lt;/h3&gt;&lt;h4 id=&#34;表压gauge-pressure-gp&#34;&gt;表压（Gauge Pressure, GP）
&lt;/h4&gt;&lt;p&gt;表压是相对于大气压的压力。大多数日常使用的压力传感器（如轮胎压力表）都是表压传感器&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例如：一个轮胎的内部压力测量值为 250 kPa（表压），表示该压力比大气压 101.3 kPa 高出 250 kPa&lt;/li&gt;
&lt;li&gt;计算公式：$P_{\text{表}} = P_{\text{绝}} - P_{\text{大气}}$&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;绝压absolute-pressure-ap&#34;&gt;绝压（Absolute Pressure, AP）
&lt;/h4&gt;&lt;p&gt;绝压是相对于绝对真空（0 Pa）的压力，常用于气象测量、航空和工业真空系统等领域&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例如：标准大气压 101.3 kPa 就是一个绝对压力值&lt;/li&gt;
&lt;li&gt;计算公式：$P_{\text{绝}} = P_{\text{表}} + P_{\text{大气}}$&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;差压differential-pressure-dp&#34;&gt;差压（Differential Pressure, DP）
&lt;/h4&gt;&lt;p&gt;差压是指两个不同位置之间的压力差，广泛用于流量计（如孔板流量计）、过滤器监测等&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例如：测量管道内流体的进出口压力差，以计算流量或监测堵塞情况&lt;/li&gt;
&lt;li&gt;计算公式：$P_{\text{差}} = P_1 - P_2$&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;复合压compound-pressure-cp&#34;&gt;复合压（Compound Pressure, CP）
&lt;/h4&gt;&lt;p&gt;复合压可以测量正压和负压（真空），适用于既需要测量正压，又要测量真空的应用场景，如空调系统和气体泄漏检测等&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例如：空调系统可能会测量 -50 kPa（真空） 到 +300 kPa 之间的压力范围&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;小结&#34;&gt;小结
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;参考压力&lt;/th&gt;
          &lt;th&gt;适用场景&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;表压&lt;/td&gt;
          &lt;td&gt;大气压&lt;/td&gt;
          &lt;td&gt;轮胎压力、液压系统&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;绝压&lt;/td&gt;
          &lt;td&gt;绝对真空&lt;/td&gt;
          &lt;td&gt;气象、航空、真空设备&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;差压&lt;/td&gt;
          &lt;td&gt;两点之间&lt;/td&gt;
          &lt;td&gt;流量计、过滤器监测&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;复合压&lt;/td&gt;
          &lt;td&gt;大气压（正压 + 负压）&lt;/td&gt;
          &lt;td&gt;空调、气体泄漏检测&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250323192216.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250323192216.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;某压力传感器技术特点：&lt;a class=&#34;link&#34; href=&#34;https://www.sensepa.com.cn/product/727990/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;放大型SDX - SDX系列 - Product - 上海圣色传感技术有限公司_Sensepa_专业定制_压力传感器_压力变送器_倾角开关_角度传感器&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;主要参数有&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;供电电压&lt;/li&gt;
&lt;li&gt;供电电流&lt;/li&gt;
&lt;li&gt;压力量程&lt;/li&gt;
&lt;li&gt;零点输出&lt;/li&gt;
&lt;li&gt;满量程输出&lt;/li&gt;
&lt;li&gt;输出源电流&lt;/li&gt;
&lt;li&gt;精度&lt;/li&gt;
&lt;li&gt;响应时间&lt;/li&gt;
&lt;li&gt;过载压力&lt;/li&gt;
&lt;li&gt;补偿温度&lt;/li&gt;
&lt;li&gt;工作温度&lt;/li&gt;
&lt;li&gt;储存温度&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;零点输出电压&#34;&gt;零点输出电压
&lt;/h3&gt;&lt;p&gt;以上举例的压力传感器中，零点输出是&lt;strong&gt;0.5V&lt;/strong&gt;（或其他非零电压），并不一定是零点对应的 0V，这样做有什么好处呢：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;防止负压或负信号
&lt;ul&gt;
&lt;li&gt;在单电源供电系统（如 5V 或 10V）中，如果传感器的零点输出为 0V，那么负压可能无法正确检测，甚至可能被误认为是断开或故障&lt;/li&gt;
&lt;li&gt;采用 0.5V 零点 可以让传感器支持一定范围的负压（如 -100 kPa ～ +100 kPa）&lt;/li&gt;
&lt;li&gt;防止传感器零漂影响：传感器在长时间使用后，可能会发生零漂，如果零点设为 0V，一旦零漂出现，可能会导致负压误判或数据错误；设定 0.5V 零点 可以给零点漂移留有一定的容错空间，提高稳定性&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;避免信号处理中的非线性问题
&lt;ul&gt;
&lt;li&gt;许多传感器输出信号后，会经过运算放大器、ADC（模数转换器）等电路处理，而 &lt;strong&gt;0V 信号可能会遇到非线性误差，或者导致放大电路无法正常工作&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;适应标准信号输出
&lt;ul&gt;
&lt;li&gt;工业标准信号常见的输出范围：
&lt;ul&gt;
&lt;li&gt;0.5V ～ 4.5V（对应 0% ～ 100% 压力范围）&lt;/li&gt;
&lt;li&gt;1V ～ 5V（适用于部分控制系统）&lt;/li&gt;
&lt;li&gt;4mA ～ 20mA（常见于工业自动化传感器）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;其中 0.5V ～ 4.5V 这种方式可以避免 0V（可能被误认为断线），同时提供较大的信号范围，方便后续信号处理&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;补偿温度&#34;&gt;补偿温度
&lt;/h3&gt;&lt;p&gt;以上举例的压力传感器中，温度补偿范围为 0-85℃，那么补偿温度有什么意义：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;压力传感器通常由应变片、MEMS 芯片等敏感元件构成，&lt;strong&gt;温度变化会影响其电阻值、灵敏度、零点漂移等特性，导致误差&lt;/strong&gt;。如果没有温度补偿，环境温度变化会导致传感器输出偏差&lt;/li&gt;
&lt;li&gt;补偿温度范围（0～85℃） 说明在该范围内，传感器的测量误差已经过工厂校准和补偿，误差被控制在规格书允许的范围内；超出补偿温度范围（如低于 0℃ 或高于 85℃），传感器仍可工作，但误差可能增大，不再符合精度指标&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;常见的补偿方式有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;温度传感器补偿：&lt;strong&gt;内置温度传感器&lt;/strong&gt;，实时检测温度变化，进行数字或模拟补偿。&lt;/li&gt;
&lt;li&gt;激光修正补偿：在生产时，工厂通过激光调整电阻或 EEPROM 校准参数，减少温度漂移
&lt;ul&gt;
&lt;li&gt;通过激光修正电阻，改变传感器的电桥平衡，使其零点漂移最小化&lt;/li&gt;
&lt;li&gt;通过测试不同温度点的传感器误差，并计算补偿参数，写入 EEPROM，让传感器自动修正漂移&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;软件补偿：某些智能传感器可通过 MCU 计算修正温漂误差。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;压力传感器按工作原理分类&#34;&gt;压力传感器按工作原理分类
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;应变片式（Strain Gauge）：利用惠斯通电桥测量压力引起的微小变形，广泛用于工业控制&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;压阻式&lt;/strong&gt;（Piezoresistive）：常见于 MEMS 传感器，灵敏度高，但需要温度补偿&lt;/li&gt;
&lt;li&gt;电容式（Capacitive）：用于测量小压力变化，如医疗设备&lt;/li&gt;
&lt;li&gt;谐振式（Resonant）：通过频率变化检测压力，常用于高精度测量&lt;/li&gt;
&lt;li&gt;光纤式（Optical Fiber）：适用于高温、高压、强电磁干扰环境&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;使用注意事项&#34;&gt;使用注意事项
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;选型注意
&lt;ul&gt;
&lt;li&gt;量程匹配：压力传感器的满量程应略大于工作压力的 1.5～2 倍，以防止过载损坏。&lt;/li&gt;
&lt;li&gt;工作温度：确保传感器的补偿温度和工作温度符合环境要求。&lt;/li&gt;
&lt;li&gt;防护等级（IP 级别）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;安装与维护
&lt;ul&gt;
&lt;li&gt;传感器安装方向：
&lt;ul&gt;
&lt;li&gt;液体测量：传感器应安装在管道下方，避免气泡影响&lt;/li&gt;
&lt;li&gt;气体测量：传感器应安装在管道上方，避免冷凝水影响&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;避免机械冲击与振动，必要时加减震装置&lt;/li&gt;
&lt;li&gt;防止电磁干扰：
&lt;ul&gt;
&lt;li&gt;传感器信号线避免与强电电缆并行敷设&lt;/li&gt;
&lt;li&gt;使用屏蔽电缆，并在单侧接地 (屏蔽层的一端接地，外部电磁干扰通过屏蔽层流入接地)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;定期校准
&lt;ul&gt;
&lt;li&gt;一般压力传感器建议每 6 个月至 1 年校准一次&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.amphenol-sensors.com/en/novasensor/pressure-sensors/3453-npi-19-medium&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;NPI-19 Series Medium Pressure Sensors | NovaSensor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://m.gys.cn/yalichuanganqi/4997994590.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;NPI-19A-CZ101AH软排线芯体绝压15psi压力传感器Novasensor - 供应商网&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://www.aosong.com/products-212.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;AGR12 表压型压力传感器（模拟款）-压力传感器-温湿度传感器 温湿度芯片 温湿度变送器模块 气体传感器 流量传感器 广州奥松电子股份有限公司&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.sensepa.com.cn/product/727990/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;放大型SDX - SDX系列 - Product - 上海圣色传感技术有限公司_Sensepa_专业定制_压力传感器_压力变送器_倾角开关_角度传感器&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>About Anki</title>
        <link>https://teaize.github.io/p/about-anki/</link>
        <pubDate>Sat, 22 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/about-anki/</guid>
        <description>&lt;h3 id=&#34;anki2obsidian&#34;&gt;Anki2Obsidian
&lt;/h3&gt;&lt;p&gt;例如在笔记当中：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;a href=&amp;#34;obsidian://open?vault=SynZhPObsidan&amp;amp;amp;file=05-Work%2FRFID%E6%89%AB%E6%8F%8F%E7%B3%BB%E7%BB%9F&amp;#34;&amp;gt;Obsidian笔记&amp;lt;/a&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250322160943.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250322160943.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;可以通过该超链接调整到 Obsidian 笔记&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250322160953.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250322160953.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;anki-中的特殊字段&#34;&gt;Anki 中的特殊字段
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The note&amp;#39;s tags: {{Tags}}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The type of note: {{Type}}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The card&amp;#39;s deck: {{Deck}}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The card&amp;#39;s subdeck: {{Subdeck}}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The card&amp;#39;s flag: {{CardFlag}}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The type of card (&amp;#34;Forward&amp;#34;, etc): {{Card}}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The content of the front template
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;(only valid in back template): {{FrontSide}}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;例如在模板中插入字段：

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250320215336.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250320215336.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h3&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://anki-doc.youlan.pro/FieldReplacements.html#%e6%8f%90%e7%a4%ba%e5%ad%97%e6%ae%b5&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;6.1. 字段替换 | Anki 官方文档翻译&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>管道常用五种阀门工作原理</title>
        <link>https://teaize.github.io/p/%E7%AE%A1%E9%81%93%E5%B8%B8%E7%94%A8%E4%BA%94%E7%A7%8D%E9%98%80%E9%97%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</link>
        <pubDate>Sat, 22 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E7%AE%A1%E9%81%93%E5%B8%B8%E7%94%A8%E4%BA%94%E7%A7%8D%E9%98%80%E9%97%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</guid>
        <description>&lt;h3 id=&#34;截止阀&#34;&gt;截止阀
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工作原理：通过阀瓣的上下移动来调节流体的流量，阀瓣与阀座之间的密封来关闭或开启流动通道&lt;/li&gt;
&lt;li&gt;应用场合：适用于流量调节和关闭场合，常用于水、气、油等流体的管道中&lt;/li&gt;
&lt;li&gt;区别：适合精确调节流量，不适合快速开启或关闭&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;止回阀&#34;&gt;止回阀
&lt;/h3&gt;&lt;p&gt;参考资料：&lt;a class=&#34;link&#34; href=&#34;https://www.douyin.com/video/7016633131096673566&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;douyin.com/video/7016633131096673566&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;工作原理：依靠流体的流动方向来控制阀门的开启或关闭，防止流体反向流动&lt;/li&gt;
&lt;li&gt;应用场合：用于防止回流的场合，如泵的出口&lt;/li&gt;
&lt;li&gt;区别：只允许单向流动，不可用于调节流量&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250322155957.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250322155957.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;蝶阀&#34;&gt;蝶阀
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工作原理：通过蝶板在阀体内的旋转来调节或截断流体的流动，蝶板的角度决定流量大小。&lt;/li&gt;
&lt;li&gt;应用场合：适用于气体和液体的流量控制，尤其在大口径管道中。&lt;/li&gt;
&lt;li&gt;区别：结构简单，重量轻，适合大流量和低压场合。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;闸阀&#34;&gt;闸阀
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工作原理：通过阀瓣的上下移动来实现全开或全关状态，流体在阀体内几乎没有阻碍。&lt;/li&gt;
&lt;li&gt;应用场合：主要用于管道的开启和关闭，适合于不需要流量调节的场合。&lt;/li&gt;
&lt;li&gt;区别：流阻小，密封性好，但不适合频繁开关。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;球阀&#34;&gt;球阀
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工作原理：通过一个带有通孔的球体旋转来控制流体的流动，球体的旋转可实现快速开启和关闭。&lt;/li&gt;
&lt;li&gt;应用场合：广泛应用于水、油、气等流体的管道，适合频繁操作的场合。&lt;/li&gt;
&lt;li&gt;区别：开启和关闭迅速，流阻小，适合高压和高温的应用。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;小结&#34;&gt;小结
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;截止阀：适合流量调节。&lt;/li&gt;
&lt;li&gt;止回阀：防止流体反向流动。&lt;/li&gt;
&lt;li&gt;蝶阀：适合大流量、低压。&lt;/li&gt;
&lt;li&gt;闸阀：全开或全关，流阻小。&lt;/li&gt;
&lt;li&gt;球阀：快速开启和关闭，适合高压高温。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.douyin.com/video/7414094886435032320&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.douyin.com/video/7414094886435032320&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.douyin.com/video/7016633131096673566&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;douyin.com/video/7016633131096673566&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;管道常用五种阀门工作原理（截止阀止回阀蝶阀闸阀球阀）.mp4&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>SW-二次开发</title>
        <link>https://teaize.github.io/p/sw-%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91/</link>
        <pubDate>Thu, 20 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/sw-%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91/</guid>
        <description>&lt;h3 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://help.solidworks.com/HelpProducts.aspx&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SolidWorks Web Help&lt;/a&gt;，阅读时注意语法支持的版本，目前只有英文手册&lt;/li&gt;
&lt;li&gt;书籍：&lt;code&gt;SOLIDWORKS二次开发与API教程 2020版&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250320215658.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250320215658.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>工程图命名规则</title>
        <link>https://teaize.github.io/p/%E5%B7%A5%E7%A8%8B%E5%9B%BE%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/</link>
        <pubDate>Mon, 17 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%B7%A5%E7%A8%8B%E5%9B%BE%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/</guid>
        <description>&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;总装图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;00&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第一层零件图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;01&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第一层装配图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;00&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第二层零件图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;01&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第二层装配体&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;00&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第三层零件图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;01&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第三层装配体&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;00&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第四层零件图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;01&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;03&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;……&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第三层零件图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;03&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;……&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;……&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第二层零件图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;03&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;……&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;……&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第一层零件图&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;03&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;第一层装配体&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;XXX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;04&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;00&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;……&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;……&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;参考资料：&lt;a class=&#34;link&#34; href=&#34;https://www.sohu.com/a/579073834_121124370&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;【基础知识】公司内部机械设计及制图规范参考（适合solidworks所有机械行业）_装配_零部件_草图&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>AI图像生成</title>
        <link>https://teaize.github.io/p/ai%E5%9B%BE%E5%83%8F%E7%94%9F%E6%88%90/</link>
        <pubDate>Wed, 12 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/ai%E5%9B%BE%E5%83%8F%E7%94%9F%E6%88%90/</guid>
        <description>&lt;p&gt;在线图像生成：&lt;a class=&#34;link&#34; href=&#34;https://cloud.siliconflow.cn/playground/image/17885302553&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;硅基流动统一登录&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;a coastal scene I really enjoy is one where the ocean stretches endlessly to the horizon under a sky painted with the soft colors of twilight. The waves crash gently against the shore, creating a rhythmic sound that blends with the salty breeze. The sand feels warm beneath your feet, still holding the heat from the day, but it’s cool at the water&amp;#39;s edge where the surf meets the land. In the distance, seagulls wheel and dive, their calls mingling with the sound of the waves. As the sun sets, the sky turns into a canvas of purples, oranges, and pinks, reflecting off the surface of the water, giving the whole scene a serene, almost otherworldly glow. The cool night air starts to roll in, but there&amp;#39;s still a peaceful warmth in the fading light. The feeling of infinity is overwhelming, as if the ocean and sky could go on forever, and the world feels both vast and intimately close at the same time.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250312204750.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250312204750.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250312204756.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250312204756.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The air is crisp, filled with the scent of pine and damp earth. As the sun begins to rise, its soft, golden light filters through the trees, casting long shadows and illuminating the mist that clings to the forest floor. The sound of rustling leaves and distant bird calls is the only noise, creating a peaceful, almost sacred atmosphere. The trees, tall and ancient, stand like silent guardians, their trunks covered in moss, while small streams trickle nearby, adding a gentle, soothing melody to the scene. There&amp;#39;s a sense of timelessness, as if the world is holding its breath, waiting for the day to begin.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250312204807.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250312204807.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>非暴力沟通</title>
        <link>https://teaize.github.io/p/%E9%9D%9E%E6%9A%B4%E5%8A%9B%E6%B2%9F%E9%80%9A/</link>
        <pubDate>Wed, 12 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E9%9D%9E%E6%9A%B4%E5%8A%9B%E6%B2%9F%E9%80%9A/</guid>
        <description>&lt;p&gt;《非暴力沟通》是美国心理学家马歇尔·卢森堡（Marshall B. Rosenberg）提出的一种沟通方式，强调同理心、尊重与理解。书中核心思想可归纳如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;观察与评判分开&lt;/strong&gt;
人们常常把主观评价混入观察之中，但非暴力沟通要求我们只描述事实，不带主观判断。例如，不说“你总是迟到”，而是说“你今天迟到了 10 分钟”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;表达感受，而非指责&lt;/strong&gt;
许多人在表达不满时习惯指责他人，例如“你让我很生气”，但更好的表达方式是“我感到生气，因为……”。这样可以让对方更容易理解你的情绪，而不会本能地防御或反击。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;聚焦需求，而非具体行为&lt;/strong&gt;
感受源于需求的满足或未满足，而非他人的行为。例如，生气可能是因为“我需要被尊重”，而不是“对方不听我的话”。明确自己的需求有助于更有效地表达，而不是陷入争执。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;提出具体可行的请求，而非模糊的要求&lt;/strong&gt;
许多沟通问题源于含糊不清的表达。例如，与其说“希望你尊重我”，不如说“希望你说话时语气温和一些”。清晰的请求更有可能被理解和接受。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;核心理念是：&lt;strong&gt;带着同理心去倾听，用清晰、尊重、无攻击性的方式表达自己&lt;/strong&gt;。这种沟通方式有助于减少误解和冲突，让人与人之间的关系更加和谐。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;“聚焦需求，而非具体行为”&lt;/strong&gt; 是非暴力沟通（NVC）的核心原则之一，它强调我们在沟通时应当关注自己的需求，而不是仅仅指责对方的行为。这样可以让沟通更具建设性，避免冲突升级，同时让对方更容易理解和接受你的诉求。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;错误示范&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;关注具体行为&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;❌&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;“&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;你总是不听我说话&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;你根本不在乎我&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;！”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;这句话的焦点是指责对方的行为&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（“&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;不听我说话&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;”），&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;并带有假设&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（“&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;你不在乎我&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;”）。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;可能引发对方的防御&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：“&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;我有听啊&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;！&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;你误会了&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;！”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;容易导致争吵&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;而不是理解和改善关系&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;正确示范&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;聚焦需求&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;✅&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;“&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;当我和你说话时&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;我希望被关注和倾听&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;因为这让我感到被尊重和理解&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;这句话表达了&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;“&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;希望被关注和倾听&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;”&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;的需求&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;而不是指责对方&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;“&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;总是不听&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;”。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;对方更容易接受&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;也更容易找到方法来满足你的需求&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;比如他可以调整注意力&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;、&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;眼神接触或做出回应&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;非暴力沟通提供了一个简单的四步模型，可以帮助我们把重点放在需求上：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;观察&lt;/strong&gt;（不带评价地描述事实）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;感受&lt;/strong&gt;（表达自己的情绪）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;需求&lt;/strong&gt;（明确自己内心的真正需求）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;请求&lt;/strong&gt;（提出具体可行的行动方案）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例如：“当我看到你看手机而没有回应我的问题时（观察），我感到有些失落（感受），因为我需要被关注和理解（需求）。你可以在我说话时放下手机，和我有更多眼神交流吗？（请求）”&lt;/p&gt;
&lt;p&gt;这样表达比直接指责“你总是玩手机”更容易让对方接受，并愿意做出改变。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>个人知识管理精进指南</title>
        <link>https://teaize.github.io/p/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E7%B2%BE%E8%BF%9B%E6%8C%87%E5%8D%97/</link>
        <pubDate>Wed, 12 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E7%B2%BE%E8%BF%9B%E6%8C%87%E5%8D%97/</guid>
        <description>&lt;ul&gt;
&lt;li&gt;知识的价值在于应用，而非积累
&lt;ul&gt;
&lt;li&gt;仅仅收集和记忆知识并不会带来真正的成长，关键在于如何把知识转化为能力和行动&lt;/li&gt;
&lt;li&gt;学习的目标应该是解决问题，而不是追求知识的“占有感”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;高效学习需要建立知识体系
&lt;ul&gt;
&lt;li&gt;知识是网络化的，零散的信息难以形成深层理解&lt;/li&gt;
&lt;li&gt;通过&lt;strong&gt;构建知识地图、框架思维和主题学习&lt;/strong&gt;，可以让知识之间建立联系，形成稳固的知识体系&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;费曼学习法 + 刻意练习，提高知识吸收率
&lt;ul&gt;
&lt;li&gt;费曼学习法（用简单语言解释概念）能帮助加深理解，防止“伪学习”&lt;/li&gt;
&lt;li&gt;结合刻意练习（针对薄弱环节进行强化），能够更有效地掌握新知识&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;外部工具 + 内部认知，提高学习效率
&lt;ul&gt;
&lt;li&gt;外部工具（如笔记、思维导图、卡片盒等）能帮助整理和回顾知识&lt;/li&gt;
&lt;li&gt;内部认知（如批判性思维、元认知）决定了我们如何筛选、组织和运用知识&lt;/li&gt;
&lt;li&gt;两者结合，才能真正提升学习效果&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;知识管理的核心是输入 - 存储 - 输出的循环
&lt;ul&gt;
&lt;li&gt;输入：主动选择高质量信息，避免信息过载&lt;/li&gt;
&lt;li&gt;存储：建立有效的笔记系统，把知识结构化&lt;/li&gt;
&lt;li&gt;输出：通过写作、分享、实践等方式强化记忆，实现知识的内化&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;生活每天都在生产未经加工的经验素材。我们的判断来源于经验，而有效的经验来源于对判断的反思。反思，让我们把生活的素材重新解读，成为洞见。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ESP32-连接Wifi代码模块</title>
        <link>https://teaize.github.io/p/esp32-%E8%BF%9E%E6%8E%A5wifi%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97/</link>
        <pubDate>Mon, 10 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/esp32-%E8%BF%9E%E6%8E%A5wifi%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97/</guid>
        <description>&lt;h3 id=&#34;程序代码&#34;&gt;程序代码
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;network&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ssid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;你的WiFi名称&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;password&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;你的WiFi密码&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WLAN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;STA_IF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# STA 模式&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;active&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 启用 WiFi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ssid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 连接 WiFi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isconnected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 等待连接&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;连接成功，IP 地址：&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ifconfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 输出 IP 地址&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;network&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ssid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;coffeelize&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;password&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;18195786901&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WLAN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;STA_IF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# STA 模式&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;active&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 启用 WiFi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ssid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 连接 WiFi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isconnected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 等待连接&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;连接成功，IP 地址：&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ifconfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 输出 IP 地址&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;程序返回&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;连接成功&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IP&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;地址&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;192.168.31.35&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>SSD1306-OLED显示屏</title>
        <link>https://teaize.github.io/p/ssd1306-oled%E6%98%BE%E7%A4%BA%E5%B1%8F/</link>
        <pubDate>Mon, 10 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/ssd1306-oled%E6%98%BE%E7%A4%BA%E5%B1%8F/</guid>
        <description>&lt;p&gt;SSD1306 是一款常见的 OLED（有机发光二极管）显示驱动芯片，常用于小型单色 OLED 显示屏，分辨率一般为 128×64 或 128×32。这里展示的是 &lt;strong&gt;I2C&lt;/strong&gt;（两线：SCL、SDA）的通信方式&lt;/p&gt;
&lt;h3 id=&#34;硬件接线&#34;&gt;硬件接线
&lt;/h3&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310184225.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310184225.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;|SSD1306|ESP32（默认 I2C）|
|:&amp;mdash;:&amp;mdash;|:&amp;mdash;:&amp;mdash;|
|VCC|3.3V 或 5V|
|GND|GND|
|SCL|GPIO22（SCL）|
|SDA|GPIO21（SDA）|&lt;/p&gt;
&lt;h3 id=&#34;查找-i2c-设备&#34;&gt;查找 I2C 设备
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;devices&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 扫描 I2C 设备&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;devices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;I2C 设备地址:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;hex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;devices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;未找到 I2C 设备，请检查接线！&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;程序返回：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;I2C&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;设备地址&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;0x3c&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;程序&#34;&gt;程序
&lt;/h3&gt;&lt;h4 id=&#34;显示文字&#34;&gt;显示文字
&lt;/h4&gt;&lt;p&gt;注意：需下载并上传 &lt;code&gt;ssd1306.py&lt;/code&gt; 到 ESP32&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;ssd1306&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 初始化 I2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssd1306&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SSD1306_I2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 显示文本&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Coffeelize, Go home!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果要显示&lt;strong&gt;大字体&lt;/strong&gt;，可以下载 &lt;code&gt;symbol.py&lt;/code&gt; 并上传到 ESP32&lt;/p&gt;
&lt;p&gt;&lt;code&gt;symbol.py&lt;/code&gt; 是一个自定义库，用于在 SSD1306 OLED 屏幕上 显示大字体（16x16 或更大）。因为在 MicroPython 的 ssd1306 官方驱动中，text() 方法只能显示 默认 8x8 像素的 ASCII 字符，字体有些小&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;ssd1306&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;symbol&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 初始化 I2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssd1306&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SSD1306_I2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;dsp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;symbol&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Symbol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 仍然保留 symbol&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 显示文本&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Meow, Go home!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310191622.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310191622.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;迷你像素画动画&#34;&gt;迷你像素画/动画
&lt;/h4&gt;&lt;p&gt;例如在屏幕中绘制一个移动端点&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;ssd1306&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssd1306&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SSD1306_I2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 方向&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fill&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 清屏&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pixel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 画一个点&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 反向移动&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.05&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;电子时钟&#34;&gt;电子时钟
&lt;/h3&gt;&lt;h2 id=&#34;可以结合-esp32-内部-rtc-来做一个-电子时钟&#34;&gt;可以结合 ESP32 内部 RTC 来做一个 电子时钟
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;network&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;ssd1306&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssd1306&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SSD1306_I2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;localtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;now&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;02d&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;02d&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;02d&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 格式化小时:分钟:秒&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fill&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 清屏&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Current Time:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;35&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;40&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;oled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;gui&#34;&gt;GUI
&lt;/h3&gt;&lt;p&gt;参考资料：&lt;a class=&#34;link&#34; href=&#34;https://github.com/peterhinch/micropython-nano-gui&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub - peterhinch/micropython-nano-gui: A lightweight MicroPython GUI library for display drivers based on framebuf class&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>传感器电路</title>
        <link>https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E7%94%B5%E8%B7%AF/</link>
        <pubDate>Mon, 10 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E4%BC%A0%E6%84%9F%E5%99%A8%E7%94%B5%E8%B7%AF/</guid>
        <description>&lt;h3 id=&#34;一传感器基础&#34;&gt;一、传感器基础
&lt;/h3&gt;&lt;p&gt;传感器（Sensor）
将物理量（如温度、压力、光强）转换为电信号的装置。
示例：热电偶（温度→电压）、光敏电阻（光强→电阻值）。&lt;/p&gt;
&lt;p&gt;灵敏度（Sensitivity）
输出信号变化量与输入物理量变化的比值。
公式：S = ΔV/ΔP（如 10mV/°C）。&lt;/p&gt;
&lt;p&gt;分辨率（Resolution）
传感器可检测的最小输入变化量，决定测量精度。&lt;/p&gt;
&lt;h3 id=&#34;二信号类型&#34;&gt;二、信号类型
&lt;/h3&gt;&lt;p&gt;模拟信号（Analog Signal）
连续变化的电信号（如电压、电流），需通过 ADC 转换为数字信号。&lt;/p&gt;
&lt;p&gt;数字信号（Digital Signal）
离散的二进制信号（如 0/1、I2C、SPI 协议），抗干扰能力强。&lt;/p&gt;
&lt;h3 id=&#34;三核心电路元件&#34;&gt;三、核心电路元件
&lt;/h3&gt;&lt;p&gt;运算放大器（Op-Amp）
用于信号放大、滤波、阻抗匹配。
典型电路：差分放大（抑制共模噪声）。&lt;/p&gt;
&lt;p&gt;模数转换器（ADC, Analog-to-Digital Converter）
将模拟信号转换为数字信号，关键参数：分辨率（如 12 位）、采样率（如 1kHz）。&lt;/p&gt;
&lt;p&gt;参考电压（Reference Voltage, Vref）
为 ADC 或比较器提供稳定基准电压，影响测量精度。&lt;/p&gt;
&lt;h3 id=&#34;四噪声与抗干扰&#34;&gt;四、噪声与抗干扰
&lt;/h3&gt;&lt;p&gt;信噪比（SNR, Signal-to-Noise Ratio）
有用信号与噪声的功率比值，单位 dB（越高越好）。&lt;/p&gt;
&lt;p&gt;低通滤波（LPF, Low-Pass Filter）
允许低频信号通过，抑制高频噪声。
实现方式：RC 电路、运放有源滤波。&lt;/p&gt;
&lt;p&gt;电磁兼容（EMC, Electromagnetic Compatibility）
电路在电磁环境中抗干扰且不干扰其他设备的能力。&lt;/p&gt;
&lt;h3 id=&#34;五接口与通信&#34;&gt;五、接口与通信
&lt;/h3&gt;&lt;p&gt;I2C（Inter-Integrated Circuit）
双线制串行总线（SCL 时钟线、SDA 数据线），支持多设备通信。&lt;/p&gt;
&lt;p&gt;SPI（Serial Peripheral Interface）
四线制高速同步接口（SCK、MOSI、MISO、CS），全双工通信。&lt;/p&gt;
&lt;h3 id=&#34;六性能参数&#34;&gt;六、性能参数
&lt;/h3&gt;&lt;p&gt;线性度（Linearity）
传感器输出与输入物理量之间的直线关系偏差（常用%FS 表示）。&lt;/p&gt;
&lt;p&gt;响应时间（Response Time）
传感器输出达到稳定值 90% 所需时间（如温度传感器需 5 秒）。&lt;/p&gt;
&lt;p&gt;迟滞（Hysteresis）
输入量增大和减小时输出差异，反映传感器的回程误差。&lt;/p&gt;
&lt;h3 id=&#34;七电源管理&#34;&gt;七、电源管理
&lt;/h3&gt;&lt;p&gt;供电电压（Vcc/Vdd）
传感器工作电压范围（如 3.3V 或 5V±10%）。&lt;/p&gt;
&lt;p&gt;功耗（Power Consumption）
静态电流（待机时）与动态电流（工作时）的消耗，影响电池寿命。&lt;/p&gt;
&lt;h3 id=&#34;八校准与补偿&#34;&gt;八、校准与补偿
&lt;/h3&gt;&lt;p&gt;零点漂移（Zero Drift）
无输入时输出信号的缓慢偏移，需定期校准。&lt;/p&gt;
&lt;p&gt;温度补偿（Temperature Compensation）
通过电路或算法消除温度对传感器输出的影响（如热敏电阻网络）。&lt;/p&gt;
&lt;h3 id=&#34;九传感器类型扩展&#34;&gt;九、传感器类型扩展
&lt;/h3&gt;&lt;p&gt;MEMS 传感器（Micro-Electro-Mechanical Systems）
微机电系统传感器，集成机械结构与电子电路（如加速度计、陀螺仪）。
关键特点：微型化、低功耗、批量生产成本低。&lt;/p&gt;
&lt;p&gt;压电传感器（Piezoelectric Sensor）
利用压电效应将机械应力转换为电荷（如压力传感器、超声波探头）。
需配合电荷放大器处理微弱信号。&lt;/p&gt;
&lt;p&gt;霍尔传感器（Hall Effect Sensor）
检测磁场变化并输出电压（如电机转速检测、位置开关）。
典型输出：模拟线性信号或数字开关信号。&lt;/p&gt;
&lt;p&gt;应变片（Strain Gauge）
电阻值随形变变化的传感器，用于测量应力或重量（需惠斯通电桥电路放大信号）。&lt;/p&gt;
&lt;h3 id=&#34;十信号处理进阶&#34;&gt;十、信号处理进阶
&lt;/h3&gt;&lt;p&gt;跨阻放大器（Transimpedance Amplifier）
将电流信号转换为电压信号，用于光电二极管等电流型传感器。
公式：Vout = I_in × R_feedback（如 I/V 转换）。&lt;/p&gt;
&lt;p&gt;锁相放大器（Lock-In Amplifier）
通过参考信号同步检测微弱信号，抑制噪声（如光学传感中的低频信号提取）。&lt;/p&gt;
&lt;p&gt;PWM（Pulse Width Modulation）
通过调节脉冲宽度传递模拟信息（如温度控制中的占空比调节）。
优势：数字信号抗干扰，可直接驱动执行器。&lt;/p&gt;
&lt;h3 id=&#34;十一误差与补偿技术&#34;&gt;十一、误差与补偿技术
&lt;/h3&gt;&lt;p&gt;非线性补偿（Nonlinearity Compensation）
通过多项式拟合或查表法修正传感器非线性误差（如热敏电阻的温度 - 电阻曲线）。&lt;/p&gt;
&lt;p&gt;共模抑制比（CMRR, Common-Mode Rejection Ratio）
差分放大器抑制共模干扰的能力（单位 dB，越高越好）。
公式：CMRR = 20log10(Ad/Ac)，Ad 为差模增益，Ac 为共模增益。&lt;/p&gt;
&lt;p&gt;自校准（Self-Calibration）
传感器内置校准电路（如自动零点校正），减少人工干预。&lt;/p&gt;
&lt;h3 id=&#34;十二接口协议扩展&#34;&gt;十二、接口协议扩展
&lt;/h3&gt;&lt;p&gt;RS-485
工业级差分串行通信协议，支持长距离（1200 米）和多设备组网（如工业传感器网络）。&lt;/p&gt;
&lt;p&gt;CAN 总线（Controller Area Network）
汽车电子常用抗干扰总线，支持优先级仲裁（如车载传感器数据整合）。&lt;/p&gt;
&lt;p&gt;4-20mA 电流环（Current Loop）
工业传感器标准输出，抗噪声能力强，可长距离传输（0mA 表示故障，提高可靠性）。&lt;/p&gt;
&lt;h3 id=&#34;十三电源与保护电路&#34;&gt;十三、电源与保护电路
&lt;/h3&gt;&lt;p&gt;LDO（Low Dropout Regulator）
低压差线性稳压器，为传感器提供稳定电压（如 3.3V，压差低至 0.2V）。
对比：开关电源效率高但噪声大。&lt;/p&gt;
&lt;p&gt;TVS 二极管（Transient Voltage Suppressor）
瞬态电压抑制器，保护传感器端口免受静电（ESD）或浪涌损坏。&lt;/p&gt;
&lt;p&gt;电源去耦（Power Decoupling）
通过并联电容（如 0.1μF 陶瓷电容 +10μF 电解电容）滤除高频噪声。&lt;/p&gt;
&lt;h3 id=&#34;十四环境因素与可靠性&#34;&gt;十四、环境因素与可靠性
&lt;/h3&gt;&lt;p&gt;IP 防护等级（Ingress Protection）
传感器外壳防尘防水等级（如 IP67：完全防尘，可短时浸水）。&lt;/p&gt;
&lt;p&gt;MTBF（Mean Time Between Failures）
平均无故障时间，衡量传感器寿命（工业级传感器可达 10 万小时）。&lt;/p&gt;
&lt;p&gt;热噪声（Johnson-Nyquist Noise）
电阻器件因温度产生的随机噪声（公式：V_rms = √(4kTRB)，k 为玻尔兹曼常数）。&lt;/p&gt;
&lt;h3 id=&#34;十五新兴技术&#34;&gt;十五、新兴技术
&lt;/h3&gt;&lt;p&gt;无线传感器网络（WSN, Wireless Sensor Network）
基于 ZigBee、LoRa 或 NB-IoT 的无线传输方案（如物联网环境监测系统）。&lt;/p&gt;
&lt;p&gt;AI 边缘处理（Edge AI）
在传感器端集成 AI 芯片，实现本地数据处理（如振动传感器的故障预测）。&lt;/p&gt;
&lt;p&gt;柔性传感器（Flexible Sensor）
使用聚合物或纳米材料制成，可弯曲贴合表面（如可穿戴健康监测设备）。&lt;/p&gt;
&lt;h3 id=&#34;十六实用设计技巧&#34;&gt;十六、实用设计技巧
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;接地策略：
&lt;ul&gt;
&lt;li&gt;模拟地与数字地单点连接，避免地环路噪声。&lt;/li&gt;
&lt;li&gt;敏感信号采用屏蔽线（如热电偶信号线）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PCB 布局：
&lt;ul&gt;
&lt;li&gt;传感器信号走线远离高频或大电流路径。&lt;/li&gt;
&lt;li&gt;使用铺铜降低阻抗，避免天线效应。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;故障诊断：
&lt;ul&gt;
&lt;li&gt;示波器观察信号波形（如检查 ADC 采样是否混叠）。&lt;/li&gt;
&lt;li&gt;万用表测量参考电压是否漂移（排查零点误差）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ESP32-DHT11温湿度传感器</title>
        <link>https://teaize.github.io/p/esp32-dht11%E6%B8%A9%E6%B9%BF%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8/</link>
        <pubDate>Sun, 09 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/esp32-dht11%E6%B8%A9%E6%B9%BF%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8/</guid>
        <description>&lt;h3 id=&#34;dht11-模块介绍&#34;&gt;DHT11 模块介绍
&lt;/h3&gt;&lt;p&gt;DHT11 模块：一款结合了温湿度检测以及信号处理 IC 的传感器模块，通信方式采用单总线串行通信&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;信号类型：数字信号&lt;/li&gt;
&lt;li&gt;精度：温度精度 ±2°C，湿度 ±5%&lt;/li&gt;
&lt;li&gt;取样周期：2S&lt;/li&gt;
&lt;li&gt;工作电压：3-5.5V&lt;/li&gt;
&lt;li&gt;工作电流：2.5mA（测量时），150μA（待机）&lt;/li&gt;
&lt;li&gt;温度范围：0-50℃&lt;/li&gt;
&lt;li&gt;湿度范围：20-90%&lt;/li&gt;
&lt;li&gt;电路复杂度：直接连接，无需额外电路&lt;/li&gt;
&lt;li&gt;代码复杂度：直接调用库函数读取温度&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;接线&#34;&gt;接线
&lt;/h3&gt;&lt;p&gt;DHT11 模块已集成上拉电阻，无需额外添加（如果 DHT11 模块无内置上拉电阻，需在 DATA 引脚和 5V 之间外接一个 4.7kΩ 电阻）&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309174948.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309174948.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;程序&#34;&gt;程序
&lt;/h3&gt;&lt;p&gt;MicroPython 内置的 DHT11 程序库（dht），通过 dht 程序库获取温湿度数据，需要如下四个步骤&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;导入 dht 库&lt;/li&gt;
&lt;li&gt;创建 DHT11 对象&lt;/li&gt;
&lt;li&gt;执行 measure 方法
&lt;ul&gt;
&lt;li&gt;注意读取频率：DHT11 的采样间隔需 ≥1 秒，建议设为 2 秒，否则可能读取失败&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;通过两个方法分别获取温度和湿度&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Timer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;dht&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sleep_ms&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dht&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DHT11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 创建一个 DHT11 实例，连接到 GPIO 4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;measure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 触发测量&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temperature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 获取温度值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;humidity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 获取湿度值&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;temperature:&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;℃&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;humidity:&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;sleep_ms&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 每 2 秒测量一次&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;返回结果&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;temperature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;℃&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;humidity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;66&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;temperature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;℃&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;humidity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;68&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;......&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;dht11-的局限性&#34;&gt;DHT11 的局限性
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;精度较低：温度误差 ±2°C，湿度 ±5%，适用于一般场景（如室内环境监测），不适用于高精度实验。&lt;/li&gt;
&lt;li&gt;响应速度慢：每次读取需等待 1~2 秒，不适合高速采样场景。&lt;/li&gt;
&lt;li&gt;单总线协议：同一引脚只能连接一个 DHT11，无法并联多个传感器。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;通讯方式&#34;&gt;通讯方式
&lt;/h3&gt;&lt;p&gt;DHT11 通过单总线（1-Wire）协议与外部设备（如 Arduino、ESP32）通信：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;主机（Arduino）发送启动信号：拉低总线至少 18ms，然后释放。&lt;/li&gt;
&lt;li&gt;DHT11 响应：拉低总线 80μs，再拉高 80μs，表示准备发送数据。&lt;/li&gt;
&lt;li&gt;数据传输：DHT11 发送 40 位数据（16 位湿度 + 16 位温度 + 8 位校验和），每位通过高低电平的持续时间表示 0 或 1。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309175700.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309175700.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;湿度整数部分 | 湿度小数部分 | 温度整数部分 | 温度小数部分 | 校验和
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0001 1001    | 0000 0000    | 0001 1000    | 0000 0000    | 0011 0001
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;（25% RH）    | （0% RH）     | （24°C）      | （0°C）       | 校验和=49
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;拓展&#34;&gt;拓展
&lt;/h2&gt;&lt;h3 id=&#34;为什么-dht11-模块直接返回数字信号&#34;&gt;为什么 DHT11 模块直接返回数字信号
&lt;/h3&gt;&lt;p&gt;DHT11 内部集成了一个专用集成电路（ASIC），负责以下任务：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;模拟信号采集：
&lt;ul&gt;
&lt;li&gt;读取热敏电阻的电阻值（温度）&lt;/li&gt;
&lt;li&gt;读取电容式元件的电容值（湿度）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;模拟信号调理：
&lt;ul&gt;
&lt;li&gt;对原始信号进行放大、滤波，消除噪声&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;模数转换（ADC）
&lt;ul&gt;
&lt;li&gt;将调理后的模拟信号转换为数字信号（例如，温度值用 8 位二进制表示，湿度值用 8 位二进制表示）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;校准与补偿
&lt;ul&gt;
&lt;li&gt;根据预存的校准参数（如非线性补偿、温度漂移补偿）修正数字信号&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;数字编码：
&lt;ul&gt;
&lt;li&gt;将温度和湿度数据打包成固定格式的二进制数据&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;能否查看或自定义修改-asic-的底层代码&#34;&gt;能否查看或自定义修改 ASIC 的底层代码
&lt;/h3&gt;&lt;p&gt;不能，原因如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;硬件固化设计：ASIC 的逻辑功能是通过物理电路实现的（如晶体管布局），而非运行在通用处理器上的软件代码。它的“逻辑”被固化在硅片中，无法通过软件更新或调试接口修改。&lt;/li&gt;
&lt;li&gt;封闭式协议与知识产权：DHT11 的通信协议和数据格式是厂商定义的，其内部校准参数、ADC 算法等属于商业机密，未开放给用户访问。&lt;/li&gt;
&lt;li&gt;缺乏调试接口：DHT11 没有提供 JTAG、SWD 等硬件调试接口，无法通过常规手段读取内部逻辑。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;通过上位机读取-dht11-模块数据&#34;&gt;通过上位机读取 DHT11 模块数据
&lt;/h3&gt;&lt;p&gt;需要考虑的问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;通信方式选择&lt;/strong&gt;：ESP32 和笔记本电脑之间可以通过哪些方式通信？常见的有串口、Wi-Fi、蓝牙等。用户需要选择一种适合他们应用场景的方式。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据传输协议&lt;/strong&gt;：确定使用哪种协议来发送数据。比如，通过串口发送简单的文本格式，或者使用 HTTP、MQTT 等更复杂的协议。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;上位机程序开发&lt;/strong&gt;：用户需要在笔记本电脑上编写程序来接收和显示数据。这可能涉及到 Python、Java、C#或其他语言，取决于用户的熟悉程度和需求。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;代码实现细节&lt;/strong&gt;：如何在 ESP32 上编写代码，将传感器数据发送到上位机？需要确保数据格式正确，传输稳定。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;错误处理和稳定性&lt;/strong&gt;：考虑通信过程中可能出现的错误，如连接中断、数据丢失等，如何进行处理以保证系统的稳定性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;用户友好性&lt;/strong&gt;：上位机程序是否易于使用，是否需要图形界面，还是简单的命令行输出即可。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;实现步骤大致如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;配置 ESP32 连接 Wi-Fi。&lt;/li&gt;
&lt;li&gt;在 ESP32 上创建 TCP 服务器或 HTTP 服务器。&lt;/li&gt;
&lt;li&gt;读取传感器数据并发送到连接的客户端。&lt;/li&gt;
&lt;li&gt;在上位机编写程序连接 ESP32，接收并显示数据&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;使用-wifisocket通信&#34;&gt;使用 WiFi（Socket）通信
&lt;/h4&gt;&lt;p&gt;ESP32 若连接了 WiFi，可以在 ESP32 上开启一个 Socket 服务器，让上位机通过 TCP 访问它&lt;/p&gt;
&lt;p&gt;1、ESP32 代码（作为服务器）；可将代码运行在一个 Thonny 实例上&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;network&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;socket&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;dht&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;SSID&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;coffeelize&amp;#34;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;#你的WiFi名称&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;PASSWORD&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxxxxxxx&amp;#34;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;#你的WiFi密码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 连接WiFi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wifi&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WLAN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;STA_IF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wifi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;active&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wifi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SSID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PASSWORD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wifi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isconnected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;pass&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 等待WiFi连接&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 打印IP地址&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Connected, IP:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wifi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ifconfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 初始化DHT11&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dht&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DHT11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 创建TCP服务器&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AF_INET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 监听端口8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;等待客户端连接...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accept&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;客户端连接:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;measure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temperature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;humidity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;encode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 发送数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Connected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;192.168.31.35&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;等待客户端连接&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;2、在 Windows 上运行另一个 Thonny 实例&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;socket&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ESP32_IP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.31.35&amp;#34;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# ESP32 IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;PORT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AF_INET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ESP32_IP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PORT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;温度: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;℃, 湿度: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;%&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309192255.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309192255.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309192807.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309192807.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;3、两边都运行起来后：

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309193044.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309193044.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;不同方式的比较&#34;&gt;不同方式的比较
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;方法&lt;/th&gt;
          &lt;th&gt;适用场景&lt;/th&gt;
          &lt;th&gt;传输方式&lt;/th&gt;
          &lt;th&gt;优点&lt;/th&gt;
          &lt;th&gt;缺点&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;串口通信（UART）&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;直接连接笔记本&lt;/td&gt;
          &lt;td&gt;USB 串口&lt;/td&gt;
          &lt;td&gt;简单，适合调试&lt;/td&gt;
          &lt;td&gt;需 USB 线，距离受限&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;WiFi Socket&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;同一局域网内&lt;/td&gt;
          &lt;td&gt;TCP/IP&lt;/td&gt;
          &lt;td&gt;可无线读取，速度快&lt;/td&gt;
          &lt;td&gt;需 WiFi 网络&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;MQTT&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;远程监控&lt;/td&gt;
          &lt;td&gt;MQTT 协议&lt;/td&gt;
          &lt;td&gt;适合云端，支持多个设备&lt;/td&gt;
          &lt;td&gt;需 MQTT 服务器&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;拓展-2&#34;&gt;拓展 2
&lt;/h3&gt;&lt;h4 id=&#34;如何理解-wifi-socket&#34;&gt;如何理解 Wifi Socket
&lt;/h4&gt;&lt;p&gt;可以把 Socket 理解成两台设备（比如 ESP32 和笔记本）之间的“电话线”。这条“电话线”允许两台设备 通过 WiFi 进行数据传输，就像两个人在打电话一样，一个人说，另一个人听。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;服务器（ESP32）：&lt;strong&gt;负责监听和等待连接&lt;/strong&gt;，它是数据的“提供者”&lt;/li&gt;
&lt;li&gt;客户端（笔记本）：主动连接服务器，它是数据的“使用者”&lt;/li&gt;
&lt;li&gt;服务器 不会主动给客户端发消息，它只是等着客户端来“点单”，然后才会提供数据&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;需求&lt;/th&gt;
          &lt;th&gt;服务器（ESP32）&lt;/th&gt;
          &lt;th&gt;客户端（笔记本）&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;网络要求&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;连接同一 WiFi，获取 IP&lt;/td&gt;
          &lt;td&gt;连接同一 WiFi，知道 ESP32 的 IP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;通信端口&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;监听特定端口（如 8080）&lt;/td&gt;
          &lt;td&gt;连接到 ESP32 的 IP 和端口&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;数据格式&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;按一定格式发送数据&lt;/td&gt;
          &lt;td&gt;按格式解析数据&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;可能问题&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;WiFi 连接失败、IP 变动、端口被占用&lt;/td&gt;
          &lt;td&gt;连接不上 ESP32、数据丢失&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;解决方案&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;确保 WiFi 稳定、检查 IP、换端口&lt;/td&gt;
          &lt;td&gt;确保同一 WiFi、确认 IP、用 &lt;code&gt;ping&lt;/code&gt; 测试&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;拓展-3&#34;&gt;拓展 3
&lt;/h3&gt;&lt;h4 id=&#34;图表动态展示数据&#34;&gt;图表动态展示数据
&lt;/h4&gt;&lt;p&gt;客户端通过图像形式动态展示数据，这里切换成 Pycharm 作为 IDE 了，因为涉及到 matplotlib 模块&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;95
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;socket&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.animation&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;animation&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;collections&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deque&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ESP32的IP和端口  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ESP32_IP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.31.35&amp;#34;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 替换为 ESP32 IP 地址  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;PORT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8080&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 端口号  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 创建Socket连接  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AF_INET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ESP32_IP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PORT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 连接ESP32  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 维护最近 30 个数据点（最多 1 分钟）  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;MAX_POINTS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deque&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;maxlen&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX_POINTS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 时间数据  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;temps&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deque&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;maxlen&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX_POINTS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 温度数据  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;hums&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deque&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;maxlen&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX_POINTS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;# 湿度数据  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 创建图形窗口  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;fig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subplots&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;figsize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 温度曲线  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Temperature (°C)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Time (s)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Temperature (°C)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 添加网格  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;line_temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Temperature&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 湿度曲线  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Humidity (%)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Time (s)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ylabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Humidity (%)&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 添加网格  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;line_hum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Humidity&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设定初始 X 轴范围  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# **更新数据并绘制**  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;update_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# 从ESP32接收数据  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 解析温度和湿度  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 计算当前时间戳（假设每次更新间隔 2s）  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;new_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 继续增加 2s 时间  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;new_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 第一帧从 0 开始  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 更新数据  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;temps&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;hums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# 更新曲线数据  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;line_temp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;line_hum&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# **更新 X 轴范围（防止 `min == max` 报错）**  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;times&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_xlim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# **动态更新 Y 轴范围**  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ymin_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ymax_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;temps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ylim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ymin_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ymax_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 温度 Y 轴增加 2°C 缓冲区  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ymin_h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ymax_h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_ylim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ymin_h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ymax_h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 湿度 Y 轴增加 5% 缓冲区  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line_temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line_hum&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Error: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line_temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line_hum&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 动画更新，避免缓存问题  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ani&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;animation&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FuncAnimation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;update_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;interval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cache_frame_data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 显示图表  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tight_layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;plt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309203043.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309203043.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自动调整 Y 轴范围
&lt;ul&gt;
&lt;li&gt;温度 Y 轴范围：&lt;code&gt;min(temps) - 2&lt;/code&gt; 到 &lt;code&gt;max(temps) + 2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;湿度 Y 轴范围：&lt;code&gt;min(hums) - 5&lt;/code&gt; 到 &lt;code&gt;max(hums) + 5&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;添加网格线 &lt;code&gt;grid(True)&lt;/code&gt;，让纵坐标数据更清晰。&lt;/li&gt;
&lt;li&gt;X 轴范围固定为最近 60 秒
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;times&lt;/code&gt; 只存储最近 30 个数据点（每 2s 采样一次，60s = 30 点）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;进一步优化程序&#34;&gt;进一步优化程序
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;提高性能，减少不必要的 &lt;code&gt;set_xlim/set_ylim&lt;/code&gt; 计算
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;set_xlim()&lt;/code&gt; 和 &lt;code&gt;set_ylim()&lt;/code&gt; 只有在数据更新时才调用，而不是每帧都执行。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;让温湿度数据绘制更平滑
&lt;ul&gt;
&lt;li&gt;可以使用 &lt;code&gt;Line2D.set_xdata()&lt;/code&gt; 和 &lt;code&gt;Line2D.set_ydata()&lt;/code&gt; 来更新数据，而不是 &lt;code&gt;set_data()&lt;/code&gt;，减少不必要的计算&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;让 X 轴时间显示更加友好
&lt;ul&gt;
&lt;li&gt;用 &lt;code&gt;datetime.now()&lt;/code&gt; 记录真实时间，而不是 &lt;code&gt;times[-1] + 2&lt;/code&gt; 这样模拟的时间，避免时间误差累积&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;增加异常处理，避免程序崩溃
&lt;ul&gt;
&lt;li&gt;如果 ESP32 断开连接，程序不会直接崩溃，而是尝试重连。&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;recv()&lt;/code&gt; 读取数据时，添加 &lt;code&gt;try-except&lt;/code&gt; 捕获 &lt;code&gt;socket.error&lt;/code&gt; 以防止网络问题导致程序崩溃。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309204512.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309204512.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>LCD1602液晶显示器</title>
        <link>https://teaize.github.io/p/lcd1602%E6%B6%B2%E6%99%B6%E6%98%BE%E7%A4%BA%E5%99%A8/</link>
        <pubDate>Sun, 09 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/lcd1602%E6%B6%B2%E6%99%B6%E6%98%BE%E7%A4%BA%E5%99%A8/</guid>
        <description>&lt;h3 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://randomnerdtutorials.com/micropython-i2c-lcd-esp32-esp8266/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MicroPython: I2C LCD Display with ESP32/ESP8266 | Random Nerd Tutorials&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Keywords：ESP32 LCD1602 micropython&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;基本介绍&#34;&gt;基本介绍
&lt;/h3&gt;&lt;p&gt;LCD1602 是一款 &lt;strong&gt;16 列 × 2 行&lt;/strong&gt; 的字符型液晶显示屏，常用于单片机、Arduino、树莓派等开发板的文本显示。它可以显示 英文、数字、符号，但&lt;strong&gt;不能直接显示图像&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;接口类型&#34;&gt;接口类型
&lt;/h3&gt;&lt;p&gt;LCD1602 有两种主要的通信方式【&lt;strong&gt;这里用的是 I²C 接口&lt;/strong&gt;】：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;并行接口（4 位或 8 位模式，标准 HD44780 控制器）
&lt;ul&gt;
&lt;li&gt;需要 多个 GPIO 口 进行连接，数据传输速度快，但占用的引脚较多。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;I²C 接口（常见的是带 PCF8574 I2C 模块）
&lt;ul&gt;
&lt;li&gt;仅需 SDA（数据） 和 SCL（时钟）两个引脚，大大减少了 IO 口的占用，使用更方便。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果是 并口版本，一般有以下 16 个引脚：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;引脚&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;备注&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;VSS&lt;/td&gt;
          &lt;td&gt;电源地&lt;/td&gt;
          &lt;td&gt;接 GND&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;VDD&lt;/td&gt;
          &lt;td&gt;电源正&lt;/td&gt;
          &lt;td&gt;一般接 &lt;strong&gt;5V&lt;/strong&gt;（部分可 3.3V）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;V0&lt;/td&gt;
          &lt;td&gt;对比度调节&lt;/td&gt;
          &lt;td&gt;需接 &lt;strong&gt;电位器&lt;/strong&gt; 调节&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;RS&lt;/td&gt;
          &lt;td&gt;寄存器选择&lt;/td&gt;
          &lt;td&gt;0=指令，1=数据&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;RW&lt;/td&gt;
          &lt;td&gt;读/写选择&lt;/td&gt;
          &lt;td&gt;0=写入，1=读取（一般接 GND 使能写入）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;E&lt;/td&gt;
          &lt;td&gt;使能信号&lt;/td&gt;
          &lt;td&gt;高电平触发&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;D0-D7&lt;/td&gt;
          &lt;td&gt;数据线&lt;/td&gt;
          &lt;td&gt;4 位模式用 D4-D7，8 位模式用 D0-D7&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;A&lt;/td&gt;
          &lt;td&gt;背光电源正&lt;/td&gt;
          &lt;td&gt;接 5V&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;K&lt;/td&gt;
          &lt;td&gt;背光电源地&lt;/td&gt;
          &lt;td&gt;接 GND&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果是 I²C 版本（带 PCF8574 扩展板），只保留 4 个引脚：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VCC：接 5V，部分可接 3.3V&lt;/li&gt;
&lt;li&gt;GND：接地&lt;/li&gt;
&lt;li&gt;SDA：数据线&lt;/li&gt;
&lt;li&gt;SCL：时钟线&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这里使用的是带 I2C 驱动器的 LCD；驱动器上配置了一个电位器，可用于调整 LCD 上背景和字符之间的对比度【在没有 I2C 支持的“普通”LCD 上，需要在电路中添加电位器来调整对比度】

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310000430.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310000430.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;lcd1602-连接和使用&#34;&gt;LCD1602 连接和使用
&lt;/h3&gt;&lt;p&gt;1、硬件连接&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;LCD1602&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;I2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;→&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Arduino&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ESP32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;---------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;VCC&lt;/span&gt;           &lt;span class=&#34;err&#34;&gt;→&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;或&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.3&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;GND&lt;/span&gt;           &lt;span class=&#34;err&#34;&gt;→&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GND&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;SDA&lt;/span&gt;           &lt;span class=&#34;err&#34;&gt;→&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A4&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ESP32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO21&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;SCL&lt;/span&gt;           &lt;span class=&#34;err&#34;&gt;→&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A5&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ESP32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO22&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这里需要注意，需要支持 I2C，需要选择支持 I2C 的引脚， GPIO 引脚不起作用的&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;2、查找连接的 I2C 设备&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设置I2C引脚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 根据你的硬件连接调整SCL和SDA引脚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 扫描I2C设备&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;devices&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;devices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;I2C devices found:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;devices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;No I2C devices found&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;返回结果&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;I2C&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;devices&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;found&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;39&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;所以地址就是 39，而不是 0x39&lt;/p&gt;
&lt;p&gt;3、下载并上传 &lt;code&gt;lcd_api.py&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;参考教程：&lt;a class=&#34;link&#34; href=&#34;https://randomnerdtutorials.com/micropython-i2c-lcd-esp32-esp8266/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MicroPython: I2C LCD Display with ESP32/ESP8266 | Random Nerd Tutorials&lt;/a&gt;
下载地址：&lt;a class=&#34;link&#34; href=&#34;https://raw.githubusercontent.com/RuiSantosdotme/Random-Nerd-Tutorials/master/Projects/ESP-MicroPython/lcd/lcd_api.py&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;lcd_api.py&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thonny 打开下载的 py 文件，然后另存到 ESP32 上去

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309235203.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309235203.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;4、下载并上传 &lt;code&gt;machine_i2c_lcd.py&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;下载地址：&lt;a class=&#34;link&#34; href=&#34;https://raw.githubusercontent.com/RuiSantosdotme/Random-Nerd-Tutorials/master/Projects/ESP-MicroPython/lcd/machine_i2c_lcd.py&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;machine_i2c_lcd.py&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;5、显示静态文字&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Rui Santos &amp;amp; Sara Santos - Random Nerd Tutorials&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Complete project details at https://RandomNerdTutorials.com/micropython-i2c-lcd-esp32-esp8266/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;machine_i2c_lcd&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2cLcd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Define the LCD I2C address and dimensions&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;I2C_ADDR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;39&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;I2C_NUM_ROWS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;I2C_NUM_COLS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Initialize I2C and LCD objects&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SoftI2C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;400000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# for ESP8266, uncomment the following line&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#i2c = SoftI2C(sda=Pin(4), scl=Pin(5), freq=400000)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2cLcd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i2c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2C_ADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2C_NUM_ROWS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I2C_NUM_COLS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;putstr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;It&amp;#39;s working :)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# Clear the LCD&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# Display two different messages on different lines&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# By default, it will start at (0,0) if the display is empty&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;putstr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;# Starting at the second line (0, 1)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move_to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;putstr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;KeyboardInterrupt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# Turn off the display&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Keyboard interrupt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;backlight_off&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;lcd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display_off&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310000116.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250310000116.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;拓展&#34;&gt;拓展
&lt;/h3&gt;&lt;h4 id=&#34;驱动起到了什么作用&#34;&gt;驱动起到了什么作用
&lt;/h4&gt;&lt;p&gt;ESP32 通过 I2C 总线（SDA/SCL） 与 PCF8574 I/O 扩展芯片 进行通信，控制 LCD1602&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LCD1602 本身是 并行接口 的字符液晶模块，它通常需要 8 个数据位 + 控制位（RS、RW、E） 来进行操作。如果直接使用 ESP32 控制，会占用大量的 GPIO 口【如果直接使用 并行接口 控制 LCD1602，理论上是不需要额外的驱动库的，因为可以直接使用 GPIO 发送命令和数据】&lt;/li&gt;
&lt;li&gt;如果 LCD1602 连接了 I2C 扩展模块（如 PCF8574 芯片），它就可以通过 I2C 总线（SDA/SCL）进行通信，这样就减少了引脚使用&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;方法&lt;/th&gt;
          &lt;th&gt;GPIO 口占用&lt;/th&gt;
          &lt;th&gt;代码复杂度&lt;/th&gt;
          &lt;th&gt;适用场景&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;使用 I2C 驱动（推荐）&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;仅 2 根线&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;简单&lt;/strong&gt;，调用 Python 函数即可&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;适合 ESP32，节省引脚&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;直接用 GPIO（无驱动）&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;6~8 根线&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;复杂&lt;/strong&gt;，手动写 LCD 指令&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;适用于无 I2C 模块的 LCD1602&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;在 ESP32 + LCD1602 I2C 方案中，驱动的作用是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;简化代码&lt;/strong&gt;（不需要手写 LCD 指令）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;节省 GPIO&lt;/strong&gt;（只用 SDA &amp;amp; SCL）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;封装 LCD 控制逻辑&lt;/strong&gt;（不用自己算指令）&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;pcf8574-在-lcd1602-i2c-中的作用&#34;&gt;PCF8574 在 LCD1602 I2C 中的作用
&lt;/h4&gt;&lt;p&gt;PCF8574 是一颗 &lt;strong&gt;I2C 转 8 位 GPIO 的 I/O 扩展芯片&lt;/strong&gt;，在 LCD1602 I2C 版本的模块上，它的作用主要是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;扩展 ESP32 的 I/O 端口，从而用 I2C 控制 LCD1602，节省 GPIO 资源。&lt;/li&gt;
&lt;li&gt;将 ESP32 发送的 I2C 信号转换为 LCD1602 需要的并行信号（数据和命令）。&lt;/li&gt;
&lt;li&gt;适配不同的电平，确保 ESP32（3.3V）能够控制 LCD1602（5V）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果不用 PCF8574，而是直接用 GPIO 并行控制 LCD1602，就不需要 I2C 驱动，但会占用更多的 GPIO，并且需要自己写 LCD1602 驱动代码&lt;/p&gt;
&lt;p&gt;那使用这种方式相对于直接并行接口来说有什么缺点呢：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;速度比直接并行模式慢（因为 I2C 速度受限）&lt;/li&gt;
&lt;li&gt;需要额外的 I2C 驱动代码&lt;/li&gt;
&lt;li&gt;如果 I2C 地址不匹配，可能导致 LCD 无法工作&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>提取Apple Music歌单</title>
        <link>https://teaize.github.io/p/%E6%8F%90%E5%8F%96apple-music%E6%AD%8C%E5%8D%95/</link>
        <pubDate>Sun, 09 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%8F%90%E5%8F%96apple-music%E6%AD%8C%E5%8D%95/</guid>
        <description>&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://music.apple.com/cn/playlist/%E6%97%A9%E9%A4%90/pl.296fd5d490444aaf80e23fa3dea02cb7&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;‎早餐 - 歌单 - Apple Music&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;提取-apple-music-早餐歌单数据&#34;&gt;提取 Apple Music 早餐歌单数据
&lt;/h2&gt;&lt;p&gt;需求描述：获取 Apple music 中早餐歌单的歌曲名和演唱者
问题描述：常规的方法，拷贝歌单的 HTML 给 AI 模型进行处理，但是文本量太长，字数达到限制，AI 处理&lt;/p&gt;
&lt;h3 id=&#34;deepseek&#34;&gt;Deepseek
&lt;/h3&gt;&lt;p&gt;1、找到包含歌单的 HTML 部分，复制下来

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309150854.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309150854.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;2、让 AI 帮忙进行数据分析，从 HTML 中抽取出歌曲名（HTML、CSS 代码都是非常有规律的，相同的数据类型，AI 非常轻松的能进行处理）。给出一个例子，让 AI 自己去找规律提取

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309151120.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309151120.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;3、得到的结果

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309151136.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309151136.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;99
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Be&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Here&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Now&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Solar&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Power&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fear&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;When&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;You&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fly&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SUNRISE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Architect&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Better&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Together&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Heatstroke&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GOOD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DAY&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bloom&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;May&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ninth&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Coffee&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Morning&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BLACKBIIRD&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;me&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;last&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;day&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;earth&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Little&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Life&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Somebody&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Like&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Me&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Rollin&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Sofa&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;King&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Just&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Word&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Yesterdays&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Coffee&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;With&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;You&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Good&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;News&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Breakfast&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Sweet&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Nothing&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ll Be Here&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;My&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Love&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Mine&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;All&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Mine&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Waiting&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;On&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;World&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Change&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;You&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;’&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;re&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Here&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;That&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;’&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Thing&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Pegasus&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Phoebe&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bridgers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Sweet&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Disposition&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Sun&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Son&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Humble&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Quest&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Seasons&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Please&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Do&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Lean&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;feat&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BADBADNOTGOOD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SNAP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;No&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;One&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Say&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Little&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Prayer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;See&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Right&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Now&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Hurricane&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;everything&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;about&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;her&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fault&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Line&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Someday&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Drunk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Running&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Meadow&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Break&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;In&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bougainvillea&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Left&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Party&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;For&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;You&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;What&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Do&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Know&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Stella&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Brown&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;What&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Should&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Do&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Don&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;t Stop&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Shelter&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;easier&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;said&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Glue&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Song&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Good&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Thing&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Thinking&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;About&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;You&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Goodbye&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Yellow&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Brick&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Road&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2014&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Remaster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;When&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Grey&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Skies&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Save&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Us&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Love&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;This&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Song&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Weightless&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Backup&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Plan&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Boyhood&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Cotton&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Candy&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Lemonade&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;breakfast&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;song&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Lonely&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Eyes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;can&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;call&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;back&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;always&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ll care&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Day&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;That&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Met&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;You&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Good&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Tears&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Over&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Blue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Nikes&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;On&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Lifetime&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ily&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;love&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;baby&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;feat&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Emilee&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;More&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Than&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Perfect&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;I&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ll Wait&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Rain&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;way&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;things&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;go&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Somewhere&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Beach&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Boy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Sunshine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;feat&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fousheé&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Red&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Line&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;What&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Going&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Dream&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;With&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Baseball&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Player&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Come&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Away&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Me&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Waiting&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Waste&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Better&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Days&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ghost&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Killer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Easy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;feat&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Mark&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ronson&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;care&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Mrs&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Magic&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Beach&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Decompose&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;how&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deep&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Follow&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;My&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Echo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Mariposa&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Keeping&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Light&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;On&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;chatgpt&#34;&gt;ChatGPT
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://music.apple.com/cn/playlist/%E6%97%A9%E9%A4%90/pl.296fd5d490444aaf80e23fa3dea02cb7 这是apple music的早餐歌单，现在我需要获取歌单中的歌曲名和歌曲作者。请你提取出来，例如，第一首歌歌曲名：Be Here Now，作者Beck，请你用markdown表格的形式发给我
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;注意开启联网搜索。列举出来的表格歌单，根本就不是当前网页中的歌单，差评，估计表格后面的歌曲都是 GPT 瞎想的

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309152542.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309152542.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;序号&lt;/th&gt;
          &lt;th&gt;歌曲名&lt;/th&gt;
          &lt;th&gt;演唱者&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;Be Here Now&lt;/td&gt;
          &lt;td&gt;Beck&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;Solar Power&lt;/td&gt;
          &lt;td&gt;Lorde&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3&lt;/td&gt;
          &lt;td&gt;Fear When You Fly&lt;/td&gt;
          &lt;td&gt;Cleo Sol&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;Syncopate&lt;/td&gt;
          &lt;td&gt;MICHELLE&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;Breadwinner&lt;/td&gt;
          &lt;td&gt;Kacey Musgraves&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;6&lt;/td&gt;
          &lt;td&gt;Banana Pancakes&lt;/td&gt;
          &lt;td&gt;Jack Johnson&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;Skyline&lt;/td&gt;
          &lt;td&gt;Khalid&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;8&lt;/td&gt;
          &lt;td&gt;Slow Down&lt;/td&gt;
          &lt;td&gt;Forrest Frank&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;9&lt;/td&gt;
          &lt;td&gt;The Cure for Pain&lt;/td&gt;
          &lt;td&gt;Jon Foreman&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;10&lt;/td&gt;
          &lt;td&gt;Look Up&lt;/td&gt;
          &lt;td&gt;Joy Oladokun&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;11&lt;/td&gt;
          &lt;td&gt;Pelota&lt;/td&gt;
          &lt;td&gt;Khruangbin&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;12&lt;/td&gt;
          &lt;td&gt;Older&lt;/td&gt;
          &lt;td&gt;Parcels&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;13&lt;/td&gt;
          &lt;td&gt;Light On&lt;/td&gt;
          &lt;td&gt;Maggie Rogers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;14&lt;/td&gt;
          &lt;td&gt;Good Days&lt;/td&gt;
          &lt;td&gt;SZA&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;15&lt;/td&gt;
          &lt;td&gt;Kyoto&lt;/td&gt;
          &lt;td&gt;Phoebe Bridgers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;16&lt;/td&gt;
          &lt;td&gt;Mystery of Love&lt;/td&gt;
          &lt;td&gt;Sufjan Stevens&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;17&lt;/td&gt;
          &lt;td&gt;Motion Sickness&lt;/td&gt;
          &lt;td&gt;Phoebe Bridgers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;18&lt;/td&gt;
          &lt;td&gt;Don&amp;rsquo;t Know Why&lt;/td&gt;
          &lt;td&gt;Norah Jones&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;19&lt;/td&gt;
          &lt;td&gt;Georgia&lt;/td&gt;
          &lt;td&gt;Vance Joy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;20&lt;/td&gt;
          &lt;td&gt;Someone to You&lt;/td&gt;
          &lt;td&gt;BANNERS&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;21&lt;/td&gt;
          &lt;td&gt;Lost in Yesterday&lt;/td&gt;
          &lt;td&gt;Tame Impala&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;22&lt;/td&gt;
          &lt;td&gt;Heat Waves&lt;/td&gt;
          &lt;td&gt;Glass Animals&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;23&lt;/td&gt;
          &lt;td&gt;The Less I Know the Better&lt;/td&gt;
          &lt;td&gt;Tame Impala&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;24&lt;/td&gt;
          &lt;td&gt;Dreams&lt;/td&gt;
          &lt;td&gt;Fleetwood Mac&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;25&lt;/td&gt;
          &lt;td&gt;Sunday Morning&lt;/td&gt;
          &lt;td&gt;Maroon 5&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;26&lt;/td&gt;
          &lt;td&gt;Budapest&lt;/td&gt;
          &lt;td&gt;George Ezra&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;27&lt;/td&gt;
          &lt;td&gt;Riptide&lt;/td&gt;
          &lt;td&gt;Vance Joy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;28&lt;/td&gt;
          &lt;td&gt;Bloom&lt;/td&gt;
          &lt;td&gt;The Paper Kites&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;29&lt;/td&gt;
          &lt;td&gt;Ophelia&lt;/td&gt;
          &lt;td&gt;The Lumineers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;30&lt;/td&gt;
          &lt;td&gt;Ho Hey&lt;/td&gt;
          &lt;td&gt;The Lumineers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;31&lt;/td&gt;
          &lt;td&gt;Little Talks&lt;/td&gt;
          &lt;td&gt;Of Monsters and Men&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;32&lt;/td&gt;
          &lt;td&gt;Dog Days Are Over&lt;/td&gt;
          &lt;td&gt;Florence + The Machine&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;33&lt;/td&gt;
          &lt;td&gt;Take a Chance&lt;/td&gt;
          &lt;td&gt;Flume feat. Little Dragon&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;34&lt;/td&gt;
          &lt;td&gt;Everything Has Changed&lt;/td&gt;
          &lt;td&gt;Taylor Swift feat. Ed Sheeran&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;35&lt;/td&gt;
          &lt;td&gt;Bubbly&lt;/td&gt;
          &lt;td&gt;Colbie Caillat&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;36&lt;/td&gt;
          &lt;td&gt;Put Your Records On&lt;/td&gt;
          &lt;td&gt;Corinne Bailey Rae&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;37&lt;/td&gt;
          &lt;td&gt;I&amp;rsquo;m Yours&lt;/td&gt;
          &lt;td&gt;Jason Mraz&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;38&lt;/td&gt;
          &lt;td&gt;Lucky&lt;/td&gt;
          &lt;td&gt;Jason Mraz feat. Colbie Caillat&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;39&lt;/td&gt;
          &lt;td&gt;Better Together&lt;/td&gt;
          &lt;td&gt;Jack Johnson&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;40&lt;/td&gt;
          &lt;td&gt;Upside Down&lt;/td&gt;
          &lt;td&gt;Jack Johnson&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;41&lt;/td&gt;
          &lt;td&gt;Somewhere Over the Rainbow&lt;/td&gt;
          &lt;td&gt;Israel Kamakawiwo&amp;rsquo;ole&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;42&lt;/td&gt;
          &lt;td&gt;Here Comes the Sun&lt;/td&gt;
          &lt;td&gt;The Beatles&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;43&lt;/td&gt;
          &lt;td&gt;Blackbird&lt;/td&gt;
          &lt;td&gt;The Beatles&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;44&lt;/td&gt;
          &lt;td&gt;Imagine&lt;/td&gt;
          &lt;td&gt;John Lennon&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;45&lt;/td&gt;
          &lt;td&gt;What a Wonderful World&lt;/td&gt;
          &lt;td&gt;Louis Armstrong&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;46&lt;/td&gt;
          &lt;td&gt;Can&amp;rsquo;t Help Falling in Love&lt;/td&gt;
          &lt;td&gt;Elvis Presley&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;47&lt;/td&gt;
          &lt;td&gt;Stand by Me&lt;/td&gt;
          &lt;td&gt;Ben E. King&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;48&lt;/td&gt;
          &lt;td&gt;Lean on Me&lt;/td&gt;
          &lt;td&gt;Bill Withers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;49&lt;/td&gt;
          &lt;td&gt;Ain&amp;rsquo;t No Sunshine&lt;/td&gt;
          &lt;td&gt;Bill Withers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;50&lt;/td&gt;
          &lt;td&gt;Lovely Day&lt;/td&gt;
          &lt;td&gt;Bill Withers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;51&lt;/td&gt;
          &lt;td&gt;Just the Two of Us&lt;/td&gt;
          &lt;td&gt;Grover Washington Jr. feat. Bill Withers&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;52&lt;/td&gt;
          &lt;td&gt;Isn&amp;rsquo;t She Lovely&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;53&lt;/td&gt;
          &lt;td&gt;Sir Duke&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;54&lt;/td&gt;
          &lt;td&gt;Superstition&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;55&lt;/td&gt;
          &lt;td&gt;I Wish&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;56&lt;/td&gt;
          &lt;td&gt;Signed, Sealed, Delivered I&amp;rsquo;m Yours&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;57&lt;/td&gt;
          &lt;td&gt;You Are the Sunshine of My Life&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;58&lt;/td&gt;
          &lt;td&gt;My Cherie Amour&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;59&lt;/td&gt;
          &lt;td&gt;For Once in My Life&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;60&lt;/td&gt;
          &lt;td&gt;Higher Ground&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;61&lt;/td&gt;
          &lt;td&gt;Don&amp;rsquo;t You Worry &amp;lsquo;Bout a Thing&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;62&lt;/td&gt;
          &lt;td&gt;I Just Called to Say I Love You&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;63&lt;/td&gt;
          &lt;td&gt;Part-Time Lover&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;64&lt;/td&gt;
          &lt;td&gt;Master Blaster (Jammin&amp;rsquo;)&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;65&lt;/td&gt;
          &lt;td&gt;Do I Do&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;66&lt;/td&gt;
          &lt;td&gt;That Girl&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;67&lt;/td&gt;
          &lt;td&gt;Overjoyed&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;68&lt;/td&gt;
          &lt;td&gt;Lately&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;69&lt;/td&gt;
          &lt;td&gt;Ribbon in the Sky&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;70&lt;/td&gt;
          &lt;td&gt;As&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;71&lt;/td&gt;
          &lt;td&gt;Another Star&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;72&lt;/td&gt;
          &lt;td&gt;All I Do&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;73&lt;/td&gt;
          &lt;td&gt;Knocks Me Off My Feet&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;74&lt;/td&gt;
          &lt;td&gt;Pastime Paradise&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;75&lt;/td&gt;
          &lt;td&gt;Summer Soft&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;76&lt;/td&gt;
          &lt;td&gt;Love&amp;rsquo;s in Need of Love Today&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;77&lt;/td&gt;
          &lt;td&gt;Village Ghetto Land&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;78&lt;/td&gt;
          &lt;td&gt;Ngiculela - Es Una Historia - I Am Singing&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;79&lt;/td&gt;
          &lt;td&gt;If It&amp;rsquo;s Magic&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;80&lt;/td&gt;
          &lt;td&gt;Ordinary Pain&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;81&lt;/td&gt;
          &lt;td&gt;Saturn&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;82&lt;/td&gt;
          &lt;td&gt;Joy Inside My Tears&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;83&lt;/td&gt;
          &lt;td&gt;Isn&amp;rsquo;t She Lovely (Instrumental)&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;84&lt;/td&gt;
          &lt;td&gt;Contusion&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;85&lt;/td&gt;
          &lt;td&gt;Ebony Eyes&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;86&lt;/td&gt;
          &lt;td&gt;Rocket Love&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;87&lt;/td&gt;
          &lt;td&gt;Send One Your Love&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;88&lt;/td&gt;
          &lt;td&gt;I Ain&amp;rsquo;t Gonna Stand for It&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;89&lt;/td&gt;
          &lt;td&gt;Happy Birthday&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;90&lt;/td&gt;
          &lt;td&gt;That’s What Friends Are For&lt;/td&gt;
          &lt;td&gt;Dionne Warwick feat. Elton John, Gladys Knight &amp;amp; Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;91&lt;/td&gt;
          &lt;td&gt;We Are the World&lt;/td&gt;
          &lt;td&gt;U.S.A. for Africa&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;92&lt;/td&gt;
          &lt;td&gt;Ebony and Ivory&lt;/td&gt;
          &lt;td&gt;Paul McCartney &amp;amp; Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;93&lt;/td&gt;
          &lt;td&gt;Just Good Friends&lt;/td&gt;
          &lt;td&gt;Michael Jackson &amp;amp; Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;94&lt;/td&gt;
          &lt;td&gt;Get It&lt;/td&gt;
          &lt;td&gt;Stevie Wonder &amp;amp; Michael Jackson&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;95&lt;/td&gt;
          &lt;td&gt;How Come, How Long&lt;/td&gt;
          &lt;td&gt;Babyface feat. Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;96&lt;/td&gt;
          &lt;td&gt;True to Your Heart&lt;/td&gt;
          &lt;td&gt;98º feat. Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;97&lt;/td&gt;
          &lt;td&gt;Misrepresented People&lt;/td&gt;
          &lt;td&gt;Stevie Wonder&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;正则表达式&#34;&gt;正则表达式
&lt;/h3&gt;&lt;p&gt;1、复制歌单的 HTML 代码，文本长度太长，超过了 ChatGPT、Deepseek、Gemini 等 AI 的文本长度，只能先正则表达式提取出关键内容，然后再进一步处理了&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309154616.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309154616.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;2、在线正则表达式：&lt;a class=&#34;link&#34; href=&#34;https://tool.chinaz.com/regex&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;正则表达式在线测试 - 站长工具&lt;/a&gt;，这样就从一大堆的 HTML 代码中提取了演唱者和歌曲名&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;aria-label=&amp;#34;播放(.*?)的《(.*?)》&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309154652.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309154652.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;99
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Beck的《Be Here Now》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Lorde的《Solar Power》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Cleo Sol的《Fear When You Fly》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放MICHELLE的《SUNRISE》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Kacey Musgraves的《The Architect》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Jack Johnson的《Better Together》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Khalid的《Heatstroke》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Forrest Frank的《GOOD DAY》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Jon Foreman &amp;amp;amp; Joy Oladokun的《In Bloom》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Khruangbin的《May Ninth》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Wet的《Coffee In The Morning》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Beyoncé, Tanner Adell, Brittney Spencer, Tiera Kennedy &amp;amp;amp; Reyna Roberts的《BLACKBIIRD》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放gabrielle hope的《me and you》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Tai Verdes的《last day on earth》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Cordelia的《Little Life》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Joy Oladokun的《Somebody Like Me》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Blessing Offor的《Rollin&amp;#39;》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Royel Otis的《Sofa King》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Prateek Kuhad的《Just A Word》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Public Library Commute的《Yesterdays》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Abbey Cone的《Coffee With You》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Bakar的《Good News》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Stephanie Poetri &amp;amp;amp; gnash的《Breakfast in Bed》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Taylor Swift的《Sweet Nothing》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Colbie Caillat &amp;amp;amp; Sheryl Crow的《I&amp;#39;ll Be Here》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Mitski的《My Love Mine All Mine》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放John Mayer的《Waiting On the World to Change》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放beabadoobee的《You’re Here That’s the Thing》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Arlo Parks的《Pegasus (ft. Phoebe Bridgers)》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Jillian Edwards的《Sweet Disposition》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Jhené Aiko的《Sun/Son》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Maren Morris的《Humble Quest》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Madison Ryann Ward的《Seasons》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Daniel Caesar的《Please Do Not Lean (feat. BADBADNOTGOOD)》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Rosa Linn的《SNAP》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Kacy Hill的《No One》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Aretha Franklin的《I Say a Little Prayer》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Molly Parden的《I See Right Now》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Dylan Dunlap的《Hurricane》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Amie Blu的《everything about her》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Sophie Holohan的《Fault Line》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Unflirt的《Someday》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Lizzy McAlpine的《Drunk, Running》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Emelie Trahan的《Meadow》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放NewDad的《Break In》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Daneshevskaya的《Bougainvillea》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Pilar Victoria的《I Left A Party For You》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Sarah Crean的《What Do I Know?》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Jelani Aryeh的《Stella Brown》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Kevin Abstract的《What Should I Do?》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Fleetwood Mac的《Don&amp;#39;t Stop》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Alice Phoebe Lou的《Shelter》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放elijah woods的《easier said》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放beabadoobee的《Glue Song》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Cecily的《Good Thing》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Beck的《Thinking About You》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Elton John的《Goodbye Yellow Brick Road (2014 Remaster)》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放sunnytheduo的《2000 &amp;amp;amp; When》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Kate Bollinger的《Grey Skies》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Lennon Stella的《Save Us》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放flowerovlove的《I Love This Song》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Arlo Parks的《Weightless》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Maya Hawke的《Backup Plan》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放The Japanese House的《Boyhood》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Blu DeTiger的《Cotton Candy Lemonade》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Juliet Ivy的《breakfast song》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Lauv的《Lonely Eyes》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放SHY Martin的《can I call you back?》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Jeremy Zucker的《always, i&amp;#39;ll care》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Matilda Mann的《The Day That I Met You》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Dylan Dunlap的《The Good Tears》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放KAIRO的《Over》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Jackson Wang的《Blue》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Healy的《Nikes On》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放SG Lewis的《Lifetime》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Surf Mesa的《ily (i love you baby) [feat. Emilee]》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Brittney Spencer的《More Than Perfect》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Madison Ryann Ward的《I&amp;#39;ll Wait》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Lucy Park的《Rain》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放beabadoobee的《the way things go》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Hauskey的《Somewhere》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放BENEE的《Beach Boy》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Steve Lacy的《Sunshine (feat. Fousheé)》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Ben Chandler的《Red Line》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Hannah Jadagu的《What Is Going on?》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Faye Webster的《A Dream With a Baseball Player》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Norah Jones的《Come Away with Me》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Mina Okabe的《Waiting Is A Waste》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Tyler James Bellinger的《Better Days》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Sarah Klang的《Ghost Killer》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Troye Sivan &amp;amp;amp; Kacey Musgraves的《Easy (feat. Mark Ronson)》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Ruel的《as long as you care》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Strawberry Guy的《Mrs Magic》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Max Leone的《The Beach》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放spill tab的《Decompose》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Tai Verdes的《how deep?》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Dylan Dunlap的《Follow My Echo》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Peach Tree Rascals的《Mariposa》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;aria&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;label&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;播放Joy Oladokun的《Keeping The Light On》&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;3、将提取出的信息再次交给 AI 处理&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309154934.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/20250309154934.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;序号&lt;/th&gt;
          &lt;th&gt;歌曲名&lt;/th&gt;
          &lt;th&gt;作者&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;Be Here Now&lt;/td&gt;
          &lt;td&gt;Beck&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;Solar Power&lt;/td&gt;
          &lt;td&gt;Lorde&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3&lt;/td&gt;
          &lt;td&gt;Fear When You Fly&lt;/td&gt;
          &lt;td&gt;Cleo Sol&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;SUNRISE&lt;/td&gt;
          &lt;td&gt;MICHELLE&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;The Architect&lt;/td&gt;
          &lt;td&gt;Kacey Musgraves&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;6&lt;/td&gt;
          &lt;td&gt;Better Together&lt;/td&gt;
          &lt;td&gt;Jack Johnson&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;Heatstroke&lt;/td&gt;
          &lt;td&gt;Khalid&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;8&lt;/td&gt;
          &lt;td&gt;GOOD DAY&lt;/td&gt;
          &lt;td&gt;Forrest Frank&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;9&lt;/td&gt;
          &lt;td&gt;In Bloom&lt;/td&gt;
          &lt;td&gt;Jon Foreman &amp;amp; Joy Oladokun&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;10&lt;/td&gt;
          &lt;td&gt;May Ninth&lt;/td&gt;
          &lt;td&gt;Khruangbin&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;11&lt;/td&gt;
          &lt;td&gt;Coffee In The Morning&lt;/td&gt;
          &lt;td&gt;Wet&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;12&lt;/td&gt;
          &lt;td&gt;BLACKBIIRD&lt;/td&gt;
          &lt;td&gt;Beyoncé, Tanner Adell, Brittney Spencer, Tiera Kennedy &amp;amp; Reyna Roberts&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;13&lt;/td&gt;
          &lt;td&gt;me and you&lt;/td&gt;
          &lt;td&gt;gabrielle hope&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;14&lt;/td&gt;
          &lt;td&gt;last day on earth&lt;/td&gt;
          &lt;td&gt;Tai Verdes&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;15&lt;/td&gt;
          &lt;td&gt;Little Life&lt;/td&gt;
          &lt;td&gt;Cordelia&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;16&lt;/td&gt;
          &lt;td&gt;Somebody Like Me&lt;/td&gt;
          &lt;td&gt;Joy Oladokun&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;17&lt;/td&gt;
          &lt;td&gt;Rollin&#39;&lt;/td&gt;
          &lt;td&gt;Blessing Offor&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;18&lt;/td&gt;
          &lt;td&gt;Sofa King&lt;/td&gt;
          &lt;td&gt;Royel Otis&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;19&lt;/td&gt;
          &lt;td&gt;Just A Word&lt;/td&gt;
          &lt;td&gt;Prateek Kuhad&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;20&lt;/td&gt;
          &lt;td&gt;Yesterdays&lt;/td&gt;
          &lt;td&gt;Public Library Commute&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;21&lt;/td&gt;
          &lt;td&gt;Coffee With You&lt;/td&gt;
          &lt;td&gt;Abbey Cone&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;22&lt;/td&gt;
          &lt;td&gt;Good News&lt;/td&gt;
          &lt;td&gt;Bakar&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;23&lt;/td&gt;
          &lt;td&gt;Breakfast in Bed&lt;/td&gt;
          &lt;td&gt;Stephanie Poetri &amp;amp; gnash&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;24&lt;/td&gt;
          &lt;td&gt;Sweet Nothing&lt;/td&gt;
          &lt;td&gt;Taylor Swift&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;25&lt;/td&gt;
          &lt;td&gt;I&amp;rsquo;ll Be Here&lt;/td&gt;
          &lt;td&gt;Colbie Caillat &amp;amp; Sheryl Crow&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;26&lt;/td&gt;
          &lt;td&gt;My Love Mine All Mine&lt;/td&gt;
          &lt;td&gt;Mitski&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;27&lt;/td&gt;
          &lt;td&gt;Waiting On the World to Change&lt;/td&gt;
          &lt;td&gt;John Mayer&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;28&lt;/td&gt;
          &lt;td&gt;You’re Here That’s the Thing&lt;/td&gt;
          &lt;td&gt;beabadoobee&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;29&lt;/td&gt;
          &lt;td&gt;Pegasus (ft. Phoebe Bridgers)&lt;/td&gt;
          &lt;td&gt;Arlo Parks&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;30&lt;/td&gt;
          &lt;td&gt;Sweet Disposition&lt;/td&gt;
          &lt;td&gt;Jillian Edwards&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;31&lt;/td&gt;
          &lt;td&gt;Sun/Son&lt;/td&gt;
          &lt;td&gt;Jhené Aiko&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;32&lt;/td&gt;
          &lt;td&gt;Humble Quest&lt;/td&gt;
          &lt;td&gt;Maren Morris&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;33&lt;/td&gt;
          &lt;td&gt;Seasons&lt;/td&gt;
          &lt;td&gt;Madison Ryann Ward&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;34&lt;/td&gt;
          &lt;td&gt;Please Do Not Lean (feat. BADBADNOTGOOD)&lt;/td&gt;
          &lt;td&gt;Daniel Caesar&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;35&lt;/td&gt;
          &lt;td&gt;SNAP&lt;/td&gt;
          &lt;td&gt;Rosa Linn&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;36&lt;/td&gt;
          &lt;td&gt;No One&lt;/td&gt;
          &lt;td&gt;Kacy Hill&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;37&lt;/td&gt;
          &lt;td&gt;I Say a Little Prayer&lt;/td&gt;
          &lt;td&gt;Aretha Franklin&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;38&lt;/td&gt;
          &lt;td&gt;I See Right Now&lt;/td&gt;
          &lt;td&gt;Molly Parden&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;39&lt;/td&gt;
          &lt;td&gt;Hurricane&lt;/td&gt;
          &lt;td&gt;Dylan Dunlap&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;40&lt;/td&gt;
          &lt;td&gt;everything about her&lt;/td&gt;
          &lt;td&gt;Amie Blu&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;41&lt;/td&gt;
          &lt;td&gt;Fault Line&lt;/td&gt;
          &lt;td&gt;Sophie Holohan&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;42&lt;/td&gt;
          &lt;td&gt;Someday&lt;/td&gt;
          &lt;td&gt;Unflirt&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;43&lt;/td&gt;
          &lt;td&gt;Drunk, Running&lt;/td&gt;
          &lt;td&gt;Lizzy McAlpine&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;44&lt;/td&gt;
          &lt;td&gt;Meadow&lt;/td&gt;
          &lt;td&gt;Emelie Trahan&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;45&lt;/td&gt;
          &lt;td&gt;Break In&lt;/td&gt;
          &lt;td&gt;NewDad&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;46&lt;/td&gt;
          &lt;td&gt;Bougainvillea&lt;/td&gt;
          &lt;td&gt;Daneshevskaya&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;47&lt;/td&gt;
          &lt;td&gt;I Left A Party For You&lt;/td&gt;
          &lt;td&gt;Pilar Victoria&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;48&lt;/td&gt;
          &lt;td&gt;What Do I Know?&lt;/td&gt;
          &lt;td&gt;Sarah Crean&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;49&lt;/td&gt;
          &lt;td&gt;Stella Brown&lt;/td&gt;
          &lt;td&gt;Jelani Aryeh&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;50&lt;/td&gt;
          &lt;td&gt;What Should I Do?&lt;/td&gt;
          &lt;td&gt;Kevin Abstract&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;51&lt;/td&gt;
          &lt;td&gt;Don&amp;rsquo;t Stop&lt;/td&gt;
          &lt;td&gt;Fleetwood Mac&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;52&lt;/td&gt;
          &lt;td&gt;Shelter&lt;/td&gt;
          &lt;td&gt;Alice Phoebe Lou&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;53&lt;/td&gt;
          &lt;td&gt;easier said&lt;/td&gt;
          &lt;td&gt;elijah woods&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;54&lt;/td&gt;
          &lt;td&gt;Glue Song&lt;/td&gt;
          &lt;td&gt;beabadoobee&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;55&lt;/td&gt;
          &lt;td&gt;Good Thing&lt;/td&gt;
          &lt;td&gt;Cecily&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;56&lt;/td&gt;
          &lt;td&gt;Thinking About You&lt;/td&gt;
          &lt;td&gt;Beck&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;57&lt;/td&gt;
          &lt;td&gt;Goodbye Yellow Brick Road (2014 Remaster)&lt;/td&gt;
          &lt;td&gt;Elton John&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;58&lt;/td&gt;
          &lt;td&gt;2000 &amp;amp; When&lt;/td&gt;
          &lt;td&gt;sunnytheduo&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;59&lt;/td&gt;
          &lt;td&gt;Grey Skies&lt;/td&gt;
          &lt;td&gt;Kate Bollinger&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;60&lt;/td&gt;
          &lt;td&gt;Save Us&lt;/td&gt;
          &lt;td&gt;Lennon Stella&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;61&lt;/td&gt;
          &lt;td&gt;I Love This Song&lt;/td&gt;
          &lt;td&gt;flowerovlove&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;62&lt;/td&gt;
          &lt;td&gt;Weightless&lt;/td&gt;
          &lt;td&gt;Arlo Parks&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;63&lt;/td&gt;
          &lt;td&gt;Backup Plan&lt;/td&gt;
          &lt;td&gt;Maya Hawke&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;64&lt;/td&gt;
          &lt;td&gt;Boyhood&lt;/td&gt;
          &lt;td&gt;The Japanese House&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;65&lt;/td&gt;
          &lt;td&gt;Cotton Candy Lemonade&lt;/td&gt;
          &lt;td&gt;Blu DeTiger&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;66&lt;/td&gt;
          &lt;td&gt;breakfast song&lt;/td&gt;
          &lt;td&gt;Juliet Ivy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;67&lt;/td&gt;
          &lt;td&gt;Lonely Eyes&lt;/td&gt;
          &lt;td&gt;Lauv&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;68&lt;/td&gt;
          &lt;td&gt;can I call you back?&lt;/td&gt;
          &lt;td&gt;SHY Martin&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;69&lt;/td&gt;
          &lt;td&gt;always, i&amp;rsquo;ll care&lt;/td&gt;
          &lt;td&gt;Jeremy Zucker&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;70&lt;/td&gt;
          &lt;td&gt;The Day That I Met You&lt;/td&gt;
          &lt;td&gt;Matilda Mann&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;71&lt;/td&gt;
          &lt;td&gt;The Good Tears&lt;/td&gt;
          &lt;td&gt;Dylan Dunlap&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;72&lt;/td&gt;
          &lt;td&gt;Over&lt;/td&gt;
          &lt;td&gt;KAIRO&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;73&lt;/td&gt;
          &lt;td&gt;Blue&lt;/td&gt;
          &lt;td&gt;Jackson Wang&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;74&lt;/td&gt;
          &lt;td&gt;Nikes On&lt;/td&gt;
          &lt;td&gt;Healy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;75&lt;/td&gt;
          &lt;td&gt;Lifetime&lt;/td&gt;
          &lt;td&gt;SG Lewis&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;76&lt;/td&gt;
          &lt;td&gt;ily (i love you baby) [feat. Emilee]&lt;/td&gt;
          &lt;td&gt;Surf Mesa&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;77&lt;/td&gt;
          &lt;td&gt;More Than Perfect&lt;/td&gt;
          &lt;td&gt;Brittney Spencer&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;78&lt;/td&gt;
          &lt;td&gt;I&amp;rsquo;ll Wait&lt;/td&gt;
          &lt;td&gt;Madison Ryann Ward&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;79&lt;/td&gt;
          &lt;td&gt;Rain&lt;/td&gt;
          &lt;td&gt;Lucy Park&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;80&lt;/td&gt;
          &lt;td&gt;the way things go&lt;/td&gt;
          &lt;td&gt;beabadoobee&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;81&lt;/td&gt;
          &lt;td&gt;Somewhere&lt;/td&gt;
          &lt;td&gt;Hauskey&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;82&lt;/td&gt;
          &lt;td&gt;Beach Boy&lt;/td&gt;
          &lt;td&gt;BENEE&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;83&lt;/td&gt;
          &lt;td&gt;Sunshine (feat. Fousheé)&lt;/td&gt;
          &lt;td&gt;Steve Lacy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;84&lt;/td&gt;
          &lt;td&gt;Red Line&lt;/td&gt;
          &lt;td&gt;Ben Chandler&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;85&lt;/td&gt;
          &lt;td&gt;What Is Going on?&lt;/td&gt;
          &lt;td&gt;Hannah Jadagu&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;86&lt;/td&gt;
          &lt;td&gt;A Dream With a Baseball Player&lt;/td&gt;
          &lt;td&gt;Faye Webster&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;87&lt;/td&gt;
          &lt;td&gt;Come Away with Me&lt;/td&gt;
          &lt;td&gt;Norah Jones&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;88&lt;/td&gt;
          &lt;td&gt;Waiting Is A Waste&lt;/td&gt;
          &lt;td&gt;Mina Okabe&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;89&lt;/td&gt;
          &lt;td&gt;Better Days&lt;/td&gt;
          &lt;td&gt;Tyler James Bellinger&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;90&lt;/td&gt;
          &lt;td&gt;Ghost Killer&lt;/td&gt;
          &lt;td&gt;Sarah Klang&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;91&lt;/td&gt;
          &lt;td&gt;Easy (feat. Mark Ronson)&lt;/td&gt;
          &lt;td&gt;Troye Sivan &amp;amp; Kacey Musgraves&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;92&lt;/td&gt;
          &lt;td&gt;as long as you care&lt;/td&gt;
          &lt;td&gt;Ruel&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;93&lt;/td&gt;
          &lt;td&gt;Mrs Magic&lt;/td&gt;
          &lt;td&gt;Strawberry Guy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;94&lt;/td&gt;
          &lt;td&gt;The Beach&lt;/td&gt;
          &lt;td&gt;Max Leone&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;95&lt;/td&gt;
          &lt;td&gt;Decompose&lt;/td&gt;
          &lt;td&gt;spill tab&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;96&lt;/td&gt;
          &lt;td&gt;how deep?&lt;/td&gt;
          &lt;td&gt;Tai Verdes&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;97&lt;/td&gt;
          &lt;td&gt;Follow My Echo&lt;/td&gt;
          &lt;td&gt;Dylan Dunlap&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;98&lt;/td&gt;
          &lt;td&gt;Mariposa&lt;/td&gt;
          &lt;td&gt;Peach Tree Rascals&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;99&lt;/td&gt;
          &lt;td&gt;Keeping The Light On&lt;/td&gt;
          &lt;td&gt;Joy Oladokun&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;昏昏欲睡&#34;&gt;昏昏欲睡
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;歌曲名&lt;/th&gt;
          &lt;th&gt;演唱者&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Back Home (Rework)&lt;/td&gt;
          &lt;td&gt;lloom&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Perspective&lt;/td&gt;
          &lt;td&gt;lofi geek&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;midwest&lt;/td&gt;
          &lt;td&gt;juniorodeo &amp;amp; Delayde&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Asleep With You&lt;/td&gt;
          &lt;td&gt;Son Nu&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;A Foggy View&lt;/td&gt;
          &lt;td&gt;softy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Sinking&lt;/td&gt;
          &lt;td&gt;Euxia &amp;amp; Kainbeats&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;waxing moon&lt;/td&gt;
          &lt;td&gt;zxry.&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;long night&lt;/td&gt;
          &lt;td&gt;felt&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Sunrise&lt;/td&gt;
          &lt;td&gt;Basmati&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Away We Go&lt;/td&gt;
          &lt;td&gt;Lomme&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Dreamlike Encounters&lt;/td&gt;
          &lt;td&gt;Obie Hans&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Native&lt;/td&gt;
          &lt;td&gt;zya&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Calmest Place on Earth&lt;/td&gt;
          &lt;td&gt;Pearldiver&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Way Back When&lt;/td&gt;
          &lt;td&gt;Beddy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;The Fall&lt;/td&gt;
          &lt;td&gt;Constantine&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Secret Stars&lt;/td&gt;
          &lt;td&gt;Astro Casual&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Early June&lt;/td&gt;
          &lt;td&gt;lloom&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Underwater Blue&lt;/td&gt;
          &lt;td&gt;MyceliumBug&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Whispers of Shibuya&lt;/td&gt;
          &lt;td&gt;Pearldiver&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;oj on the porch in -4 celcius&lt;/td&gt;
          &lt;td&gt;HM Surf&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;capri&lt;/td&gt;
          &lt;td&gt;Kromattic&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Parallel&lt;/td&gt;
          &lt;td&gt;Kainbeats&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Chamomile Tea&lt;/td&gt;
          &lt;td&gt;Maono&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;The Emperor&amp;rsquo;s Ride Home&lt;/td&gt;
          &lt;td&gt;Daphné&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Seek&lt;/td&gt;
          &lt;td&gt;koia&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Whispers&lt;/td&gt;
          &lt;td&gt;Lomme &amp;amp; Elk Beats&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Cedar&lt;/td&gt;
          &lt;td&gt;Tykho&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Zandukeli&lt;/td&gt;
          &lt;td&gt;Yakubu&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Gnite Orion&lt;/td&gt;
          &lt;td&gt;Beddy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;sub zero&lt;/td&gt;
          &lt;td&gt;bby knife&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;quiet pond&lt;/td&gt;
          &lt;td&gt;Bcalm&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Between&lt;/td&gt;
          &lt;td&gt;Bcalm&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Moonlight Canvas&lt;/td&gt;
          &lt;td&gt;Obie Hans&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Drift Away&lt;/td&gt;
          &lt;td&gt;Kattnap&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Mulberry Ln&lt;/td&gt;
          &lt;td&gt;Beddy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;slow breaths&lt;/td&gt;
          &lt;td&gt;No Spirit &amp;amp; colours in the dark&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Over The Moon&lt;/td&gt;
          &lt;td&gt;cxlt.&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Light as a Feather&lt;/td&gt;
          &lt;td&gt;Fuyu Echo (feat. Arjun K. Verma)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Painted Postcard&lt;/td&gt;
          &lt;td&gt;Obie Hans&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Remember&lt;/td&gt;
          &lt;td&gt;koia&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;The Sanctuary&lt;/td&gt;
          &lt;td&gt;sftspkn &amp;amp; Prithvi&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Till The Rain Stops&lt;/td&gt;
          &lt;td&gt;Chill Denis&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Carry Me&lt;/td&gt;
          &lt;td&gt;Phonedown &amp;amp; møndberg&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Perpetual Dream&lt;/td&gt;
          &lt;td&gt;Corey J. Beats&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Stargazing&lt;/td&gt;
          &lt;td&gt;sftspkn &amp;amp; Prithvi&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;still miss you&lt;/td&gt;
          &lt;td&gt;Chill Denis &amp;amp; hushfall&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Flowing&lt;/td&gt;
          &lt;td&gt;dozy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Lost &amp;amp; Never Found&lt;/td&gt;
          &lt;td&gt;Chill Denis &amp;amp; mėlyna&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Liminal Spaces&lt;/td&gt;
          &lt;td&gt;Constantine&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Wait For Me&lt;/td&gt;
          &lt;td&gt;Plant Guy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Ode To The Night Sky&lt;/td&gt;
          &lt;td&gt;cxlt.&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Burley&lt;/td&gt;
          &lt;td&gt;Pearldiver&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Warm Blankets&lt;/td&gt;
          &lt;td&gt;Seek Shelter &amp;amp; Solar Body&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;In Balance&lt;/td&gt;
          &lt;td&gt;Mujo &amp;amp; Sweet Medicine&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Storm Clouds&lt;/td&gt;
          &lt;td&gt;bedroom lofi &amp;amp; Late Night Tones&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Wildheart&lt;/td&gt;
          &lt;td&gt;COSMOGLOW&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Starry Night&lt;/td&gt;
          &lt;td&gt;Gerardo Millán &amp;amp; Blocktane&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;I&amp;rsquo;m Gonna Miss You&lt;/td&gt;
          &lt;td&gt;hushfall &amp;amp; jxsn&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;SUNLIGHT&lt;/td&gt;
          &lt;td&gt;coquelicot&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Ripples&lt;/td&gt;
          &lt;td&gt;Lomme &amp;amp; Elk Beats&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Space Between the Stars&lt;/td&gt;
          &lt;td&gt;luv pug &amp;amp; Spaniel Mac (feat. Lofido)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Sleeprune (Instrumental)&lt;/td&gt;
          &lt;td&gt;Kainbeats &amp;amp; idylla&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;In the Garden&lt;/td&gt;
          &lt;td&gt;Euxia&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Velvet Afternoon&lt;/td&gt;
          &lt;td&gt;Kattnap&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Elysian&lt;/td&gt;
          &lt;td&gt;Amesyt&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Cloudgate&lt;/td&gt;
          &lt;td&gt;Kainbeats&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Lyla&lt;/td&gt;
          &lt;td&gt;rhoom&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Moving On&lt;/td&gt;
          &lt;td&gt;Dontcry &amp;amp; cxlt.&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Astronaut&lt;/td&gt;
          &lt;td&gt;Elk Beats &amp;amp; Lomme&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Everything Will Get Better&lt;/td&gt;
          &lt;td&gt;Jam&amp;rsquo;addict&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Fall Softly (Lofi Version)&lt;/td&gt;
          &lt;td&gt;Blocktane &amp;amp; Mahaji (feat. Steezy Prime)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;cycles&lt;/td&gt;
          &lt;td&gt;Kino MacGregor&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Memories&lt;/td&gt;
          &lt;td&gt;Dontcry &amp;amp; Nokiaa&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Quiet Storm&lt;/td&gt;
          &lt;td&gt;Pepper &amp;amp; Lola&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Whispering Winds&lt;/td&gt;
          &lt;td&gt;zya&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Kamakura Breeze&lt;/td&gt;
          &lt;td&gt;Blue Gardenia&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Scenery&lt;/td&gt;
          &lt;td&gt;Yasumu&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Moongazers&lt;/td&gt;
          &lt;td&gt;Astro Casual&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Dreaming In Lofi&lt;/td&gt;
          &lt;td&gt;valmy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Adrift&lt;/td&gt;
          &lt;td&gt;Cauzy&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;daydreamer&lt;/td&gt;
          &lt;td&gt;Redseal&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Midtown Midnight&lt;/td&gt;
          &lt;td&gt;auv&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Celestial Reverie&lt;/td&gt;
          &lt;td&gt;vimef &amp;amp; Chill Denis&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Hornsby&amp;rsquo;s Tavern&lt;/td&gt;
          &lt;td&gt;Captain Kidd&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Collide A Scope&lt;/td&gt;
          &lt;td&gt;NueBoo &amp;amp; Recalibration Machine&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;onyx&lt;/td&gt;
          &lt;td&gt;Kromattic&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Tea Leaves&lt;/td&gt;
          &lt;td&gt;Lomme &amp;amp; Elk Beats&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Daydreams&lt;/td&gt;
          &lt;td&gt;Sleepermane &amp;amp; Casiio&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;I am&lt;/td&gt;
          &lt;td&gt;LIVE FREE&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Defensive&lt;/td&gt;
          &lt;td&gt;xander. &amp;amp; Philip Somber&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Daydreamer&lt;/td&gt;
          &lt;td&gt;Osoku&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Finesse&lt;/td&gt;
          &lt;td&gt;Ajose &amp;amp; zxry.&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;sReim&lt;/td&gt;
          &lt;td&gt;erwOn&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Orka&lt;/td&gt;
          &lt;td&gt;tillit&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Diamonds in the Sky&lt;/td&gt;
          &lt;td&gt;Oatmello&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Dusty Lanterns&lt;/td&gt;
          &lt;td&gt;Nice Pajamas &amp;amp; Hypntc&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Tripping Over&lt;/td&gt;
          &lt;td&gt;Charlee Nguyen &amp;amp; Tsunamii&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;kRia&lt;/td&gt;
          &lt;td&gt;erwOn&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Places We Go&lt;/td&gt;
          &lt;td&gt;Euxia&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Cannonier&lt;/td&gt;
          &lt;td&gt;Shrimpnose&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>SW快捷键</title>
        <link>https://teaize.github.io/p/sw%E5%BF%AB%E6%8D%B7%E9%94%AE/</link>
        <pubDate>Fri, 07 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/sw%E5%BF%AB%E6%8D%B7%E9%94%AE/</guid>
        <description>&lt;h3 id=&#34;自定义快捷键&#34;&gt;自定义快捷键
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;使对称：Alt+Q&lt;/li&gt;
&lt;li&gt;插入基准面：Alt+F&lt;/li&gt;
&lt;li&gt;转换为构造线：Alt+W&lt;/li&gt;
&lt;li&gt;使水平：Alt+A&lt;/li&gt;
&lt;li&gt;使竖直：Alt+D&lt;/li&gt;
&lt;li&gt;使共线：Alt+X&lt;/li&gt;
&lt;li&gt;使重合：Alt+C&lt;/li&gt;
&lt;li&gt;选择直线中点：右键直线，B&lt;/li&gt;
&lt;li&gt;使相等：Shift+W&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>如何提问</title>
        <link>https://teaize.github.io/p/%E5%A6%82%E4%BD%95%E6%8F%90%E9%97%AE/</link>
        <pubDate>Mon, 03 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%A6%82%E4%BD%95%E6%8F%90%E9%97%AE/</guid>
        <description>&lt;h3 id=&#34;一提升提问质量的通用原则&#34;&gt;一、提升提问质量的通用原则
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;明确背景：说明问题的使用场景/目标（如学术论文/商业决策/兴趣学习）&lt;/li&gt;
&lt;li&gt;结构化描述：将复杂问题拆解为具体子问题（避免模糊的一揽子提问）&lt;/li&gt;
&lt;li&gt;提供示例：给出你期望的回答格式（如大纲/代码/表格/对比分析）&lt;/li&gt;
&lt;li&gt;定义需求：说明回答的深度（如科普级/专业级）和限制条件（如字数/语言）&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;二高效提问模板&#34;&gt;二、高效提问模板
&lt;/h3&gt;&lt;h4 id=&#34;模板-1学术技术类问题&#34;&gt;模板 1：学术/技术类问题
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;背景&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;我正在研究______领域&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;目标是解决______问题&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;当前进展&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;目前已知______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;但遇到______困难&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;具体需求&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;请用______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;如公式&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;代码&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;图表&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;解释______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;并推荐相关文献&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;模板-2决策建议类问题&#34;&gt;模板 2：决策建议类问题
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;目标&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;我需要在______情况下选择______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;如职业方向&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;投资方案&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;选项&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;目前考虑的方案有&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;______&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;______&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;______&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;限制条件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;需考虑______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;如预算&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;时间&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;风险&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;），&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;优先关注______因素&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;模板-3创意生成类问题&#34;&gt;模板 3：创意生成类问题
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;主题&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;需要为______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;如产品&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;故事&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;活动&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;设计创意&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;风格要求&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;希望融合______和______元素&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;类似______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;示例&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;限制&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;需避免______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;必须包含______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;模板-4纠错优化类问题&#34;&gt;模板 4：纠错/优化类问题
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;原始内容&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;附上你的代码&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;文案&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;方案&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;可简化脱敏&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;问题现象&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;当______时会出现______错误&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;效果不理想&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;尝试方法&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;已尝试过______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;但______&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;三实操案例对比&#34;&gt;三、实操案例对比
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;低效提问：&amp;quot; 如何学习 Python？&amp;quot;&lt;/li&gt;
&lt;li&gt;优化后提问：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;背景&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;我是一名市场营销从业者&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;想用Python自动化处理Excel报表&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;基础水平&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;已掌握基础语法&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;，&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;但不懂如何连接Excel&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;【&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;具体需求&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;】&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;请用代码示例说明&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;：&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;1.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;用pandas读取含合并单元格的Excel文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;2.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;将处理后的数据按部门分类导出为单独sheet&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;3.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;推荐适合商业场景的Python学习资源&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;（&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;中文优先&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;四进阶技巧&#34;&gt;四、进阶技巧
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;预设边界：
&lt;ul&gt;
&lt;li&gt;❌ 避免：&amp;quot; 全面分析中美关系 &amp;quot;&lt;/li&gt;
&lt;li&gt;✅ 优化：&amp;quot; 请从科技竞争角度，对比 2018-2023 年中美在 AI 领域的政策差异 &amp;quot;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;分步推进：
&lt;ul&gt;
&lt;li&gt;Step1: 先解释区块链的基本原理（比喻手法）&lt;/li&gt;
&lt;li&gt;Step2: 再说明智能合约在供应链金融中的具体应用案例&lt;/li&gt;
&lt;li&gt;Step3: 最后分析该技术的实施风险&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;反向验证：
&lt;ul&gt;
&lt;li&gt;&amp;quot; 如果我假设 ___ ，这个推论是否存在逻辑漏洞？&amp;quot;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
</description>
        </item>
        <item>
        <title>机加工技术要求</title>
        <link>https://teaize.github.io/p/%E6%9C%BA%E5%8A%A0%E5%B7%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E6%B1%82/</link>
        <pubDate>Tue, 21 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%9C%BA%E5%8A%A0%E5%B7%A5%E6%8A%80%E6%9C%AF%E8%A6%81%E6%B1%82/</guid>
        <description>&lt;h2 id=&#34;机加工技术要求&#34;&gt;机加工技术要求
&lt;/h2&gt;&lt;h3 id=&#34;材料要求&#34;&gt;材料要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;指定零件的材质，例如钢材（45#钢、不锈钢）、铝合金、铜合金等&lt;/li&gt;
&lt;li&gt;材料牌号和执行的标准（如 GB、ASTM 等）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;热处理要求&#34;&gt;热处理要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;例如调质、淬火、退火、正火等热处理工艺及其具体要求&lt;/li&gt;
&lt;li&gt;硬度指标（如 HRC 45~50）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;表面处理要求&#34;&gt;表面处理要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;表面涂层（如镀锌、镀镍、阳极氧化、发黑处理等）
&lt;ul&gt;
&lt;li&gt;印字：&lt;code&gt;字体：Arial，字高：5.5mm，颜色：黑色，文字左右居中放置&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;底色：RAL 7035&lt;/li&gt;
&lt;li&gt;&lt;code&gt;镀黑色PTFE表面要求光洁，无划痕&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;XXX 焊接好后整体喷塑&lt;/li&gt;
&lt;li&gt;&lt;code&gt;内表面喷氟处理，涂层厚度 20~30um，可在200℃环境下长期使用&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;镀镍后螺纹二次攻牙处理&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;棱边倒钝，去毛刺&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;涂层厚度或质量要求&lt;/li&gt;
&lt;li&gt;表面粗糙度（Ra 值）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;尺寸公差&#34;&gt;尺寸公差
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;关键尺寸的公差要求，例如±0.01mm&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;未标注的尺寸公差执行 GB/T 1804-2000M 标准&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;对装配或功能影响较大的尺寸标注具体的公差等级（如 H7/g6）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;形位公差&#34;&gt;形位公差
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;包括平面度、平行度、垂直度、同轴度、圆跳动等要求&lt;/li&gt;
&lt;li&gt;通常以符号和数值标注（例如平行度≤0.01mm）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;未注形位公差值应按GB/T 1184-H&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;配合公差&#34;&gt;配合公差
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;孔和轴的配合公差等级（如 H7/g6）&lt;/li&gt;
&lt;li&gt;对重要配合部位标注特定的配合关系&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;孔加工要求&#34;&gt;孔加工要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;孔间距公差（例如±0.02mm）&lt;/li&gt;
&lt;li&gt;孔的加工形式（钻孔、攻丝、沉头孔等）&lt;/li&gt;
&lt;li&gt;孔的直径公差和表面粗糙度要求&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;压铆螺母在背面/正面压铆&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;所有螺纹在喷涂时需要保护。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;工艺孔加工完焊死，外表面走平整，工艺孔打压测试0.2MPa下零泄漏&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;表面粗糙度&#34;&gt;表面粗糙度
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;各部位的表面粗糙度要求（例如 Ra≤1.6μm）&lt;/li&gt;
&lt;li&gt;重要表面可能单独注明粗糙度要求&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;装配及工艺要求&#34;&gt;装配及工艺要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;标注装配要求，如装配间隙或过盈要求&lt;/li&gt;
&lt;li&gt;具体工艺说明，如需要夹具辅助加工或特定的焊接方法&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;其他技术要求&#34;&gt;其他技术要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;防锈处理（如油封、防锈涂层等）&lt;/li&gt;
&lt;li&gt;清洗要求（例如无油污、无残渣）
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;整体酸洗，超声波酒精清洗，烘干&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;验收标准和方法（如关键尺寸需全检或抽检标准）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;焊接要求&#34;&gt;焊接要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;明确焊接方式，如手工电弧焊（SMAW）、气体保护焊（MIG/TIG）、电阻焊、激光焊等
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;氩弧焊，零件位置关系如图，保证焊接不漏气&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;焊缝形式和尺寸&lt;/li&gt;
&lt;li&gt;焊接质量要求
&lt;ul&gt;
&lt;li&gt;焊接部位的焊后处理要求（如清除焊渣、抛光等）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;焊接完外表面电抛光&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;焊接处不可有焊瘤&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;示例技术要求书写：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;材料：45#钢，执行 GB/T 699-2015 标准&lt;/li&gt;
&lt;li&gt;热处理：调质处理，硬度 HRC 28~32&lt;/li&gt;
&lt;li&gt;表面粗糙度：未注表面 Ra3.2μm，配合面 Ra1.6μm&lt;/li&gt;
&lt;li&gt;孔径公差：φ20H7，孔间距公差±0.02mm&lt;/li&gt;
&lt;li&gt;表面处理：发黑处理，涂防锈油&lt;/li&gt;
&lt;li&gt;检验要求：关键尺寸需全检，其他尺寸按抽检标准检验&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;焊接要求-1&#34;&gt;焊接要求
&lt;/h2&gt;&lt;p&gt;在机加工图纸的技术要求中，如果涉及焊接工艺，通常包括以下焊接要求：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;焊接方法&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;明确焊接方式，如手工电弧焊（SMAW）、气体保护焊（MIG/TIG）、电阻焊、激光焊等。&lt;/li&gt;
&lt;li&gt;对于特殊焊接方法，需要注明具体标准或工艺规范。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;焊接材料&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;指定焊接材料或焊丝型号，例如 E6013、ER70S-6 等。&lt;/li&gt;
&lt;li&gt;如果需要，注明焊接材料的执行标准。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;焊缝形式和尺寸&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;标明焊缝类型（如对接焊缝、角焊缝、T 型焊缝等）。&lt;/li&gt;
&lt;li&gt;焊缝尺寸，包括焊缝高度、焊角尺寸、坡口角度等。&lt;/li&gt;
&lt;li&gt;焊缝的具体位置在图纸中应清晰标注。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;焊接质量要求&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;标明焊缝等级（如按 GB/T 3323 规定的等级：一级、二级、三级）。&lt;/li&gt;
&lt;li&gt;对焊缝的外观要求（如无气孔、裂纹、咬边等缺陷）。&lt;/li&gt;
&lt;li&gt;焊接部位的焊后处理要求（如清除焊渣、抛光等）。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;焊后热处理要求&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;如果有必要，要求进行焊后热处理（如消除应力处理）。&lt;/li&gt;
&lt;li&gt;热处理温度范围和保温时间。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;无损检测要求&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;指定检测方法（如射线探伤 RT、超声波探伤 UT、磁粉检测 MT、渗透检测 PT）。&lt;/li&gt;
&lt;li&gt;标明检测范围和验收标准。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;表面处理要求&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;对焊接后的表面处理，如打磨光滑、喷漆或防锈处理。&lt;/li&gt;
&lt;li&gt;涂层厚度和质量要求。&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;特殊工艺要求&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;明确焊接过程中的特殊要求，例如预热温度、焊接顺序、层间温度等。&lt;/li&gt;
&lt;li&gt;对焊接环境的要求（如防止风吹或潮湿）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;示例焊接技术要求书写&#34;&gt;示例焊接技术要求书写
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;焊接方法：手工电弧焊（SMAW），使用 E6013 焊条。&lt;/li&gt;
&lt;li&gt;焊缝形式：角焊缝，焊脚尺寸 4mm，焊缝长度为 50mm。&lt;/li&gt;
&lt;li&gt;焊接质量：符合 GB/T 3323 二级焊缝标准。&lt;/li&gt;
&lt;li&gt;无损检测：关键焊缝进行超声波探伤（UT），探伤比例为 100%。&lt;/li&gt;
&lt;li&gt;焊后处理：焊后进行打磨并喷涂防锈漆，漆膜厚度≥30μm。&lt;/li&gt;
&lt;li&gt;特殊要求：焊接前母材需预热至 100℃，焊后消除应力热处理（550℃，保温 2 小时）。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>工业设计结构</title>
        <link>https://teaize.github.io/p/%E5%B7%A5%E4%B8%9A%E8%AE%BE%E8%AE%A1%E7%BB%93%E6%9E%84/</link>
        <pubDate>Wed, 15 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%B7%A5%E4%B8%9A%E8%AE%BE%E8%AE%A1%E7%BB%93%E6%9E%84/</guid>
        <description>&lt;h3 id=&#34;结构拆装方式&#34;&gt;结构拆装方式
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;根据产品功能、制造和装配需求将整体结构拆分为多个零部件，进而生产、运输及维修。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;功能明确，每个部件功能单一&lt;/li&gt;
&lt;li&gt;考虑重组事宜，减少复杂性和重组时间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;常见材料厚度问题&#34;&gt;常见材料厚度问题
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;根据材料特性设计适当的厚度，保证强度、装配效果和外观质量。&lt;/li&gt;
&lt;li&gt;设计要点:
&lt;ul&gt;
&lt;li&gt;材料厚薄均匀，避免重点。&lt;/li&gt;
&lt;li&gt;厚度不足会导致变形，过厚增加成本和重量。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;常见结构固定方式&#34;&gt;常见结构固定方式
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过物理或化学方式连接零件，确保稳定性和可感应性。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;根据连接需求选择合适的方式 (如临时性用卡扣，长期性用胶水）。&lt;/li&gt;
&lt;li&gt;预留足够的固定空间并配备公差。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;参考资料&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;防水结构设计&#34;&gt;防水结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过密封设计防止液体渗入，保护内部组件。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;接缝处采用密封胶条或防水涂层，设计密封条（如橡胶圈、硅胶垫圈）。&lt;/li&gt;
&lt;li&gt;使用防水涂层或防水材料&lt;/li&gt;
&lt;li&gt;保证整体成型或配置防水接口。&lt;/li&gt;
&lt;li&gt;确保结构满足 IP 防护等级（如 IP65、IP68）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;防尘结构设计&#34;&gt;防尘结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;目标：避免灰尘进入设备内部影响性能。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;设置防尘密封圈。&lt;/li&gt;
&lt;li&gt;设计防尘网或滤网。&lt;/li&gt;
&lt;li&gt;保持内部气压高于外界（如设计微正压结构）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;防震与抗冲击结构&#34;&gt;防震与抗冲击结构
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;利用缓冲材料或结构设计吸收冲击力，防止内部零件损坏。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;选择高弹性材料，如硅胶、泡沫垫。&lt;/li&gt;
&lt;li&gt;确定抗冲击区域的分布合理。&lt;/li&gt;
&lt;li&gt;增加减震器（如橡胶垫、弹簧）。&lt;/li&gt;
&lt;li&gt;设计隔振槽或减振框架。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;参考资料：[[减震器]]&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;热管理结构设计&#34;&gt;热管理结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过设计散热器通道或材料导热性能，降低设备温度。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;优化孔布局，避免局部过热。&lt;/li&gt;
&lt;li&gt;结合文艺复兴 (风扇) 和笔记本电脑 (中世纪片)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;散热结构设计&#34;&gt;散热结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;目标：优化设备的散热性能，保证运行稳定性和安全性。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;计算热源分布，设计合理的散热通道。&lt;/li&gt;
&lt;li&gt;采用散热材料（如铝、铜、热导率高的复合材料）。&lt;/li&gt;
&lt;li&gt;设计通风口和散热片，避免气流阻塞。&lt;/li&gt;
&lt;li&gt;考虑强制散热（风扇）或自然对流散热。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;可拆卸结构设计&#34;&gt;可拆卸结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;关于维修、清洁或功能模块的更换。&lt;/li&gt;
&lt;li&gt;设计内容：
&lt;ul&gt;
&lt;li&gt;采用模块化设计，便于快速替换或升级。&lt;/li&gt;
&lt;li&gt;选择方便的连接方式（如卡扣式、螺钉式）&lt;/li&gt;
&lt;li&gt;确保多次安装拆卸后结构支架，不影响性能。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;折叠与伸缩结构设计&#34;&gt;折叠与伸缩结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过折叠或伸缩功能优化产品的存储性或便携性。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;走廊链或滑轨部分可靠，防止多次操作后松动。&lt;/li&gt;
&lt;li&gt;设计紧凑，保证折叠后的稳定性和安全性。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;防滑结构设计&#34;&gt;防滑结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过表面处理或增加障碍物，增强握持或接触稳定性。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;根据使用场景选择帆布纹路或材料（如橡胶垫）。&lt;/li&gt;
&lt;li&gt;保证外观结构美观与功能兼顾。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;导向与限位结构设计&#34;&gt;导向与限位结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过导向槽或限位装置确保组件安装顺利并避免错误操作。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;目标作品形状明确，内容错性好。&lt;/li&gt;
&lt;li&gt;限制位部分需具备稳定的机械性能。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;声学结构设计&#34;&gt;声学结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;优化声学性能以提升声音或噪音效果，结合结构形状和材料特性。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;计算集中频率，避免干扰干扰。&lt;/li&gt;
&lt;li&gt;选择吸音或坟墓材料。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;光学结构设计&#34;&gt;光学结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;优化声学性能以提升声音或噪音效果，结合结构形状和材料特性。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;计算集中频率，避免干扰干扰。&lt;/li&gt;
&lt;li&gt;选择吸音或坟墓材料。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;嵌入与卡扣设计&#34;&gt;嵌入与卡扣设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过嵌入或卡扣连接方式实现安装和感应。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;设计足够的扣合力，避免松动或丢失。&lt;/li&gt;
&lt;li&gt;确保感应时不损坏卡扣或嵌入部件。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;结构防误操作设计&#34;&gt;结构防误操作设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过形状、尺寸、颜色等差异化设计，避免操作错误或安装。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;差异化设计显而易见，减少用户判断时间。&lt;/li&gt;
&lt;li&gt;对高风险场景优先设计防误功能。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;快速装配结构设计&#34;&gt;快速装配结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过优化零件接口和连接方式，提高装配效率。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;减少装配步骤和零件数量。&lt;/li&gt;
&lt;li&gt;提供明确的装配方向或标志。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;减重结构设计&#34;&gt;减重结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;目标：减轻设备重量，便于携带或安装。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;使用轻量化材料（如镁合金、碳纤维）。&lt;/li&gt;
&lt;li&gt;使用蜂窝结构或加强筋，减重同时保证强度。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;耐腐蚀结构设计&#34;&gt;耐腐蚀结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;目标：延长设备在腐蚀环境中的使用寿命。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;选择耐腐蚀材料（如不锈钢、耐腐蚀涂层）。&lt;/li&gt;
&lt;li&gt;避免缝隙腐蚀，设计光滑表面。&lt;/li&gt;
&lt;li&gt;增加排水或通气通道，减少积液。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;抗电磁干扰结构设计&#34;&gt;抗电磁干扰结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;目标：避免电子设备受到外界电磁波干扰。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;采用屏蔽结构，如金属外壳或导电涂层。&lt;/li&gt;
&lt;li&gt;合理布置信号线，避免交叉干扰。&lt;/li&gt;
&lt;li&gt;增加接地措施，减少电磁辐射。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;美学与人机工程结构设计&#34;&gt;美学与人机工程结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;目标：提升用户体验，符合人体工程学。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;考虑手持舒适性，优化握持部位。&lt;/li&gt;
&lt;li&gt;调整控制界面的角度和高度，方便操作。&lt;/li&gt;
&lt;li&gt;设计外形曲线，提高视觉吸引力。&lt;/li&gt;
&lt;li&gt;优化重量分布，减少长时间使用的疲劳感。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;滑动与旋转结构设计&#34;&gt;滑动与旋转结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过运动组件的滑动或旋转实现运动功能。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;保证运动结束，无卡顿或异响。&lt;/li&gt;
&lt;li&gt;使用耐磨材料，延长使用寿命。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;出模方式&#34;&gt;出模方式
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;为实现从模具中顺利脱模,采用不同的结构设计来避免卡死或变形。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;提供适当的脱模斜度（一般 2°~3°)。&lt;/li&gt;
&lt;li&gt;复杂结构需设计分型面和抽芯机构。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;模具纹理精加工&#34;&gt;模具纹理精加工
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;通过纹理加工提升产品的外观和触感，同时掩盖表面缺陷。&lt;/li&gt;
&lt;li&gt;设计要点：
&lt;ul&gt;
&lt;li&gt;根据品牌定位选择纹理 (如高端产品更注重细致和光滑）。&lt;/li&gt;
&lt;li&gt;控制纹理纹理，避免影响模具消耗。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;特殊模具及工艺&#34;&gt;特殊模具及工艺
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;针对复杂产品或特殊材料，采用专用模具和工艺进行加工。&lt;/li&gt;
&lt;li&gt;设计要点:
&lt;ul&gt;
&lt;li&gt;根据产品性能需求工艺选择。&lt;/li&gt;
&lt;li&gt;保证模具精度和加工稳定性。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/wpSUmfjOfUfsByHBh27sfw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;工业设计必须了解的19种结构常识&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>关于离开学术界的建议</title>
        <link>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E7%A6%BB%E5%BC%80%E5%AD%A6%E6%9C%AF%E7%95%8C%E7%9A%84%E5%BB%BA%E8%AE%AE/</link>
        <pubDate>Fri, 10 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%85%B3%E4%BA%8E%E7%A6%BB%E5%BC%80%E5%AD%A6%E6%9C%AF%E7%95%8C%E7%9A%84%E5%BB%BA%E8%AE%AE/</guid>
        <description>&lt;h3 id=&#34;关于离开学术界的建议&#34;&gt;关于离开学术界的建议
&lt;/h3&gt;&lt;p&gt;原文链接：&lt;a class=&#34;link&#34; href=&#34;https://eigenrobot.substack.com/p/advice-for-academic-refugees?utm_source=direct&amp;amp;utm_campaign=post&amp;amp;utm_medium=web&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;advice for academic refugees - eigenrobot,s Blog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近我遇到了一位新同事，他是一位离开学术界的前任教授。像许多人一样，他似乎受到了伤害。这是他的第一份私营部门工作。&lt;/p&gt;
&lt;p&gt;我必须尊重他：他是自愿离开的。他身居要职，距离终身教授评审还有几年时间。在经过一生的努力后，从这样的地方离开是很难的。但他并不开心，他对自己的研究计划越来越失望，不再享受劳动本身，这也削弱了他享受私人生活的能力。因此他辞职了，并不是每个人都有勇气这样做。&lt;/p&gt;
&lt;p&gt;当我与他谈论入职和结识时，我意识到我正在与一个更有成就的自己的过去版本交谈。有一些有害的行为模式和观点被灌输给研究生。在接下来的几周中，我将尽力引导我的同事进入私营部门，并帮助他克服他所经历的；但今天我只有半个小时的时间，而且受限于专业规范，只能触及表面。&lt;/p&gt;
&lt;p&gt;认识到你们许多人可能处于与我同事类似的境地，或者更糟的是，对于那些仍然被学术体系所束缚并希望从一个叛教者那里得到一些观点的人，我提供一些关于学术环境中不言而喻的规范、它们在私营部门（以及几乎所有地方）中的不适应性，以及如何更成功地过渡到作为企业打工人的幸福生活的思考。&lt;/p&gt;
&lt;h3 id=&#34;学术界不适合人类&#34;&gt;学术界不适合人类
&lt;/h3&gt;&lt;p&gt;早些时候，我在 LessWrong 上看到了一篇最新的帖子，截图如下：&lt;/p&gt;
&lt;p&gt;While reading Eliezer&amp;rsquo;s recent AGI Ruin post, I noticed that while I had several points I wanted to ask about, I was reluctant to actually ask them for a number of reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I have a very conflict-avoidant personality and I don&amp;rsquo;t want to risk Eliezer or someone else yelling at me;&lt;/li&gt;
&lt;li&gt;I get easily intimidated by people with strong personalities, and Eliezer… well, he can be intimidating;&lt;/li&gt;
&lt;li&gt;I don&amp;rsquo;t want to appear dumb or uninformed (even if I am in fact relatively uninformed, hence me wanting to ask the question!);&lt;/li&gt;
&lt;li&gt;I feel like there&amp;rsquo;s an expectation that I would need to do a lot of due diligence before writing any sort of question, and I don&amp;rsquo;t have the time or energy at the moment to do that due diligence.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020230504185441.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020230504185441.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我的性格非常避免冲突，我不想冒险让埃利泽尔或其他人对我大喊大叫；&lt;/li&gt;
&lt;li&gt;我很容易被个性强的人吓到，而埃利泽尔…嗯，他可能会令人感到害怕；&lt;/li&gt;
&lt;li&gt;我不想显得愚蠢或无知（即使事实上我相对无知，因此我想问问题！）；&lt;/li&gt;
&lt;li&gt;我觉得应该在写任何问题之前需要做很多尽职调查，而我目前没有时间或精力去做这样的尽职调查。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我欣赏帖子作者的诚实和自我意识，并且认为他在这里列举的几点是对学术界社交环境对人们的影响，或者对某种神经类型的人来说会加剧的影响的一个很好的概括。&lt;/p&gt;
&lt;p&gt;这些特征本身在道德上并没有错，但我想强调的是，它们不仅令人不愉快，而且不利于在商业环境中发挥作用。当你跳出学术界之后，你应该尽快摆脱它们。&lt;/p&gt;
&lt;p&gt;我将我的建议分为一下四个主要点：&lt;/p&gt;
&lt;h3 id=&#34;没有人认为你是笨蛋&#34;&gt;没有人认为你是笨蛋
&lt;/h3&gt;&lt;p&gt;学术界的奇特之处在于：无论是相对的还是基本的表现，都会得到明确的，有时甚至是公开的评价；你很快就会形成一种声誉，尤其是在课堂或研讨会上犯错，会让人感到羞耻。学术界倾向于通过“让我们看看我能多快毁掉整个演示文稿”来解决这个问题。虽然这可能会有效地激励学者们找出他们工作中的错误，但也会让他们极度厌恶风险，并担心听众对他们的看法。&lt;/p&gt;
&lt;p&gt;我在工业界的经验是，根本没有人在乎这些。及时写出分析报告、明确你的主张并清楚地分析局限性。人们可能会对你的结果提出异议，但如果他们这样做，并不是因为他们认为你是个白痴：通常是因为他们认为你的推理有特定的问题，或者因为他们希望结果可能会不同。通常，就你的工作类别而言，你就是房间里最有能力的人，你的同事们往往默认会尊重你。&lt;/p&gt;
&lt;p&gt;除了你应该尽快放弃对你的智力的看法的任何剩余的焦虑和恐惧之外，这里最大的失败模式是在&lt;strong&gt;完美主义&lt;/strong&gt;上浪费时间。&lt;/p&gt;
&lt;p&gt;在学校里，花大量时间尝试将分析写成一篇完美的论文，以排除来自你自己或他人的任何可能的批评是有意义的。但是，在商业界，没有论文编辑会怀疑和审查你的工作，他们将是项目的经理或工程师，他们会相信你的话，即分析就是你所说的那样。他们可能会有批评，而且是好的批评，但通常是基于领域知识而不是对估计量统计特性的深入了解。如果你从同事那里得到了好的批评，那也没关系，如果你还没有发布，不会有任何惩罚。只需花五分钟回去修复它，庆幸你没有花三天时间试图预测错误。&lt;/p&gt;
&lt;p&gt;我不是建议你草率或不诚实，但来自学术界的人可能会偏向于风险规避，这在商业环境中是没有意义的，在商业环境中，你更有可能根据你的产出而不是关于你的技术成熟度。&lt;/p&gt;
&lt;h3 id=&#34;没有人在乎你是否聪明&#34;&gt;没有人在乎你是否聪明
&lt;/h3&gt;&lt;p&gt;每个人默认都认为你有能力的反面是，没有人关心你是否聪明，你不应该浪费你的时间或他们的时间来试图证明你是聪明的。&lt;/p&gt;
&lt;p&gt;主要的失败模式包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为学术受众写作，而不是简单直接地为非专家读者写作；&lt;/li&gt;
&lt;li&gt;使用最深奥的方法来展示你熟悉某个问题的方法学细微差别（而不是为了得到一个能够对决策有所指导的可接受答案）。除非你是向专家呈现，否则没有人关心你是否使用 blabla 方法；他们只想要一个能够回答问题的答案。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;再次强调，诚实地对自己追求任何程度的方法复杂性以及以适当的语言和时间表向观众传达结果的回报率的重要性。你不需要展示自己的才华；你需要快速地产生足够好的结果。&lt;/p&gt;
&lt;p&gt;好消息是这很容易。学术界以长期存在的问题为特征，这些问题已经讨论了几十年，几乎没有新颖的数据来解决它们。相比之下，工业界是一个大量预算、最小化官僚主义和丰富数据的研究领域。如果你能够快速地使用一些高级的模型并得到有趣的结果，没有人会阻止你，但十有八九的情况是，机会成本考虑应该让你选择直接绘制一些线条来回答问题。这可能不是“复杂的”，但它是“快速和高效的”，最重要的是它“有效”。&lt;/p&gt;
&lt;h3 id=&#34;只需要与人交谈&#34;&gt;只需要与人交谈
&lt;/h3&gt;&lt;p&gt;商业界的人比学术界的人更外向一些，但你应该感到放心，只要走向他们，与他们交谈就好了，有更重要的原因。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;他们的工作就是与你交谈，并回答与工作相关的问题。如果他们因为你联系他们而生气，那就是他们的问题。&lt;/li&gt;
&lt;li&gt;与人交谈也是你的工作，如果你不与人交谈，就会错过必要的信息。&lt;/li&gt;
&lt;li&gt;直接询问别人问题通常是解决问题的最快方法。你的雇主宁愿你通过问一个基本问题并在五分钟内得到答案来解决问题，而不是花费两整个工作日试图得出答案。&lt;/li&gt;
&lt;li&gt;许多系统文档不完善，唯一获取信息的方法就是询问直接了解该系统的人。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;没有人会认为你愚蠢，因为你要问一个基本问题，而你需要得到答案。你的表现正在被评估，但是它是基于你的产出，如果你通过打扰同事来获取帮助来改善你的产出，你将得到相应的奖励。在会议中，提出基本问题通常很好，因为通常你不是唯一一个缺乏背景的人。&lt;/p&gt;
&lt;p&gt;工业界有些人的个性很强，如果你更加内向，一开始可能很难应对。好消息是，发展强烈的个性在某种程度上是一种实践，可以打开或关闭；在你的利益可能一致的情况下应对这样的个性是一个很好的学习机会。记住，在这样的对话中，你可能是你工作类别的权威人士，人们期望你履行你的职责，即使这涉及到当有人试图压倒你时，你坚持自己的立场；并且在大多数情况下，你有权这样做。&lt;/p&gt;
&lt;p&gt;如果有帮助的话，你可以把这样的遭遇看作是在与社交障碍进行互动的练习，以实现目标，而不是普通的“人类”互动。你还可以与你的经理或同事提前讨论如何处理这样的互动。&lt;/p&gt;
&lt;p&gt;最后，要与你的经理坦诚交流。工作场所的一个优点是快速反馈；他们应该在定期会议中向你介绍他们认为你做得好或不好的事情，以及如何改进错误。如果他们没有这样做，请确保你要求这样的反馈。如果出现问题，请与对方交流。很容易来自一个每月与你的导师交谈一次或者继续专注于一个项目的环境，但这对于保持与你的团队的联系是非常糟糕的。&lt;/p&gt;
&lt;h3 id=&#34;要么做要么不做&#34;&gt;要么做要么不做
&lt;/h3&gt;&lt;p&gt;学校往往训练人们处于一种被动等待任务的状态。这种情况在工业界也可能发生，但通常情况下，一群人会识别出一个问题或机会，并迅速解决或利用它。随着时间的推移，如果你不适应这种新环境，不积极地寻求改变并在这些改变上迅速前进，你就不会做得很好。&lt;/p&gt;
&lt;p&gt;我并不是说你不应该与你的经理清除重大项目，对于更大的计划，你必须说服其他人与你一起投入。但是，总体而言，你需要利用你所掌握的本地知识，抓住机会并取得进展，而不是等待分配任务。&lt;/p&gt;
&lt;p&gt;一个推论是，你可以控制你正在做什么，而且往往情况下，如果有更好的时间利用方式存在，你可以决定停止做某事。有些期限是硬性的，但往往情况下，某个项目变得陈旧，应该延期或甚至放弃，以利用更高的回报率选项。以这种方式优先处理工作本身就是一项重要的技能，加快发展这种技能的最佳方式，通常是与你的经理或同事进行清晰的沟通。&lt;/p&gt;
&lt;h3 id=&#34;结论这不仅仅是工业界的问题&#34;&gt;结论：这不仅仅是工业界的问题
&lt;/h3&gt;&lt;p&gt;在讨论学术界无法为人们的生活提供足够准备的一些核心领域后，我想强调一点，我所讨论的学术上的错误也是日常生活中一些文化束缚的反模式。为了追求工业优化的简洁沟通，我给你留下以下要点:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你可以选择以其他身份认同自己，而不仅仅是“聪明”的标签，这样做不仅能让你成为一个更好的人，而且在实际上也更聪明。找到一些其他的价值信号。&lt;/li&gt;
&lt;li&gt;人们不是你的教授或顾问。只要与他们交谈就好了。也许他们会因为你的冒犯而对你大喊大叫，但那又怎样？他们可能对你没有任何权力，而另一种选择就是整个人生都变成一个墙边花。&lt;/li&gt;
&lt;li&gt;你不需要请求许可才能去洗手间，你可以自主地抓住机会，而不是像一篇下周五要交的论文一样等待机会主动找上门来。&lt;/li&gt;
&lt;li&gt;有些项目或努力是否仍然有价值？你是否真的永远不会完成它，只是对你不断的承诺感到焦虑，但你说过你要做到，所以你必须做到吗？&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>机械博客论坛</title>
        <link>https://teaize.github.io/p/%E6%9C%BA%E6%A2%B0%E5%8D%9A%E5%AE%A2%E8%AE%BA%E5%9D%9B/</link>
        <pubDate>Mon, 06 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%9C%BA%E6%A2%B0%E5%8D%9A%E5%AE%A2%E8%AE%BA%E5%9D%9B/</guid>
        <description>&lt;h3 id=&#34;博客论坛&#34;&gt;博客论坛
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://m.cadhome.net/news/list_34.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CAD Home&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://cad555.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CAD之家|首页&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://www.jxage.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机械时代网&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://www.jxgcs.com.cn/index.htm&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机械工程师&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.swbbsc.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SolidWorks机械工程师网——最大的SolidWorks学习平台&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.elecfans.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;电子发烧友&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://www.cmiw.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机械社区 - 百万机械行业人士网络家园&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.sensorexpert.com.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;传感器专家网 - 传感器行业垂直服务平台&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://xifengboke.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;溪风博客SolidWorks自学网站 - 关注SolidWorks教程|SolidWorks插件|SolidWorks练习题的一站式SolidWorks自学网站&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://bsbanjin.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;博士钣金官方网站-bsbanjin.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;教程网站&#34;&gt;教程网站
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.rjzxw.com/lei-4.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机械设计视频教程免费在线观看学习 - 软件自学网&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://techinfo.misumi.com.cn/pr/ebook/?bid=bid_cn_ec_techinfo_nav&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机械制造基础资料库_设计师专属电子书下载-米思米技术之窗&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://techinfo.misumi.com.cn/pr/ebook/?bid=bid_cn_ec_techinfo_nav&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机械制造基础资料库_设计师专属电子书下载-米思米技术之窗&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.51zxw.net/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;我要自学网-视频教程|免费教程|自学电脑|3D教程|平面教程|影视动画教程|办公教程|机械设计教程|网站设计教程-我要自学网&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>25岁，如何规划你的人生</title>
        <link>https://teaize.github.io/p/25%E5%B2%81%E5%A6%82%E4%BD%95%E8%A7%84%E5%88%92%E4%BD%A0%E7%9A%84%E4%BA%BA%E7%94%9F/</link>
        <pubDate>Sat, 04 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/25%E5%B2%81%E5%A6%82%E4%BD%95%E8%A7%84%E5%88%92%E4%BD%A0%E7%9A%84%E4%BA%BA%E7%94%9F/</guid>
        <description>&lt;ul&gt;
&lt;li&gt;不急、不求、不发怒&lt;/li&gt;
&lt;li&gt;好好休息，尽情玩乐&lt;/li&gt;
&lt;li&gt;早睡早起&lt;/li&gt;
&lt;li&gt;明确表达自己的意思&lt;/li&gt;
&lt;li&gt;别急着抱怨&lt;/li&gt;
&lt;li&gt;遵守约定&lt;/li&gt;
&lt;li&gt;常怀感恩&lt;/li&gt;
&lt;li&gt;不贪心&lt;/li&gt;
&lt;li&gt;谨言慎行&lt;/li&gt;
&lt;li&gt;常保笑容&lt;/li&gt;
&lt;li&gt;凡事未雨绸缪&lt;/li&gt;
&lt;li&gt;更坦率&lt;/li&gt;
&lt;li&gt;今天也要用心度过&lt;/li&gt;
&lt;li&gt;切忌不懂装懂&lt;/li&gt;
&lt;li&gt;给自己找乐子&lt;/li&gt;
&lt;li&gt;待人更亲切…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;虽然都是理所当然的事，也净是一些羞于向别人提起的事；但所谓的成长，就是提升理所当然之事的精确度。唯有如此，才能有新的发现，新的挑战。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>SW简明笔记</title>
        <link>https://teaize.github.io/p/sw%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sat, 04 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/sw%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h3 id=&#34;界面与基本操作&#34;&gt;界面与基本操作
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;界面布局：包含工具栏、特征树、文件管理器等&lt;/li&gt;
&lt;li&gt;基本操作：视图操作（缩放、旋转、平移）、选择工具、快捷键使用等&lt;/li&gt;
&lt;li&gt;软件设置
&lt;ul&gt;
&lt;li&gt;[[SW软件优化设置]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;零件建模&#34;&gt;零件建模
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;草图绘制：二维草图创建，包含直线、圆、矩形、弧线等基本几何元素&lt;/li&gt;
&lt;li&gt;特征操作：拉伸、切割、旋转、扫掠、放样等
&lt;ul&gt;
&lt;li&gt;[[SW裁剪]]&lt;/li&gt;
&lt;li&gt;[[SW基准面]]&lt;/li&gt;
&lt;li&gt;[[23-NewNote/SW-装饰螺纹线]]&lt;/li&gt;
&lt;li&gt;[[SW异形孔向导]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;参数化设计：通过尺寸和约束实现设计的可变性和自适应性
&lt;ul&gt;
&lt;li&gt;[[基于规则的模块化设计]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;镜像与阵列：在设计中实现对称或多次重复元素
&lt;ul&gt;
&lt;li&gt;[[SW阵列]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;实体建模与曲面建模：进行复杂的曲面设计和分析&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;装配设计&#34;&gt;装配设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;组件插入与约束：将零件添加到装配体中并定义相对位置与运动限制&lt;/li&gt;
&lt;li&gt;装配体运动分析：模拟各组件之间的运动和干涉检查&lt;/li&gt;
&lt;li&gt;虚拟装配：在没有实际零件的情况下，测试装配效果&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;工程图与注释&#34;&gt;工程图与注释
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工程图创建：从零件或装配模型生成二维工程图，自动生成视图（如主视图、剖视图、局部视图等）
&lt;ul&gt;
&lt;li&gt;[[SW-工程图模板的制作]]&lt;/li&gt;
&lt;li&gt;[[SW注解小技巧]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;标注与尺寸：对工程图中的几何体添加尺寸、角度和公差
&lt;ul&gt;
&lt;li&gt;[[SW工程图切边处理]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;符号与注释：加入焊接符号、表面处理符号等，提升图纸的可读性与完整性&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;渲染与可视化&#34;&gt;渲染与可视化
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;材质与纹理：给零件或装配体添加材质、颜色和纹理，以提高视觉效果
&lt;ul&gt;
&lt;li&gt;[[SW-开启小金球]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;光照与相机设置：调整场景中的光照、相机视角，生成更真实的渲染效果&lt;/li&gt;
&lt;li&gt;动画与仿真：通过动画功能演示装配体的运动过程
&lt;ul&gt;
&lt;li&gt;[[SW动画]]&lt;/li&gt;
&lt;li&gt;[[SW-SMG文件]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;仿真与分析&#34;&gt;仿真与分析
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;静力学分析：进行受力、变形、应力分布的分析&lt;/li&gt;
&lt;li&gt;热分析：分析零件或装配体在不同温度条件下的热传导和热膨胀&lt;/li&gt;
&lt;li&gt;流体分析：进行流体流动、压力分布等的仿真&lt;/li&gt;
&lt;li&gt;运动学分析：模拟装配体的动态运动，计算运动轨迹、速度、加速度等&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;数控加工与制造&#34;&gt;数控加工与制造
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;CAM 功能：生成数控机床的加工路径（如铣削、车削等）&lt;/li&gt;
&lt;li&gt;切削模拟：模拟工具与工件的接触，优化加工路径&lt;/li&gt;
&lt;li&gt;加工工艺与材料选择：结合具体的加工工艺要求，进行材料、工艺的选择和优化&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;数据管理与协作&#34;&gt;数据管理与协作
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;PDM 系统：SolidWorks 与产品数据管理（PDM）系统集成，管理设计文件的版本、权限及协作&lt;/li&gt;
&lt;li&gt;Pack and Go：打包文件，进行项目分享或备份&lt;/li&gt;
&lt;li&gt;配置管理：在同一文件中管理不同版本的设计配置（如尺寸变化、材料变化等）
&lt;ul&gt;
&lt;li&gt;[[SW收藏]]&lt;/li&gt;
&lt;li&gt;[[SW链接数值]]&lt;/li&gt;
&lt;li&gt;[[SW装配体中的方程式]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;自定义功能&#34;&gt;自定义功能
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;宏与 API 编程：通过宏或 API 接口进行自定义功能的开发，自动化常规操作&lt;/li&gt;
&lt;li&gt;用户界面定制：根据需要定制工具栏、快捷键等，提升操作效率&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;协同设计与分享&#34;&gt;协同设计与分享
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;设计协同：多人协作设计和实时反馈&lt;/li&gt;
&lt;li&gt;文件导入与导出：支持多种格式的文件导入（如 STEP、IGES、STL 等），便于与其他设计软件之间的兼容与共享&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>密封简明笔记</title>
        <link>https://teaize.github.io/p/%E5%AF%86%E5%B0%81%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sat, 04 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%AF%86%E5%B0%81%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h3 id=&#34;密封的基本分类&#34;&gt;密封的基本分类
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;静密封：用于固定连接的密封，如垫片密封、O 型圈密封
&lt;ul&gt;
&lt;li&gt;[[O形密封圈]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;动密封：用于运动部件之间的密封，如旋转密封、往复密封&lt;/li&gt;
&lt;li&gt;特殊密封：用于高压、高温或特殊介质环境的密封，如膨胀节密封&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;密封材料&#34;&gt;密封材料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;弹性材料：如橡胶、硅胶、氟橡胶等
&lt;ul&gt;
&lt;li&gt;[[材料-密封材料]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;塑性材料：如聚四氟乙烯（PTFE）、尼龙&lt;/li&gt;
&lt;li&gt;金属材料：如金属垫片、金属环
&lt;ul&gt;
&lt;li&gt;[[金属密封圈]]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;复合材料：如石墨复合材料、橡胶金属复合材料&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;密封结构设计&#34;&gt;密封结构设计
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;密封形式：选择合适的密封结构（如 U 型、V 型、唇型）&lt;/li&gt;
&lt;li&gt;密封尺寸：确定密封件的尺寸和配合公差&lt;/li&gt;
&lt;li&gt;密封接触面：设计接触面的粗糙度和硬度以提高密封性能&lt;/li&gt;
&lt;li&gt;密封件压缩量：确保压缩量适中，防止过紧或过松&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;密封性能要求&#34;&gt;密封性能要求
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;密封性：确保在工作条件下无泄漏&lt;/li&gt;
&lt;li&gt;耐介质性：密封件能够抵抗介质的化学腐蚀&lt;/li&gt;
&lt;li&gt;耐高低温：密封件能适应工作环境的温度范围&lt;/li&gt;
&lt;li&gt;耐磨性：动密封件需具备良好的耐磨性能&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;密封失效分析&#34;&gt;密封失效分析
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;失效形式：如老化、磨损、挤出、介质侵蚀等&lt;/li&gt;
&lt;li&gt;失效原因：如材料选择不当、安装不正确、工况超限等&lt;/li&gt;
&lt;li&gt;解决措施：更换更适合的密封材料，优化密封设计&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;密封的安装与维护&#34;&gt;密封的安装与维护
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;安装要求：确保安装表面清洁、平整，无毛刺或损伤&lt;/li&gt;
&lt;li&gt;润滑与保护：在动密封件安装时加入润滑剂，减少磨损&lt;/li&gt;
&lt;li&gt;检查与更换：定期检查密封件的状态，及时更换失效部件&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;密封应用领域&#34;&gt;密封应用领域
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;工业密封：如管道法兰密封、阀门密封、泵密封&lt;/li&gt;
&lt;li&gt;动力设备密封：如发动机、液压系统、压缩机密封&lt;/li&gt;
&lt;li&gt;特殊行业密封：如化工设备、高真空设备、核工业密封&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;密封技术标准与测试&#34;&gt;密封技术标准与测试
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;常用标准：如 GB、ISO、DIN、ASME 等相关密封标准&lt;/li&gt;
&lt;li&gt;性能测试：如密封性试验、压力试验、耐久性测试&lt;/li&gt;
&lt;li&gt;数据记录：记录密封性能测试数据并进行分析&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;专题&#34;&gt;专题
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;[[Trelleborg-特瑞堡]]&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>做饭简明手册</title>
        <link>https://teaize.github.io/p/%E5%81%9A%E9%A5%AD%E7%AE%80%E6%98%8E%E6%89%8B%E5%86%8C/</link>
        <pubDate>Sat, 04 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%81%9A%E9%A5%AD%E7%AE%80%E6%98%8E%E6%89%8B%E5%86%8C/</guid>
        <description>&lt;h3 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.meishichina.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;美食天下&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://icook.tw/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;爱料理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://cook.aiurs.co/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github做饭指南&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/question/21696230/answer/1422216296&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;知乎 你是明白了哪几个基本原理之后而厨艺大增的？&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;菜单&#34;&gt;菜单
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/105840941/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;红烧冬瓜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/668be00d0000000025005728?xsec_token=ABq7O5BiY0G4YwRZERwDqijhfmQVvFgrhdBFOFdM6xfk0=&amp;amp;xsec_source=pc_search&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;皮蛋豆腐 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/65fc0825000000001203ef46?xsec_token=ABMpftEoFLxh8LCckcpb8W5N3bXM_wNetMJQOaCrYHQwo=&amp;amp;xsec_source=pc_user&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;蒜蓉龙虾尾- 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/5f2b7c310000000001007fd5?xsec_token=ABsSH2eJLVWcdG6wHr6zAjYk3jW4kmSkAzquu3OOgChac=&amp;amp;xsec_source=pc_search&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;牛肉炖土豆 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/665846ab000000000c018136?xsec_token=ABGJvb8yNlfapD6Arct_UY-ziw19b8gfiV6IC5W_S1xHE=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;土豆炒牛肉 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/64cb2a95000000001201d827?xsec_token=ABOY4Xv4mCL-AhjLdAu8QSR3qtDyjQnt4T97imsSVL59M=&amp;amp;xsec_source=pc_user&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;虾仁鸡蛋豆腐 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/6592a1b0000000001000ccda?xsec_token=ABr29WfDqyaQeZ3SoK2PtgtO4ZBJD1bkQT_2HebNVQOMg=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;地三鲜- 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;蒜黄鸡蛋&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/651e78b90000000023019820&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;香菇炒肉&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://home.meishichina.com/recipe-22170.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;海蛎煎_美食天下&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;蟹味菇滑蛋&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/6409cfa50000000013012cc6?xsec_token=ABv6b11GfFnsnDIBxUzEIhjQHw9Stu3mq2n0ywsZFVfVY=&amp;amp;xsec_source=pc_search&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;牛肉羹 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/659121b2000000001d02afb3?xsec_token=ABxM4_yqOLAe08tCGU2qUJjjiF2xAApaLmyPbdKWqoxso=&amp;amp;xsec_source=pc_user&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;紫菜炒饭- 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/63ad57f000000000180135e1?xsec_token=ABga8HkZ3lT2bf7lXEgSaoDDsXQYNyx6M_NAiu46n-HYg=&amp;amp;xsec_source=pc_search&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;炸醋肉 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/63ec714e000000001300bd4b?xsec_token=ABXLJSKljxMsZGC_tJ_H3jNylULiKgN0T8G3__OfTFhqQ=&amp;amp;xsec_source=pc_search&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;闽南咸饭 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://home.meishichina.com/recipe-548787.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;菌菇拌面_美食天下&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/6360dc720000000008012d88?xsec_token=ABk93A7a9MtrOdOElPTFKHnGu-Knjvqd0Go_ZJWXyPtUE=&amp;amp;xsec_source=pc_user&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;红萝卜炒鸡蛋  - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/106087391/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;耗油生菜_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/107347190/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;香芹拌腐竹_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/104105293/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;鲫鱼豆腐汤_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/104576709/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;糖醋排骨_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/65b36730000000002c038ada?xsec_token=ABWpEgwgAIdwL3SY4eSbu8wa2pZTASBPGXjP8x1fNWWXY=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;虎皮鸡蛋 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/65fc0825000000001203ef46?xsec_token=ABrY-2caurqJeH93yLoT7PO1uOBfK0sNOFuuB_myM104U=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;蒜蓉龙虾尾 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/5f2b7c310000000001007fd5?xsec_token=ABfQoDB_XGZq1azBBvBtyVAEfcLhtK0AS-cTaYr_xs_Kg=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;牛肉炖土豆 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/61ef80a00000000001026224?xsec_token=ABZ2ZUHKGCy4JjRJe3PEzg2eq3g2TEHCFVj0u-Mzq-JlQ=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;腊味煲仔饭 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/106655867/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;炖鸡鸡汤_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/107362685/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;【豆腐这样吃，瞬间光盘的做法步骤图】奶油小厨房_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/107317352/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;滑动验证&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/106858555/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;麻婆豆腐&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/103951128/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;鱼香肉丝&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;蘸料&#34;&gt;蘸料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/62a31b33000000000102cca7?xsec_token=ABlWKAZNQGoU3q7GLS697T-oM5ic9wDvTfwk37Zc3cue8=&amp;amp;xsec_source=pc_search&amp;amp;source=web_explore_feed&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;海鲜蘸料 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/60b639e4000000000102fdf5?xsec_token=AByBMY6jwv713QS5VSvUfNtrnNbLJb_RPYpNjYoJNQBAs=&amp;amp;xsec_source=pc_search&amp;amp;source=web_explore_feed&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;凉拌灵魂调料汁 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小食&#34;&gt;小食
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;三明治&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/611f3f520000000021035f02?xsec_token=ABo8k0-Ptws-ZWDevs4_-pcer3u0TbUgC2z9QvQCGqoU0=&amp;amp;xsec_source=pc_user&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;南瓜鸡蛋饼 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/62ce670e000000002103bb10?xsec_token=AB69BbLDBYZQQnnhBhuWxhQcjRGx52TMLWBXjTGRv12LY=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;空气炸锅炸薯条- 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/611f3f520000000021035f02?xsec_token=ABH2C49BB-mip_cCZ9Bb3nnb8Zps9UCUE1P8hQDKOi3aQ=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;南瓜鸡蛋饼 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/63d1c864000000001f00eda9?xsec_token=ABQmlfJ-nkSiJ9m_m8fUrXWpN6rF-q2LDJhmHCm7MS6kQ=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;贝贝南瓜烤蛋奶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/65379faf000000002201f0cc?xsec_token=ABBVS12_Ew6K0HcckTWMcdON2D-Yr1PK6ZvQdllAck-Vs=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;水蒸蛋 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/107254893/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;烤冷面_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/102761689/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;油炸鸡蛋丝_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;汤&#34;&gt;汤
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/105921235/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;山药排骨汤_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/647992710000000013004609?xsec_token=ABuhfx2QUNdN44JfmfhUCTukXfXKAbSy6lb054_BNioH8=&amp;amp;xsec_source=pc_search&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;花生汤- 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/614c8da8000000002103d7e9?xsec_token=ABJQAN1XBWh0t-hcp6ILeoSejV5Iwy-2mR2620hOAJqrs=&amp;amp;xsec_source=pc_search&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;蘑菇汤 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/65b0cbcc0000000011012842?xsec_token=ABJ5Cdl_CTX89E-Ko8pb6BNHFIR53rMPGNuPgleKI4vDI=&amp;amp;xsec_source=pc_search&amp;amp;m_source=pwa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;口蘑冬瓜汤 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiachufang.com/recipe/105921235/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;山药排骨汤_下厨房&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/63b14b2e0000000022028821?xsec_token=ABzTXCxPoiCNFkCJTRlLQFpS3JivdWl53Nbio6EVYBBj0=&amp;amp;xsec_source=pc_collect&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;紫菜蛋花汤-小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/66dd10c50000000012011ef3?xsec_token=ABh5Fff70R8PRB6pB-FlNhfXX0xfSUw5ob8TSiG_ED7pU=&amp;amp;xsec_source=pc_search&amp;amp;source=unknown&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;山药骨头汤 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;待尝试&#34;&gt;待尝试
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/66417796000000001e027fbb?xsec_token=ABamc5RYkXmLpXRSOZpSrKTBXMeXsTNi53vg6Bq-TXZV8=&amp;amp;xsec_source=pc_search&amp;amp;source=web_search_result_notes&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;芝士焗饭 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/6211ff73000000000102a2bb?xsec_token=AB7yhLiZtFLxC44JzqMolDI33uevqIjIGsbgfK60Jq6I4=&amp;amp;xsec_source=pc_search&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;香煎鸡胸肉 - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.xiaohongshu.com/explore/64a6785e000000001e0127c2?xsec_token=ABX4IfZxf090RkdzefrXlsJcyCs_LBReYZjlXzQCZsKWg=&amp;amp;xsec_source=pc_search&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;大学生糊弄做饭之糖醋鸡胸肉！ - 小红书&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>DIY设计手册</title>
        <link>https://teaize.github.io/p/diy%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8C/</link>
        <pubDate>Fri, 03 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/diy%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8C/</guid>
        <description>&lt;h3 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.tinkercad.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Tinkercad - From mind to design in minutes&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Tinkercad 是一款免费的在线软件工具集合，可帮助世界各地的用户进行思考、创造和制造。我们是三维设计、工程和娱乐软件领导企业 Autodesk&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://lceda.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;国产嘉立创EDA - 一个用心为中国人定制的电路板开发平台&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;更简单，更强大的国产在线 PCB 设计软件&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.elecfans.com/tools/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;电子技术资料工具-电子发烧友&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.elecfans.com/topic/software/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;电子工程师工具库 - 电子发烧友网&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.instructables.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Yours for the making - Instructables&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.taiwansensor.com.tw/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;台灣智能感測科技, 一個讓你的夢想實現,創意可以實踐的地方&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.pcbway.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;China PCB Prototype &amp;amp; Fabrication Manufacturer - PCB Prototype the Easy Way&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Pycharm-Matplotlib中文显示</title>
        <link>https://teaize.github.io/p/pycharm-matplotlib%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA/</link>
        <pubDate>Fri, 03 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/pycharm-matplotlib%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA/</guid>
        <description>&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 设置 Matplotlib 使用支持中文的字体，例如 SimHei&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;font.sans-serif&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SimHei&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# Windows 默认中文字体&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;rcParams&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;axes.unicode_minus&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# 解决负号显示问题&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>记账助手</title>
        <link>https://teaize.github.io/p/%E8%AE%B0%E8%B4%A6%E5%8A%A9%E6%89%8B/</link>
        <pubDate>Fri, 03 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E8%AE%B0%E8%B4%A6%E5%8A%A9%E6%89%8B/</guid>
        <description>&lt;h3 id=&#34;花销分类&#34;&gt;花销分类
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;宠物：猫粮、猫砂，和猫咪相关的器具&lt;/li&gt;
&lt;li&gt;软件：软件会员&lt;/li&gt;
&lt;li&gt;电子硬件：一些学习用的电子产品类&lt;/li&gt;
&lt;li&gt;超市：超市购物&lt;/li&gt;
&lt;li&gt;水电气：水电费用，燃气费用&lt;/li&gt;
&lt;li&gt;骑行：小黄车花销&lt;/li&gt;
&lt;li&gt;奶茶：记录奶茶、咖啡&lt;/li&gt;
&lt;li&gt;理发：可以查看理发的频率&lt;/li&gt;
&lt;li&gt;交通：只记录往 NFC 中充值的钱，不记录单笔地铁花销的钱&lt;/li&gt;
&lt;li&gt;购物：指网上购物&lt;/li&gt;
&lt;li&gt;医疗：指体检、诊所医院这类&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020240709191924.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/Pasted%20image%2020240709191924.png&#34; alt=&#34;&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>模型资料</title>
        <link>https://teaize.github.io/p/%E6%A8%A1%E5%9E%8B%E8%B5%84%E6%96%99/</link>
        <pubDate>Fri, 03 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%A8%A1%E5%9E%8B%E8%B5%84%E6%96%99/</guid>
        <description>&lt;h3 id=&#34;链接&#34;&gt;链接
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;[[标准件3D模型下载方法]]&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3d-模型资料&#34;&gt;3D 模型资料
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.mechtool.cn/site/site_online3dresourcelibrarywebsite.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;在线3D资源库网站 | 机械网站&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://xifengboke.com/post/1862.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SolidWorks插件外购件模型标准件模型下载SolidWorks选型库下载 - solidworks插件 - 溪风博客SolidWorks自学网站&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://linkable.partcommunity.com/3d-cad-models/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;三维CAD零部件在线模型库 - LinkAble PARTcommunity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.3dfindit.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Download 3D CAD Models for free | 3Dfindit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://grabcad.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GrabCAD Making Additive Manufacturing at Scale Possible&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.partscad.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Partscad 零部件CAD - 零部件管理和三维电子目录&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.traceparts.cn/zh&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Traceparts 3D 零件库&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://lib.3dsource.cn/#/chooseClass&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3dsource 3D 零件库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;知名机械供应商&#34;&gt;知名机械供应商
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.mechtool.cn/site/site_mechanicalsupplierwebsite.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;知名机械供应商官网 | 机械网站&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;特美意：&lt;a class=&#34;link&#34; href=&#34;https://www.tme.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;特美意电子 中国 TME官网 | 供应商直授权电子元器件分销商&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>校园生存手册</title>
        <link>https://teaize.github.io/p/%E6%A0%A1%E5%9B%AD%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/</link>
        <pubDate>Fri, 03 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E6%A0%A1%E5%9B%AD%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/</guid>
        <description>&lt;h3 id=&#34;大学生生存手册&#34;&gt;大学生生存手册
&lt;/h3&gt;&lt;p&gt;参考资料&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/SurviveSJTU/SurviveSJTUManual&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub - SurviveSJTU/SurviveSJTUManual: 更新2008年版本的《上海交通大学生存手册》gitbook发布于https://survivesjtu.gitbook.io/survivesjtumanual/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/SurviveSJTU/SJTU-Application&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub - SurviveSJTU/SJTU-Application: https://survivesjtu.github.io/SJTU-Application/#/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/SUSTech-Application/2019-Fall&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub - SUSTech-Application/2019-Fall: https://SUSTech-Application.github.io/2019-Fall&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://sustech-application.github.io/2019-Fall/#/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SUSTech-Application-2019-Fall&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.1point3acres.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;一亩三分地社区: 留学|求职|投资|移民|生活 - 高信噪比 + 纯干货&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://tianbiao-yang.github.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;逸尘的博客 | Yichen Blog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;研究生建议&#34;&gt;研究生建议
&lt;/h3&gt;&lt;p&gt;参考资料&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://psychelzh.github.io/phdrule/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;给研究生的学术建议&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://eigenrobot.substack.com/p/advice-for-academic-refugees?utm_source=direct&amp;amp;utm_campaign=post&amp;amp;utm_medium=web&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;advice for academic refugees - eigenrobot,s Blog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;论文被拒很正常，一定要勇于承受，千万不可玻璃心。翟天临事件之后，现在文章越来越难发了。别说是你了，各种教授都经常被拒稿，被拒的路上你我同在，你不孤单。但当然，发文还是有一些技巧的，&lt;/li&gt;
&lt;li&gt;读博开始，一定是越早发文章越好。无论是高质量还是水文章，都是成果。尤其是学校有毕业要求的，越早完成越好，先把基本盘稳住，然后再去慢慢打磨一两篇精品。&lt;/li&gt;
&lt;li&gt;读博需要的是聪明人下笨功夫。说实话，读博真的没有那么难，就一般人的努力程度而言，还达不到需要拼天赋的地步。所以在读博期间，你只要足够勤奋就行了。&lt;/li&gt;
&lt;li&gt;不要指望导师，凡事尘部都得靠自己。记住，自己永远是自己课题的第一责任人。任何寄希望于他人的想法，到最后都会被现实狠狠教训一番.&lt;/li&gt;
&lt;li&gt;论文不会写就多读多悟，多去看你想发的期刊，多总结。他山之石，可以攻玉。小到专业词汇. 短语的准确使用，大到谋篇布局和思想立意的设&lt;br&gt;
计，都值得花精力学习。&lt;/li&gt;
&lt;li&gt;课程只是为了拿学分，别选太多课。理工科就选有用的数学课和专业课。别缺课. 认真听，课后不需要花太多功夫。如非必须，无必要学二外。&lt;/li&gt;
&lt;li&gt;提早谋划和设计好学位论文整体框架。不是发几篇期刊论文，然后堆堆就能应付学位论文的。&lt;/li&gt;
&lt;li&gt;期刊论文要讲究学术性，不能写成技术报告。学术论文要有洞见，要有思想，要有启迪。每位博士生都要不断修炼“讲故事”的能力。&lt;/li&gt;
&lt;li&gt;尊重审稿人. 评审专家。无论是论文还是答辩，收到意见逐条认真回复。不要去杠，该加数据加数据，该加理论分析就加理论分析。&lt;/li&gt;
&lt;li&gt;小论文 (即期刊论文) 修改和回复意见，要尽量在 point to point response 文档里全部写清楚。在原文里修改的部分也尽量一并誊抄，好让审稿人省时省力些。记住，对审稿人好就是对自己好。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>博客恢复到某Git节点</title>
        <link>https://teaize.github.io/p/%E5%8D%9A%E5%AE%A2%E6%81%A2%E5%A4%8D%E5%88%B0%E6%9F%90git%E8%8A%82%E7%82%B9/</link>
        <pubDate>Mon, 23 Dec 2024 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%8D%9A%E5%AE%A2%E6%81%A2%E5%A4%8D%E5%88%B0%E6%9F%90git%E8%8A%82%E7%82%B9/</guid>
        <description>&lt;p&gt;1、查看提交历史&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git log
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;此时会列出所有的提交记录，找到需要退回到的节点状态，复制这个哈希值&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;commit&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8008642&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ff9d660935ad1c4a357e1f84dc6849802&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Author&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;teaize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xxx&lt;/span&gt;&lt;span class=&#34;nd&#34;&gt;@qq.com&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;   &lt;span class=&#34;n&#34;&gt;Sun&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Oct&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;27&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;28&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;03&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2024&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0800&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;Create&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;基于规则的模块化设计&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;md&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;2、重置到指定提交节点&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git reset --hard 8008642ff9d660935ad1c4a357e1f84dc6849802
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--hard&lt;/code&gt; 选项表示将当前工作目录和暂存区都重置到指定的提交状态&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git reset --soft abc1234&lt;/code&gt;：只重置提交记录，保留暂存区的更改。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git reset --mixed abc1234&lt;/code&gt;：重置提交记录并清除暂存区的更改，但保留工作区的修改。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;3、推送到 GitHub&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push origin &amp;lt;branch-name&amp;gt; --force
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;分支名通常为main分支，此时为：
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push origin main --force
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;PS：如果遇到网络连接问题：&lt;code&gt;Failed to connect to github.com port 443 after 1043 ms: Connection refused&lt;/code&gt;，可参考 &lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/zpf1813763637/article/details/128340109&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Git报错： Failed to connect to github.com port 443 解决方案-CSDN博客&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>基于规则的模块化设计</title>
        <link>https://teaize.github.io/p/%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E8%AE%BE%E8%AE%A1/</link>
        <pubDate>Wed, 23 Oct 2024 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E8%AE%BE%E8%AE%A1/</guid>
        <description>&lt;h2 id=&#34;基础操作&#34;&gt;基础操作
&lt;/h2&gt;&lt;h3 id=&#34;对尺寸进行命名&#34;&gt;对尺寸进行命名
&lt;/h3&gt;&lt;p&gt;双击尺寸进行修改时，可以对尺寸进行命名&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023192438.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023192438.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;显示特征尺寸&#34;&gt;显示特征尺寸
&lt;/h3&gt;&lt;p&gt;右键注解，显示特征尺寸，可以显示出这个零件中的所有尺寸&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023192520.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023192520.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;链接数值&#34;&gt;链接数值
&lt;/h2&gt;&lt;p&gt;所谓链接数值就是将模型中的两个或几个尺寸与同一个变量关联，令这两个或几个尺寸的数值相等，从而建立这几个尺寸之间的链接关系。这样当更改其中一个尺寸的值时，与此变量关联的尺寸也将同时更改。&lt;/p&gt;
&lt;h2 id=&#34;方程式&#34;&gt;方程式
&lt;/h2&gt;&lt;p&gt;在创建模型时，有时需要使用模型的一个尺寸值来定义另外一个尺寸值，或由于其他原因需要在参数之间创建关联，而这些关联无法使用普通的几何关系来添加，此时，即需要使用方程式。需要说明的是，方程式多用于设置两个尺寸间的复杂关系。简单链接关系可以直接使用链接数值&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SolidWorks 中的变量都是全局变量，即使用时不必考虑范围，在整个模型或装配体中都可用，而公式则会区分是零件内可用还是装配体内可用。&lt;/li&gt;
&lt;li&gt;尺寸路径是 &lt;code&gt;尺寸名@特征名&lt;/code&gt; 形式的，@为分割符号，前面是尺寸名，后面是特征名。如在装配体中，则为 &lt;code&gt;尺寸名@特征名@零件名&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;全局变量栏：用于定义全局变量&lt;/li&gt;
&lt;li&gt;特征栏：用于定义特征状态，压缩、解除压缩，或质量、密度等&lt;/li&gt;
&lt;li&gt;方程式栏：用于添加方程式&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;案例分析&#34;&gt;案例分析
&lt;/h2&gt;&lt;p&gt;使用方程式设计动态孔。案例的关键要点在于：使用方程式令阵列的个数与板的长度关联，此外使用 if 语句判断板长度很小时（不够阵列的时候）将阵列特征压缩&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023192856.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023192856.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;1、首先显示特征尺寸

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023193050.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023193050.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;2、通过方程式关联零件总长与孔阵列的间距这两个参数

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023193146.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023193146.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;3、如上所述，特征栏用于定义特征状态，压缩、解除压缩等。如果零件很短不够孔阵列时，此时需要将阵列特征设置为压缩状态，即在方程式中的特征栏进行设置&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;D1@拉伸-薄壁1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;suppressed&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;unsuppressed&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;注：这里的 suppressed 和 unsuppressed 在编写函数时会弹出提示，不需要全部自己输入。如下，该特征自动被压缩&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023193332.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241023193332.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ADC转换器简明笔记</title>
        <link>https://teaize.github.io/p/adc%E8%BD%AC%E6%8D%A2%E5%99%A8%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sun, 06 Oct 2024 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/adc%E8%BD%AC%E6%8D%A2%E5%99%A8%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h2 id=&#34;参考资料&#34;&gt;参考资料
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=xg64U06Vihk&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;模拟→数字信号，5分钟看懂！看完之后觉得很巧妙！ - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/xg64U06Vihk?si=zb8c-6_l43lb19UN&#34; title=&#34;YouTube video player&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&#34; referrerpolicy=&#34;strict-origin-when-cross-origin&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;模拟信号是连续的；数字信号是离散的，它的任何一个值都是规定的最小数单位的整数倍，比如电压表上显示的就是数字量。&lt;/p&gt;
&lt;p&gt;电压表的作用是将模拟信号转变为数字信号，转换主要靠的是一种 ADC(Analog to Digital Converter, 模拟数字转换器) 的芯片&lt;/p&gt;
&lt;p&gt;ADC 转换器有很多类型，如&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;并联比较型 AD&lt;/li&gt;
&lt;li&gt;计数型 AD&lt;/li&gt;
&lt;li&gt;主次逼近 AD&lt;/li&gt;
&lt;li&gt;双积分型 AD&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;案例分析-并联比较型-ad&#34;&gt;案例分析 并联比较型 AD
&lt;/h2&gt;&lt;p&gt;这里主要介绍并联比较型 AD，这种类型比较好理解。比如要测量一个量程 0-8V 的电压，主要存在哪些问题呢：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;假设将量程分为 8 份，也就是 1V 的精度，如何分成 8 等份呢？
&lt;ul&gt;
&lt;li&gt;串联 8 个电阻，每个电阻分压 1V，电路中的不同位置也就有了 1V、2V、3V…8V&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如何量化电压呢？
&lt;ul&gt;
&lt;li&gt;通过比较器，测量电压大于电路中的电压，比较器输出 1，反之则输出 0&lt;/li&gt;
&lt;li&gt;比如测量电压为 2.1V，则输 2 个 1，表示 2V
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006172215.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006172215.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如何对比较器的数据进行存储呢？
&lt;ul&gt;
&lt;li&gt;在每一个比较器后面都加一个 D 型触发器（控制端为低电平时，输出端的数据可以保持之前存储的数据，而不会随着数据输入端数据端变化而改变），这样采集到的数据就被锁存器保存下来了&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;这 8 个锁存器共有 8 种输出结果，如何将这些输出结果转换为二进制数呢
&lt;ul&gt;
&lt;li&gt;使用优先编码器&lt;/li&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006172817.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006172817.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006172929.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006172929.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;li&gt;那么也就可以通过优先编码器的输出结果得出电压的大小了，比如输出的 000，就表示 1V，输出的 001 表示 2V
&lt;ul&gt;
&lt;li&gt;无论测量电压是 0.2V 还是 0.8V，输出端结果都是 000（也就是 1V），因为精度就只有那么高。如果想要解决这个问题，就需要提高精度。想要提高精度，就需要成倍的增加电阻、比较器和触发器的数量&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;此外，因为这些比较器和锁存器都是并联的，可以在同一时间同时运行，因此也是各类 AD 转换器中运行速度最快的&lt;/p&gt;
&lt;h2 id=&#34;补充资料&#34;&gt;补充资料
&lt;/h2&gt;&lt;p&gt;比如测量一个量程 0-8V 的电压，首先需要对其进行量化，假设将其分成 8 份，也就是精度为 1V，那么可以用三位二进制数对这 8 份进行表示&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006165555.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006165555.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;那如何将电压分成 8 份呢？也就是如何量化呢？以及如何将量化的电压转换成二进制数呢？&lt;/p&gt;
&lt;p&gt;那如何将电压分成 8 份呢 —&amp;gt; 串联 8 个阻值相同的电阻&lt;/p&gt;
&lt;h3 id=&#34;比较器&#34;&gt;比较器
&lt;/h3&gt;&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006165826.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006165826.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;Vr 为参考电压，Vin 为测量电压。若测量电压 Vin 大于参考电压 Vr，比较器输出 1；反之则输出 0&lt;/p&gt;
&lt;h3 id=&#34;d-型触发器&#34;&gt;D 型触发器
&lt;/h3&gt;&lt;p&gt;也叫做 D 型锁存器，可以存储 1 位数据&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006170442.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006170442.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;当控制端输入 1 时，给数据输入端 D 输入什么，输出端 Q 就会输出什么；如果控制端 C 输入 0，那么输出端 Q 就会保持上一次存储的结果，此时无论数据输入端 D 输入什么，Q 中的值都不会发生改变&lt;/p&gt;
&lt;h3 id=&#34;优先编码器&#34;&gt;优先编码器
&lt;/h3&gt;&lt;p&gt;将八种输出结果转换为 3 位二进制数表示

	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006173919.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20241006173919.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
</description>
        </item>
        <item>
        <title>喜欢的Youtube频道</title>
        <link>https://teaize.github.io/p/%E5%96%9C%E6%AC%A2%E7%9A%84youtube%E9%A2%91%E9%81%93/</link>
        <pubDate>Sun, 06 Oct 2024 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/%E5%96%9C%E6%AC%A2%E7%9A%84youtube%E9%A2%91%E9%81%93/</guid>
        <description>&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@idiode&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;爱上半导体 - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@Automatedo&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Automatedo - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@jdevtw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;简睿学堂 - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@%E5%88%B6%E9%80%A0%E5%8E%9F%E7%90%86-u5t&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;制造原理 - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@DesignForAutomation&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;T-Sir设计课堂 - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@mindcoffee&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;思維咖啡 - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@xiao_lin_shuo&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;小Lin说 - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@e.n.g.i.n.e.e.r&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;工程技术思维 - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@principlesbyraydalio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Principles by Ray Dalio - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@steve_cutts&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Steve Cutts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/@MarkRober&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Mark Rober - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Excalidraw简明笔记</title>
        <link>https://teaize.github.io/p/excalidraw%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Thu, 19 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/excalidraw%E7%AE%80%E6%98%8E%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h2 id=&#34;安装脚本&#34;&gt;安装脚本
&lt;/h2&gt;&lt;p&gt;设置 —&amp;gt; Script Library —&amp;gt; 选择想要的脚本点击安装即可&lt;/p&gt;
&lt;p&gt;安装的脚本可在 &lt;code&gt;Obsidian工具面板&lt;/code&gt; 最下栏 Download 中查看&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919212103.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919212103.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;PS：可鼠标长按拖动面板中的插件按钮到侧边栏&lt;/p&gt;
&lt;p&gt;已安装插件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Set Stroke Width of Selected Elements：设置线条宽度&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Set Dimensions：设置元素尺寸&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Boolean Operations：布尔运算&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Mindmap format：将已有的箭头整理为类似思维导图样式的箭头&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240921114338.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240921114338.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Auto Layout：自动布局&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add Connector Point：添加无序列表符号&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Set Text Alignment：设置文字对齐&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Split text by lines：单个元素多行文本 —&amp;gt; 多个元素单行文本&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919214550.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919214550.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Box Selected Elements：给选中元素添加边框&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Connect elements：连接元素&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Slideshow：实现类似幻灯片效果&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;slideshow&#34;&gt;Slideshow
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.bilibili.com/video/BV1Hu41157Hs/?spm_id_from=333.337.search-card.all.click&amp;amp;vd_source=3ae7ae95fa254383ab9ae83f75abd29d&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;超越PPT：使用obsidian Excalidraw Slideshow 创造动态演示_哔哩哔哩_bilibili&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=JwgtCrIVeEU&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;A detailed walkthrough of the Excalidraw-Obsidian Slideshow 3.0 script - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;使用流程&#34;&gt;使用流程
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;安装插件&lt;/li&gt;
&lt;li&gt;绘制元素&lt;/li&gt;
&lt;li&gt;通过以下两种方式设置幻灯片播放顺序
&lt;ul&gt;
&lt;li&gt;绘制一个箭头来控制顺序：绘制一根箭头，跨过不同元素。绘制完之后，选择箭头，然后点击 slide show 命令；若需要调整，可右键对箭头进行编辑调整&lt;/li&gt;
&lt;li&gt;通过设置 Frame 来控制顺序：会自动按照 Frame 的顺序进行播放&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919215759.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919215759.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;设计库&#34;&gt;设计库
&lt;/h2&gt;&lt;p&gt;经常需要复用的元素，可右键元素 —&amp;gt; Add to library&lt;/p&gt;
&lt;p&gt;也可以安装别人的设计库：&lt;a class=&#34;link&#34; href=&#34;https://libraries.excalidraw.com/?target=_blank&amp;amp;referrer=app%3A%2F%2Fobsidian.md&amp;amp;useHash=true&amp;amp;token=UpRWGKeZwRpgrotKBvcaP&amp;amp;theme=light&amp;amp;version=2&amp;amp;sort=default&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Excalidraw Libraries&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919221037.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240919221037.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Piping and instrumentation diagram P&amp;amp;ID&lt;/li&gt;
&lt;li&gt;Stick Figures Collaboration&lt;/li&gt;
&lt;li&gt;Thicc arrow&lt;/li&gt;
&lt;li&gt;Webpage frames&lt;/li&gt;
&lt;li&gt;Stick Figures&lt;/li&gt;
&lt;li&gt;Mathematical Symbols&lt;/li&gt;
&lt;li&gt;Presentation Templates&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Hugo-Obsidian软连接</title>
        <link>https://teaize.github.io/p/hugo-obsidian%E8%BD%AF%E8%BF%9E%E6%8E%A5/</link>
        <pubDate>Sun, 08 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/p/hugo-obsidian%E8%BD%AF%E8%BF%9E%E6%8E%A5/</guid>
        <description>&lt;h3 id=&#34;软连接&#34;&gt;软连接
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mklink /D &lt;span class=&#34;s2&#34;&gt;&amp;#34;F:\003-SynZhPObsidian\SynZhPObsidian\00-HugoBlog&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;D:\001-Github\Hugo-Main\content\post&amp;#34;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;删除 Obsidian 当中已经存在的 00-HugoBlog 文件夹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;mklink&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;D&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;D:\SycObsidian\SynZhPObsidan&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\00&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;-HugoBlog&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;D:&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\02&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;-Github\Hugo-Main\content\post&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;删除Obsidian当中已经存在的&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;mklink&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;D&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;D:\SycObsidian\SynZhPObsidan\HugoNotes&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;D:&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\02&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;-Github\Hugo-Main\content\page&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;otes&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;mklink&lt;/code&gt; 是 Windows 中的一个命令行工具，用于创建符号链接，类似于 MacOS 系统中的 &lt;code&gt;ln -s&lt;/code&gt; 命令（可参考 &lt;a class=&#34;link&#34; href=&#34;https://coffeelize.top/posts/Obsidian-to-Hexo.html?highlight=%e8%bd%af&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Obsidian2Hexo | 智朋的个人博客&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/D&lt;/code&gt; 表示要创建的是一个目录符号链接，而不是文件符号链接&lt;/li&gt;
&lt;li&gt;第一个路径是源目录的实际路径，第二个路径通过符号链接指向第一个路径，即在访问第二个路径时，实际上是在访问第一个路径
&lt;ul&gt;
&lt;li&gt;首先删除 Obsidian 当中的 &lt;code&gt;00-HugoBlog&lt;/code&gt;，在该路径下调用 CMD，运行上面的命令之后，会在当前路径下生成一个链接文件夹 &lt;code&gt;00-HugoBlog&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240908190814.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240908190814.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;实现功能&#34;&gt;实现功能
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;将第二个路径至于 Obsidian 文件夹中，相当于利用 Obsidian 作为 Markdown 的编辑器，这样做可以充分利用 Obsidian 中的一些插件&lt;/li&gt;
&lt;li&gt;第一个路径为 Hugo 博客的 post 目录，即发布博客的源文件目录。在 Obsidan 中增删改 markdown 文件，相当于直接编辑了 post 目录中的 markdown 文件，修改完成之后可快速推送到 github 仓库中&lt;/li&gt;
&lt;li&gt;已为 Hugo 创建了一个 Github Action，检测到 Github 中仓库有新提交，就会触发生成网页并部署等一系列操作&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过以上操作，非常方便的在多台设备上创建笔记并发布博文；博客的源文件自动备份在 Github 的私有仓库中，通过 Github Action 创建的静态页面自动部署在 &lt;code&gt;teaize.github.io&lt;/code&gt; 公开仓库中&lt;/p&gt;
&lt;p&gt;之前在 Mac 上使用 Hexo 框架来生成博客，几乎只能在 Mac 上生成静态页面，再发布博客，并且需要 &lt;code&gt;hexo clean&lt;/code&gt;, &lt;code&gt;hexo g&lt;/code&gt;, &lt;code&gt;hexo d&lt;/code&gt; 来部署；当前这个 Hugo 方案就方便很多&lt;/p&gt;
&lt;p&gt;
	&lt;div class=&#34;post-img-view&#34;&gt;
		&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240908191940.png&#34;&gt;
			&lt;img src=&#34;https://coffeelize-1307708315.cos.ap-beijing.myqcloud.com/imgs/blog20240908191940.png&#34; alt=&#34;image.png&#34;  /&gt;
		&lt;/a&gt;
	&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;有个问题还是没有弄明白，明明在 Obsidian 中放的是一个软连接，Obsidian 竟然可以实现云同步：）&lt;/p&gt;
&lt;hr&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mklink /D &lt;span class=&#34;s2&#34;&gt;&amp;#34;F:\003-SynZhPObsidian\SynZhPObsidian\HugoNotes&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;D:\001-Github\Hugo-Main\content\page\notes&amp;#34;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>Archives</title>
        <link>https://teaize.github.io/archives/</link>
        <pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/archives/</guid>
        <description></description>
        </item>
        <item>
        <title>Links</title>
        <link>https://teaize.github.io/links/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/links/</guid>
        <description>&lt;p&gt;To use this feature, add &lt;code&gt;links&lt;/code&gt; section to frontmatter.&lt;/p&gt;
&lt;p&gt;This page&amp;rsquo;s frontmatter:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;links&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Coffeelize&amp;#39;s Blog&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;智朋的个人博客&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;website&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://coffeelize.top/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://sm.ms/image/W9pfLrXMi6uCFtT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;GitHub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;GitHub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;website&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://github.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;image&lt;/code&gt; field accepts both local and external images.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Notes</title>
        <link>https://teaize.github.io/notes/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/notes/</guid>
        <description>&lt;h3 id=&#34;2025-年-12-月&#34;&gt;2025 年 12 月
&lt;/h3&gt;&lt;p&gt;上大学那会，幸福就是午休结束前提前 10 分钟冲一杯挂耳咖啡，室友们都还在睡觉，自己站在样台上，晒着太阳，看着窗外的同学们各忙各的。
世界很安静，我也没什么必须要做，我只是此刻存在着&lt;/p&gt;
&lt;h3 id=&#34;2025-年-11-月&#34;&gt;2025 年 11 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;学习的第一性原理是理解，而非背诵&lt;/li&gt;
&lt;li&gt;理解的第一性原理是 抓本质、抓因果关系，而非堆砌细节。
&lt;ul&gt;
&lt;li&gt;理解不是把所有内容都记住，而是搞清楚“为什么这样”“它是怎么运作的”“因果链是什么”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;记忆的第一性原理是 联系与使用，而非死记硬背。
&lt;ul&gt;
&lt;li&gt;把知识和真实场景、案例、已有经验连接起来，并经常应用，它会自动变成长期记忆；反之只靠反复读，忘得快。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;知识的第一性原理是 可迁移性（能解决问题），而非积累数量
&lt;ul&gt;
&lt;li&gt;真正的知识能在不同领域重复使用、解决新问题；只是堆数据、堆结论没有意义。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2025-年-10-月&#34;&gt;2025 年 10 月
&lt;/h3&gt;&lt;p&gt;真正的救赎不是改变别人，而是坦诚面对自己的伤口&lt;/p&gt;
&lt;h3 id=&#34;2025-年-3-月&#34;&gt;2025 年 3 月
&lt;/h3&gt;&lt;p&gt;顺颂商祺：表示顺便祝您在商业上顺利吉祥。在书信中是一种较为正式和客气的表达方式。同样地，还有顺颂秋祺（冬祺、春祺、夏祺）&lt;/p&gt;
&lt;h3 id=&#34;2025-年-2-月&#34;&gt;2025 年 2 月
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;学会给自己留缓冲的余地：在你觉得能够完成需求的天数基础上适当多报个一两天。&lt;/li&gt;
&lt;li&gt;学会偷懒：持续保持高强度的工作是不可能的，也是不可取的。适当偷偷懒，让自己的身体，尤其是脑子休息一下，恢复精力才能持久工作。这个偷懒不是说让大家在工作上偷奸耍滑，不要误解了。&lt;/li&gt;
&lt;li&gt;不要过于主动：尽量不要过于主动，越主动，负担就越重，压力就越大。当然，如果你的抗压能力比较强，也比较有上进心的话，那就当我没说。&lt;/li&gt;
&lt;li&gt;不要逞强：难度过高的任务，一定要主动说完成不了，让上层再细分细分，千万不要想的过少就口出狂言，最后累死的是自己。&lt;/li&gt;
&lt;li&gt;有跳槽想法就要尽快行动起来：如有跳槽想法，建议尽早开始备战面试跳槽。在完成工作任务的前提下，尽可能地多挤出时间来准备面试。工作期间挤不出来时间就下班之后再开始，少刷一些抖音，少打一些游戏。一定要做好规划，每天时间充足就拉短周期，每天时间少就拉长周期。尽量“骑驴找马”，提前做面试准备，还要实际感受一下面试难度和市场行情。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;2025-年-1-月&#34;&gt;2025 年 1 月
&lt;/h3&gt;&lt;p&gt;人的精神寄托可以是音乐，可以是书籍，可以是工作，可以是山川湖海，唯独不可以是人。不要轻易去依赖一个人，当分别来临时，你失去的不是某个人，而是你精神的支柱。无论何时何地，都要学会独立行走，它会让你走的更加坦然一些，人与人之间的一切关系都如流沙，握的越紧，流失的越快。把期待放在别人身上，期待越高，失望越大。没有人有义务要满足你的期待，包括你自己，即使是你的影子，也会在黑暗中离开你&lt;/p&gt;
&lt;h3 id=&#34;2024-年-9-月&#34;&gt;2024 年 9 月
&lt;/h3&gt;&lt;p&gt;当我对所有的事情都厌倦的时候，我就会想起你，想到你在世界的某个地方生活着，存在着，我就愿意忍受一切。你的存在，对我很重要&lt;/p&gt;
&lt;h3 id=&#34;2024-年-6-月&#34;&gt;2024 年 6 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;一个研究生的存档点 —&amp;gt; 一个工程师的存档点&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2024-年-5-月&#34;&gt;2024 年 5 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;真正能断定一个理论是不是垃圾，有多大价值，要看他会不会被后人记住。真正好的理论往往会引发人们广泛而深刻的探讨，甚至是争论。后来的人们会站在该理论的基础之上做出更为充实的科学贡献&lt;/li&gt;
&lt;li&gt;某个环境的条件如何如何之好并不是你去到某个环境中的理由，你能从这个环境中获得什么样的成就，才是你前往某个环境的原因&lt;/li&gt;
&lt;li&gt;Entities must not be multiplied beyond necessity.如无必要，勿增实体&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2023-年-11-月&#34;&gt;2023 年 11 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;The hard of hearing always listen closest.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2023-年-10-月&#34;&gt;2023 年 10 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;我深怕自己本非美玉，故而不敢加以刻苦琢磨，却又半信自己是块美玉，故又不肯庸庸碌碌，与瓦砾为伍&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2023-年-9-月&#34;&gt;2023 年 9 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;人们为何要移民？是什么迫使他们背井离乡，放下熟稔的一切事物，奔向地平线另一侧的广袤未知之地？移民手续繁琐得如同珠穆朗玛峰，为何还要像乞丐一样翻越它？为何要闯入一片异域丛林，而那里的一切都令你感到新鲜、陌生而又寸步难行？答案是放之四海皆准的：人们移民，乃是希望拥有更美好的生活&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2023-年-6-月&#34;&gt;2023 年 6 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;富裕并非拥有许多财产，而是拥有很少需求&lt;/li&gt;
&lt;li&gt;相比于时间，专注力可能才是我们更稀缺的资源&lt;/li&gt;
&lt;li&gt;专注力这种技能不是与生俱来的，而是获得的技能&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-11-月&#34;&gt;2022 年 11 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;又做了一次同位素磷 32 的瘢痕疙瘩治疗，期望瘢痕能够慢慢好转过来&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-10-月&#34;&gt;2022 年 10 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;每当我在网站上看到“免费订阅”按钮，我就把网站主办方的邮箱提交上去。我还把这些邮箱保留下来，等到有空了，把它们逐个提交到各种订阅服务&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-9-月&#34;&gt;2022 年 9 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;要想消除烦恼，只有一个人在宇宙中生存&lt;/li&gt;
&lt;li&gt;你并不是“受怒气支配而大发雷霆”，完全是“为了大发雷霆而制造怒气”&lt;/li&gt;
&lt;li&gt;“长高干什么呢？你可有让人感觉轻松的本事啊！”的确，高大强壮的男性本身就会给人一种震慑感；而另一方面，矮小的我却能让对方放下警惕心理。看来个子矮小无论是对周围人来说还是对自己来说，都有好处呢！这就是价值的转换&lt;/li&gt;
&lt;li&gt;但是，这种贡献也可以通过看不见的形式实现。只要有“对别人有用”的主观感觉，即“贡献感”就可以，幸福就是“贡献感”&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-8-月&#34;&gt;2022 年 8 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;阿德勒的目的论是说：“无论之前的人发生过什么，都对今后的人生如何度过没有影响。”决定自己人生的是活在“此时此刻”的你自己&lt;/li&gt;
&lt;li&gt;决定我们自己的不是“经验本身”而是“赋予经验的意义”&lt;/li&gt;
&lt;li&gt;重要的不是被给予了什么，而是如何利用被给予的东西&lt;/li&gt;
&lt;li&gt;自由就是被别人讨厌&lt;/li&gt;
&lt;li&gt;Your life is not something that someone gives you, but something you choose yourself, and you are the one who decides how you live.&lt;/li&gt;
&lt;li&gt;You use anger as a tool to get the other to submit to you.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-7-月&#34;&gt;2022 年 7 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;没必要把你懂的东西都说出来，人们不喜欢他们身边有人比他们懂得更多，那会让他们恼火。你说的再正确，也改变不了这些人，除非他们自己想学，否则一点办法也没有。你要么闭上嘴巴，要么就使用他们的语言&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-6-月&#34;&gt;2022 年 6 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;虚室生白，吉祥止止：当我们达到一种内心的宁静和超然境界时，我们能够在虚无中获得珍贵之物，同时吉祥的状态也会持续不断。这句话所传达的是一种追求心灵自由和平静的境界，以及在内心寂静中获得真正的幸福和吉祥&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-5-月&#34;&gt;2022 年 5 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Your paper makes no goddamn sense, but it&amp;rsquo;s the most beautiful thing I have ever laid eyes on.&lt;/li&gt;
&lt;li&gt;在学术文档中人们经常要用到参考文献，这样做既可以有选择地提供事实，作客观公证科学严谨状，还可以拉帮结派党同伐异&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2022-年-4-月&#34;&gt;2022 年 4 月
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;我们好像只能使用经过精选的时间；我们记得的只是一生中最精彩的时刻；半小时对我们来说不算时间；我们只承认整段整段的时间，只承认不受客观环境和偶然事件干扰的大段时间。只有在这样的时间里，我们才打算大显身手。短一点的时间，我们马上会借口外界有干扰、客观条件不允许而难以用上。啊，不依我们意志为转移的客观条件，具有充分权力和理由的客观条件真是威力无比！把责任往它们身上一推，那是多么轻而易举啊&lt;/li&gt;
&lt;li&gt;我们的记忆是靠什么？靠事件。我们的生活是拿时间来做标志的。它们仿佛是路标，路标之间却是一片空白…比方说，自从我写柳比歇夫的小说以来，最近这几个月的时光都跑到哪儿去了？伏案写作的时间本身并不多，这些日子都干什么了？我可是干事儿来着，一直忙得很，究竟忙些什么，却记不起来。是瞎忙还是忙的正事——这 90 天该怎么总结呢？光这几个月倒也罢了…以往，年轻的时候，每逢过年，我总是猛然想起，一年又过去了，我决心要做的，并且也向别人保证了的，有没有做成——一部小说没有写完，有些信没有回复，同谁没有见成面，又是什么没有做…拖啊拖，结果是拖无可拖了&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Search</title>
        <link>https://teaize.github.io/search/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/search/</guid>
        <description></description>
        </item>
        <item>
        <title>关于</title>
        <link>https://teaize.github.io/%E5%85%B3%E4%BA%8E/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://teaize.github.io/%E5%85%B3%E4%BA%8E/</guid>
        <description>&lt;p&gt;这个网站是一个工程师的存档点，网站使用 Hugo 搭建，静态网页和原始文件均存放在 Github 仓库中&lt;/p&gt;
&lt;p&gt;网站的作者没有主动将网站提交给 Google、Bing 等搜索引擎进行抓取，在互联网的这块孤岛上，或许永远也没有人能够来到这片土地，更不会有人认识网站的作者&lt;/p&gt;
&lt;p&gt;因此，希望能在这篇净土上畅所欲言的表达&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;This website is an engineer&amp;rsquo;s archive, built using Hugo, with both static pages and source files stored in a GitHub repository.&lt;/p&gt;
&lt;p&gt;The author has not actively submitted the website to be indexed by search engines like Google or Bing. On this isolated corner of the internet, perhaps no one will ever come across this land, let alone get to know the author.&lt;/p&gt;
&lt;p&gt;Therefore, it is hoped that in this pure land, one can freely and openly express themselves.&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
